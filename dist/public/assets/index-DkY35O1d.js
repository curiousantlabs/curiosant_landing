function uO(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function kT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fp={exports:{}},bc={},Up={exports:{}},$e={};var wx;function dO(){if(wx)return $e;wx=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function g(F){return F===null||typeof F!="object"?null:(F=m&&F[m]||F["@@iterator"],typeof F=="function"?F:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,x={};function C(F,X,Re){this.props=F,this.context=X,this.refs=x,this.updater=Re||k}C.prototype.isReactComponent={},C.prototype.setState=function(F,X){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,X,"setState")},C.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function E(){}E.prototype=C.prototype;function A(F,X,Re){this.props=F,this.context=X,this.refs=x,this.updater=Re||k}var N=A.prototype=new E;N.constructor=A,T(N,C.prototype),N.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,R={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function j(F,X,Re){var Me,Be={},Ue=null,Ae=null;if(X!=null)for(Me in X.ref!==void 0&&(Ae=X.ref),X.key!==void 0&&(Ue=""+X.key),X)S.call(X,Me)&&!D.hasOwnProperty(Me)&&(Be[Me]=X[Me]);var Ve=arguments.length-2;if(Ve===1)Be.children=Re;else if(1<Ve){for(var Qe=Array(Ve),At=0;At<Ve;At++)Qe[At]=arguments[At+2];Be.children=Qe}if(F&&F.defaultProps)for(Me in Ve=F.defaultProps,Ve)Be[Me]===void 0&&(Be[Me]=Ve[Me]);return{$$typeof:t,type:F,key:Ue,ref:Ae,props:Be,_owner:R.current}}function V(F,X){return{$$typeof:t,type:F.type,key:X,ref:F.ref,props:F.props,_owner:F._owner}}function B(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function W(F){var X={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Re){return X[Re]})}var H=/\/+/g;function ie(F,X){return typeof F=="object"&&F!==null&&F.key!=null?W(""+F.key):X.toString(36)}function ee(F,X,Re,Me,Be){var Ue=typeof F;(Ue==="undefined"||Ue==="boolean")&&(F=null);var Ae=!1;if(F===null)Ae=!0;else switch(Ue){case"string":case"number":Ae=!0;break;case"object":switch(F.$$typeof){case t:case e:Ae=!0}}if(Ae)return Ae=F,Be=Be(Ae),F=Me===""?"."+ie(Ae,0):Me,w(Be)?(Re="",F!=null&&(Re=F.replace(H,"$&/")+"/"),ee(Be,X,Re,"",function(At){return At})):Be!=null&&(B(Be)&&(Be=V(Be,Re+(!Be.key||Ae&&Ae.key===Be.key?"":(""+Be.key).replace(H,"$&/")+"/")+F)),X.push(Be)),1;if(Ae=0,Me=Me===""?".":Me+":",w(F))for(var Ve=0;Ve<F.length;Ve++){Ue=F[Ve];var Qe=Me+ie(Ue,Ve);Ae+=ee(Ue,X,Re,Qe,Be)}else if(Qe=g(F),typeof Qe=="function")for(F=Qe.call(F),Ve=0;!(Ue=F.next()).done;)Ue=Ue.value,Qe=Me+ie(Ue,Ve++),Ae+=ee(Ue,X,Re,Qe,Be);else if(Ue==="object")throw X=String(F),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Ae}function Ce(F,X,Re){if(F==null)return F;var Me=[],Be=0;return ee(F,Me,"","",function(Ue){return X.call(Re,Ue,Be++)}),Me}function ve(F){if(F._status===-1){var X=F._result;X=X(),X.then(function(Re){(F._status===0||F._status===-1)&&(F._status=1,F._result=Re)},function(Re){(F._status===0||F._status===-1)&&(F._status=2,F._result=Re)}),F._status===-1&&(F._status=0,F._result=X)}if(F._status===1)return F._result.default;throw F._result}var he={current:null},Z={transition:null},le={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:Z,ReactCurrentOwner:R};function oe(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:Ce,forEach:function(F,X,Re){Ce(F,function(){X.apply(this,arguments)},Re)},count:function(F){var X=0;return Ce(F,function(){X++}),X},toArray:function(F){return Ce(F,function(X){return X})||[]},only:function(F){if(!B(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},$e.Component=C,$e.Fragment=n,$e.Profiler=r,$e.PureComponent=A,$e.StrictMode=i,$e.Suspense=u,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,$e.act=oe,$e.cloneElement=function(F,X,Re){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Me=T({},F.props),Be=F.key,Ue=F.ref,Ae=F._owner;if(X!=null){if(X.ref!==void 0&&(Ue=X.ref,Ae=R.current),X.key!==void 0&&(Be=""+X.key),F.type&&F.type.defaultProps)var Ve=F.type.defaultProps;for(Qe in X)S.call(X,Qe)&&!D.hasOwnProperty(Qe)&&(Me[Qe]=X[Qe]===void 0&&Ve!==void 0?Ve[Qe]:X[Qe])}var Qe=arguments.length-2;if(Qe===1)Me.children=Re;else if(1<Qe){Ve=Array(Qe);for(var At=0;At<Qe;At++)Ve[At]=arguments[At+2];Me.children=Ve}return{$$typeof:t,type:F.type,key:Be,ref:Ue,props:Me,_owner:Ae}},$e.createContext=function(F){return F={$$typeof:a,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:s,_context:F},F.Consumer=F},$e.createElement=j,$e.createFactory=function(F){var X=j.bind(null,F);return X.type=F,X},$e.createRef=function(){return{current:null}},$e.forwardRef=function(F){return{$$typeof:l,render:F}},$e.isValidElement=B,$e.lazy=function(F){return{$$typeof:h,_payload:{_status:-1,_result:F},_init:ve}},$e.memo=function(F,X){return{$$typeof:d,type:F,compare:X===void 0?null:X}},$e.startTransition=function(F){var X=Z.transition;Z.transition={};try{F()}finally{Z.transition=X}},$e.unstable_act=oe,$e.useCallback=function(F,X){return he.current.useCallback(F,X)},$e.useContext=function(F){return he.current.useContext(F)},$e.useDebugValue=function(){},$e.useDeferredValue=function(F){return he.current.useDeferredValue(F)},$e.useEffect=function(F,X){return he.current.useEffect(F,X)},$e.useId=function(){return he.current.useId()},$e.useImperativeHandle=function(F,X,Re){return he.current.useImperativeHandle(F,X,Re)},$e.useInsertionEffect=function(F,X){return he.current.useInsertionEffect(F,X)},$e.useLayoutEffect=function(F,X){return he.current.useLayoutEffect(F,X)},$e.useMemo=function(F,X){return he.current.useMemo(F,X)},$e.useReducer=function(F,X,Re){return he.current.useReducer(F,X,Re)},$e.useRef=function(F){return he.current.useRef(F)},$e.useState=function(F){return he.current.useState(F)},$e.useSyncExternalStore=function(F,X,Re){return he.current.useSyncExternalStore(F,X,Re)},$e.useTransition=function(){return he.current.useTransition()},$e.version="18.3.1",$e}var Tx;function xf(){return Tx||(Tx=1,Up.exports=dO()),Up.exports}var Cx;function fO(){if(Cx)return bc;Cx=1;var t=xf(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(l,u,d){var h,m={},g=null,k=null;d!==void 0&&(g=""+d),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(k=u.ref);for(h in u)i.call(u,h)&&!s.hasOwnProperty(h)&&(m[h]=u[h]);if(l&&l.defaultProps)for(h in u=l.defaultProps,u)m[h]===void 0&&(m[h]=u[h]);return{$$typeof:e,type:l,key:g,ref:k,props:m,_owner:r.current}}return bc.Fragment=n,bc.jsx=a,bc.jsxs=a,bc}var Ex;function hO(){return Ex||(Ex=1,Fp.exports=fO()),Fp.exports}var y=hO(),$u={},Vp={exports:{}},Nn={},Bp={exports:{}},zp={};var Px;function pO(){return Px||(Px=1,(function(t){function e(Z,le){var oe=Z.length;Z.push(le);e:for(;0<oe;){var F=oe-1>>>1,X=Z[F];if(0<r(X,le))Z[F]=le,Z[oe]=X,oe=F;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var le=Z[0],oe=Z.pop();if(oe!==le){Z[0]=oe;e:for(var F=0,X=Z.length,Re=X>>>1;F<Re;){var Me=2*(F+1)-1,Be=Z[Me],Ue=Me+1,Ae=Z[Ue];if(0>r(Be,oe))Ue<X&&0>r(Ae,Be)?(Z[F]=Ae,Z[Ue]=oe,F=Ue):(Z[F]=Be,Z[Me]=oe,F=Me);else if(Ue<X&&0>r(Ae,oe))Z[F]=Ae,Z[Ue]=oe,F=Ue;else break e}}return le}function r(Z,le){var oe=Z.sortIndex-le.sortIndex;return oe!==0?oe:Z.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],h=1,m=null,g=3,k=!1,T=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(Z){for(var le=n(d);le!==null;){if(le.callback===null)i(d);else if(le.startTime<=Z)i(d),le.sortIndex=le.expirationTime,e(u,le);else break;le=n(d)}}function w(Z){if(x=!1,N(Z),!T)if(n(u)!==null)T=!0,ve(S);else{var le=n(d);le!==null&&he(w,le.startTime-Z)}}function S(Z,le){T=!1,x&&(x=!1,E(j),j=-1),k=!0;var oe=g;try{for(N(le),m=n(u);m!==null&&(!(m.expirationTime>le)||Z&&!W());){var F=m.callback;if(typeof F=="function"){m.callback=null,g=m.priorityLevel;var X=F(m.expirationTime<=le);le=t.unstable_now(),typeof X=="function"?m.callback=X:m===n(u)&&i(u),N(le)}else i(u);m=n(u)}if(m!==null)var Re=!0;else{var Me=n(d);Me!==null&&he(w,Me.startTime-le),Re=!1}return Re}finally{m=null,g=oe,k=!1}}var R=!1,D=null,j=-1,V=5,B=-1;function W(){return!(t.unstable_now()-B<V)}function H(){if(D!==null){var Z=t.unstable_now();B=Z;var le=!0;try{le=D(!0,Z)}finally{le?ie():(R=!1,D=null)}}else R=!1}var ie;if(typeof A=="function")ie=function(){A(H)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Ce=ee.port2;ee.port1.onmessage=H,ie=function(){Ce.postMessage(null)}}else ie=function(){C(H,0)};function ve(Z){D=Z,R||(R=!0,ie())}function he(Z,le){j=C(function(){Z(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){T||k||(T=!0,ve(S))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(Z){switch(g){case 1:case 2:case 3:var le=3;break;default:le=g}var oe=g;g=le;try{return Z()}finally{g=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,le){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var oe=g;g=Z;try{return le()}finally{g=oe}},t.unstable_scheduleCallback=function(Z,le,oe){var F=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?F+oe:F):oe=F,Z){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=oe+X,Z={id:h++,callback:le,priorityLevel:Z,startTime:oe,expirationTime:X,sortIndex:-1},oe>F?(Z.sortIndex=oe,e(d,Z),n(u)===null&&Z===n(d)&&(x?(E(j),j=-1):x=!0,he(w,oe-F))):(Z.sortIndex=X,e(u,Z),T||k||(T=!0,ve(S))),Z},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(Z){var le=g;return function(){var oe=g;g=le;try{return Z.apply(this,arguments)}finally{g=oe}}}})(zp)),zp}var _x;function mO(){return _x||(_x=1,Bp.exports=pO()),Bp.exports}var Rx;function gO(){if(Rx)return Nn;Rx=1;var t=xf(),e=mO();function n(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(o,c){a(o,c),a(o+"Capture",c)}function a(o,c){for(r[o]=c,o=0;o<c.length;o++)i.add(c[o])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function g(o){return u.call(m,o)?!0:u.call(h,o)?!1:d.test(o)?m[o]=!0:(h[o]=!0,!1)}function k(o,c,f,p){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return p?!1:f!==null?!f.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function T(o,c,f,p){if(c===null||typeof c>"u"||k(o,c,f,p))return!0;if(p)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function x(o,c,f,p,v,b,_){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=f,this.propertyName=o,this.type=c,this.sanitizeURL=b,this.removeEmptyString=_}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){C[o]=new x(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];C[c]=new x(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){C[o]=new x(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){C[o]=new x(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){C[o]=new x(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){C[o]=new x(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){C[o]=new x(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){C[o]=new x(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){C[o]=new x(o,5,!1,o.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function A(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(E,A);C[c]=new x(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(E,A);C[c]=new x(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(E,A);C[c]=new x(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){C[o]=new x(o,1,!1,o.toLowerCase(),null,!1,!1)}),C.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){C[o]=new x(o,1,!1,o.toLowerCase(),null,!0,!0)});function N(o,c,f,p){var v=C.hasOwnProperty(c)?C[c]:null;(v!==null?v.type!==0:p||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(T(c,f,v,p)&&(f=null),p||v===null?g(c)&&(f===null?o.removeAttribute(c):o.setAttribute(c,""+f)):v.mustUseProperty?o[v.propertyName]=f===null?v.type===3?!1:"":f:(c=v.attributeName,p=v.attributeNamespace,f===null?o.removeAttribute(c):(v=v.type,f=v===3||v===4&&f===!0?"":""+f,p?o.setAttributeNS(p,c,f):o.setAttribute(c,f))))}var w=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),R=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),W=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),Z=Symbol.iterator;function le(o){return o===null||typeof o!="object"?null:(o=Z&&o[Z]||o["@@iterator"],typeof o=="function"?o:null)}var oe=Object.assign,F;function X(o){if(F===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);F=c&&c[1]||""}return`
`+F+o}var Re=!1;function Me(o,c){if(!o||Re)return"";Re=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(G){var p=G}Reflect.construct(o,[],c)}else{try{c.call()}catch(G){p=G}o.call(c.prototype)}else{try{throw Error()}catch(G){p=G}o()}}catch(G){if(G&&p&&typeof G.stack=="string"){for(var v=G.stack.split(`
`),b=p.stack.split(`
`),_=v.length-1,O=b.length-1;1<=_&&0<=O&&v[_]!==b[O];)O--;for(;1<=_&&0<=O;_--,O--)if(v[_]!==b[O]){if(_!==1||O!==1)do if(_--,O--,0>O||v[_]!==b[O]){var L=`
`+v[_].replace(" at new "," at ");return o.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",o.displayName)),L}while(1<=_&&0<=O);break}}}finally{Re=!1,Error.prepareStackTrace=f}return(o=o?o.displayName||o.name:"")?X(o):""}function Be(o){switch(o.tag){case 5:return X(o.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return o=Me(o.type,!1),o;case 11:return o=Me(o.type.render,!1),o;case 1:return o=Me(o.type,!0),o;default:return""}}function Ue(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case D:return"Fragment";case R:return"Portal";case V:return"Profiler";case j:return"StrictMode";case ie:return"Suspense";case ee:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case W:return(o.displayName||"Context")+".Consumer";case B:return(o._context.displayName||"Context")+".Provider";case H:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ce:return c=o.displayName||null,c!==null?c:Ue(o.type)||"Memo";case ve:c=o._payload,o=o._init;try{return Ue(o(c))}catch{}}return null}function Ae(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(c);case 8:return c===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Ve(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Qe(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function At(o){var c=Qe(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),p=""+o[c];if(!o.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,b=f.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return v.call(this)},set:function(_){p=""+_,b.call(this,_)}}),Object.defineProperty(o,c,{enumerable:f.enumerable}),{getValue:function(){return p},setValue:function(_){p=""+_},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Oi(o){o._valueTracker||(o._valueTracker=At(o))}function ws(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var f=c.getValue(),p="";return o&&(p=Qe(o)?o.checked?"true":"false":o.value),o=p,o!==f?(c.setValue(o),!0):!1}function ri(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function oo(o,c){var f=c.checked;return oe({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??o._wrapperState.initialChecked})}function jl(o,c){var f=c.defaultValue==null?"":c.defaultValue,p=c.checked!=null?c.checked:c.defaultChecked;f=Ve(c.value!=null?c.value:f),o._wrapperState={initialChecked:p,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Da(o,c){c=c.checked,c!=null&&N(o,"checked",c,!1)}function ao(o,c){Da(o,c);var f=Ve(c.value),p=c.type;if(f!=null)p==="number"?(f===0&&o.value===""||o.value!=f)&&(o.value=""+f):o.value!==""+f&&(o.value=""+f);else if(p==="submit"||p==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Ma(o,c.type,f):c.hasOwnProperty("defaultValue")&&Ma(o,c.type,Ve(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Fl(o,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var p=c.type;if(!(p!=="submit"&&p!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,f||c===o.value||(o.value=c),o.defaultValue=c}f=o.name,f!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,f!==""&&(o.name=f)}function Ma(o,c,f){(c!=="number"||ri(o.ownerDocument)!==o)&&(f==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+f&&(o.defaultValue=""+f))}var co=Array.isArray;function nr(o,c,f,p){if(o=o.options,c){c={};for(var v=0;v<f.length;v++)c["$"+f[v]]=!0;for(f=0;f<o.length;f++)v=c.hasOwnProperty("$"+o[f].value),o[f].selected!==v&&(o[f].selected=v),v&&p&&(o[f].defaultSelected=!0)}else{for(f=""+Ve(f),c=null,v=0;v<o.length;v++){if(o[v].value===f){o[v].selected=!0,p&&(o[v].defaultSelected=!0);return}c!==null||o[v].disabled||(c=o[v])}c!==null&&(c.selected=!0)}}function M(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function K(o,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(n(92));if(co(f)){if(1<f.length)throw Error(n(93));f=f[0]}c=f}c==null&&(c=""),f=c}o._wrapperState={initialValue:Ve(f)}}function J(o,c){var f=Ve(c.value),p=Ve(c.defaultValue);f!=null&&(f=""+f,f!==o.value&&(o.value=f),c.defaultValue==null&&o.defaultValue!==f&&(o.defaultValue=f)),p!=null&&(o.defaultValue=""+p)}function ye(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function me(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?me(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var ke,Je=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,p,v){MSApp.execUnsafeLocalFunction(function(){return o(c,f,p,v)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(ke=ke||document.createElement("div"),ke.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=ke.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function ct(o,c){if(c){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=c;return}}o.textContent=c}var St={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jf=["Webkit","ms","Moz","O"];Object.keys(St).forEach(function(o){Jf.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),St[c]=St[o]})});function lo(o,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||St.hasOwnProperty(o)&&St[o]?(""+c).trim():c+"px"}function uo(o,c){o=o.style;for(var f in c)if(c.hasOwnProperty(f)){var p=f.indexOf("--")===0,v=lo(f,c[f],p);f==="float"&&(f="cssFloat"),p?o.setProperty(f,v):o[f]=v}}var Yf=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fo(o,c){if(c){if(Yf[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function La(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ho=null;function Xf(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var eh=null,po=null,mo=null;function Vy(o){if(o=rc(o)){if(typeof eh!="function")throw Error(n(280));var c=o.stateNode;c&&(c=au(c),eh(o.stateNode,o.type,c))}}function By(o){po?mo?mo.push(o):mo=[o]:po=o}function zy(){if(po){var o=po,c=mo;if(mo=po=null,Vy(o),c)for(o=0;o<c.length;o++)Vy(c[o])}}function Wy(o,c){return o(c)}function qy(){}var th=!1;function Hy(o,c,f){if(th)return o(c,f);th=!0;try{return Wy(o,c,f)}finally{th=!1,(po!==null||mo!==null)&&(qy(),zy())}}function ja(o,c){var f=o.stateNode;if(f===null)return null;var p=au(f);if(p===null)return null;f=p[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,c,typeof f));return f}var nh=!1;if(l)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){nh=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{nh=!1}function gA(o,c,f,p,v,b,_,O,L){var G=Array.prototype.slice.call(arguments,3);try{c.apply(f,G)}catch(se){this.onError(se)}}var Ua=!1,Ul=null,Vl=!1,ih=null,vA={onError:function(o){Ua=!0,Ul=o}};function yA(o,c,f,p,v,b,_,O,L){Ua=!1,Ul=null,gA.apply(vA,arguments)}function bA(o,c,f,p,v,b,_,O,L){if(yA.apply(this,arguments),Ua){if(Ua){var G=Ul;Ua=!1,Ul=null}else throw Error(n(198));Vl||(Vl=!0,ih=G)}}function Ts(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function $y(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function Ky(o){if(Ts(o)!==o)throw Error(n(188))}function xA(o){var c=o.alternate;if(!c){if(c=Ts(o),c===null)throw Error(n(188));return c!==o?null:o}for(var f=o,p=c;;){var v=f.return;if(v===null)break;var b=v.alternate;if(b===null){if(p=v.return,p!==null){f=p;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===f)return Ky(v),o;if(b===p)return Ky(v),c;b=b.sibling}throw Error(n(188))}if(f.return!==p.return)f=v,p=b;else{for(var _=!1,O=v.child;O;){if(O===f){_=!0,f=v,p=b;break}if(O===p){_=!0,p=v,f=b;break}O=O.sibling}if(!_){for(O=b.child;O;){if(O===f){_=!0,f=b,p=v;break}if(O===p){_=!0,p=b,f=v;break}O=O.sibling}if(!_)throw Error(n(189))}}if(f.alternate!==p)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:c}function Gy(o){return o=xA(o),o!==null?Zy(o):null}function Zy(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Zy(o);if(c!==null)return c;o=o.sibling}return null}var Qy=e.unstable_scheduleCallback,Jy=e.unstable_cancelCallback,kA=e.unstable_shouldYield,SA=e.unstable_requestPaint,Nt=e.unstable_now,wA=e.unstable_getCurrentPriorityLevel,rh=e.unstable_ImmediatePriority,Yy=e.unstable_UserBlockingPriority,Bl=e.unstable_NormalPriority,TA=e.unstable_LowPriority,Xy=e.unstable_IdlePriority,zl=null,Ii=null;function CA(o){if(Ii&&typeof Ii.onCommitFiberRoot=="function")try{Ii.onCommitFiberRoot(zl,o,void 0,(o.current.flags&128)===128)}catch{}}var si=Math.clz32?Math.clz32:_A,EA=Math.log,PA=Math.LN2;function _A(o){return o>>>=0,o===0?32:31-(EA(o)/PA|0)|0}var Wl=64,ql=4194304;function Va(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Hl(o,c){var f=o.pendingLanes;if(f===0)return 0;var p=0,v=o.suspendedLanes,b=o.pingedLanes,_=f&268435455;if(_!==0){var O=_&~v;O!==0?p=Va(O):(b&=_,b!==0&&(p=Va(b)))}else _=f&~v,_!==0?p=Va(_):b!==0&&(p=Va(b));if(p===0)return 0;if(c!==0&&c!==p&&(c&v)===0&&(v=p&-p,b=c&-c,v>=b||v===16&&(b&4194240)!==0))return c;if((p&4)!==0&&(p|=f&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=p;0<c;)f=31-si(c),v=1<<f,p|=o[f],c&=~v;return p}function RA(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AA(o,c){for(var f=o.suspendedLanes,p=o.pingedLanes,v=o.expirationTimes,b=o.pendingLanes;0<b;){var _=31-si(b),O=1<<_,L=v[_];L===-1?((O&f)===0||(O&p)!==0)&&(v[_]=RA(O,c)):L<=c&&(o.expiredLanes|=O),b&=~O}}function sh(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function e0(){var o=Wl;return Wl<<=1,(Wl&4194240)===0&&(Wl=64),o}function oh(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function Ba(o,c,f){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-si(c),o[c]=f}function NA(o,c){var f=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var p=o.eventTimes;for(o=o.expirationTimes;0<f;){var v=31-si(f),b=1<<v;c[v]=0,p[v]=-1,o[v]=-1,f&=~b}}function ah(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var p=31-si(f),v=1<<p;v&c|o[p]&c&&(o[p]|=c),f&=~v}}var it=0;function t0(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var n0,ch,i0,r0,s0,lh=!1,$l=[],Rr=null,Ar=null,Nr=null,za=new Map,Wa=new Map,Or=[],OA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function o0(o,c){switch(o){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":za.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wa.delete(c.pointerId)}}function qa(o,c,f,p,v,b){return o===null||o.nativeEvent!==b?(o={blockedOn:c,domEventName:f,eventSystemFlags:p,nativeEvent:b,targetContainers:[v]},c!==null&&(c=rc(c),c!==null&&ch(c)),o):(o.eventSystemFlags|=p,c=o.targetContainers,v!==null&&c.indexOf(v)===-1&&c.push(v),o)}function IA(o,c,f,p,v){switch(c){case"focusin":return Rr=qa(Rr,o,c,f,p,v),!0;case"dragenter":return Ar=qa(Ar,o,c,f,p,v),!0;case"mouseover":return Nr=qa(Nr,o,c,f,p,v),!0;case"pointerover":var b=v.pointerId;return za.set(b,qa(za.get(b)||null,o,c,f,p,v)),!0;case"gotpointercapture":return b=v.pointerId,Wa.set(b,qa(Wa.get(b)||null,o,c,f,p,v)),!0}return!1}function a0(o){var c=Cs(o.target);if(c!==null){var f=Ts(c);if(f!==null){if(c=f.tag,c===13){if(c=$y(f),c!==null){o.blockedOn=c,s0(o.priority,function(){i0(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Kl(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var f=dh(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(f===null){f=o.nativeEvent;var p=new f.constructor(f.type,f);ho=p,f.target.dispatchEvent(p),ho=null}else return c=rc(f),c!==null&&ch(c),o.blockedOn=f,!1;c.shift()}return!0}function c0(o,c,f){Kl(o)&&f.delete(c)}function DA(){lh=!1,Rr!==null&&Kl(Rr)&&(Rr=null),Ar!==null&&Kl(Ar)&&(Ar=null),Nr!==null&&Kl(Nr)&&(Nr=null),za.forEach(c0),Wa.forEach(c0)}function Ha(o,c){o.blockedOn===c&&(o.blockedOn=null,lh||(lh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,DA)))}function $a(o){function c(v){return Ha(v,o)}if(0<$l.length){Ha($l[0],o);for(var f=1;f<$l.length;f++){var p=$l[f];p.blockedOn===o&&(p.blockedOn=null)}}for(Rr!==null&&Ha(Rr,o),Ar!==null&&Ha(Ar,o),Nr!==null&&Ha(Nr,o),za.forEach(c),Wa.forEach(c),f=0;f<Or.length;f++)p=Or[f],p.blockedOn===o&&(p.blockedOn=null);for(;0<Or.length&&(f=Or[0],f.blockedOn===null);)a0(f),f.blockedOn===null&&Or.shift()}var go=w.ReactCurrentBatchConfig,Gl=!0;function MA(o,c,f,p){var v=it,b=go.transition;go.transition=null;try{it=1,uh(o,c,f,p)}finally{it=v,go.transition=b}}function LA(o,c,f,p){var v=it,b=go.transition;go.transition=null;try{it=4,uh(o,c,f,p)}finally{it=v,go.transition=b}}function uh(o,c,f,p){if(Gl){var v=dh(o,c,f,p);if(v===null)_h(o,c,p,Zl,f),o0(o,p);else if(IA(v,o,c,f,p))p.stopPropagation();else if(o0(o,p),c&4&&-1<OA.indexOf(o)){for(;v!==null;){var b=rc(v);if(b!==null&&n0(b),b=dh(o,c,f,p),b===null&&_h(o,c,p,Zl,f),b===v)break;v=b}v!==null&&p.stopPropagation()}else _h(o,c,p,null,f)}}var Zl=null;function dh(o,c,f,p){if(Zl=null,o=Xf(p),o=Cs(o),o!==null)if(c=Ts(o),c===null)o=null;else if(f=c.tag,f===13){if(o=$y(c),o!==null)return o;o=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Zl=o,null}function l0(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wA()){case rh:return 1;case Yy:return 4;case Bl:case TA:return 16;case Xy:return 536870912;default:return 16}default:return 16}}var Ir=null,fh=null,Ql=null;function u0(){if(Ql)return Ql;var o,c=fh,f=c.length,p,v="value"in Ir?Ir.value:Ir.textContent,b=v.length;for(o=0;o<f&&c[o]===v[o];o++);var _=f-o;for(p=1;p<=_&&c[f-p]===v[b-p];p++);return Ql=v.slice(o,1<p?1-p:void 0)}function Jl(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Yl(){return!0}function d0(){return!1}function Ln(o){function c(f,p,v,b,_){this._reactName=f,this._targetInst=v,this.type=p,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(f=o[O],this[O]=f?f(b):b[O]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Yl:d0,this.isPropagationStopped=d0,this}return oe(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Yl)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Yl)},persist:function(){},isPersistent:Yl}),c}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hh=Ln(vo),Ka=oe({},vo,{view:0,detail:0}),jA=Ln(Ka),ph,mh,Ga,Xl=oe({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vh,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ga&&(Ga&&o.type==="mousemove"?(ph=o.screenX-Ga.screenX,mh=o.screenY-Ga.screenY):mh=ph=0,Ga=o),ph)},movementY:function(o){return"movementY"in o?o.movementY:mh}}),f0=Ln(Xl),FA=oe({},Xl,{dataTransfer:0}),UA=Ln(FA),VA=oe({},Ka,{relatedTarget:0}),gh=Ln(VA),BA=oe({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),zA=Ln(BA),WA=oe({},vo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),qA=Ln(WA),HA=oe({},vo,{data:0}),h0=Ln(HA),$A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZA(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=GA[o])?!!c[o]:!1}function vh(){return ZA}var QA=oe({},Ka,{key:function(o){if(o.key){var c=$A[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Jl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?KA[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vh,charCode:function(o){return o.type==="keypress"?Jl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Jl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),JA=Ln(QA),YA=oe({},Xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p0=Ln(YA),XA=oe({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vh}),eN=Ln(XA),tN=oe({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),nN=Ln(tN),iN=oe({},Xl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),rN=Ln(iN),sN=[9,13,27,32],yh=l&&"CompositionEvent"in window,Za=null;l&&"documentMode"in document&&(Za=document.documentMode);var oN=l&&"TextEvent"in window&&!Za,m0=l&&(!yh||Za&&8<Za&&11>=Za),g0=" ",v0=!1;function y0(o,c){switch(o){case"keyup":return sN.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var yo=!1;function aN(o,c){switch(o){case"compositionend":return b0(c);case"keypress":return c.which!==32?null:(v0=!0,g0);case"textInput":return o=c.data,o===g0&&v0?null:o;default:return null}}function cN(o,c){if(yo)return o==="compositionend"||!yh&&y0(o,c)?(o=u0(),Ql=fh=Ir=null,yo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return m0&&c.locale!=="ko"?null:c.data;default:return null}}var lN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x0(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!lN[o.type]:c==="textarea"}function k0(o,c,f,p){By(p),c=ru(c,"onChange"),0<c.length&&(f=new hh("onChange","change",null,f,p),o.push({event:f,listeners:c}))}var Qa=null,Ja=null;function uN(o){U0(o,0)}function eu(o){var c=wo(o);if(ws(c))return o}function dN(o,c){if(o==="change")return c}var S0=!1;if(l){var bh;if(l){var xh="oninput"in document;if(!xh){var w0=document.createElement("div");w0.setAttribute("oninput","return;"),xh=typeof w0.oninput=="function"}bh=xh}else bh=!1;S0=bh&&(!document.documentMode||9<document.documentMode)}function T0(){Qa&&(Qa.detachEvent("onpropertychange",C0),Ja=Qa=null)}function C0(o){if(o.propertyName==="value"&&eu(Ja)){var c=[];k0(c,Ja,o,Xf(o)),Hy(uN,c)}}function fN(o,c,f){o==="focusin"?(T0(),Qa=c,Ja=f,Qa.attachEvent("onpropertychange",C0)):o==="focusout"&&T0()}function hN(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return eu(Ja)}function pN(o,c){if(o==="click")return eu(c)}function mN(o,c){if(o==="input"||o==="change")return eu(c)}function gN(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var oi=typeof Object.is=="function"?Object.is:gN;function Ya(o,c){if(oi(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),p=Object.keys(c);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var v=f[p];if(!u.call(c,v)||!oi(o[v],c[v]))return!1}return!0}function E0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function P0(o,c){var f=E0(o);o=0;for(var p;f;){if(f.nodeType===3){if(p=o+f.textContent.length,o<=c&&p>=c)return{node:f,offset:c-o};o=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=E0(f)}}function _0(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?_0(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function R0(){for(var o=window,c=ri();c instanceof o.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)o=c.contentWindow;else break;c=ri(o.document)}return c}function kh(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function vN(o){var c=R0(),f=o.focusedElem,p=o.selectionRange;if(c!==f&&f&&f.ownerDocument&&_0(f.ownerDocument.documentElement,f)){if(p!==null&&kh(f)){if(c=p.start,o=p.end,o===void 0&&(o=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(o,f.value.length);else if(o=(c=f.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var v=f.textContent.length,b=Math.min(p.start,v);p=p.end===void 0?b:Math.min(p.end,v),!o.extend&&b>p&&(v=p,p=b,b=v),v=P0(f,b);var _=P0(f,p);v&&_&&(o.rangeCount!==1||o.anchorNode!==v.node||o.anchorOffset!==v.offset||o.focusNode!==_.node||o.focusOffset!==_.offset)&&(c=c.createRange(),c.setStart(v.node,v.offset),o.removeAllRanges(),b>p?(o.addRange(c),o.extend(_.node,_.offset)):(c.setEnd(_.node,_.offset),o.addRange(c)))}}for(c=[],o=f;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)o=c[f],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var yN=l&&"documentMode"in document&&11>=document.documentMode,bo=null,Sh=null,Xa=null,wh=!1;function A0(o,c,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;wh||bo==null||bo!==ri(p)||(p=bo,"selectionStart"in p&&kh(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Xa&&Ya(Xa,p)||(Xa=p,p=ru(Sh,"onSelect"),0<p.length&&(c=new hh("onSelect","select",null,c,f),o.push({event:c,listeners:p}),c.target=bo)))}function tu(o,c){var f={};return f[o.toLowerCase()]=c.toLowerCase(),f["Webkit"+o]="webkit"+c,f["Moz"+o]="moz"+c,f}var xo={animationend:tu("Animation","AnimationEnd"),animationiteration:tu("Animation","AnimationIteration"),animationstart:tu("Animation","AnimationStart"),transitionend:tu("Transition","TransitionEnd")},Th={},N0={};l&&(N0=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function nu(o){if(Th[o])return Th[o];if(!xo[o])return o;var c=xo[o],f;for(f in c)if(c.hasOwnProperty(f)&&f in N0)return Th[o]=c[f];return o}var O0=nu("animationend"),I0=nu("animationiteration"),D0=nu("animationstart"),M0=nu("transitionend"),L0=new Map,j0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(o,c){L0.set(o,c),s(c,[o])}for(var Ch=0;Ch<j0.length;Ch++){var Eh=j0[Ch],bN=Eh.toLowerCase(),xN=Eh[0].toUpperCase()+Eh.slice(1);Dr(bN,"on"+xN)}Dr(O0,"onAnimationEnd"),Dr(I0,"onAnimationIteration"),Dr(D0,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(M0,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kN=new Set("cancel close invalid load scroll toggle".split(" ").concat(ec));function F0(o,c,f){var p=o.type||"unknown-event";o.currentTarget=f,bA(p,c,void 0,o),o.currentTarget=null}function U0(o,c){c=(c&4)!==0;for(var f=0;f<o.length;f++){var p=o[f],v=p.event;p=p.listeners;e:{var b=void 0;if(c)for(var _=p.length-1;0<=_;_--){var O=p[_],L=O.instance,G=O.currentTarget;if(O=O.listener,L!==b&&v.isPropagationStopped())break e;F0(v,O,G),b=L}else for(_=0;_<p.length;_++){if(O=p[_],L=O.instance,G=O.currentTarget,O=O.listener,L!==b&&v.isPropagationStopped())break e;F0(v,O,G),b=L}}}if(Vl)throw o=ih,Vl=!1,ih=null,o}function ut(o,c){var f=c[Dh];f===void 0&&(f=c[Dh]=new Set);var p=o+"__bubble";f.has(p)||(V0(c,o,2,!1),f.add(p))}function Ph(o,c,f){var p=0;c&&(p|=4),V0(f,o,p,c)}var iu="_reactListening"+Math.random().toString(36).slice(2);function tc(o){if(!o[iu]){o[iu]=!0,i.forEach(function(f){f!=="selectionchange"&&(kN.has(f)||Ph(f,!1,o),Ph(f,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[iu]||(c[iu]=!0,Ph("selectionchange",!1,c))}}function V0(o,c,f,p){switch(l0(c)){case 1:var v=MA;break;case 4:v=LA;break;default:v=uh}f=v.bind(null,c,f,o),v=void 0,!nh||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(v=!0),p?v!==void 0?o.addEventListener(c,f,{capture:!0,passive:v}):o.addEventListener(c,f,!0):v!==void 0?o.addEventListener(c,f,{passive:v}):o.addEventListener(c,f,!1)}function _h(o,c,f,p,v){var b=p;if((c&1)===0&&(c&2)===0&&p!==null)e:for(;;){if(p===null)return;var _=p.tag;if(_===3||_===4){var O=p.stateNode.containerInfo;if(O===v||O.nodeType===8&&O.parentNode===v)break;if(_===4)for(_=p.return;_!==null;){var L=_.tag;if((L===3||L===4)&&(L=_.stateNode.containerInfo,L===v||L.nodeType===8&&L.parentNode===v))return;_=_.return}for(;O!==null;){if(_=Cs(O),_===null)return;if(L=_.tag,L===5||L===6){p=b=_;continue e}O=O.parentNode}}p=p.return}Hy(function(){var G=b,se=Xf(f),ae=[];e:{var re=L0.get(o);if(re!==void 0){var be=hh,we=o;switch(o){case"keypress":if(Jl(f)===0)break e;case"keydown":case"keyup":be=JA;break;case"focusin":we="focus",be=gh;break;case"focusout":we="blur",be=gh;break;case"beforeblur":case"afterblur":be=gh;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=f0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=UA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=eN;break;case O0:case I0:case D0:be=zA;break;case M0:be=nN;break;case"scroll":be=jA;break;case"wheel":be=rN;break;case"copy":case"cut":case"paste":be=qA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=p0}var Ee=(c&4)!==0,Ot=!Ee&&o==="scroll",z=Ee?re!==null?re+"Capture":null:re;Ee=[];for(var U=G,$;U!==null;){$=U;var de=$.stateNode;if($.tag===5&&de!==null&&($=de,z!==null&&(de=ja(U,z),de!=null&&Ee.push(nc(U,de,$)))),Ot)break;U=U.return}0<Ee.length&&(re=new be(re,we,null,f,se),ae.push({event:re,listeners:Ee}))}}if((c&7)===0){e:{if(re=o==="mouseover"||o==="pointerover",be=o==="mouseout"||o==="pointerout",re&&f!==ho&&(we=f.relatedTarget||f.fromElement)&&(Cs(we)||we[ir]))break e;if((be||re)&&(re=se.window===se?se:(re=se.ownerDocument)?re.defaultView||re.parentWindow:window,be?(we=f.relatedTarget||f.toElement,be=G,we=we?Cs(we):null,we!==null&&(Ot=Ts(we),we!==Ot||we.tag!==5&&we.tag!==6)&&(we=null)):(be=null,we=G),be!==we)){if(Ee=f0,de="onMouseLeave",z="onMouseEnter",U="mouse",(o==="pointerout"||o==="pointerover")&&(Ee=p0,de="onPointerLeave",z="onPointerEnter",U="pointer"),Ot=be==null?re:wo(be),$=we==null?re:wo(we),re=new Ee(de,U+"leave",be,f,se),re.target=Ot,re.relatedTarget=$,de=null,Cs(se)===G&&(Ee=new Ee(z,U+"enter",we,f,se),Ee.target=$,Ee.relatedTarget=Ot,de=Ee),Ot=de,be&&we)t:{for(Ee=be,z=we,U=0,$=Ee;$;$=ko($))U++;for($=0,de=z;de;de=ko(de))$++;for(;0<U-$;)Ee=ko(Ee),U--;for(;0<$-U;)z=ko(z),$--;for(;U--;){if(Ee===z||z!==null&&Ee===z.alternate)break t;Ee=ko(Ee),z=ko(z)}Ee=null}else Ee=null;be!==null&&B0(ae,re,be,Ee,!1),we!==null&&Ot!==null&&B0(ae,Ot,we,Ee,!0)}}e:{if(re=G?wo(G):window,be=re.nodeName&&re.nodeName.toLowerCase(),be==="select"||be==="input"&&re.type==="file")var Pe=dN;else if(x0(re))if(S0)Pe=mN;else{Pe=hN;var Ne=fN}else(be=re.nodeName)&&be.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Pe=pN);if(Pe&&(Pe=Pe(o,G))){k0(ae,Pe,f,se);break e}Ne&&Ne(o,re,G),o==="focusout"&&(Ne=re._wrapperState)&&Ne.controlled&&re.type==="number"&&Ma(re,"number",re.value)}switch(Ne=G?wo(G):window,o){case"focusin":(x0(Ne)||Ne.contentEditable==="true")&&(bo=Ne,Sh=G,Xa=null);break;case"focusout":Xa=Sh=bo=null;break;case"mousedown":wh=!0;break;case"contextmenu":case"mouseup":case"dragend":wh=!1,A0(ae,f,se);break;case"selectionchange":if(yN)break;case"keydown":case"keyup":A0(ae,f,se)}var Oe;if(yh)e:{switch(o){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else yo?y0(o,f)&&(je="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(je="onCompositionStart");je&&(m0&&f.locale!=="ko"&&(yo||je!=="onCompositionStart"?je==="onCompositionEnd"&&yo&&(Oe=u0()):(Ir=se,fh="value"in Ir?Ir.value:Ir.textContent,yo=!0)),Ne=ru(G,je),0<Ne.length&&(je=new h0(je,o,null,f,se),ae.push({event:je,listeners:Ne}),Oe?je.data=Oe:(Oe=b0(f),Oe!==null&&(je.data=Oe)))),(Oe=oN?aN(o,f):cN(o,f))&&(G=ru(G,"onBeforeInput"),0<G.length&&(se=new h0("onBeforeInput","beforeinput",null,f,se),ae.push({event:se,listeners:G}),se.data=Oe))}U0(ae,c)})}function nc(o,c,f){return{instance:o,listener:c,currentTarget:f}}function ru(o,c){for(var f=c+"Capture",p=[];o!==null;){var v=o,b=v.stateNode;v.tag===5&&b!==null&&(v=b,b=ja(o,f),b!=null&&p.unshift(nc(o,b,v)),b=ja(o,c),b!=null&&p.push(nc(o,b,v))),o=o.return}return p}function ko(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function B0(o,c,f,p,v){for(var b=c._reactName,_=[];f!==null&&f!==p;){var O=f,L=O.alternate,G=O.stateNode;if(L!==null&&L===p)break;O.tag===5&&G!==null&&(O=G,v?(L=ja(f,b),L!=null&&_.unshift(nc(f,L,O))):v||(L=ja(f,b),L!=null&&_.push(nc(f,L,O)))),f=f.return}_.length!==0&&o.push({event:c,listeners:_})}var SN=/\r\n?/g,wN=/\u0000|\uFFFD/g;function z0(o){return(typeof o=="string"?o:""+o).replace(SN,`
`).replace(wN,"")}function su(o,c,f){if(c=z0(c),z0(o)!==c&&f)throw Error(n(425))}function ou(){}var Rh=null,Ah=null;function Nh(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Oh=typeof setTimeout=="function"?setTimeout:void 0,TN=typeof clearTimeout=="function"?clearTimeout:void 0,W0=typeof Promise=="function"?Promise:void 0,CN=typeof queueMicrotask=="function"?queueMicrotask:typeof W0<"u"?function(o){return W0.resolve(null).then(o).catch(EN)}:Oh;function EN(o){setTimeout(function(){throw o})}function Ih(o,c){var f=c,p=0;do{var v=f.nextSibling;if(o.removeChild(f),v&&v.nodeType===8)if(f=v.data,f==="/$"){if(p===0){o.removeChild(v),$a(c);return}p--}else f!=="$"&&f!=="$?"&&f!=="$!"||p++;f=v}while(f);$a(c)}function Mr(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function q0(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return o;c--}else f==="/$"&&c++}o=o.previousSibling}return null}var So=Math.random().toString(36).slice(2),Di="__reactFiber$"+So,ic="__reactProps$"+So,ir="__reactContainer$"+So,Dh="__reactEvents$"+So,PN="__reactListeners$"+So,_N="__reactHandles$"+So;function Cs(o){var c=o[Di];if(c)return c;for(var f=o.parentNode;f;){if(c=f[ir]||f[Di]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(o=q0(o);o!==null;){if(f=o[Di])return f;o=q0(o)}return c}o=f,f=o.parentNode}return null}function rc(o){return o=o[Di]||o[ir],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function wo(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function au(o){return o[ic]||null}var Mh=[],To=-1;function Lr(o){return{current:o}}function dt(o){0>To||(o.current=Mh[To],Mh[To]=null,To--)}function lt(o,c){To++,Mh[To]=o.current,o.current=c}var jr={},on=Lr(jr),En=Lr(!1),Es=jr;function Co(o,c){var f=o.type.contextTypes;if(!f)return jr;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===c)return p.__reactInternalMemoizedMaskedChildContext;var v={},b;for(b in f)v[b]=c[b];return p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=v),v}function Pn(o){return o=o.childContextTypes,o!=null}function cu(){dt(En),dt(on)}function H0(o,c,f){if(on.current!==jr)throw Error(n(168));lt(on,c),lt(En,f)}function $0(o,c,f){var p=o.stateNode;if(c=c.childContextTypes,typeof p.getChildContext!="function")return f;p=p.getChildContext();for(var v in p)if(!(v in c))throw Error(n(108,Ae(o)||"Unknown",v));return oe({},f,p)}function lu(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||jr,Es=on.current,lt(on,o),lt(En,En.current),!0}function K0(o,c,f){var p=o.stateNode;if(!p)throw Error(n(169));f?(o=$0(o,c,Es),p.__reactInternalMemoizedMergedChildContext=o,dt(En),dt(on),lt(on,o)):dt(En),lt(En,f)}var rr=null,uu=!1,Lh=!1;function G0(o){rr===null?rr=[o]:rr.push(o)}function RN(o){uu=!0,G0(o)}function Fr(){if(!Lh&&rr!==null){Lh=!0;var o=0,c=it;try{var f=rr;for(it=1;o<f.length;o++){var p=f[o];do p=p(!0);while(p!==null)}rr=null,uu=!1}catch(v){throw rr!==null&&(rr=rr.slice(o+1)),Qy(rh,Fr),v}finally{it=c,Lh=!1}}return null}var Eo=[],Po=0,du=null,fu=0,$n=[],Kn=0,Ps=null,sr=1,or="";function _s(o,c){Eo[Po++]=fu,Eo[Po++]=du,du=o,fu=c}function Z0(o,c,f){$n[Kn++]=sr,$n[Kn++]=or,$n[Kn++]=Ps,Ps=o;var p=sr;o=or;var v=32-si(p)-1;p&=~(1<<v),f+=1;var b=32-si(c)+v;if(30<b){var _=v-v%5;b=(p&(1<<_)-1).toString(32),p>>=_,v-=_,sr=1<<32-si(c)+v|f<<v|p,or=b+o}else sr=1<<b|f<<v|p,or=o}function jh(o){o.return!==null&&(_s(o,1),Z0(o,1,0))}function Fh(o){for(;o===du;)du=Eo[--Po],Eo[Po]=null,fu=Eo[--Po],Eo[Po]=null;for(;o===Ps;)Ps=$n[--Kn],$n[Kn]=null,or=$n[--Kn],$n[Kn]=null,sr=$n[--Kn],$n[Kn]=null}var jn=null,Fn=null,mt=!1,ai=null;function Q0(o,c){var f=Jn(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=o,c=o.deletions,c===null?(o.deletions=[f],o.flags|=16):c.push(f)}function J0(o,c){switch(o.tag){case 5:var f=o.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,jn=o,Fn=Mr(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,jn=o,Fn=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=Ps!==null?{id:sr,overflow:or}:null,o.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=Jn(18,null,null,0),f.stateNode=c,f.return=o,o.child=f,jn=o,Fn=null,!0):!1;default:return!1}}function Uh(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Vh(o){if(mt){var c=Fn;if(c){var f=c;if(!J0(o,c)){if(Uh(o))throw Error(n(418));c=Mr(f.nextSibling);var p=jn;c&&J0(o,c)?Q0(p,f):(o.flags=o.flags&-4097|2,mt=!1,jn=o)}}else{if(Uh(o))throw Error(n(418));o.flags=o.flags&-4097|2,mt=!1,jn=o}}}function Y0(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;jn=o}function hu(o){if(o!==jn)return!1;if(!mt)return Y0(o),mt=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Nh(o.type,o.memoizedProps)),c&&(c=Fn)){if(Uh(o))throw X0(),Error(n(418));for(;c;)Q0(o,c),c=Mr(c.nextSibling)}if(Y0(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"){if(c===0){Fn=Mr(o.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}o=o.nextSibling}Fn=null}}else Fn=jn?Mr(o.stateNode.nextSibling):null;return!0}function X0(){for(var o=Fn;o;)o=Mr(o.nextSibling)}function _o(){Fn=jn=null,mt=!1}function Bh(o){ai===null?ai=[o]:ai.push(o)}var AN=w.ReactCurrentBatchConfig;function sc(o,c,f){if(o=f.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(n(309));var p=f.stateNode}if(!p)throw Error(n(147,o));var v=p,b=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===b?c.ref:(c=function(_){var O=v.refs;_===null?delete O[b]:O[b]=_},c._stringRef=b,c)}if(typeof o!="string")throw Error(n(284));if(!f._owner)throw Error(n(290,o))}return o}function pu(o,c){throw o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function eb(o){var c=o._init;return c(o._payload)}function tb(o){function c(z,U){if(o){var $=z.deletions;$===null?(z.deletions=[U],z.flags|=16):$.push(U)}}function f(z,U){if(!o)return null;for(;U!==null;)c(z,U),U=U.sibling;return null}function p(z,U){for(z=new Map;U!==null;)U.key!==null?z.set(U.key,U):z.set(U.index,U),U=U.sibling;return z}function v(z,U){return z=$r(z,U),z.index=0,z.sibling=null,z}function b(z,U,$){return z.index=$,o?($=z.alternate,$!==null?($=$.index,$<U?(z.flags|=2,U):$):(z.flags|=2,U)):(z.flags|=1048576,U)}function _(z){return o&&z.alternate===null&&(z.flags|=2),z}function O(z,U,$,de){return U===null||U.tag!==6?(U=Op($,z.mode,de),U.return=z,U):(U=v(U,$),U.return=z,U)}function L(z,U,$,de){var Pe=$.type;return Pe===D?se(z,U,$.props.children,de,$.key):U!==null&&(U.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===ve&&eb(Pe)===U.type)?(de=v(U,$.props),de.ref=sc(z,U,$),de.return=z,de):(de=Fu($.type,$.key,$.props,null,z.mode,de),de.ref=sc(z,U,$),de.return=z,de)}function G(z,U,$,de){return U===null||U.tag!==4||U.stateNode.containerInfo!==$.containerInfo||U.stateNode.implementation!==$.implementation?(U=Ip($,z.mode,de),U.return=z,U):(U=v(U,$.children||[]),U.return=z,U)}function se(z,U,$,de,Pe){return U===null||U.tag!==7?(U=Ls($,z.mode,de,Pe),U.return=z,U):(U=v(U,$),U.return=z,U)}function ae(z,U,$){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Op(""+U,z.mode,$),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S:return $=Fu(U.type,U.key,U.props,null,z.mode,$),$.ref=sc(z,null,U),$.return=z,$;case R:return U=Ip(U,z.mode,$),U.return=z,U;case ve:var de=U._init;return ae(z,de(U._payload),$)}if(co(U)||le(U))return U=Ls(U,z.mode,$,null),U.return=z,U;pu(z,U)}return null}function re(z,U,$,de){var Pe=U!==null?U.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return Pe!==null?null:O(z,U,""+$,de);if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return $.key===Pe?L(z,U,$,de):null;case R:return $.key===Pe?G(z,U,$,de):null;case ve:return Pe=$._init,re(z,U,Pe($._payload),de)}if(co($)||le($))return Pe!==null?null:se(z,U,$,de,null);pu(z,$)}return null}function be(z,U,$,de,Pe){if(typeof de=="string"&&de!==""||typeof de=="number")return z=z.get($)||null,O(U,z,""+de,Pe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case S:return z=z.get(de.key===null?$:de.key)||null,L(U,z,de,Pe);case R:return z=z.get(de.key===null?$:de.key)||null,G(U,z,de,Pe);case ve:var Ne=de._init;return be(z,U,$,Ne(de._payload),Pe)}if(co(de)||le(de))return z=z.get($)||null,se(U,z,de,Pe,null);pu(U,de)}return null}function we(z,U,$,de){for(var Pe=null,Ne=null,Oe=U,je=U=0,Zt=null;Oe!==null&&je<$.length;je++){Oe.index>je?(Zt=Oe,Oe=null):Zt=Oe.sibling;var nt=re(z,Oe,$[je],de);if(nt===null){Oe===null&&(Oe=Zt);break}o&&Oe&&nt.alternate===null&&c(z,Oe),U=b(nt,U,je),Ne===null?Pe=nt:Ne.sibling=nt,Ne=nt,Oe=Zt}if(je===$.length)return f(z,Oe),mt&&_s(z,je),Pe;if(Oe===null){for(;je<$.length;je++)Oe=ae(z,$[je],de),Oe!==null&&(U=b(Oe,U,je),Ne===null?Pe=Oe:Ne.sibling=Oe,Ne=Oe);return mt&&_s(z,je),Pe}for(Oe=p(z,Oe);je<$.length;je++)Zt=be(Oe,z,je,$[je],de),Zt!==null&&(o&&Zt.alternate!==null&&Oe.delete(Zt.key===null?je:Zt.key),U=b(Zt,U,je),Ne===null?Pe=Zt:Ne.sibling=Zt,Ne=Zt);return o&&Oe.forEach(function(Kr){return c(z,Kr)}),mt&&_s(z,je),Pe}function Ee(z,U,$,de){var Pe=le($);if(typeof Pe!="function")throw Error(n(150));if($=Pe.call($),$==null)throw Error(n(151));for(var Ne=Pe=null,Oe=U,je=U=0,Zt=null,nt=$.next();Oe!==null&&!nt.done;je++,nt=$.next()){Oe.index>je?(Zt=Oe,Oe=null):Zt=Oe.sibling;var Kr=re(z,Oe,nt.value,de);if(Kr===null){Oe===null&&(Oe=Zt);break}o&&Oe&&Kr.alternate===null&&c(z,Oe),U=b(Kr,U,je),Ne===null?Pe=Kr:Ne.sibling=Kr,Ne=Kr,Oe=Zt}if(nt.done)return f(z,Oe),mt&&_s(z,je),Pe;if(Oe===null){for(;!nt.done;je++,nt=$.next())nt=ae(z,nt.value,de),nt!==null&&(U=b(nt,U,je),Ne===null?Pe=nt:Ne.sibling=nt,Ne=nt);return mt&&_s(z,je),Pe}for(Oe=p(z,Oe);!nt.done;je++,nt=$.next())nt=be(Oe,z,je,nt.value,de),nt!==null&&(o&&nt.alternate!==null&&Oe.delete(nt.key===null?je:nt.key),U=b(nt,U,je),Ne===null?Pe=nt:Ne.sibling=nt,Ne=nt);return o&&Oe.forEach(function(lO){return c(z,lO)}),mt&&_s(z,je),Pe}function Ot(z,U,$,de){if(typeof $=="object"&&$!==null&&$.type===D&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case S:e:{for(var Pe=$.key,Ne=U;Ne!==null;){if(Ne.key===Pe){if(Pe=$.type,Pe===D){if(Ne.tag===7){f(z,Ne.sibling),U=v(Ne,$.props.children),U.return=z,z=U;break e}}else if(Ne.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===ve&&eb(Pe)===Ne.type){f(z,Ne.sibling),U=v(Ne,$.props),U.ref=sc(z,Ne,$),U.return=z,z=U;break e}f(z,Ne);break}else c(z,Ne);Ne=Ne.sibling}$.type===D?(U=Ls($.props.children,z.mode,de,$.key),U.return=z,z=U):(de=Fu($.type,$.key,$.props,null,z.mode,de),de.ref=sc(z,U,$),de.return=z,z=de)}return _(z);case R:e:{for(Ne=$.key;U!==null;){if(U.key===Ne)if(U.tag===4&&U.stateNode.containerInfo===$.containerInfo&&U.stateNode.implementation===$.implementation){f(z,U.sibling),U=v(U,$.children||[]),U.return=z,z=U;break e}else{f(z,U);break}else c(z,U);U=U.sibling}U=Ip($,z.mode,de),U.return=z,z=U}return _(z);case ve:return Ne=$._init,Ot(z,U,Ne($._payload),de)}if(co($))return we(z,U,$,de);if(le($))return Ee(z,U,$,de);pu(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,U!==null&&U.tag===6?(f(z,U.sibling),U=v(U,$),U.return=z,z=U):(f(z,U),U=Op($,z.mode,de),U.return=z,z=U),_(z)):f(z,U)}return Ot}var Ro=tb(!0),nb=tb(!1),mu=Lr(null),gu=null,Ao=null,zh=null;function Wh(){zh=Ao=gu=null}function qh(o){var c=mu.current;dt(mu),o._currentValue=c}function Hh(o,c,f){for(;o!==null;){var p=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,p!==null&&(p.childLanes|=c)):p!==null&&(p.childLanes&c)!==c&&(p.childLanes|=c),o===f)break;o=o.return}}function No(o,c){gu=o,zh=Ao=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(_n=!0),o.firstContext=null)}function Gn(o){var c=o._currentValue;if(zh!==o)if(o={context:o,memoizedValue:c,next:null},Ao===null){if(gu===null)throw Error(n(308));Ao=o,gu.dependencies={lanes:0,firstContext:o}}else Ao=Ao.next=o;return c}var Rs=null;function $h(o){Rs===null?Rs=[o]:Rs.push(o)}function ib(o,c,f,p){var v=c.interleaved;return v===null?(f.next=f,$h(c)):(f.next=v.next,v.next=f),c.interleaved=f,ar(o,p)}function ar(o,c){o.lanes|=c;var f=o.alternate;for(f!==null&&(f.lanes|=c),f=o,o=o.return;o!==null;)o.childLanes|=c,f=o.alternate,f!==null&&(f.childLanes|=c),f=o,o=o.return;return f.tag===3?f.stateNode:null}var Ur=!1;function Kh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rb(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function cr(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Vr(o,c,f){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(et&2)!==0){var v=p.pending;return v===null?c.next=c:(c.next=v.next,v.next=c),p.pending=c,ar(o,f)}return v=p.interleaved,v===null?(c.next=c,$h(p)):(c.next=v.next,v.next=c),p.interleaved=c,ar(o,f)}function vu(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var p=c.lanes;p&=o.pendingLanes,f|=p,c.lanes=f,ah(o,f)}}function sb(o,c){var f=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var v=null,b=null;if(f=f.firstBaseUpdate,f!==null){do{var _={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};b===null?v=b=_:b=b.next=_,f=f.next}while(f!==null);b===null?v=b=c:b=b.next=c}else v=b=c;f={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:p.shared,effects:p.effects},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}function yu(o,c,f,p){var v=o.updateQueue;Ur=!1;var b=v.firstBaseUpdate,_=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var L=O,G=L.next;L.next=null,_===null?b=G:_.next=G,_=L;var se=o.alternate;se!==null&&(se=se.updateQueue,O=se.lastBaseUpdate,O!==_&&(O===null?se.firstBaseUpdate=G:O.next=G,se.lastBaseUpdate=L))}if(b!==null){var ae=v.baseState;_=0,se=G=L=null,O=b;do{var re=O.lane,be=O.eventTime;if((p&re)===re){se!==null&&(se=se.next={eventTime:be,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var we=o,Ee=O;switch(re=c,be=f,Ee.tag){case 1:if(we=Ee.payload,typeof we=="function"){ae=we.call(be,ae,re);break e}ae=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ee.payload,re=typeof we=="function"?we.call(be,ae,re):we,re==null)break e;ae=oe({},ae,re);break e;case 2:Ur=!0}}O.callback!==null&&O.lane!==0&&(o.flags|=64,re=v.effects,re===null?v.effects=[O]:re.push(O))}else be={eventTime:be,lane:re,tag:O.tag,payload:O.payload,callback:O.callback,next:null},se===null?(G=se=be,L=ae):se=se.next=be,_|=re;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;re=O,O=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);if(se===null&&(L=ae),v.baseState=L,v.firstBaseUpdate=G,v.lastBaseUpdate=se,c=v.shared.interleaved,c!==null){v=c;do _|=v.lane,v=v.next;while(v!==c)}else b===null&&(v.shared.lanes=0);Os|=_,o.lanes=_,o.memoizedState=ae}}function ob(o,c,f){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var p=o[c],v=p.callback;if(v!==null){if(p.callback=null,p=f,typeof v!="function")throw Error(n(191,v));v.call(p)}}}var oc={},Mi=Lr(oc),ac=Lr(oc),cc=Lr(oc);function As(o){if(o===oc)throw Error(n(174));return o}function Gh(o,c){switch(lt(cc,c),lt(ac,o),lt(Mi,oc),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ue(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=ue(c,o)}dt(Mi),lt(Mi,c)}function Oo(){dt(Mi),dt(ac),dt(cc)}function ab(o){As(cc.current);var c=As(Mi.current),f=ue(c,o.type);c!==f&&(lt(ac,o),lt(Mi,f))}function Zh(o){ac.current===o&&(dt(Mi),dt(ac))}var yt=Lr(0);function bu(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Qh=[];function Jh(){for(var o=0;o<Qh.length;o++)Qh[o]._workInProgressVersionPrimary=null;Qh.length=0}var xu=w.ReactCurrentDispatcher,Yh=w.ReactCurrentBatchConfig,Ns=0,bt=null,Vt=null,Kt=null,ku=!1,lc=!1,uc=0,NN=0;function an(){throw Error(n(321))}function Xh(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!oi(o[f],c[f]))return!1;return!0}function ep(o,c,f,p,v,b){if(Ns=b,bt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,xu.current=o===null||o.memoizedState===null?MN:LN,o=f(p,v),lc){b=0;do{if(lc=!1,uc=0,25<=b)throw Error(n(301));b+=1,Kt=Vt=null,c.updateQueue=null,xu.current=jN,o=f(p,v)}while(lc)}if(xu.current=Tu,c=Vt!==null&&Vt.next!==null,Ns=0,Kt=Vt=bt=null,ku=!1,c)throw Error(n(300));return o}function tp(){var o=uc!==0;return uc=0,o}function Li(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?bt.memoizedState=Kt=o:Kt=Kt.next=o,Kt}function Zn(){if(Vt===null){var o=bt.alternate;o=o!==null?o.memoizedState:null}else o=Vt.next;var c=Kt===null?bt.memoizedState:Kt.next;if(c!==null)Kt=c,Vt=o;else{if(o===null)throw Error(n(310));Vt=o,o={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Kt===null?bt.memoizedState=Kt=o:Kt=Kt.next=o}return Kt}function dc(o,c){return typeof c=="function"?c(o):c}function np(o){var c=Zn(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var p=Vt,v=p.baseQueue,b=f.pending;if(b!==null){if(v!==null){var _=v.next;v.next=b.next,b.next=_}p.baseQueue=v=b,f.pending=null}if(v!==null){b=v.next,p=p.baseState;var O=_=null,L=null,G=b;do{var se=G.lane;if((Ns&se)===se)L!==null&&(L=L.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),p=G.hasEagerState?G.eagerState:o(p,G.action);else{var ae={lane:se,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};L===null?(O=L=ae,_=p):L=L.next=ae,bt.lanes|=se,Os|=se}G=G.next}while(G!==null&&G!==b);L===null?_=p:L.next=O,oi(p,c.memoizedState)||(_n=!0),c.memoizedState=p,c.baseState=_,c.baseQueue=L,f.lastRenderedState=p}if(o=f.interleaved,o!==null){v=o;do b=v.lane,bt.lanes|=b,Os|=b,v=v.next;while(v!==o)}else v===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function ip(o){var c=Zn(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var p=f.dispatch,v=f.pending,b=c.memoizedState;if(v!==null){f.pending=null;var _=v=v.next;do b=o(b,_.action),_=_.next;while(_!==v);oi(b,c.memoizedState)||(_n=!0),c.memoizedState=b,c.baseQueue===null&&(c.baseState=b),f.lastRenderedState=b}return[b,p]}function cb(){}function lb(o,c){var f=bt,p=Zn(),v=c(),b=!oi(p.memoizedState,v);if(b&&(p.memoizedState=v,_n=!0),p=p.queue,rp(fb.bind(null,f,p,o),[o]),p.getSnapshot!==c||b||Kt!==null&&Kt.memoizedState.tag&1){if(f.flags|=2048,fc(9,db.bind(null,f,p,v,c),void 0,null),Gt===null)throw Error(n(349));(Ns&30)!==0||ub(f,c,v)}return v}function ub(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=bt.updateQueue,c===null?(c={lastEffect:null,stores:null},bt.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function db(o,c,f,p){c.value=f,c.getSnapshot=p,hb(c)&&pb(o)}function fb(o,c,f){return f(function(){hb(c)&&pb(o)})}function hb(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!oi(o,f)}catch{return!0}}function pb(o){var c=ar(o,1);c!==null&&di(c,o,1,-1)}function mb(o){var c=Li();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:o},c.queue=o,o=o.dispatch=DN.bind(null,bt,o),[c.memoizedState,o]}function fc(o,c,f,p){return o={tag:o,create:c,destroy:f,deps:p,next:null},c=bt.updateQueue,c===null?(c={lastEffect:null,stores:null},bt.updateQueue=c,c.lastEffect=o.next=o):(f=c.lastEffect,f===null?c.lastEffect=o.next=o:(p=f.next,f.next=o,o.next=p,c.lastEffect=o)),o}function gb(){return Zn().memoizedState}function Su(o,c,f,p){var v=Li();bt.flags|=o,v.memoizedState=fc(1|c,f,void 0,p===void 0?null:p)}function wu(o,c,f,p){var v=Zn();p=p===void 0?null:p;var b=void 0;if(Vt!==null){var _=Vt.memoizedState;if(b=_.destroy,p!==null&&Xh(p,_.deps)){v.memoizedState=fc(c,f,b,p);return}}bt.flags|=o,v.memoizedState=fc(1|c,f,b,p)}function vb(o,c){return Su(8390656,8,o,c)}function rp(o,c){return wu(2048,8,o,c)}function yb(o,c){return wu(4,2,o,c)}function bb(o,c){return wu(4,4,o,c)}function xb(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function kb(o,c,f){return f=f!=null?f.concat([o]):null,wu(4,4,xb.bind(null,c,o),f)}function sp(){}function Sb(o,c){var f=Zn();c=c===void 0?null:c;var p=f.memoizedState;return p!==null&&c!==null&&Xh(c,p[1])?p[0]:(f.memoizedState=[o,c],o)}function wb(o,c){var f=Zn();c=c===void 0?null:c;var p=f.memoizedState;return p!==null&&c!==null&&Xh(c,p[1])?p[0]:(o=o(),f.memoizedState=[o,c],o)}function Tb(o,c,f){return(Ns&21)===0?(o.baseState&&(o.baseState=!1,_n=!0),o.memoizedState=f):(oi(f,c)||(f=e0(),bt.lanes|=f,Os|=f,o.baseState=!0),c)}function ON(o,c){var f=it;it=f!==0&&4>f?f:4,o(!0);var p=Yh.transition;Yh.transition={};try{o(!1),c()}finally{it=f,Yh.transition=p}}function Cb(){return Zn().memoizedState}function IN(o,c,f){var p=qr(o);if(f={lane:p,action:f,hasEagerState:!1,eagerState:null,next:null},Eb(o))Pb(c,f);else if(f=ib(o,c,f,p),f!==null){var v=gn();di(f,o,p,v),_b(f,c,p)}}function DN(o,c,f){var p=qr(o),v={lane:p,action:f,hasEagerState:!1,eagerState:null,next:null};if(Eb(o))Pb(c,v);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=c.lastRenderedReducer,b!==null))try{var _=c.lastRenderedState,O=b(_,f);if(v.hasEagerState=!0,v.eagerState=O,oi(O,_)){var L=c.interleaved;L===null?(v.next=v,$h(c)):(v.next=L.next,L.next=v),c.interleaved=v;return}}catch{}f=ib(o,c,v,p),f!==null&&(v=gn(),di(f,o,p,v),_b(f,c,p))}}function Eb(o){var c=o.alternate;return o===bt||c!==null&&c===bt}function Pb(o,c){lc=ku=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function _b(o,c,f){if((f&4194240)!==0){var p=c.lanes;p&=o.pendingLanes,f|=p,c.lanes=f,ah(o,f)}}var Tu={readContext:Gn,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},MN={readContext:Gn,useCallback:function(o,c){return Li().memoizedState=[o,c===void 0?null:c],o},useContext:Gn,useEffect:vb,useImperativeHandle:function(o,c,f){return f=f!=null?f.concat([o]):null,Su(4194308,4,xb.bind(null,c,o),f)},useLayoutEffect:function(o,c){return Su(4194308,4,o,c)},useInsertionEffect:function(o,c){return Su(4,2,o,c)},useMemo:function(o,c){var f=Li();return c=c===void 0?null:c,o=o(),f.memoizedState=[o,c],o},useReducer:function(o,c,f){var p=Li();return c=f!==void 0?f(c):c,p.memoizedState=p.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},p.queue=o,o=o.dispatch=IN.bind(null,bt,o),[p.memoizedState,o]},useRef:function(o){var c=Li();return o={current:o},c.memoizedState=o},useState:mb,useDebugValue:sp,useDeferredValue:function(o){return Li().memoizedState=o},useTransition:function(){var o=mb(!1),c=o[0];return o=ON.bind(null,o[1]),Li().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,f){var p=bt,v=Li();if(mt){if(f===void 0)throw Error(n(407));f=f()}else{if(f=c(),Gt===null)throw Error(n(349));(Ns&30)!==0||ub(p,c,f)}v.memoizedState=f;var b={value:f,getSnapshot:c};return v.queue=b,vb(fb.bind(null,p,b,o),[o]),p.flags|=2048,fc(9,db.bind(null,p,b,f,c),void 0,null),f},useId:function(){var o=Li(),c=Gt.identifierPrefix;if(mt){var f=or,p=sr;f=(p&~(1<<32-si(p)-1)).toString(32)+f,c=":"+c+"R"+f,f=uc++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=NN++,c=":"+c+"r"+f.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},LN={readContext:Gn,useCallback:Sb,useContext:Gn,useEffect:rp,useImperativeHandle:kb,useInsertionEffect:yb,useLayoutEffect:bb,useMemo:wb,useReducer:np,useRef:gb,useState:function(){return np(dc)},useDebugValue:sp,useDeferredValue:function(o){var c=Zn();return Tb(c,Vt.memoizedState,o)},useTransition:function(){var o=np(dc)[0],c=Zn().memoizedState;return[o,c]},useMutableSource:cb,useSyncExternalStore:lb,useId:Cb,unstable_isNewReconciler:!1},jN={readContext:Gn,useCallback:Sb,useContext:Gn,useEffect:rp,useImperativeHandle:kb,useInsertionEffect:yb,useLayoutEffect:bb,useMemo:wb,useReducer:ip,useRef:gb,useState:function(){return ip(dc)},useDebugValue:sp,useDeferredValue:function(o){var c=Zn();return Vt===null?c.memoizedState=o:Tb(c,Vt.memoizedState,o)},useTransition:function(){var o=ip(dc)[0],c=Zn().memoizedState;return[o,c]},useMutableSource:cb,useSyncExternalStore:lb,useId:Cb,unstable_isNewReconciler:!1};function ci(o,c){if(o&&o.defaultProps){c=oe({},c),o=o.defaultProps;for(var f in o)c[f]===void 0&&(c[f]=o[f]);return c}return c}function op(o,c,f,p){c=o.memoizedState,f=f(p,c),f=f==null?c:oe({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Cu={isMounted:function(o){return(o=o._reactInternals)?Ts(o)===o:!1},enqueueSetState:function(o,c,f){o=o._reactInternals;var p=gn(),v=qr(o),b=cr(p,v);b.payload=c,f!=null&&(b.callback=f),c=Vr(o,b,v),c!==null&&(di(c,o,v,p),vu(c,o,v))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var p=gn(),v=qr(o),b=cr(p,v);b.tag=1,b.payload=c,f!=null&&(b.callback=f),c=Vr(o,b,v),c!==null&&(di(c,o,v,p),vu(c,o,v))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=gn(),p=qr(o),v=cr(f,p);v.tag=2,c!=null&&(v.callback=c),c=Vr(o,v,p),c!==null&&(di(c,o,p,f),vu(c,o,p))}};function Rb(o,c,f,p,v,b,_){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,b,_):c.prototype&&c.prototype.isPureReactComponent?!Ya(f,p)||!Ya(v,b):!0}function Ab(o,c,f){var p=!1,v=jr,b=c.contextType;return typeof b=="object"&&b!==null?b=Gn(b):(v=Pn(c)?Es:on.current,p=c.contextTypes,b=(p=p!=null)?Co(o,v):jr),c=new c(f,b),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Cu,o.stateNode=c,c._reactInternals=o,p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=v,o.__reactInternalMemoizedMaskedChildContext=b),c}function Nb(o,c,f,p){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,p),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,p),c.state!==o&&Cu.enqueueReplaceState(c,c.state,null)}function ap(o,c,f,p){var v=o.stateNode;v.props=f,v.state=o.memoizedState,v.refs={},Kh(o);var b=c.contextType;typeof b=="object"&&b!==null?v.context=Gn(b):(b=Pn(c)?Es:on.current,v.context=Co(o,b)),v.state=o.memoizedState,b=c.getDerivedStateFromProps,typeof b=="function"&&(op(o,c,b,f),v.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(c=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),c!==v.state&&Cu.enqueueReplaceState(v,v.state,null),yu(o,f,v,p),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308)}function Io(o,c){try{var f="",p=c;do f+=Be(p),p=p.return;while(p);var v=f}catch(b){v=`
Error generating stack: `+b.message+`
`+b.stack}return{value:o,source:c,stack:v,digest:null}}function cp(o,c,f){return{value:o,source:null,stack:f??null,digest:c??null}}function lp(o,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var FN=typeof WeakMap=="function"?WeakMap:Map;function Ob(o,c,f){f=cr(-1,f),f.tag=3,f.payload={element:null};var p=c.value;return f.callback=function(){Ou||(Ou=!0,Tp=p),lp(o,c)},f}function Ib(o,c,f){f=cr(-1,f),f.tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var v=c.value;f.payload=function(){return p(v)},f.callback=function(){lp(o,c)}}var b=o.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(f.callback=function(){lp(o,c),typeof p!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var _=c.stack;this.componentDidCatch(c.value,{componentStack:_!==null?_:""})}),f}function Db(o,c,f){var p=o.pingCache;if(p===null){p=o.pingCache=new FN;var v=new Set;p.set(c,v)}else v=p.get(c),v===void 0&&(v=new Set,p.set(c,v));v.has(f)||(v.add(f),o=YN.bind(null,o,c,f),c.then(o,o))}function Mb(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function Lb(o,c,f,p,v){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=cr(-1,1),c.tag=2,Vr(f,c,1))),f.lanes|=1),o):(o.flags|=65536,o.lanes=v,o)}var UN=w.ReactCurrentOwner,_n=!1;function mn(o,c,f,p){c.child=o===null?nb(c,null,f,p):Ro(c,o.child,f,p)}function jb(o,c,f,p,v){f=f.render;var b=c.ref;return No(c,v),p=ep(o,c,f,p,b,v),f=tp(),o!==null&&!_n?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~v,lr(o,c,v)):(mt&&f&&jh(c),c.flags|=1,mn(o,c,p,v),c.child)}function Fb(o,c,f,p,v){if(o===null){var b=f.type;return typeof b=="function"&&!Np(b)&&b.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=b,Ub(o,c,b,p,v)):(o=Fu(f.type,null,p,c,c.mode,v),o.ref=c.ref,o.return=c,c.child=o)}if(b=o.child,(o.lanes&v)===0){var _=b.memoizedProps;if(f=f.compare,f=f!==null?f:Ya,f(_,p)&&o.ref===c.ref)return lr(o,c,v)}return c.flags|=1,o=$r(b,p),o.ref=c.ref,o.return=c,c.child=o}function Ub(o,c,f,p,v){if(o!==null){var b=o.memoizedProps;if(Ya(b,p)&&o.ref===c.ref)if(_n=!1,c.pendingProps=p=b,(o.lanes&v)!==0)(o.flags&131072)!==0&&(_n=!0);else return c.lanes=o.lanes,lr(o,c,v)}return up(o,c,f,p,v)}function Vb(o,c,f){var p=c.pendingProps,v=p.children,b=o!==null?o.memoizedState:null;if(p.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Mo,Un),Un|=f;else{if((f&1073741824)===0)return o=b!==null?b.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,lt(Mo,Un),Un|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=b!==null?b.baseLanes:f,lt(Mo,Un),Un|=p}else b!==null?(p=b.baseLanes|f,c.memoizedState=null):p=f,lt(Mo,Un),Un|=p;return mn(o,c,v,f),c.child}function Bb(o,c){var f=c.ref;(o===null&&f!==null||o!==null&&o.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function up(o,c,f,p,v){var b=Pn(f)?Es:on.current;return b=Co(c,b),No(c,v),f=ep(o,c,f,p,b,v),p=tp(),o!==null&&!_n?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~v,lr(o,c,v)):(mt&&p&&jh(c),c.flags|=1,mn(o,c,f,v),c.child)}function zb(o,c,f,p,v){if(Pn(f)){var b=!0;lu(c)}else b=!1;if(No(c,v),c.stateNode===null)Pu(o,c),Ab(c,f,p),ap(c,f,p,v),p=!0;else if(o===null){var _=c.stateNode,O=c.memoizedProps;_.props=O;var L=_.context,G=f.contextType;typeof G=="object"&&G!==null?G=Gn(G):(G=Pn(f)?Es:on.current,G=Co(c,G));var se=f.getDerivedStateFromProps,ae=typeof se=="function"||typeof _.getSnapshotBeforeUpdate=="function";ae||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O!==p||L!==G)&&Nb(c,_,p,G),Ur=!1;var re=c.memoizedState;_.state=re,yu(c,p,_,v),L=c.memoizedState,O!==p||re!==L||En.current||Ur?(typeof se=="function"&&(op(c,f,se,p),L=c.memoizedState),(O=Ur||Rb(c,f,O,p,re,L,G))?(ae||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(c.flags|=4194308)):(typeof _.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=p,c.memoizedState=L),_.props=p,_.state=L,_.context=G,p=O):(typeof _.componentDidMount=="function"&&(c.flags|=4194308),p=!1)}else{_=c.stateNode,rb(o,c),O=c.memoizedProps,G=c.type===c.elementType?O:ci(c.type,O),_.props=G,ae=c.pendingProps,re=_.context,L=f.contextType,typeof L=="object"&&L!==null?L=Gn(L):(L=Pn(f)?Es:on.current,L=Co(c,L));var be=f.getDerivedStateFromProps;(se=typeof be=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O!==ae||re!==L)&&Nb(c,_,p,L),Ur=!1,re=c.memoizedState,_.state=re,yu(c,p,_,v);var we=c.memoizedState;O!==ae||re!==we||En.current||Ur?(typeof be=="function"&&(op(c,f,be,p),we=c.memoizedState),(G=Ur||Rb(c,f,G,p,re,we,L)||!1)?(se||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(p,we,L),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(p,we,L)),typeof _.componentDidUpdate=="function"&&(c.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof _.componentDidUpdate!="function"||O===o.memoizedProps&&re===o.memoizedState||(c.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&re===o.memoizedState||(c.flags|=1024),c.memoizedProps=p,c.memoizedState=we),_.props=p,_.state=we,_.context=L,p=G):(typeof _.componentDidUpdate!="function"||O===o.memoizedProps&&re===o.memoizedState||(c.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&re===o.memoizedState||(c.flags|=1024),p=!1)}return dp(o,c,f,p,b,v)}function dp(o,c,f,p,v,b){Bb(o,c);var _=(c.flags&128)!==0;if(!p&&!_)return v&&K0(c,f,!1),lr(o,c,b);p=c.stateNode,UN.current=c;var O=_&&typeof f.getDerivedStateFromError!="function"?null:p.render();return c.flags|=1,o!==null&&_?(c.child=Ro(c,o.child,null,b),c.child=Ro(c,null,O,b)):mn(o,c,O,b),c.memoizedState=p.state,v&&K0(c,f,!0),c.child}function Wb(o){var c=o.stateNode;c.pendingContext?H0(o,c.pendingContext,c.pendingContext!==c.context):c.context&&H0(o,c.context,!1),Gh(o,c.containerInfo)}function qb(o,c,f,p,v){return _o(),Bh(v),c.flags|=256,mn(o,c,f,p),c.child}var fp={dehydrated:null,treeContext:null,retryLane:0};function hp(o){return{baseLanes:o,cachePool:null,transitions:null}}function Hb(o,c,f){var p=c.pendingProps,v=yt.current,b=!1,_=(c.flags&128)!==0,O;if((O=_)||(O=o!==null&&o.memoizedState===null?!1:(v&2)!==0),O?(b=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(v|=1),lt(yt,v&1),o===null)return Vh(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(_=p.children,o=p.fallback,b?(p=c.mode,b=c.child,_={mode:"hidden",children:_},(p&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=_):b=Uu(_,p,0,null),o=Ls(o,p,f,null),b.return=c,o.return=c,b.sibling=o,c.child=b,c.child.memoizedState=hp(f),c.memoizedState=fp,o):pp(c,_));if(v=o.memoizedState,v!==null&&(O=v.dehydrated,O!==null))return VN(o,c,_,p,O,v,f);if(b){b=p.fallback,_=c.mode,v=o.child,O=v.sibling;var L={mode:"hidden",children:p.children};return(_&1)===0&&c.child!==v?(p=c.child,p.childLanes=0,p.pendingProps=L,c.deletions=null):(p=$r(v,L),p.subtreeFlags=v.subtreeFlags&14680064),O!==null?b=$r(O,b):(b=Ls(b,_,f,null),b.flags|=2),b.return=c,p.return=c,p.sibling=b,c.child=p,p=b,b=c.child,_=o.child.memoizedState,_=_===null?hp(f):{baseLanes:_.baseLanes|f,cachePool:null,transitions:_.transitions},b.memoizedState=_,b.childLanes=o.childLanes&~f,c.memoizedState=fp,p}return b=o.child,o=b.sibling,p=$r(b,{mode:"visible",children:p.children}),(c.mode&1)===0&&(p.lanes=f),p.return=c,p.sibling=null,o!==null&&(f=c.deletions,f===null?(c.deletions=[o],c.flags|=16):f.push(o)),c.child=p,c.memoizedState=null,p}function pp(o,c){return c=Uu({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Eu(o,c,f,p){return p!==null&&Bh(p),Ro(c,o.child,null,f),o=pp(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function VN(o,c,f,p,v,b,_){if(f)return c.flags&256?(c.flags&=-257,p=cp(Error(n(422))),Eu(o,c,_,p)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(b=p.fallback,v=c.mode,p=Uu({mode:"visible",children:p.children},v,0,null),b=Ls(b,v,_,null),b.flags|=2,p.return=c,b.return=c,p.sibling=b,c.child=p,(c.mode&1)!==0&&Ro(c,o.child,null,_),c.child.memoizedState=hp(_),c.memoizedState=fp,b);if((c.mode&1)===0)return Eu(o,c,_,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var O=p.dgst;return p=O,b=Error(n(419)),p=cp(b,p,void 0),Eu(o,c,_,p)}if(O=(_&o.childLanes)!==0,_n||O){if(p=Gt,p!==null){switch(_&-_){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|_))!==0?0:v,v!==0&&v!==b.retryLane&&(b.retryLane=v,ar(o,v),di(p,o,v,-1))}return Ap(),p=cp(Error(n(421))),Eu(o,c,_,p)}return v.data==="$?"?(c.flags|=128,c.child=o.child,c=XN.bind(null,o),v._reactRetry=c,null):(o=b.treeContext,Fn=Mr(v.nextSibling),jn=c,mt=!0,ai=null,o!==null&&($n[Kn++]=sr,$n[Kn++]=or,$n[Kn++]=Ps,sr=o.id,or=o.overflow,Ps=c),c=pp(c,p.children),c.flags|=4096,c)}function $b(o,c,f){o.lanes|=c;var p=o.alternate;p!==null&&(p.lanes|=c),Hh(o.return,c,f)}function mp(o,c,f,p,v){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:v}:(b.isBackwards=c,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=f,b.tailMode=v)}function Kb(o,c,f){var p=c.pendingProps,v=p.revealOrder,b=p.tail;if(mn(o,c,p.children,f),p=yt.current,(p&2)!==0)p=p&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&$b(o,f,c);else if(o.tag===19)$b(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(lt(yt,p),(c.mode&1)===0)c.memoizedState=null;else switch(v){case"forwards":for(f=c.child,v=null;f!==null;)o=f.alternate,o!==null&&bu(o)===null&&(v=f),f=f.sibling;f=v,f===null?(v=c.child,c.child=null):(v=f.sibling,f.sibling=null),mp(c,!1,v,f,b);break;case"backwards":for(f=null,v=c.child,c.child=null;v!==null;){if(o=v.alternate,o!==null&&bu(o)===null){c.child=v;break}o=v.sibling,v.sibling=f,f=v,v=o}mp(c,!0,f,null,b);break;case"together":mp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Pu(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function lr(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),Os|=c.lanes,(f&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,f=$r(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=$r(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function BN(o,c,f){switch(c.tag){case 3:Wb(c),_o();break;case 5:ab(c);break;case 1:Pn(c.type)&&lu(c);break;case 4:Gh(c,c.stateNode.containerInfo);break;case 10:var p=c.type._context,v=c.memoizedProps.value;lt(mu,p._currentValue),p._currentValue=v;break;case 13:if(p=c.memoizedState,p!==null)return p.dehydrated!==null?(lt(yt,yt.current&1),c.flags|=128,null):(f&c.child.childLanes)!==0?Hb(o,c,f):(lt(yt,yt.current&1),o=lr(o,c,f),o!==null?o.sibling:null);lt(yt,yt.current&1);break;case 19:if(p=(f&c.childLanes)!==0,(o.flags&128)!==0){if(p)return Kb(o,c,f);c.flags|=128}if(v=c.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),lt(yt,yt.current),p)break;return null;case 22:case 23:return c.lanes=0,Vb(o,c,f)}return lr(o,c,f)}var Gb,gp,Zb,Qb;Gb=function(o,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},gp=function(){},Zb=function(o,c,f,p){var v=o.memoizedProps;if(v!==p){o=c.stateNode,As(Mi.current);var b=null;switch(f){case"input":v=oo(o,v),p=oo(o,p),b=[];break;case"select":v=oe({},v,{value:void 0}),p=oe({},p,{value:void 0}),b=[];break;case"textarea":v=M(o,v),p=M(o,p),b=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(o.onclick=ou)}fo(f,p);var _;f=null;for(G in v)if(!p.hasOwnProperty(G)&&v.hasOwnProperty(G)&&v[G]!=null)if(G==="style"){var O=v[G];for(_ in O)O.hasOwnProperty(_)&&(f||(f={}),f[_]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(r.hasOwnProperty(G)?b||(b=[]):(b=b||[]).push(G,null));for(G in p){var L=p[G];if(O=v?.[G],p.hasOwnProperty(G)&&L!==O&&(L!=null||O!=null))if(G==="style")if(O){for(_ in O)!O.hasOwnProperty(_)||L&&L.hasOwnProperty(_)||(f||(f={}),f[_]="");for(_ in L)L.hasOwnProperty(_)&&O[_]!==L[_]&&(f||(f={}),f[_]=L[_])}else f||(b||(b=[]),b.push(G,f)),f=L;else G==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,O=O?O.__html:void 0,L!=null&&O!==L&&(b=b||[]).push(G,L)):G==="children"?typeof L!="string"&&typeof L!="number"||(b=b||[]).push(G,""+L):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(r.hasOwnProperty(G)?(L!=null&&G==="onScroll"&&ut("scroll",o),b||O===L||(b=[])):(b=b||[]).push(G,L))}f&&(b=b||[]).push("style",f);var G=b;(c.updateQueue=G)&&(c.flags|=4)}},Qb=function(o,c,f,p){f!==p&&(c.flags|=4)};function hc(o,c){if(!mt)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function cn(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,p=0;if(c)for(var v=o.child;v!==null;)f|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)f|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=p,o.childLanes=f,c}function zN(o,c,f){var p=c.pendingProps;switch(Fh(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(c),null;case 1:return Pn(c.type)&&cu(),cn(c),null;case 3:return p=c.stateNode,Oo(),dt(En),dt(on),Jh(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(hu(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ai!==null&&(Pp(ai),ai=null))),gp(o,c),cn(c),null;case 5:Zh(c);var v=As(cc.current);if(f=c.type,o!==null&&c.stateNode!=null)Zb(o,c,f,p,v),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!p){if(c.stateNode===null)throw Error(n(166));return cn(c),null}if(o=As(Mi.current),hu(c)){p=c.stateNode,f=c.type;var b=c.memoizedProps;switch(p[Di]=c,p[ic]=b,o=(c.mode&1)!==0,f){case"dialog":ut("cancel",p),ut("close",p);break;case"iframe":case"object":case"embed":ut("load",p);break;case"video":case"audio":for(v=0;v<ec.length;v++)ut(ec[v],p);break;case"source":ut("error",p);break;case"img":case"image":case"link":ut("error",p),ut("load",p);break;case"details":ut("toggle",p);break;case"input":jl(p,b),ut("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!b.multiple},ut("invalid",p);break;case"textarea":K(p,b),ut("invalid",p)}fo(f,b),v=null;for(var _ in b)if(b.hasOwnProperty(_)){var O=b[_];_==="children"?typeof O=="string"?p.textContent!==O&&(b.suppressHydrationWarning!==!0&&su(p.textContent,O,o),v=["children",O]):typeof O=="number"&&p.textContent!==""+O&&(b.suppressHydrationWarning!==!0&&su(p.textContent,O,o),v=["children",""+O]):r.hasOwnProperty(_)&&O!=null&&_==="onScroll"&&ut("scroll",p)}switch(f){case"input":Oi(p),Fl(p,b,!0);break;case"textarea":Oi(p),ye(p);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(p.onclick=ou)}p=v,c.updateQueue=p,p!==null&&(c.flags|=4)}else{_=v.nodeType===9?v:v.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=me(f)),o==="http://www.w3.org/1999/xhtml"?f==="script"?(o=_.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof p.is=="string"?o=_.createElement(f,{is:p.is}):(o=_.createElement(f),f==="select"&&(_=o,p.multiple?_.multiple=!0:p.size&&(_.size=p.size))):o=_.createElementNS(o,f),o[Di]=c,o[ic]=p,Gb(o,c,!1,!1),c.stateNode=o;e:{switch(_=La(f,p),f){case"dialog":ut("cancel",o),ut("close",o),v=p;break;case"iframe":case"object":case"embed":ut("load",o),v=p;break;case"video":case"audio":for(v=0;v<ec.length;v++)ut(ec[v],o);v=p;break;case"source":ut("error",o),v=p;break;case"img":case"image":case"link":ut("error",o),ut("load",o),v=p;break;case"details":ut("toggle",o),v=p;break;case"input":jl(o,p),v=oo(o,p),ut("invalid",o);break;case"option":v=p;break;case"select":o._wrapperState={wasMultiple:!!p.multiple},v=oe({},p,{value:void 0}),ut("invalid",o);break;case"textarea":K(o,p),v=M(o,p),ut("invalid",o);break;default:v=p}fo(f,v),O=v;for(b in O)if(O.hasOwnProperty(b)){var L=O[b];b==="style"?uo(o,L):b==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Je(o,L)):b==="children"?typeof L=="string"?(f!=="textarea"||L!=="")&&ct(o,L):typeof L=="number"&&ct(o,""+L):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(r.hasOwnProperty(b)?L!=null&&b==="onScroll"&&ut("scroll",o):L!=null&&N(o,b,L,_))}switch(f){case"input":Oi(o),Fl(o,p,!1);break;case"textarea":Oi(o),ye(o);break;case"option":p.value!=null&&o.setAttribute("value",""+Ve(p.value));break;case"select":o.multiple=!!p.multiple,b=p.value,b!=null?nr(o,!!p.multiple,b,!1):p.defaultValue!=null&&nr(o,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(o.onclick=ou)}switch(f){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return cn(c),null;case 6:if(o&&c.stateNode!=null)Qb(o,c,o.memoizedProps,p);else{if(typeof p!="string"&&c.stateNode===null)throw Error(n(166));if(f=As(cc.current),As(Mi.current),hu(c)){if(p=c.stateNode,f=c.memoizedProps,p[Di]=c,(b=p.nodeValue!==f)&&(o=jn,o!==null))switch(o.tag){case 3:su(p.nodeValue,f,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&su(p.nodeValue,f,(o.mode&1)!==0)}b&&(c.flags|=4)}else p=(f.nodeType===9?f:f.ownerDocument).createTextNode(p),p[Di]=c,c.stateNode=p}return cn(c),null;case 13:if(dt(yt),p=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(mt&&Fn!==null&&(c.mode&1)!==0&&(c.flags&128)===0)X0(),_o(),c.flags|=98560,b=!1;else if(b=hu(c),p!==null&&p.dehydrated!==null){if(o===null){if(!b)throw Error(n(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Di]=c}else _o(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;cn(c),b=!1}else ai!==null&&(Pp(ai),ai=null),b=!0;if(!b)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=f,c):(p=p!==null,p!==(o!==null&&o.memoizedState!==null)&&p&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(yt.current&1)!==0?Bt===0&&(Bt=3):Ap())),c.updateQueue!==null&&(c.flags|=4),cn(c),null);case 4:return Oo(),gp(o,c),o===null&&tc(c.stateNode.containerInfo),cn(c),null;case 10:return qh(c.type._context),cn(c),null;case 17:return Pn(c.type)&&cu(),cn(c),null;case 19:if(dt(yt),b=c.memoizedState,b===null)return cn(c),null;if(p=(c.flags&128)!==0,_=b.rendering,_===null)if(p)hc(b,!1);else{if(Bt!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(_=bu(o),_!==null){for(c.flags|=128,hc(b,!1),p=_.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),c.subtreeFlags=0,p=f,f=c.child;f!==null;)b=f,o=p,b.flags&=14680066,_=b.alternate,_===null?(b.childLanes=0,b.lanes=o,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=_.childLanes,b.lanes=_.lanes,b.child=_.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=_.memoizedProps,b.memoizedState=_.memoizedState,b.updateQueue=_.updateQueue,b.type=_.type,o=_.dependencies,b.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),f=f.sibling;return lt(yt,yt.current&1|2),c.child}o=o.sibling}b.tail!==null&&Nt()>Lo&&(c.flags|=128,p=!0,hc(b,!1),c.lanes=4194304)}else{if(!p)if(o=bu(_),o!==null){if(c.flags|=128,p=!0,f=o.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),hc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!_.alternate&&!mt)return cn(c),null}else 2*Nt()-b.renderingStartTime>Lo&&f!==1073741824&&(c.flags|=128,p=!0,hc(b,!1),c.lanes=4194304);b.isBackwards?(_.sibling=c.child,c.child=_):(f=b.last,f!==null?f.sibling=_:c.child=_,b.last=_)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=Nt(),c.sibling=null,f=yt.current,lt(yt,p?f&1|2:f&1),c):(cn(c),null);case 22:case 23:return Rp(),p=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==p&&(c.flags|=8192),p&&(c.mode&1)!==0?(Un&1073741824)!==0&&(cn(c),c.subtreeFlags&6&&(c.flags|=8192)):cn(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function WN(o,c){switch(Fh(c),c.tag){case 1:return Pn(c.type)&&cu(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Oo(),dt(En),dt(on),Jh(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Zh(c),null;case 13:if(dt(yt),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));_o()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return dt(yt),null;case 4:return Oo(),null;case 10:return qh(c.type._context),null;case 22:case 23:return Rp(),null;case 24:return null;default:return null}}var _u=!1,ln=!1,qN=typeof WeakSet=="function"?WeakSet:Set,Se=null;function Do(o,c){var f=o.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(p){wt(o,c,p)}else f.current=null}function vp(o,c,f){try{f()}catch(p){wt(o,c,p)}}var Jb=!1;function HN(o,c){if(Rh=Gl,o=R0(),kh(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var v=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{f.nodeType,b.nodeType}catch{f=null;break e}var _=0,O=-1,L=-1,G=0,se=0,ae=o,re=null;t:for(;;){for(var be;ae!==f||v!==0&&ae.nodeType!==3||(O=_+v),ae!==b||p!==0&&ae.nodeType!==3||(L=_+p),ae.nodeType===3&&(_+=ae.nodeValue.length),(be=ae.firstChild)!==null;)re=ae,ae=be;for(;;){if(ae===o)break t;if(re===f&&++G===v&&(O=_),re===b&&++se===p&&(L=_),(be=ae.nextSibling)!==null)break;ae=re,re=ae.parentNode}ae=be}f=O===-1||L===-1?null:{start:O,end:L}}else f=null}f=f||{start:0,end:0}}else f=null;for(Ah={focusedElem:o,selectionRange:f},Gl=!1,Se=c;Se!==null;)if(c=Se,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Se=o;else for(;Se!==null;){c=Se;try{var we=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var Ee=we.memoizedProps,Ot=we.memoizedState,z=c.stateNode,U=z.getSnapshotBeforeUpdate(c.elementType===c.type?Ee:ci(c.type,Ee),Ot);z.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var $=c.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(de){wt(c,c.return,de)}if(o=c.sibling,o!==null){o.return=c.return,Se=o;break}Se=c.return}return we=Jb,Jb=!1,we}function pc(o,c,f){var p=c.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&o)===o){var b=v.destroy;v.destroy=void 0,b!==void 0&&vp(c,f,b)}v=v.next}while(v!==p)}}function Ru(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&o)===o){var p=f.create;f.destroy=p()}f=f.next}while(f!==c)}}function yp(o){var c=o.ref;if(c!==null){var f=o.stateNode;o.tag,o=f,typeof c=="function"?c(o):c.current=o}}function Yb(o){var c=o.alternate;c!==null&&(o.alternate=null,Yb(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[Di],delete c[ic],delete c[Dh],delete c[PN],delete c[_N])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Xb(o){return o.tag===5||o.tag===3||o.tag===4}function ex(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Xb(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function bp(o,c,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(o,c):f.insertBefore(o,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(o,f)):(c=f,c.appendChild(o)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=ou));else if(p!==4&&(o=o.child,o!==null))for(bp(o,c,f),o=o.sibling;o!==null;)bp(o,c,f),o=o.sibling}function xp(o,c,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?f.insertBefore(o,c):f.appendChild(o);else if(p!==4&&(o=o.child,o!==null))for(xp(o,c,f),o=o.sibling;o!==null;)xp(o,c,f),o=o.sibling}var Yt=null,li=!1;function Br(o,c,f){for(f=f.child;f!==null;)tx(o,c,f),f=f.sibling}function tx(o,c,f){if(Ii&&typeof Ii.onCommitFiberUnmount=="function")try{Ii.onCommitFiberUnmount(zl,f)}catch{}switch(f.tag){case 5:ln||Do(f,c);case 6:var p=Yt,v=li;Yt=null,Br(o,c,f),Yt=p,li=v,Yt!==null&&(li?(o=Yt,f=f.stateNode,o.nodeType===8?o.parentNode.removeChild(f):o.removeChild(f)):Yt.removeChild(f.stateNode));break;case 18:Yt!==null&&(li?(o=Yt,f=f.stateNode,o.nodeType===8?Ih(o.parentNode,f):o.nodeType===1&&Ih(o,f),$a(o)):Ih(Yt,f.stateNode));break;case 4:p=Yt,v=li,Yt=f.stateNode.containerInfo,li=!0,Br(o,c,f),Yt=p,li=v;break;case 0:case 11:case 14:case 15:if(!ln&&(p=f.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var b=v,_=b.destroy;b=b.tag,_!==void 0&&((b&2)!==0||(b&4)!==0)&&vp(f,c,_),v=v.next}while(v!==p)}Br(o,c,f);break;case 1:if(!ln&&(Do(f,c),p=f.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=f.memoizedProps,p.state=f.memoizedState,p.componentWillUnmount()}catch(O){wt(f,c,O)}Br(o,c,f);break;case 21:Br(o,c,f);break;case 22:f.mode&1?(ln=(p=ln)||f.memoizedState!==null,Br(o,c,f),ln=p):Br(o,c,f);break;default:Br(o,c,f)}}function nx(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var f=o.stateNode;f===null&&(f=o.stateNode=new qN),c.forEach(function(p){var v=eO.bind(null,o,p);f.has(p)||(f.add(p),p.then(v,v))})}}function ui(o,c){var f=c.deletions;if(f!==null)for(var p=0;p<f.length;p++){var v=f[p];try{var b=o,_=c,O=_;e:for(;O!==null;){switch(O.tag){case 5:Yt=O.stateNode,li=!1;break e;case 3:Yt=O.stateNode.containerInfo,li=!0;break e;case 4:Yt=O.stateNode.containerInfo,li=!0;break e}O=O.return}if(Yt===null)throw Error(n(160));tx(b,_,v),Yt=null,li=!1;var L=v.alternate;L!==null&&(L.return=null),v.return=null}catch(G){wt(v,c,G)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)ix(c,o),c=c.sibling}function ix(o,c){var f=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ui(c,o),ji(o),p&4){try{pc(3,o,o.return),Ru(3,o)}catch(Ee){wt(o,o.return,Ee)}try{pc(5,o,o.return)}catch(Ee){wt(o,o.return,Ee)}}break;case 1:ui(c,o),ji(o),p&512&&f!==null&&Do(f,f.return);break;case 5:if(ui(c,o),ji(o),p&512&&f!==null&&Do(f,f.return),o.flags&32){var v=o.stateNode;try{ct(v,"")}catch(Ee){wt(o,o.return,Ee)}}if(p&4&&(v=o.stateNode,v!=null)){var b=o.memoizedProps,_=f!==null?f.memoizedProps:b,O=o.type,L=o.updateQueue;if(o.updateQueue=null,L!==null)try{O==="input"&&b.type==="radio"&&b.name!=null&&Da(v,b),La(O,_);var G=La(O,b);for(_=0;_<L.length;_+=2){var se=L[_],ae=L[_+1];se==="style"?uo(v,ae):se==="dangerouslySetInnerHTML"?Je(v,ae):se==="children"?ct(v,ae):N(v,se,ae,G)}switch(O){case"input":ao(v,b);break;case"textarea":J(v,b);break;case"select":var re=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!b.multiple;var be=b.value;be!=null?nr(v,!!b.multiple,be,!1):re!==!!b.multiple&&(b.defaultValue!=null?nr(v,!!b.multiple,b.defaultValue,!0):nr(v,!!b.multiple,b.multiple?[]:"",!1))}v[ic]=b}catch(Ee){wt(o,o.return,Ee)}}break;case 6:if(ui(c,o),ji(o),p&4){if(o.stateNode===null)throw Error(n(162));v=o.stateNode,b=o.memoizedProps;try{v.nodeValue=b}catch(Ee){wt(o,o.return,Ee)}}break;case 3:if(ui(c,o),ji(o),p&4&&f!==null&&f.memoizedState.isDehydrated)try{$a(c.containerInfo)}catch(Ee){wt(o,o.return,Ee)}break;case 4:ui(c,o),ji(o);break;case 13:ui(c,o),ji(o),v=o.child,v.flags&8192&&(b=v.memoizedState!==null,v.stateNode.isHidden=b,!b||v.alternate!==null&&v.alternate.memoizedState!==null||(wp=Nt())),p&4&&nx(o);break;case 22:if(se=f!==null&&f.memoizedState!==null,o.mode&1?(ln=(G=ln)||se,ui(c,o),ln=G):ui(c,o),ji(o),p&8192){if(G=o.memoizedState!==null,(o.stateNode.isHidden=G)&&!se&&(o.mode&1)!==0)for(Se=o,se=o.child;se!==null;){for(ae=Se=se;Se!==null;){switch(re=Se,be=re.child,re.tag){case 0:case 11:case 14:case 15:pc(4,re,re.return);break;case 1:Do(re,re.return);var we=re.stateNode;if(typeof we.componentWillUnmount=="function"){p=re,f=re.return;try{c=p,we.props=c.memoizedProps,we.state=c.memoizedState,we.componentWillUnmount()}catch(Ee){wt(p,f,Ee)}}break;case 5:Do(re,re.return);break;case 22:if(re.memoizedState!==null){ox(ae);continue}}be!==null?(be.return=re,Se=be):ox(ae)}se=se.sibling}e:for(se=null,ae=o;;){if(ae.tag===5){if(se===null){se=ae;try{v=ae.stateNode,G?(b=v.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(O=ae.stateNode,L=ae.memoizedProps.style,_=L!=null&&L.hasOwnProperty("display")?L.display:null,O.style.display=lo("display",_))}catch(Ee){wt(o,o.return,Ee)}}}else if(ae.tag===6){if(se===null)try{ae.stateNode.nodeValue=G?"":ae.memoizedProps}catch(Ee){wt(o,o.return,Ee)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===o)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===o)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===o)break e;se===ae&&(se=null),ae=ae.return}se===ae&&(se=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:ui(c,o),ji(o),p&4&&nx(o);break;case 21:break;default:ui(c,o),ji(o)}}function ji(o){var c=o.flags;if(c&2){try{e:{for(var f=o.return;f!==null;){if(Xb(f)){var p=f;break e}f=f.return}throw Error(n(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(ct(v,""),p.flags&=-33);var b=ex(o);xp(o,b,v);break;case 3:case 4:var _=p.stateNode.containerInfo,O=ex(o);bp(o,O,_);break;default:throw Error(n(161))}}catch(L){wt(o,o.return,L)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function $N(o,c,f){Se=o,rx(o)}function rx(o,c,f){for(var p=(o.mode&1)!==0;Se!==null;){var v=Se,b=v.child;if(v.tag===22&&p){var _=v.memoizedState!==null||_u;if(!_){var O=v.alternate,L=O!==null&&O.memoizedState!==null||ln;O=_u;var G=ln;if(_u=_,(ln=L)&&!G)for(Se=v;Se!==null;)_=Se,L=_.child,_.tag===22&&_.memoizedState!==null?ax(v):L!==null?(L.return=_,Se=L):ax(v);for(;b!==null;)Se=b,rx(b),b=b.sibling;Se=v,_u=O,ln=G}sx(o)}else(v.subtreeFlags&8772)!==0&&b!==null?(b.return=v,Se=b):sx(o)}}function sx(o){for(;Se!==null;){var c=Se;if((c.flags&8772)!==0){var f=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:ln||Ru(5,c);break;case 1:var p=c.stateNode;if(c.flags&4&&!ln)if(f===null)p.componentDidMount();else{var v=c.elementType===c.type?f.memoizedProps:ci(c.type,f.memoizedProps);p.componentDidUpdate(v,f.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var b=c.updateQueue;b!==null&&ob(c,b,p);break;case 3:var _=c.updateQueue;if(_!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}ob(c,_,f)}break;case 5:var O=c.stateNode;if(f===null&&c.flags&4){f=O;var L=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&f.focus();break;case"img":L.src&&(f.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var G=c.alternate;if(G!==null){var se=G.memoizedState;if(se!==null){var ae=se.dehydrated;ae!==null&&$a(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ln||c.flags&512&&yp(c)}catch(re){wt(c,c.return,re)}}if(c===o){Se=null;break}if(f=c.sibling,f!==null){f.return=c.return,Se=f;break}Se=c.return}}function ox(o){for(;Se!==null;){var c=Se;if(c===o){Se=null;break}var f=c.sibling;if(f!==null){f.return=c.return,Se=f;break}Se=c.return}}function ax(o){for(;Se!==null;){var c=Se;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{Ru(4,c)}catch(L){wt(c,f,L)}break;case 1:var p=c.stateNode;if(typeof p.componentDidMount=="function"){var v=c.return;try{p.componentDidMount()}catch(L){wt(c,v,L)}}var b=c.return;try{yp(c)}catch(L){wt(c,b,L)}break;case 5:var _=c.return;try{yp(c)}catch(L){wt(c,_,L)}}}catch(L){wt(c,c.return,L)}if(c===o){Se=null;break}var O=c.sibling;if(O!==null){O.return=c.return,Se=O;break}Se=c.return}}var KN=Math.ceil,Au=w.ReactCurrentDispatcher,kp=w.ReactCurrentOwner,Qn=w.ReactCurrentBatchConfig,et=0,Gt=null,jt=null,Xt=0,Un=0,Mo=Lr(0),Bt=0,mc=null,Os=0,Nu=0,Sp=0,gc=null,Rn=null,wp=0,Lo=1/0,ur=null,Ou=!1,Tp=null,zr=null,Iu=!1,Wr=null,Du=0,vc=0,Cp=null,Mu=-1,Lu=0;function gn(){return(et&6)!==0?Nt():Mu!==-1?Mu:Mu=Nt()}function qr(o){return(o.mode&1)===0?1:(et&2)!==0&&Xt!==0?Xt&-Xt:AN.transition!==null?(Lu===0&&(Lu=e0()),Lu):(o=it,o!==0||(o=window.event,o=o===void 0?16:l0(o.type)),o)}function di(o,c,f,p){if(50<vc)throw vc=0,Cp=null,Error(n(185));Ba(o,f,p),((et&2)===0||o!==Gt)&&(o===Gt&&((et&2)===0&&(Nu|=f),Bt===4&&Hr(o,Xt)),An(o,p),f===1&&et===0&&(c.mode&1)===0&&(Lo=Nt()+500,uu&&Fr()))}function An(o,c){var f=o.callbackNode;AA(o,c);var p=Hl(o,o===Gt?Xt:0);if(p===0)f!==null&&Jy(f),o.callbackNode=null,o.callbackPriority=0;else if(c=p&-p,o.callbackPriority!==c){if(f!=null&&Jy(f),c===1)o.tag===0?RN(lx.bind(null,o)):G0(lx.bind(null,o)),CN(function(){(et&6)===0&&Fr()}),f=null;else{switch(t0(p)){case 1:f=rh;break;case 4:f=Yy;break;case 16:f=Bl;break;case 536870912:f=Xy;break;default:f=Bl}f=vx(f,cx.bind(null,o))}o.callbackPriority=c,o.callbackNode=f}}function cx(o,c){if(Mu=-1,Lu=0,(et&6)!==0)throw Error(n(327));var f=o.callbackNode;if(jo()&&o.callbackNode!==f)return null;var p=Hl(o,o===Gt?Xt:0);if(p===0)return null;if((p&30)!==0||(p&o.expiredLanes)!==0||c)c=ju(o,p);else{c=p;var v=et;et|=2;var b=dx();(Gt!==o||Xt!==c)&&(ur=null,Lo=Nt()+500,Ds(o,c));do try{QN();break}catch(O){ux(o,O)}while(!0);Wh(),Au.current=b,et=v,jt!==null?c=0:(Gt=null,Xt=0,c=Bt)}if(c!==0){if(c===2&&(v=sh(o),v!==0&&(p=v,c=Ep(o,v))),c===1)throw f=mc,Ds(o,0),Hr(o,p),An(o,Nt()),f;if(c===6)Hr(o,p);else{if(v=o.current.alternate,(p&30)===0&&!GN(v)&&(c=ju(o,p),c===2&&(b=sh(o),b!==0&&(p=b,c=Ep(o,b))),c===1))throw f=mc,Ds(o,0),Hr(o,p),An(o,Nt()),f;switch(o.finishedWork=v,o.finishedLanes=p,c){case 0:case 1:throw Error(n(345));case 2:Ms(o,Rn,ur);break;case 3:if(Hr(o,p),(p&130023424)===p&&(c=wp+500-Nt(),10<c)){if(Hl(o,0)!==0)break;if(v=o.suspendedLanes,(v&p)!==p){gn(),o.pingedLanes|=o.suspendedLanes&v;break}o.timeoutHandle=Oh(Ms.bind(null,o,Rn,ur),c);break}Ms(o,Rn,ur);break;case 4:if(Hr(o,p),(p&4194240)===p)break;for(c=o.eventTimes,v=-1;0<p;){var _=31-si(p);b=1<<_,_=c[_],_>v&&(v=_),p&=~b}if(p=v,p=Nt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*KN(p/1960))-p,10<p){o.timeoutHandle=Oh(Ms.bind(null,o,Rn,ur),p);break}Ms(o,Rn,ur);break;case 5:Ms(o,Rn,ur);break;default:throw Error(n(329))}}}return An(o,Nt()),o.callbackNode===f?cx.bind(null,o):null}function Ep(o,c){var f=gc;return o.current.memoizedState.isDehydrated&&(Ds(o,c).flags|=256),o=ju(o,c),o!==2&&(c=Rn,Rn=f,c!==null&&Pp(c)),o}function Pp(o){Rn===null?Rn=o:Rn.push.apply(Rn,o)}function GN(o){for(var c=o;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var p=0;p<f.length;p++){var v=f[p],b=v.getSnapshot;v=v.value;try{if(!oi(b(),v))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Hr(o,c){for(c&=~Sp,c&=~Nu,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var f=31-si(c),p=1<<f;o[f]=-1,c&=~p}}function lx(o){if((et&6)!==0)throw Error(n(327));jo();var c=Hl(o,0);if((c&1)===0)return An(o,Nt()),null;var f=ju(o,c);if(o.tag!==0&&f===2){var p=sh(o);p!==0&&(c=p,f=Ep(o,p))}if(f===1)throw f=mc,Ds(o,0),Hr(o,c),An(o,Nt()),f;if(f===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Ms(o,Rn,ur),An(o,Nt()),null}function _p(o,c){var f=et;et|=1;try{return o(c)}finally{et=f,et===0&&(Lo=Nt()+500,uu&&Fr())}}function Is(o){Wr!==null&&Wr.tag===0&&(et&6)===0&&jo();var c=et;et|=1;var f=Qn.transition,p=it;try{if(Qn.transition=null,it=1,o)return o()}finally{it=p,Qn.transition=f,et=c,(et&6)===0&&Fr()}}function Rp(){Un=Mo.current,dt(Mo)}function Ds(o,c){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;if(f!==-1&&(o.timeoutHandle=-1,TN(f)),jt!==null)for(f=jt.return;f!==null;){var p=f;switch(Fh(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&cu();break;case 3:Oo(),dt(En),dt(on),Jh();break;case 5:Zh(p);break;case 4:Oo();break;case 13:dt(yt);break;case 19:dt(yt);break;case 10:qh(p.type._context);break;case 22:case 23:Rp()}f=f.return}if(Gt=o,jt=o=$r(o.current,null),Xt=Un=c,Bt=0,mc=null,Sp=Nu=Os=0,Rn=gc=null,Rs!==null){for(c=0;c<Rs.length;c++)if(f=Rs[c],p=f.interleaved,p!==null){f.interleaved=null;var v=p.next,b=f.pending;if(b!==null){var _=b.next;b.next=v,p.next=_}f.pending=p}Rs=null}return o}function ux(o,c){do{var f=jt;try{if(Wh(),xu.current=Tu,ku){for(var p=bt.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}ku=!1}if(Ns=0,Kt=Vt=bt=null,lc=!1,uc=0,kp.current=null,f===null||f.return===null){Bt=1,mc=c,jt=null;break}e:{var b=o,_=f.return,O=f,L=c;if(c=Xt,O.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var G=L,se=O,ae=se.tag;if((se.mode&1)===0&&(ae===0||ae===11||ae===15)){var re=se.alternate;re?(se.updateQueue=re.updateQueue,se.memoizedState=re.memoizedState,se.lanes=re.lanes):(se.updateQueue=null,se.memoizedState=null)}var be=Mb(_);if(be!==null){be.flags&=-257,Lb(be,_,O,b,c),be.mode&1&&Db(b,G,c),c=be,L=G;var we=c.updateQueue;if(we===null){var Ee=new Set;Ee.add(L),c.updateQueue=Ee}else we.add(L);break e}else{if((c&1)===0){Db(b,G,c),Ap();break e}L=Error(n(426))}}else if(mt&&O.mode&1){var Ot=Mb(_);if(Ot!==null){(Ot.flags&65536)===0&&(Ot.flags|=256),Lb(Ot,_,O,b,c),Bh(Io(L,O));break e}}b=L=Io(L,O),Bt!==4&&(Bt=2),gc===null?gc=[b]:gc.push(b),b=_;do{switch(b.tag){case 3:b.flags|=65536,c&=-c,b.lanes|=c;var z=Ob(b,L,c);sb(b,z);break e;case 1:O=L;var U=b.type,$=b.stateNode;if((b.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(zr===null||!zr.has($)))){b.flags|=65536,c&=-c,b.lanes|=c;var de=Ib(b,O,c);sb(b,de);break e}}b=b.return}while(b!==null)}hx(f)}catch(Pe){c=Pe,jt===f&&f!==null&&(jt=f=f.return);continue}break}while(!0)}function dx(){var o=Au.current;return Au.current=Tu,o===null?Tu:o}function Ap(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Gt===null||(Os&268435455)===0&&(Nu&268435455)===0||Hr(Gt,Xt)}function ju(o,c){var f=et;et|=2;var p=dx();(Gt!==o||Xt!==c)&&(ur=null,Ds(o,c));do try{ZN();break}catch(v){ux(o,v)}while(!0);if(Wh(),et=f,Au.current=p,jt!==null)throw Error(n(261));return Gt=null,Xt=0,Bt}function ZN(){for(;jt!==null;)fx(jt)}function QN(){for(;jt!==null&&!kA();)fx(jt)}function fx(o){var c=gx(o.alternate,o,Un);o.memoizedProps=o.pendingProps,c===null?hx(o):jt=c,kp.current=null}function hx(o){var c=o;do{var f=c.alternate;if(o=c.return,(c.flags&32768)===0){if(f=zN(f,c,Un),f!==null){jt=f;return}}else{if(f=WN(f,c),f!==null){f.flags&=32767,jt=f;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Bt=6,jt=null;return}}if(c=c.sibling,c!==null){jt=c;return}jt=c=o}while(c!==null);Bt===0&&(Bt=5)}function Ms(o,c,f){var p=it,v=Qn.transition;try{Qn.transition=null,it=1,JN(o,c,f,p)}finally{Qn.transition=v,it=p}return null}function JN(o,c,f,p){do jo();while(Wr!==null);if((et&6)!==0)throw Error(n(327));f=o.finishedWork;var v=o.finishedLanes;if(f===null)return null;if(o.finishedWork=null,o.finishedLanes=0,f===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var b=f.lanes|f.childLanes;if(NA(o,b),o===Gt&&(jt=Gt=null,Xt=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||Iu||(Iu=!0,vx(Bl,function(){return jo(),null})),b=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||b){b=Qn.transition,Qn.transition=null;var _=it;it=1;var O=et;et|=4,kp.current=null,HN(o,f),ix(f,o),vN(Ah),Gl=!!Rh,Ah=Rh=null,o.current=f,$N(f),SA(),et=O,it=_,Qn.transition=b}else o.current=f;if(Iu&&(Iu=!1,Wr=o,Du=v),b=o.pendingLanes,b===0&&(zr=null),CA(f.stateNode),An(o,Nt()),c!==null)for(p=o.onRecoverableError,f=0;f<c.length;f++)v=c[f],p(v.value,{componentStack:v.stack,digest:v.digest});if(Ou)throw Ou=!1,o=Tp,Tp=null,o;return(Du&1)!==0&&o.tag!==0&&jo(),b=o.pendingLanes,(b&1)!==0?o===Cp?vc++:(vc=0,Cp=o):vc=0,Fr(),null}function jo(){if(Wr!==null){var o=t0(Du),c=Qn.transition,f=it;try{if(Qn.transition=null,it=16>o?16:o,Wr===null)var p=!1;else{if(o=Wr,Wr=null,Du=0,(et&6)!==0)throw Error(n(331));var v=et;for(et|=4,Se=o.current;Se!==null;){var b=Se,_=b.child;if((Se.flags&16)!==0){var O=b.deletions;if(O!==null){for(var L=0;L<O.length;L++){var G=O[L];for(Se=G;Se!==null;){var se=Se;switch(se.tag){case 0:case 11:case 15:pc(8,se,b)}var ae=se.child;if(ae!==null)ae.return=se,Se=ae;else for(;Se!==null;){se=Se;var re=se.sibling,be=se.return;if(Yb(se),se===G){Se=null;break}if(re!==null){re.return=be,Se=re;break}Se=be}}}var we=b.alternate;if(we!==null){var Ee=we.child;if(Ee!==null){we.child=null;do{var Ot=Ee.sibling;Ee.sibling=null,Ee=Ot}while(Ee!==null)}}Se=b}}if((b.subtreeFlags&2064)!==0&&_!==null)_.return=b,Se=_;else e:for(;Se!==null;){if(b=Se,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:pc(9,b,b.return)}var z=b.sibling;if(z!==null){z.return=b.return,Se=z;break e}Se=b.return}}var U=o.current;for(Se=U;Se!==null;){_=Se;var $=_.child;if((_.subtreeFlags&2064)!==0&&$!==null)$.return=_,Se=$;else e:for(_=U;Se!==null;){if(O=Se,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Ru(9,O)}}catch(Pe){wt(O,O.return,Pe)}if(O===_){Se=null;break e}var de=O.sibling;if(de!==null){de.return=O.return,Se=de;break e}Se=O.return}}if(et=v,Fr(),Ii&&typeof Ii.onPostCommitFiberRoot=="function")try{Ii.onPostCommitFiberRoot(zl,o)}catch{}p=!0}return p}finally{it=f,Qn.transition=c}}return!1}function px(o,c,f){c=Io(f,c),c=Ob(o,c,1),o=Vr(o,c,1),c=gn(),o!==null&&(Ba(o,1,c),An(o,c))}function wt(o,c,f){if(o.tag===3)px(o,o,f);else for(;c!==null;){if(c.tag===3){px(c,o,f);break}else if(c.tag===1){var p=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(zr===null||!zr.has(p))){o=Io(f,o),o=Ib(c,o,1),c=Vr(c,o,1),o=gn(),c!==null&&(Ba(c,1,o),An(c,o));break}}c=c.return}}function YN(o,c,f){var p=o.pingCache;p!==null&&p.delete(c),c=gn(),o.pingedLanes|=o.suspendedLanes&f,Gt===o&&(Xt&f)===f&&(Bt===4||Bt===3&&(Xt&130023424)===Xt&&500>Nt()-wp?Ds(o,0):Sp|=f),An(o,c)}function mx(o,c){c===0&&((o.mode&1)===0?c=1:(c=ql,ql<<=1,(ql&130023424)===0&&(ql=4194304)));var f=gn();o=ar(o,c),o!==null&&(Ba(o,c,f),An(o,f))}function XN(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),mx(o,f)}function eO(o,c){var f=0;switch(o.tag){case 13:var p=o.stateNode,v=o.memoizedState;v!==null&&(f=v.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(c),mx(o,f)}var gx;gx=function(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps||En.current)_n=!0;else{if((o.lanes&f)===0&&(c.flags&128)===0)return _n=!1,BN(o,c,f);_n=(o.flags&131072)!==0}else _n=!1,mt&&(c.flags&1048576)!==0&&Z0(c,fu,c.index);switch(c.lanes=0,c.tag){case 2:var p=c.type;Pu(o,c),o=c.pendingProps;var v=Co(c,on.current);No(c,f),v=ep(null,c,p,o,v,f);var b=tp();return c.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Pn(p)?(b=!0,lu(c)):b=!1,c.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Kh(c),v.updater=Cu,c.stateNode=v,v._reactInternals=c,ap(c,p,o,f),c=dp(null,c,p,!0,b,f)):(c.tag=0,mt&&b&&jh(c),mn(null,c,v,f),c=c.child),c;case 16:p=c.elementType;e:{switch(Pu(o,c),o=c.pendingProps,v=p._init,p=v(p._payload),c.type=p,v=c.tag=nO(p),o=ci(p,o),v){case 0:c=up(null,c,p,o,f);break e;case 1:c=zb(null,c,p,o,f);break e;case 11:c=jb(null,c,p,o,f);break e;case 14:c=Fb(null,c,p,ci(p.type,o),f);break e}throw Error(n(306,p,""))}return c;case 0:return p=c.type,v=c.pendingProps,v=c.elementType===p?v:ci(p,v),up(o,c,p,v,f);case 1:return p=c.type,v=c.pendingProps,v=c.elementType===p?v:ci(p,v),zb(o,c,p,v,f);case 3:e:{if(Wb(c),o===null)throw Error(n(387));p=c.pendingProps,b=c.memoizedState,v=b.element,rb(o,c),yu(c,p,null,f);var _=c.memoizedState;if(p=_.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},c.updateQueue.baseState=b,c.memoizedState=b,c.flags&256){v=Io(Error(n(423)),c),c=qb(o,c,p,f,v);break e}else if(p!==v){v=Io(Error(n(424)),c),c=qb(o,c,p,f,v);break e}else for(Fn=Mr(c.stateNode.containerInfo.firstChild),jn=c,mt=!0,ai=null,f=nb(c,null,p,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(_o(),p===v){c=lr(o,c,f);break e}mn(o,c,p,f)}c=c.child}return c;case 5:return ab(c),o===null&&Vh(c),p=c.type,v=c.pendingProps,b=o!==null?o.memoizedProps:null,_=v.children,Nh(p,v)?_=null:b!==null&&Nh(p,b)&&(c.flags|=32),Bb(o,c),mn(o,c,_,f),c.child;case 6:return o===null&&Vh(c),null;case 13:return Hb(o,c,f);case 4:return Gh(c,c.stateNode.containerInfo),p=c.pendingProps,o===null?c.child=Ro(c,null,p,f):mn(o,c,p,f),c.child;case 11:return p=c.type,v=c.pendingProps,v=c.elementType===p?v:ci(p,v),jb(o,c,p,v,f);case 7:return mn(o,c,c.pendingProps,f),c.child;case 8:return mn(o,c,c.pendingProps.children,f),c.child;case 12:return mn(o,c,c.pendingProps.children,f),c.child;case 10:e:{if(p=c.type._context,v=c.pendingProps,b=c.memoizedProps,_=v.value,lt(mu,p._currentValue),p._currentValue=_,b!==null)if(oi(b.value,_)){if(b.children===v.children&&!En.current){c=lr(o,c,f);break e}}else for(b=c.child,b!==null&&(b.return=c);b!==null;){var O=b.dependencies;if(O!==null){_=b.child;for(var L=O.firstContext;L!==null;){if(L.context===p){if(b.tag===1){L=cr(-1,f&-f),L.tag=2;var G=b.updateQueue;if(G!==null){G=G.shared;var se=G.pending;se===null?L.next=L:(L.next=se.next,se.next=L),G.pending=L}}b.lanes|=f,L=b.alternate,L!==null&&(L.lanes|=f),Hh(b.return,f,c),O.lanes|=f;break}L=L.next}}else if(b.tag===10)_=b.type===c.type?null:b.child;else if(b.tag===18){if(_=b.return,_===null)throw Error(n(341));_.lanes|=f,O=_.alternate,O!==null&&(O.lanes|=f),Hh(_,f,c),_=b.sibling}else _=b.child;if(_!==null)_.return=b;else for(_=b;_!==null;){if(_===c){_=null;break}if(b=_.sibling,b!==null){b.return=_.return,_=b;break}_=_.return}b=_}mn(o,c,v.children,f),c=c.child}return c;case 9:return v=c.type,p=c.pendingProps.children,No(c,f),v=Gn(v),p=p(v),c.flags|=1,mn(o,c,p,f),c.child;case 14:return p=c.type,v=ci(p,c.pendingProps),v=ci(p.type,v),Fb(o,c,p,v,f);case 15:return Ub(o,c,c.type,c.pendingProps,f);case 17:return p=c.type,v=c.pendingProps,v=c.elementType===p?v:ci(p,v),Pu(o,c),c.tag=1,Pn(p)?(o=!0,lu(c)):o=!1,No(c,f),Ab(c,p,v),ap(c,p,v,f),dp(null,c,p,!0,o,f);case 19:return Kb(o,c,f);case 22:return Vb(o,c,f)}throw Error(n(156,c.tag))};function vx(o,c){return Qy(o,c)}function tO(o,c,f,p){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(o,c,f,p){return new tO(o,c,f,p)}function Np(o){return o=o.prototype,!(!o||!o.isReactComponent)}function nO(o){if(typeof o=="function")return Np(o)?1:0;if(o!=null){if(o=o.$$typeof,o===H)return 11;if(o===Ce)return 14}return 2}function $r(o,c){var f=o.alternate;return f===null?(f=Jn(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&14680064,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f}function Fu(o,c,f,p,v,b){var _=2;if(p=o,typeof o=="function")Np(o)&&(_=1);else if(typeof o=="string")_=5;else e:switch(o){case D:return Ls(f.children,v,b,c);case j:_=8,v|=8;break;case V:return o=Jn(12,f,c,v|2),o.elementType=V,o.lanes=b,o;case ie:return o=Jn(13,f,c,v),o.elementType=ie,o.lanes=b,o;case ee:return o=Jn(19,f,c,v),o.elementType=ee,o.lanes=b,o;case he:return Uu(f,v,b,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case B:_=10;break e;case W:_=9;break e;case H:_=11;break e;case Ce:_=14;break e;case ve:_=16,p=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return c=Jn(_,f,c,v),c.elementType=o,c.type=p,c.lanes=b,c}function Ls(o,c,f,p){return o=Jn(7,o,p,c),o.lanes=f,o}function Uu(o,c,f,p){return o=Jn(22,o,p,c),o.elementType=he,o.lanes=f,o.stateNode={isHidden:!1},o}function Op(o,c,f){return o=Jn(6,o,null,c),o.lanes=f,o}function Ip(o,c,f){return c=Jn(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function iO(o,c,f,p,v){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oh(0),this.expirationTimes=oh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oh(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Dp(o,c,f,p,v,b,_,O,L){return o=new iO(o,c,f,O,L),c===1?(c=1,b===!0&&(c|=8)):c=0,b=Jn(3,null,null,c),o.current=b,b.stateNode=o,b.memoizedState={element:p,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kh(b),o}function rO(o,c,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:p==null?null:""+p,children:o,containerInfo:c,implementation:f}}function yx(o){if(!o)return jr;o=o._reactInternals;e:{if(Ts(o)!==o||o.tag!==1)throw Error(n(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Pn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(o.tag===1){var f=o.type;if(Pn(f))return $0(o,f,c)}return c}function bx(o,c,f,p,v,b,_,O,L){return o=Dp(f,p,!0,o,v,b,_,O,L),o.context=yx(null),f=o.current,p=gn(),v=qr(f),b=cr(p,v),b.callback=c??null,Vr(f,b,v),o.current.lanes=v,Ba(o,v,p),An(o,p),o}function Vu(o,c,f,p){var v=c.current,b=gn(),_=qr(v);return f=yx(f),c.context===null?c.context=f:c.pendingContext=f,c=cr(b,_),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=Vr(v,c,_),o!==null&&(di(o,v,_,b),vu(o,v,_)),_}function Bu(o){return o=o.current,o.child?(o.child.tag===5,o.child.stateNode):null}function xx(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function Mp(o,c){xx(o,c),(o=o.alternate)&&xx(o,c)}function sO(){return null}var kx=typeof reportError=="function"?reportError:function(o){console.error(o)};function Lp(o){this._internalRoot=o}zu.prototype.render=Lp.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));Vu(o,c,null,null)},zu.prototype.unmount=Lp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Is(function(){Vu(null,o,null,null)}),c[ir]=null}};function zu(o){this._internalRoot=o}zu.prototype.unstable_scheduleHydration=function(o){if(o){var c=r0();o={blockedOn:null,target:o,priority:c};for(var f=0;f<Or.length&&c!==0&&c<Or[f].priority;f++);Or.splice(f,0,o),f===0&&a0(o)}};function jp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Wu(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Sx(){}function oO(o,c,f,p,v){if(v){if(typeof p=="function"){var b=p;p=function(){var G=Bu(_);b.call(G)}}var _=bx(c,p,o,0,null,!1,!1,"",Sx);return o._reactRootContainer=_,o[ir]=_.current,tc(o.nodeType===8?o.parentNode:o),Is(),_}for(;v=o.lastChild;)o.removeChild(v);if(typeof p=="function"){var O=p;p=function(){var G=Bu(L);O.call(G)}}var L=Dp(o,0,!1,null,null,!1,!1,"",Sx);return o._reactRootContainer=L,o[ir]=L.current,tc(o.nodeType===8?o.parentNode:o),Is(function(){Vu(c,L,f,p)}),L}function qu(o,c,f,p,v){var b=f._reactRootContainer;if(b){var _=b;if(typeof v=="function"){var O=v;v=function(){var L=Bu(_);O.call(L)}}Vu(c,_,o,v)}else _=oO(f,c,o,v,p);return Bu(_)}n0=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var f=Va(c.pendingLanes);f!==0&&(ah(c,f|1),An(c,Nt()),(et&6)===0&&(Lo=Nt()+500,Fr()))}break;case 13:Is(function(){var p=ar(o,1);if(p!==null){var v=gn();di(p,o,1,v)}}),Mp(o,1)}},ch=function(o){if(o.tag===13){var c=ar(o,134217728);if(c!==null){var f=gn();di(c,o,134217728,f)}Mp(o,134217728)}},i0=function(o){if(o.tag===13){var c=qr(o),f=ar(o,c);if(f!==null){var p=gn();di(f,o,c,p)}Mp(o,c)}},r0=function(){return it},s0=function(o,c){var f=it;try{return it=o,c()}finally{it=f}},eh=function(o,c,f){switch(c){case"input":if(ao(o,f),c=f.name,f.type==="radio"&&c!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var p=f[c];if(p!==o&&p.form===o.form){var v=au(p);if(!v)throw Error(n(90));ws(p),ao(p,v)}}}break;case"textarea":J(o,f);break;case"select":c=f.value,c!=null&&nr(o,!!f.multiple,c,!1)}},Wy=_p,qy=Is;var aO={usingClientEntryPoint:!1,Events:[rc,wo,au,By,zy,_p]},yc={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cO={bundleType:yc.bundleType,version:yc.version,rendererPackageName:yc.rendererPackageName,rendererConfig:yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Gy(o),o===null?null:o.stateNode},findFiberByHostInstance:yc.findFiberByHostInstance||sO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{zl=Hu.inject(cO),Ii=Hu}catch{}}return Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aO,Nn.createPortal=function(o,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jp(c))throw Error(n(200));return rO(o,c,null,f)},Nn.createRoot=function(o,c){if(!jp(o))throw Error(n(299));var f=!1,p="",v=kx;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onRecoverableError!==void 0&&(v=c.onRecoverableError)),c=Dp(o,1,!1,null,null,f,!1,p,v),o[ir]=c.current,tc(o.nodeType===8?o.parentNode:o),new Lp(c)},Nn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=Gy(c),o=o===null?null:o.stateNode,o},Nn.flushSync=function(o){return Is(o)},Nn.hydrate=function(o,c,f){if(!Wu(c))throw Error(n(200));return qu(null,o,c,!0,f)},Nn.hydrateRoot=function(o,c,f){if(!jp(o))throw Error(n(405));var p=f!=null&&f.hydratedSources||null,v=!1,b="",_=kx;if(f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onRecoverableError!==void 0&&(_=f.onRecoverableError)),c=bx(c,null,o,1,f??null,v,!1,b,_),o[ir]=c.current,tc(o),p)for(o=0;o<p.length;o++)f=p[o],v=f._getVersion,v=v(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,v]:c.mutableSourceEagerHydrationData.push(f,v);return new zu(c)},Nn.render=function(o,c,f){if(!Wu(c))throw Error(n(200));return qu(null,o,c,!1,f)},Nn.unmountComponentAtNode=function(o){if(!Wu(o))throw Error(n(40));return o._reactRootContainer?(Is(function(){qu(null,null,o,!1,function(){o._reactRootContainer=null,o[ir]=null})}),!0):!1},Nn.unstable_batchedUpdates=_p,Nn.unstable_renderSubtreeIntoContainer=function(o,c,f,p){if(!Wu(f))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return qu(o,c,f,!1,p)},Nn.version="18.3.1-next-f1338f8080-20240426",Nn}var Ax;function ST(){if(Ax)return Vp.exports;Ax=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Vp.exports=gO(),Vp.exports}var Nx;function vO(){if(Nx)return $u;Nx=1;var t=ST();return $u.createRoot=t.createRoot,$u.hydrateRoot=t.hydrateRoot,$u}var yO=vO();function bO(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,i,r,s,a=[],l="",u=t.split("/");for(u[0]||u.shift();r=u.shift();)n=r[0],n==="*"?(a.push(n),l+=r[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(i=r.indexOf("?",1),s=r.indexOf(".",1),a.push(r.substring(1,~i?i:~s?s:r.length)),l+=~i&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(l+=(~i?"?":"")+"\\"+r.substring(s))):l+="/"+r;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var P=xf();const qt=kT(P),wT=uO({__proto__:null,default:qt},[P]);var Wp={exports:{}},qp={};var Ox;function xO(){if(Ox)return qp;Ox=1;var t=xf();function e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function l(m,g){var k=g(),T=i({inst:{value:k,getSnapshot:g}}),x=T[0].inst,C=T[1];return s(function(){x.value=k,x.getSnapshot=g,u(x)&&C({inst:x})},[m,k,g]),r(function(){return u(x)&&C({inst:x}),m(function(){u(x)&&C({inst:x})})},[m]),a(k),k}function u(m){var g=m.getSnapshot;m=m.value;try{var k=g();return!n(m,k)}catch{return!0}}function d(m,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return qp.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,qp}var Ix;function kO(){return Ix||(Ix=1,Wp.exports=xO()),Wp.exports}var SO=kO();const wO=wT.useInsertionEffect,TO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CO=TO?P.useLayoutEffect:P.useEffect,EO=wO||CO,TT=t=>{const e=P.useRef([t,(...n)=>e[0](...n)]).current;return EO(()=>{e[0]=t}),e[1]},PO="popstate",ev="pushState",tv="replaceState",_O="hashchange",Dx=[PO,ev,tv,_O],RO=t=>{for(const e of Dx)addEventListener(e,t);return()=>{for(const e of Dx)removeEventListener(e,t)}},CT=(t,e)=>SO.useSyncExternalStore(RO,t,e),AO=()=>location.search,NO=({ssrSearch:t=""}={})=>CT(AO,()=>t),Mx=()=>location.pathname,OO=({ssrPath:t}={})=>CT(Mx,t?()=>t:Mx),IO=(t,{replace:e=!1,state:n=null}={})=>history[e?tv:ev](n,"",t),DO=(t={})=>[OO(t),IO],Lx=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Lx]>"u"){for(const t of[ev,tv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),i=new Event(t);return i.arguments=arguments,dispatchEvent(i),n}}Object.defineProperty(window,Lx,{value:!0})}const MO=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",ET=(t="")=>t==="/"?"":t,LO=(t,e)=>t[0]==="~"?t.slice(1):ET(e)+t,jO=(t="",e)=>MO(jx(ET(t)),jx(e)),jx=t=>{try{return decodeURI(t)}catch{return t}},PT={hook:DO,searchHook:NO,parser:bO,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},_T=P.createContext(PT),Ea=()=>P.useContext(_T),RT={},AT=P.createContext(RT),FO=()=>P.useContext(AT),kf=t=>{const[e,n]=t.hook(t);return[jO(t.base,e),TT((i,r)=>n(LO(i,t.base),r))]},NT=()=>kf(Ea()),nv=(t,e,n,i)=>{const{pattern:r,keys:s}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",i),a=r.exec(n)||[],[l,...u]=a;return l!==void 0?[!0,(()=>{const d=s!==!1?Object.fromEntries(s.map((m,g)=>[m,u[g]])):a.groups;let h={...u};return d&&Object.assign(h,d),h})(),...i?[l]:[]]:[!1,null]},UO=t=>nv(Ea().parser,t,NT()[0]),VO=({children:t,...e})=>{const n=Ea(),i=e.hook?PT:n;let r=i;const[s,a]=e.ssrPath?.split("?")??[];a&&(e.ssrSearch=a,e.ssrPath=s),e.hrefs=e.hrefs??e.hook?.hrefs;let l=P.useRef({}),u=l.current,d=u;for(let h in i){const m=h==="base"?i[h]+(e[h]||""):e[h]||i[h];u===d&&m!==d[h]&&(l.current=d={...d}),d[h]=m,m!==i[h]&&(r=d)}return P.createElement(_T.Provider,{value:r,children:t})},Fx=({children:t,component:e},n)=>e?P.createElement(e,{params:n}):typeof t=="function"?t(n):t,BO=t=>{let e=P.useRef(RT),n=e.current;for(const i in t)t[i]!==n[i]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Fo=({path:t,nest:e,match:n,...i})=>{const r=Ea(),[s]=kf(r),[a,l,u]=n??nv(r.parser,t,s,e),d=BO({...FO(),...l});if(!a)return null;const h=u?P.createElement(VO,{base:u},Fx(i,d)):Fx(i,d);return P.createElement(AT.Provider,{value:d,children:h})},fn=P.forwardRef((t,e)=>{const n=Ea(),[i,r]=kf(n),{to:s="",href:a=s,onClick:l,asChild:u,children:d,className:h,replace:m,state:g,...k}=t,T=TT(C=>{C.ctrlKey||C.metaKey||C.altKey||C.shiftKey||C.button!==0||(l?.(C),C.defaultPrevented||(C.preventDefault(),r(a,t)))}),x=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return u&&P.isValidElement(d)?P.cloneElement(d,{onClick:T,href:x}):P.createElement("a",{...k,onClick:T,href:x,className:h?.call?h(i===a):h,children:d,ref:e})}),OT=t=>Array.isArray(t)?t.flatMap(e=>OT(e&&e.type===P.Fragment?e.props.children:e)):[t],zO=({children:t,location:e})=>{const n=Ea(),[i]=kf(n);for(const r of OT(t)){let s=0;if(P.isValidElement(r)&&(s=nv(n.parser,r.props.path,e||i,r.props.nest))[0])return P.cloneElement(r,{match:s})}return null};var El=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Sf=typeof window>"u"||"Deno"in globalThis;function pi(){}function WO(t,e){return typeof t=="function"?t(e):t}function qO(t){return typeof t=="number"&&t>=0&&t!==1/0}function HO(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ux(t,e){return typeof t=="function"?t(e):t}function $O(t,e){return typeof t=="function"?t(e):t}function Vx(t,e){const{type:n="all",exact:i,fetchStatus:r,predicate:s,queryKey:a,stale:l}=t;if(a){if(i){if(e.queryHash!==iv(a,e.options))return!1}else if(!Jc(e.queryKey,a))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||r&&r!==e.state.fetchStatus||s&&!s(e))}function Bx(t,e){const{exact:n,status:i,predicate:r,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Gs(e.options.mutationKey)!==Gs(s))return!1}else if(!Jc(e.options.mutationKey,s))return!1}return!(i&&e.state.status!==i||r&&!r(e))}function iv(t,e){return(e?.queryKeyHashFn||Gs)(t)}function Gs(t){return JSON.stringify(t,(e,n)=>Wm(n)?Object.keys(n).sort().reduce((i,r)=>(i[r]=n[r],i),{}):n)}function Jc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Jc(t[n],e[n])):!1}function IT(t,e){if(t===e)return t;const n=zx(t)&&zx(e);if(n||Wm(t)&&Wm(e)){const i=n?t:Object.keys(t),r=i.length,s=n?e:Object.keys(e),a=s.length,l=n?[]:{};let u=0;for(let d=0;d<a;d++){const h=n?d:s[d];(!n&&i.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=IT(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return r===a&&u===r?t:l}return e}function KO(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function zx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Wm(t){if(!Wx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Wx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Wx(t){return Object.prototype.toString.call(t)==="[object Object]"}function GO(t){return new Promise(e=>{setTimeout(e,t)})}function ZO(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?IT(t,e):e}function QO(t,e,n=0){const i=[...t,e];return n&&i.length>n?i.slice(1):i}function JO(t,e,n=0){const i=[e,...t];return n&&i.length>n?i.slice(0,-1):i}var rv=Symbol();function DT(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===rv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var YO=class extends El{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Sf&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},MT=new YO,XO=class extends El{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Sf&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Md=new XO;function eI(){let t,e;const n=new Promise((r,s)=>{t=r,e=s});n.status="pending",n.catch(()=>{});function i(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{i({status:"fulfilled",value:r}),t(r)},n.reject=r=>{i({status:"rejected",reason:r}),e(r)},n}function tI(t){return Math.min(1e3*2**t,3e4)}function LT(t){return(t??"online")==="online"?Md.isOnline():!0}var jT=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Hp(t){return t instanceof jT}function FT(t){let e=!1,n=0,i=!1,r;const s=eI(),a=x=>{i||(g(new jT(x)),t.abort?.())},l=()=>{e=!0},u=()=>{e=!1},d=()=>MT.isFocused()&&(t.networkMode==="always"||Md.isOnline())&&t.canRun(),h=()=>LT(t.networkMode)&&t.canRun(),m=x=>{i||(i=!0,t.onSuccess?.(x),r?.(),s.resolve(x))},g=x=>{i||(i=!0,t.onError?.(x),r?.(),s.reject(x))},k=()=>new Promise(x=>{r=C=>{(i||d())&&x(C)},t.onPause?.()}).then(()=>{r=void 0,i||t.onContinue?.()}),T=()=>{if(i)return;let x;const C=n===0?t.initialPromise:void 0;try{x=C??t.fn()}catch(E){x=Promise.reject(E)}Promise.resolve(x).then(m).catch(E=>{if(i)return;const A=t.retry??(Sf?0:3),N=t.retryDelay??tI,w=typeof N=="function"?N(n,E):N,S=A===!0||typeof A=="number"&&n<A||typeof A=="function"&&A(n,E);if(e||!S){g(E);return}n++,t.onFail?.(n,E),GO(w).then(()=>d()?void 0:k()).then(()=>{e?g(E):T()})})};return{promise:s,cancel:a,continue:()=>(r?.(),s),cancelRetry:l,continueRetry:u,canStart:h,start:()=>(h()?T():k().then(T),s)}}function nI(){let t=[],e=0,n=l=>{l()},i=l=>{l()},r=l=>setTimeout(l,0);const s=l=>{e?t.push(l):r(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&r(()=>{i(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||a()}return u},batchCalls:l=>(...u)=>{s(()=>{l(...u)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{i=l},setScheduler:l=>{r=l}}}var nn=nI(),UT=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qO(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Sf?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},iI=class extends UT{#e;#t;#n;#i;#o;#r;constructor(t){super(),this.#r=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=sI(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(t){this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=ZO(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#i?.promise;return this.#i?.cancel(t),e?e.then(pi).catch(pi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>$O(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===rv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!HO(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#i&&(this.#r?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,i=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#r=!0,n.signal)})},r=()=>{const l=DT(this.options,e),u={queryKey:this.queryKey,meta:this.meta};return i(u),this.#r=!1,this.options.persister?this.options.persister(l,u,this):l(u)},s={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:r};i(s),this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#s({type:"fetch",meta:s.fetchOptions?.meta});const a=l=>{Hp(l)&&l.silent||this.#s({type:"error",error:l}),Hp(l)||(this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this)),this.scheduleGc()};return this.#i=FT({initialPromise:e?.initialPromise,fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:l=>{if(l===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(u){a(u);return}this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),this.scheduleGc()},onError:a,onFail:(l,u)=>{this.#s({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#i.start()}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...rI(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return Hp(i)&&i.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),nn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function rI(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:LT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function sI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var oI=class extends El{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const i=e.queryKey,r=e.queryHash??iv(i,e);let s=this.get(r);return s||(s=new iI({cache:this,queryKey:i,queryHash:r,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){nn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Vx(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Vx(t,n)):e}notify(t){nn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){nn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){nn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},aI=class extends UT{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||VT(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=FT({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(i,r)=>{this.#i({type:"failed",failureCount:i,error:r})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#n.canStart();try{if(!e){this.#i({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const r=await this.options.onMutate?.(t);r!==this.state.context&&this.#i({type:"pending",context:r,variables:t,isPaused:n})}const i=await this.#n.start();return await this.#t.config.onSuccess?.(i,t,this.state.context,this),await this.options.onSuccess?.(i,t,this.state.context),await this.#t.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,t,this.state.context),this.#i({type:"success",data:i}),i}catch(i){try{throw await this.#t.config.onError?.(i,t,this.state.context,this),await this.options.onError?.(i,t,this.state.context),await this.#t.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,t,this.state.context),i}finally{this.#i({type:"error",error:i})}}finally{this.#t.runNext(this)}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),nn.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function VT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var cI=class extends El{constructor(t={}){super(),this.config=t,this.#e=new Map,this.#t=Date.now()}#e;#t;build(t,e,n){const i=new aI({mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(e),state:n});return this.add(i),i}add(t){const e=Ku(t),n=this.#e.get(e)??[];n.push(t),this.#e.set(e,n),this.notify({type:"added",mutation:t})}remove(t){const e=Ku(t);if(this.#e.has(e)){const n=this.#e.get(e)?.filter(i=>i!==t);n&&(n.length===0?this.#e.delete(e):this.#e.set(e,n))}this.notify({type:"removed",mutation:t})}canRun(t){const e=this.#e.get(Ku(t))?.find(n=>n.state.status==="pending");return!e||e===t}runNext(t){return this.#e.get(Ku(t))?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){nn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...this.#e.values()].flat()}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Bx(e,n))}findAll(t={}){return this.getAll().filter(e=>Bx(t,e))}notify(t){nn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return nn.batch(()=>Promise.all(t.map(e=>e.continue().catch(pi))))}};function Ku(t){return t.options.scope?.id??String(t.mutationId)}function qx(t){return{onFetch:(e,n)=>{const i=e.options,r=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const d=async()=>{let h=!1;const m=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?h=!0:e.signal.addEventListener("abort",()=>{h=!0}),e.signal)})},g=DT(e.options,e.fetchOptions),k=async(T,x,C)=>{if(h)return Promise.reject();if(x==null&&T.pages.length)return Promise.resolve(T);const E={queryKey:e.queryKey,pageParam:x,direction:C?"backward":"forward",meta:e.options.meta};m(E);const A=await g(E),{maxPages:N}=e.options,w=C?JO:QO;return{pages:w(T.pages,A,N),pageParams:w(T.pageParams,x,N)}};if(r&&s.length){const T=r==="backward",x=T?lI:Hx,C={pages:s,pageParams:a},E=x(i,C);l=await k(C,E,T)}else{const T=t??s.length;do{const x=u===0?a[0]??i.initialPageParam:Hx(i,l);if(u>0&&x==null)break;l=await k(l,x),u++}while(u<T)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function Hx(t,{pages:e,pageParams:n}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,n[i],n):void 0}function lI(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var uI=class{#e;#t;#n;#i;#o;#r;#s;#a;constructor(t={}){this.#e=t.queryCache||new oI,this.#t=t.mutationCache||new cI,this.#n=t.defaultOptions||{},this.#i=new Map,this.#o=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#s=MT.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Md.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),i=this.#e.build(this,n);return t.revalidateIfStale&&i.isStaleByTime(Ux(n.staleTime,i))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const i=n.data;return[e,i]})}setQueryData(t,e,n){const i=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(i.queryHash)?.state.data,a=WO(e,s);if(a!==void 0)return this.#e.build(this,i).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return nn.batch(()=>this.#e.findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;nn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,i={type:"active",...t};return nn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries(i,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},i=nn.batch(()=>this.#e.findAll(t).map(r=>r.cancel(n)));return Promise.all(i).then(pi).catch(pi)}invalidateQueries(t={},e={}){return nn.batch(()=>{if(this.#e.findAll(t).forEach(i=>{i.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:e?.cancelRefetch??!0},i=nn.batch(()=>this.#e.findAll(t).filter(r=>!r.isDisabled()).map(r=>{let s=r.fetch(void 0,n);return n.throwOnError||(s=s.catch(pi)),r.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(i).then(pi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Ux(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(pi).catch(pi)}fetchInfiniteQuery(t){return t.behavior=qx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(pi).catch(pi)}ensureInfiniteQueryData(t){return t.behavior=qx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Md.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#i.set(Gs(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()];let n={};return e.forEach(i=>{Jc(t,i.queryKey)&&(n={...n,...i.defaultOptions})}),n}setMutationDefaults(t,e){this.#o.set(Gs(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#o.values()];let n={};return e.forEach(i=>{Jc(t,i.mutationKey)&&(n={...n,...i.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=iv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===rv&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},dI=class extends El{#e;#t=void 0;#n;#i;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),KO(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Gs(n.mutationKey)!==Gs(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#o(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#o(),this.#r()}mutate(e,n){return this.#i=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#o(){const e=this.#n?.state??VT();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#r(e){nn.batch(()=>{if(this.#i&&this.hasListeners()){const n=this.#t.variables,i=this.#t.context;e?.type==="success"?(this.#i.onSuccess?.(e.data,n,i),this.#i.onSettled?.(e.data,null,n,i)):e?.type==="error"&&(this.#i.onError?.(e.error,n,i),this.#i.onSettled?.(void 0,e.error,n,i))}this.listeners.forEach(n=>{n(this.#t)})})}},BT=P.createContext(void 0),fI=t=>{const e=P.useContext(BT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},hI=({client:t,children:e})=>(P.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),y.jsx(BT.Provider,{value:t,children:e}));function pI(t,e){return typeof t=="function"?t(...e):!!t}function mI(){}function gI(t,e){const n=fI(),[i]=P.useState(()=>new dI(n,t));P.useEffect(()=>{i.setOptions(t)},[i,t]);const r=P.useSyncExternalStore(P.useCallback(a=>i.subscribe(nn.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),s=P.useCallback((a,l)=>{i.mutate(a,l).catch(mI)},[i]);if(r.error&&pI(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:s,mutateAsync:r.mutate}}async function vI(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const yI=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return await vI(n),await n.json()},bI=new uI({defaultOptions:{queries:{queryFn:yI({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),xI=1,kI=1e6;let $p=0;function SI(){return $p=($p+1)%Number.MAX_SAFE_INTEGER,$p.toString()}const Kp=new Map,$x=t=>{if(Kp.has(t))return;const e=setTimeout(()=>{Kp.delete(t),Vc({type:"REMOVE_TOAST",toastId:t})},kI);Kp.set(t,e)},wI=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,xI)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?$x(n):t.toasts.forEach(i=>{$x(i.id)}),{...t,toasts:t.toasts.map(i=>i.id===n||n===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},dd=[];let fd={toasts:[]};function Vc(t){fd=wI(fd,t),dd.forEach(e=>{e(fd)})}function TI({...t}){const e=SI(),n=r=>Vc({type:"UPDATE_TOAST",toast:{...r,id:e}}),i=()=>Vc({type:"DISMISS_TOAST",toastId:e});return Vc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:r=>{r||i()}}}),{id:e,dismiss:i,update:n}}function zT(){const[t,e]=P.useState(fd);return P.useEffect(()=>(dd.push(e),()=>{const n=dd.indexOf(e);n>-1&&dd.splice(n,1)}),[t]),{...t,toast:TI,dismiss:n=>Vc({type:"DISMISS_TOAST",toastId:n})}}var wf=ST();const CI=kT(wf);function gt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}function Kx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function WT(...t){return e=>{let n=!1;const i=t.map(r=>{const s=Kx(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():Kx(t[r],null)}}}}function Sn(...t){return P.useCallback(WT(...t),t)}function EI(t,e){const n=P.createContext(e),i=s=>{const{children:a,...l}=s,u=P.useMemo(()=>l,Object.values(l));return y.jsx(n.Provider,{value:u,children:a})};i.displayName=t+"Provider";function r(s){const a=P.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[i,r]}function Pl(t,e=[]){let n=[];function i(s,a){const l=P.createContext(a),u=n.length;n=[...n,a];const d=m=>{const{scope:g,children:k,...T}=m,x=g?.[t]?.[u]||l,C=P.useMemo(()=>T,Object.values(T));return y.jsx(x.Provider,{value:C,children:k})};d.displayName=s+"Provider";function h(m,g){const k=g?.[t]?.[u]||l,T=P.useContext(k);if(T)return T;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[d,h]}const r=()=>{const s=n.map(a=>P.createContext(a));return function(l){const u=l?.[t]||s;return P.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return r.scopeName=t,[i,PI(r,...e)]}function PI(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const a=i.reduce((l,{useScope:u,scopeName:d})=>{const m=u(s)[`__scope${d}`];return{...l,...m}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Yc(t){const e=RI(t),n=P.forwardRef((i,r)=>{const{children:s,...a}=i,l=P.Children.toArray(s),u=l.find(NI);if(u){const d=u.props.children,h=l.map(m=>m===u?P.Children.count(d)>1?P.Children.only(null):P.isValidElement(d)?d.props.children:null:m);return y.jsx(e,{...a,ref:r,children:P.isValidElement(d)?P.cloneElement(d,void 0,h):null})}return y.jsx(e,{...a,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}var _I=Yc("Slot");function RI(t){const e=P.forwardRef((n,i)=>{const{children:r,...s}=n;if(P.isValidElement(r)){const a=II(r),l=OI(s,r.props);return r.type!==P.Fragment&&(l.ref=i?WT(i,a):a),P.cloneElement(r,l)}return P.Children.count(r)>1?P.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var qT=Symbol("radix.slottable");function AI(t){const e=({children:n})=>y.jsx(y.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=qT,e}function NI(t){return P.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===qT}function OI(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...l)=>{s(...l),r(...l)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function II(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function DI(t){const e=t+"CollectionProvider",[n,i]=Pl(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:C,children:E}=x,A=qt.useRef(null),N=qt.useRef(new Map).current;return y.jsx(r,{scope:C,itemMap:N,collectionRef:A,children:E})};a.displayName=e;const l=t+"CollectionSlot",u=Yc(l),d=qt.forwardRef((x,C)=>{const{scope:E,children:A}=x,N=s(l,E),w=Sn(C,N.collectionRef);return y.jsx(u,{ref:w,children:A})});d.displayName=l;const h=t+"CollectionItemSlot",m="data-radix-collection-item",g=Yc(h),k=qt.forwardRef((x,C)=>{const{scope:E,children:A,...N}=x,w=qt.useRef(null),S=Sn(C,w),R=s(h,E);return qt.useEffect(()=>(R.itemMap.set(w,{ref:w,...N}),()=>{R.itemMap.delete(w)})),y.jsx(g,{[m]:"",ref:S,children:A})});k.displayName=h;function T(x){const C=s(t+"CollectionConsumer",x);return qt.useCallback(()=>{const A=C.collectionRef.current;if(!A)return[];const N=Array.from(A.querySelectorAll(`[${m}]`));return Array.from(C.itemMap.values()).sort((R,D)=>N.indexOf(R.ref.current)-N.indexOf(D.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:a,Slot:d,ItemSlot:k},T,i]}var MI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Lt=MI.reduce((t,e)=>{const n=Yc(`Primitive.${e}`),i=P.forwardRef((r,s)=>{const{asChild:a,...l}=r,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(u,{...l,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function HT(t,e){t&&wf.flushSync(()=>t.dispatchEvent(e))}function ii(t){const e=P.useRef(t);return P.useEffect(()=>{e.current=t}),P.useMemo(()=>(...n)=>e.current?.(...n),[])}function LI(t,e=globalThis?.document){const n=ii(t);P.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var jI="DismissableLayer",qm="dismissableLayer.update",FI="dismissableLayer.pointerDownOutside",UI="dismissableLayer.focusOutside",Gx,$T=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tf=P.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:a,onDismiss:l,...u}=t,d=P.useContext($T),[h,m]=P.useState(null),g=h?.ownerDocument??globalThis?.document,[,k]=P.useState({}),T=Sn(e,D=>m(D)),x=Array.from(d.layers),[C]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),E=x.indexOf(C),A=h?x.indexOf(h):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,w=A>=E,S=BI(D=>{const j=D.target,V=[...d.branches].some(B=>B.contains(j));!w||V||(r?.(D),a?.(D),D.defaultPrevented||l?.())},g),R=zI(D=>{const j=D.target;[...d.branches].some(B=>B.contains(j))||(s?.(D),a?.(D),D.defaultPrevented||l?.())},g);return LI(D=>{A===d.layers.size-1&&(i?.(D),!D.defaultPrevented&&l&&(D.preventDefault(),l()))},g),P.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Gx=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),Zx(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Gx)}},[h,g,n,d]),P.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),Zx())},[h,d]),P.useEffect(()=>{const D=()=>k({});return document.addEventListener(qm,D),()=>document.removeEventListener(qm,D)},[]),y.jsx(Lt.div,{...u,ref:T,style:{pointerEvents:N?w?"auto":"none":void 0,...t.style},onFocusCapture:gt(t.onFocusCapture,R.onFocusCapture),onBlurCapture:gt(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:gt(t.onPointerDownCapture,S.onPointerDownCapture)})});Tf.displayName=jI;var VI="DismissableLayerBranch",KT=P.forwardRef((t,e)=>{const n=P.useContext($T),i=P.useRef(null),r=Sn(e,i);return P.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),y.jsx(Lt.div,{...t,ref:r})});KT.displayName=VI;function BI(t,e=globalThis?.document){const n=ii(t),i=P.useRef(!1),r=P.useRef(()=>{});return P.useEffect(()=>{const s=l=>{if(l.target&&!i.current){let u=function(){GT(FI,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=u,e.addEventListener("click",r.current,{once:!0})):u()}else e.removeEventListener("click",r.current);i.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function zI(t,e=globalThis?.document){const n=ii(t),i=P.useRef(!1);return P.useEffect(()=>{const r=s=>{s.target&&!i.current&&GT(UI,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Zx(){const t=new CustomEvent(qm);document.dispatchEvent(t)}function GT(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?HT(r,s):r.dispatchEvent(s)}var WI=Tf,qI=KT,as=globalThis?.document?P.useLayoutEffect:()=>{},HI="Portal",sv=P.forwardRef((t,e)=>{const{container:n,...i}=t,[r,s]=P.useState(!1);as(()=>s(!0),[]);const a=n||r&&globalThis?.document?.body;return a?CI.createPortal(y.jsx(Lt.div,{...i,ref:e}),a):null});sv.displayName=HI;function $I(t,e){return P.useReducer((n,i)=>e[n][i]??n,t)}var Pa=t=>{const{present:e,children:n}=t,i=KI(e),r=typeof n=="function"?n({present:i.isPresent}):P.Children.only(n),s=Sn(i.ref,GI(r));return typeof n=="function"||i.isPresent?P.cloneElement(r,{ref:s}):null};Pa.displayName="Presence";function KI(t){const[e,n]=P.useState(),i=P.useRef({}),r=P.useRef(t),s=P.useRef("none"),a=t?"mounted":"unmounted",[l,u]=$I(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const d=Gu(i.current);s.current=l==="mounted"?d:"none"},[l]),as(()=>{const d=i.current,h=r.current;if(h!==t){const g=s.current,k=Gu(d);t?u("MOUNT"):k==="none"||d?.display==="none"?u("UNMOUNT"):u(h&&g!==k?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,u]),as(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,m=k=>{const x=Gu(i.current).includes(k.animationName);if(k.target===e&&x&&(u("ANIMATION_END"),!r.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},g=k=>{k.target===e&&(s.current=Gu(i.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:P.useCallback(d=>{d&&(i.current=getComputedStyle(d)),n(d)},[])}}function Gu(t){return t?.animationName||"none"}function GI(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ZT({prop:t,defaultProp:e,onChange:n=()=>{}}){const[i,r]=ZI({defaultProp:e,onChange:n}),s=t!==void 0,a=s?t:i,l=ii(n),u=P.useCallback(d=>{if(s){const m=typeof d=="function"?d(t):d;m!==t&&l(m)}else r(d)},[s,t,r,l]);return[a,u]}function ZI({defaultProp:t,onChange:e}){const n=P.useState(t),[i]=n,r=P.useRef(i),s=ii(e);return P.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}var QI="VisuallyHidden",Cf=P.forwardRef((t,e)=>y.jsx(Lt.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Cf.displayName=QI;var JI=Cf,ov="ToastProvider",[av,YI,XI]=DI("Toast"),[QT]=Pl("Toast",[XI]),[eD,Ef]=QT(ov),JT=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:a}=t,[l,u]=P.useState(null),[d,h]=P.useState(0),m=P.useRef(!1),g=P.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${ov}\`. Expected non-empty \`string\`.`),y.jsx(av.Provider,{scope:e,children:y.jsx(eD,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:d,viewport:l,onViewportChange:u,onToastAdd:P.useCallback(()=>h(k=>k+1),[]),onToastRemove:P.useCallback(()=>h(k=>k-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:g,children:a})})};JT.displayName=ov;var YT="ToastViewport",tD=["F8"],Hm="toast.viewportPause",$m="toast.viewportResume",XT=P.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=tD,label:r="Notifications ({hotkey})",...s}=t,a=Ef(YT,n),l=YI(n),u=P.useRef(null),d=P.useRef(null),h=P.useRef(null),m=P.useRef(null),g=Sn(e,m,a.onViewportChange),k=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=a.toastCount>0;P.useEffect(()=>{const C=E=>{i.length!==0&&i.every(N=>E[N]||E.code===N)&&m.current?.focus()};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[i]),P.useEffect(()=>{const C=u.current,E=m.current;if(T&&C&&E){const A=()=>{if(!a.isClosePausedRef.current){const R=new CustomEvent(Hm);E.dispatchEvent(R),a.isClosePausedRef.current=!0}},N=()=>{if(a.isClosePausedRef.current){const R=new CustomEvent($m);E.dispatchEvent(R),a.isClosePausedRef.current=!1}},w=R=>{!C.contains(R.relatedTarget)&&N()},S=()=>{C.contains(document.activeElement)||N()};return C.addEventListener("focusin",A),C.addEventListener("focusout",w),C.addEventListener("pointermove",A),C.addEventListener("pointerleave",S),window.addEventListener("blur",A),window.addEventListener("focus",N),()=>{C.removeEventListener("focusin",A),C.removeEventListener("focusout",w),C.removeEventListener("pointermove",A),C.removeEventListener("pointerleave",S),window.removeEventListener("blur",A),window.removeEventListener("focus",N)}}},[T,a.isClosePausedRef]);const x=P.useCallback(({tabbingDirection:C})=>{const A=l().map(N=>{const w=N.ref.current,S=[w,...pD(w)];return C==="forwards"?S:S.reverse()});return(C==="forwards"?A.reverse():A).flat()},[l]);return P.useEffect(()=>{const C=m.current;if(C){const E=A=>{const N=A.altKey||A.ctrlKey||A.metaKey;if(A.key==="Tab"&&!N){const S=document.activeElement,R=A.shiftKey;if(A.target===C&&R){d.current?.focus();return}const V=x({tabbingDirection:R?"backwards":"forwards"}),B=V.findIndex(W=>W===S);Gp(V.slice(B+1))?A.preventDefault():R?d.current?.focus():h.current?.focus()}};return C.addEventListener("keydown",E),()=>C.removeEventListener("keydown",E)}},[l,x]),y.jsxs(qI,{ref:u,role:"region","aria-label":r.replace("{hotkey}",k),tabIndex:-1,style:{pointerEvents:T?void 0:"none"},children:[T&&y.jsx(Km,{ref:d,onFocusFromOutsideViewport:()=>{const C=x({tabbingDirection:"forwards"});Gp(C)}}),y.jsx(av.Slot,{scope:n,children:y.jsx(Lt.ol,{tabIndex:-1,...s,ref:g})}),T&&y.jsx(Km,{ref:h,onFocusFromOutsideViewport:()=>{const C=x({tabbingDirection:"backwards"});Gp(C)}})]})});XT.displayName=YT;var eC="ToastFocusProxy",Km=P.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=Ef(eC,n);return y.jsx(Cf,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:a=>{const l=a.relatedTarget;!s.viewport?.contains(l)&&i()}})});Km.displayName=eC;var Pf="Toast",nD="toast.swipeStart",iD="toast.swipeMove",rD="toast.swipeCancel",sD="toast.swipeEnd",tC=P.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...a}=t,[l=!0,u]=ZT({prop:i,defaultProp:r,onChange:s});return y.jsx(Pa,{present:n||l,children:y.jsx(cD,{open:l,...a,ref:e,onClose:()=>u(!1),onPause:ii(t.onPause),onResume:ii(t.onResume),onSwipeStart:gt(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:gt(t.onSwipeMove,d=>{const{x:h,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:gt(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:gt(t.onSwipeEnd,d=>{const{x:h,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),u(!1)})})})});tC.displayName=Pf;var[oD,aD]=QT(Pf,{onClose(){}}),cD=P.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:a,onEscapeKeyDown:l,onPause:u,onResume:d,onSwipeStart:h,onSwipeMove:m,onSwipeCancel:g,onSwipeEnd:k,...T}=t,x=Ef(Pf,n),[C,E]=P.useState(null),A=Sn(e,ee=>E(ee)),N=P.useRef(null),w=P.useRef(null),S=r||x.duration,R=P.useRef(0),D=P.useRef(S),j=P.useRef(0),{onToastAdd:V,onToastRemove:B}=x,W=ii(()=>{C?.contains(document.activeElement)&&x.viewport?.focus(),a()}),H=P.useCallback(ee=>{!ee||ee===1/0||(window.clearTimeout(j.current),R.current=new Date().getTime(),j.current=window.setTimeout(W,ee))},[W]);P.useEffect(()=>{const ee=x.viewport;if(ee){const Ce=()=>{H(D.current),d?.()},ve=()=>{const he=new Date().getTime()-R.current;D.current=D.current-he,window.clearTimeout(j.current),u?.()};return ee.addEventListener(Hm,ve),ee.addEventListener($m,Ce),()=>{ee.removeEventListener(Hm,ve),ee.removeEventListener($m,Ce)}}},[x.viewport,S,u,d,H]),P.useEffect(()=>{s&&!x.isClosePausedRef.current&&H(S)},[s,S,x.isClosePausedRef,H]),P.useEffect(()=>(V(),()=>B()),[V,B]);const ie=P.useMemo(()=>C?cC(C):null,[C]);return x.viewport?y.jsxs(y.Fragment,{children:[ie&&y.jsx(lD,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:ie}),y.jsx(oD,{scope:n,onClose:W,children:wf.createPortal(y.jsx(av.ItemSlot,{scope:n,children:y.jsx(WI,{asChild:!0,onEscapeKeyDown:gt(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||W(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(Lt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":x.swipeDirection,...T,ref:A,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:gt(t.onKeyDown,ee=>{ee.key==="Escape"&&(l?.(ee.nativeEvent),ee.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,W()))}),onPointerDown:gt(t.onPointerDown,ee=>{ee.button===0&&(N.current={x:ee.clientX,y:ee.clientY})}),onPointerMove:gt(t.onPointerMove,ee=>{if(!N.current)return;const Ce=ee.clientX-N.current.x,ve=ee.clientY-N.current.y,he=!!w.current,Z=["left","right"].includes(x.swipeDirection),le=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,oe=Z?le(0,Ce):0,F=Z?0:le(0,ve),X=ee.pointerType==="touch"?10:2,Re={x:oe,y:F},Me={originalEvent:ee,delta:Re};he?(w.current=Re,Zu(iD,m,Me,{discrete:!1})):Qx(Re,x.swipeDirection,X)?(w.current=Re,Zu(nD,h,Me,{discrete:!1}),ee.target.setPointerCapture(ee.pointerId)):(Math.abs(Ce)>X||Math.abs(ve)>X)&&(N.current=null)}),onPointerUp:gt(t.onPointerUp,ee=>{const Ce=w.current,ve=ee.target;if(ve.hasPointerCapture(ee.pointerId)&&ve.releasePointerCapture(ee.pointerId),w.current=null,N.current=null,Ce){const he=ee.currentTarget,Z={originalEvent:ee,delta:Ce};Qx(Ce,x.swipeDirection,x.swipeThreshold)?Zu(sD,k,Z,{discrete:!0}):Zu(rD,g,Z,{discrete:!0}),he.addEventListener("click",le=>le.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),lD=t=>{const{__scopeToast:e,children:n,...i}=t,r=Ef(Pf,e),[s,a]=P.useState(!1),[l,u]=P.useState(!1);return fD(()=>a(!0)),P.useEffect(()=>{const d=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:y.jsx(sv,{asChild:!0,children:y.jsx(Cf,{...i,children:s&&y.jsxs(y.Fragment,{children:[r.label," ",n]})})})},uD="ToastTitle",nC=P.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return y.jsx(Lt.div,{...i,ref:e})});nC.displayName=uD;var dD="ToastDescription",iC=P.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return y.jsx(Lt.div,{...i,ref:e})});iC.displayName=dD;var rC="ToastAction",sC=P.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?y.jsx(aC,{altText:n,asChild:!0,children:y.jsx(cv,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${rC}\`. Expected non-empty \`string\`.`),null)});sC.displayName=rC;var oC="ToastClose",cv=P.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=aD(oC,n);return y.jsx(aC,{asChild:!0,children:y.jsx(Lt.button,{type:"button",...i,ref:e,onClick:gt(t.onClick,r.onClose)})})});cv.displayName=oC;var aC=P.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return y.jsx(Lt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function cC(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),hD(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const a=i.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...cC(i))}}),e}function Zu(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?HT(r,s):r.dispatchEvent(s)}var Qx=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function fD(t=()=>{}){const e=ii(t);as(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function hD(t){return t.nodeType===t.ELEMENT_NODE}function pD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Gp(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var mD=JT,lC=XT,uC=tC,dC=nC,fC=iC,hC=sC,pC=cv;function mC(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=mC(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function gC(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=mC(t))&&(i&&(i+=" "),i+=e);return i}const Jx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Yx=gC,lv=(t,e)=>n=>{var i;if(e?.variants==null)return Yx(t,n?.class,n?.className);const{variants:r,defaultVariants:s}=e,a=Object.keys(r).map(d=>{const h=n?.[d],m=s?.[d];if(h===null)return null;const g=Jx(h)||Jx(m);return r[d][g]}),l=n&&Object.entries(n).reduce((d,h)=>{let[m,g]=h;return g===void 0||(d[m]=g),d},{}),u=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((d,h)=>{let{class:m,className:g,...k}=h;return Object.entries(k).every(T=>{let[x,C]=T;return Array.isArray(C)?C.includes({...s,...l}[x]):{...s,...l}[x]===C})?[...d,m,g]:d},[]);return Yx(t,a,u,n?.class,n?.className)};const gD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vC=(...t)=>t.filter((e,n,i)=>!!e&&i.indexOf(e)===n).join(" ");var vD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yD=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...l},u)=>P.createElement("svg",{ref:u,...vD,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:vC("lucide",r),...l},[...a.map(([d,h])=>P.createElement(d,h)),...Array.isArray(s)?s:[s]]));const rt=(t,e)=>{const n=P.forwardRef(({className:i,...r},s)=>P.createElement(yD,{ref:s,iconNode:e,className:vC(`lucide-${gD(t)}`,i),...r}));return n.displayName=`${t}`,n};const bD=rt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const yC=rt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Xx=rt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const xD=rt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const bC=rt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const kD=rt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const js=rt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const SD=rt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const wD=rt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Gm=rt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const TD=rt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const CD=rt("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);const ED=rt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const xC=rt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const PD=rt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const _D=rt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const RD=rt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const kC=rt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const AD=rt("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const uv=rt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const SC=rt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const ND=rt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const OD=rt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const wC=rt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const ID=rt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const dv=rt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const ek=rt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const fv=rt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const DD=rt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),hv="-",MD=t=>{const e=jD(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:a=>{const l=a.split(hv);return l[0]===""&&l.length!==1&&l.shift(),TC(l,e)||LD(a)},getConflictingClassGroupIds:(a,l)=>{const u=n[a]||[];return l&&i[a]?[...u,...i[a]]:u}}},TC=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],i=e.nextPart.get(n),r=i?TC(t.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const s=t.join(hv);return e.validators.find(({validator:a})=>a(s))?.classGroupId},tk=/^\[(.+)\]$/,LD=t=>{if(tk.test(t)){const e=tk.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},jD=t=>{const{theme:e,prefix:n}=t,i={nextPart:new Map,validators:[]};return UD(Object.entries(t.classGroups),n).forEach(([s,a])=>{Zm(a,i,s,e)}),i},Zm=(t,e,n,i)=>{t.forEach(r=>{if(typeof r=="string"){const s=r===""?e:nk(e,r);s.classGroupId=n;return}if(typeof r=="function"){if(FD(r)){Zm(r(i),e,n,i);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([s,a])=>{Zm(a,nk(e,s),n,i)})})},nk=(t,e)=>{let n=t;return e.split(hv).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},FD=t=>t.isThemeGetter,UD=(t,e)=>e?t.map(([n,i])=>{const r=i.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,l])=>[e+a,l])):s);return[n,r]}):t,VD=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,i=new Map;const r=(s,a)=>{n.set(s,a),e++,e>t&&(e=0,i=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=i.get(s))!==void 0)return r(s,a),a},set(s,a){n.has(s)?n.set(s,a):r(s,a)}}},CC="!",BD=t=>{const{separator:e,experimentalParseClassName:n}=t,i=e.length===1,r=e[0],s=e.length,a=l=>{const u=[];let d=0,h=0,m;for(let C=0;C<l.length;C++){let E=l[C];if(d===0){if(E===r&&(i||l.slice(C,C+s)===e)){u.push(l.slice(h,C)),h=C+s;continue}if(E==="/"){m=C;continue}}E==="["?d++:E==="]"&&d--}const g=u.length===0?l:l.substring(h),k=g.startsWith(CC),T=k?g.substring(1):g,x=m&&m>h?m-h:void 0;return{modifiers:u,hasImportantModifier:k,baseClassName:T,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:a}):a},zD=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(i=>{i[0]==="["?(e.push(...n.sort(),i),n=[]):n.push(i)}),e.push(...n.sort()),e},WD=t=>({cache:VD(t.cacheSize),parseClassName:BD(t),...MD(t)}),qD=/\s+/,HD=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:r}=e,s=[],a=t.trim().split(qD);let l="";for(let u=a.length-1;u>=0;u-=1){const d=a[u],{modifiers:h,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:k}=n(d);let T=!!k,x=i(T?g.substring(0,k):g);if(!x){if(!T){l=d+(l.length>0?" "+l:l);continue}if(x=i(g),!x){l=d+(l.length>0?" "+l:l);continue}T=!1}const C=zD(h).join(":"),E=m?C+CC:C,A=E+x;if(s.includes(A))continue;s.push(A);const N=r(x,T);for(let w=0;w<N.length;++w){const S=N[w];s.push(E+S)}l=d+(l.length>0?" "+l:l)}return l};function $D(){let t=0,e,n,i="";for(;t<arguments.length;)(e=arguments[t++])&&(n=EC(e))&&(i&&(i+=" "),i+=n);return i}const EC=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=EC(t[i]))&&(n&&(n+=" "),n+=e);return n};function KD(t,...e){let n,i,r,s=a;function a(u){const d=e.reduce((h,m)=>m(h),t());return n=WD(d),i=n.cache.get,r=n.cache.set,s=l,l(u)}function l(u){const d=i(u);if(d)return d;const h=HD(u,n);return r(u,h),h}return function(){return s($D.apply(null,arguments))}}const ft=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},PC=/^\[(?:([a-z-]+):)?(.+)\]$/i,GD=/^\d+\/\d+$/,ZD=new Set(["px","full","screen"]),QD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,YD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,XD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,dr=t=>na(t)||ZD.has(t)||GD.test(t),Gr=t=>_a(t,"length",cM),na=t=>!!t&&!Number.isNaN(Number(t)),Zp=t=>_a(t,"number",na),xc=t=>!!t&&Number.isInteger(Number(t)),tM=t=>t.endsWith("%")&&na(t.slice(0,-1)),We=t=>PC.test(t),Zr=t=>QD.test(t),nM=new Set(["length","size","percentage"]),iM=t=>_a(t,nM,_C),rM=t=>_a(t,"position",_C),sM=new Set(["image","url"]),oM=t=>_a(t,sM,uM),aM=t=>_a(t,"",lM),kc=()=>!0,_a=(t,e,n)=>{const i=PC.exec(t);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):n(i[2]):!1},cM=t=>JD.test(t)&&!YD.test(t),_C=()=>!1,lM=t=>XD.test(t),uM=t=>eM.test(t),dM=()=>{const t=ft("colors"),e=ft("spacing"),n=ft("blur"),i=ft("brightness"),r=ft("borderColor"),s=ft("borderRadius"),a=ft("borderSpacing"),l=ft("borderWidth"),u=ft("contrast"),d=ft("grayscale"),h=ft("hueRotate"),m=ft("invert"),g=ft("gap"),k=ft("gradientColorStops"),T=ft("gradientColorStopPositions"),x=ft("inset"),C=ft("margin"),E=ft("opacity"),A=ft("padding"),N=ft("saturate"),w=ft("scale"),S=ft("sepia"),R=ft("skew"),D=ft("space"),j=ft("translate"),V=()=>["auto","contain","none"],B=()=>["auto","hidden","clip","visible","scroll"],W=()=>["auto",We,e],H=()=>[We,e],ie=()=>["",dr,Gr],ee=()=>["auto",na,We],Ce=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ve=()=>["solid","dashed","dotted","double","none"],he=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z=()=>["start","end","center","between","around","evenly","stretch"],le=()=>["","0",We],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[na,We];return{cacheSize:500,separator:":",theme:{colors:[kc],spacing:[dr,Gr],blur:["none","",Zr,We],brightness:F(),borderColor:[t],borderRadius:["none","","full",Zr,We],borderSpacing:H(),borderWidth:ie(),contrast:F(),grayscale:le(),hueRotate:F(),invert:le(),gap:H(),gradientColorStops:[t],gradientColorStopPositions:[tM,Gr],inset:W(),margin:W(),opacity:F(),padding:H(),saturate:F(),scale:F(),sepia:le(),skew:F(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",We]}],container:["container"],columns:[{columns:[Zr]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ce(),We]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xc,We]}],basis:[{basis:W()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",We]}],grow:[{grow:le()}],shrink:[{shrink:le()}],order:[{order:["first","last","none",xc,We]}],"grid-cols":[{"grid-cols":[kc]}],"col-start-end":[{col:["auto",{span:["full",xc,We]},We]}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":[kc]}],"row-start-end":[{row:["auto",{span:[xc,We]},We]}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",We]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",We]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...Z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[A]}],px:[{px:[A]}],py:[{py:[A]}],ps:[{ps:[A]}],pe:[{pe:[A]}],pt:[{pt:[A]}],pr:[{pr:[A]}],pb:[{pb:[A]}],pl:[{pl:[A]}],m:[{m:[C]}],mx:[{mx:[C]}],my:[{my:[C]}],ms:[{ms:[C]}],me:[{me:[C]}],mt:[{mt:[C]}],mr:[{mr:[C]}],mb:[{mb:[C]}],ml:[{ml:[C]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",We,e]}],"min-w":[{"min-w":[We,e,"min","max","fit"]}],"max-w":[{"max-w":[We,e,"none","full","min","max","fit","prose",{screen:[Zr]},Zr]}],h:[{h:[We,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[We,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[We,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[We,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Zr,Gr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zp]}],"font-family":[{font:[kc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",We]}],"line-clamp":[{"line-clamp":["none",na,Zp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",dr,We]}],"list-image":[{"list-image":["none",We]}],"list-style-type":[{list:["none","disc","decimal",We]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ve(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",dr,Gr]}],"underline-offset":[{"underline-offset":["auto",dr,We]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",We]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",We]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ce(),rM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",iM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},oM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[k]}],"gradient-via":[{via:[k]}],"gradient-to":[{to:[k]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...ve(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:ve()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...ve()]}],"outline-offset":[{"outline-offset":[dr,We]}],"outline-w":[{outline:[dr,Gr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[dr,Gr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Zr,aM]}],"shadow-color":[{shadow:[kc]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...he(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":he()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[i]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Zr,We]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[N]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",We]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",We]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",We]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[xc,We]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",We]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",We]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",We]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[dr,Gr,Zp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},fM=KD(dM);function Rt(...t){return fM(gC(t))}const hM=mD,RC=P.forwardRef(({className:t,...e},n)=>y.jsx(lC,{ref:n,className:Rt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));RC.displayName=lC.displayName;const pM=lv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),AC=P.forwardRef(({className:t,variant:e,...n},i)=>y.jsx(uC,{ref:i,className:Rt(pM({variant:e}),t),...n}));AC.displayName=uC.displayName;const mM=P.forwardRef(({className:t,...e},n)=>y.jsx(hC,{ref:n,className:Rt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));mM.displayName=hC.displayName;const NC=P.forwardRef(({className:t,...e},n)=>y.jsx(pC,{ref:n,className:Rt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:y.jsx(fv,{className:"h-4 w-4"})}));NC.displayName=pC.displayName;const OC=P.forwardRef(({className:t,...e},n)=>y.jsx(dC,{ref:n,className:Rt("text-sm font-semibold",t),...e}));OC.displayName=dC.displayName;const IC=P.forwardRef(({className:t,...e},n)=>y.jsx(fC,{ref:n,className:Rt("text-sm opacity-90",t),...e}));IC.displayName=fC.displayName;function gM(){const{toasts:t}=zT();return y.jsxs(hM,{children:[t.map(function({id:e,title:n,description:i,action:r,...s}){return y.jsxs(AC,{...s,children:[y.jsxs("div",{className:"grid gap-1",children:[n&&y.jsx(OC,{children:n}),i&&y.jsx(IC,{children:i})]}),r,y.jsx(NC,{})]},e)}),y.jsx(RC,{})]})}var vM=wT[" useId ".trim().toString()]||(()=>{}),yM=0;function Qp(t){const[e,n]=P.useState(vM());return as(()=>{n(i=>i??String(yM++))},[t]),t||(e?`radix-${e}`:"")}const bM=["top","right","bottom","left"],cs=Math.min,Vn=Math.max,Ld=Math.round,Qu=Math.floor,qi=t=>({x:t,y:t}),xM={left:"right",right:"left",bottom:"top",top:"bottom"},kM={start:"end",end:"start"};function Qm(t,e,n){return Vn(t,cs(e,n))}function wr(t,e){return typeof t=="function"?t(e):t}function Tr(t){return t.split("-")[0]}function Ra(t){return t.split("-")[1]}function pv(t){return t==="x"?"y":"x"}function mv(t){return t==="y"?"height":"width"}const SM=new Set(["top","bottom"]);function zi(t){return SM.has(Tr(t))?"y":"x"}function gv(t){return pv(zi(t))}function wM(t,e,n){n===void 0&&(n=!1);const i=Ra(t),r=gv(t),s=mv(r);let a=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=jd(a)),[a,jd(a)]}function TM(t){const e=jd(t);return[Jm(t),e,Jm(e)]}function Jm(t){return t.replace(/start|end/g,e=>kM[e])}const ik=["left","right"],rk=["right","left"],CM=["top","bottom"],EM=["bottom","top"];function PM(t,e,n){switch(t){case"top":case"bottom":return n?e?rk:ik:e?ik:rk;case"left":case"right":return e?CM:EM;default:return[]}}function _M(t,e,n,i){const r=Ra(t);let s=PM(Tr(t),n==="start",i);return r&&(s=s.map(a=>a+"-"+r),e&&(s=s.concat(s.map(Jm)))),s}function jd(t){return t.replace(/left|right|bottom|top/g,e=>xM[e])}function RM(t){return{top:0,right:0,bottom:0,left:0,...t}}function DC(t){return typeof t!="number"?RM(t):{top:t,right:t,bottom:t,left:t}}function Fd(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function sk(t,e,n){let{reference:i,floating:r}=t;const s=zi(e),a=gv(e),l=mv(a),u=Tr(e),d=s==="y",h=i.x+i.width/2-r.width/2,m=i.y+i.height/2-r.height/2,g=i[l]/2-r[l]/2;let k;switch(u){case"top":k={x:h,y:i.y-r.height};break;case"bottom":k={x:h,y:i.y+i.height};break;case"right":k={x:i.x+i.width,y:m};break;case"left":k={x:i.x-r.width,y:m};break;default:k={x:i.x,y:i.y}}switch(Ra(e)){case"start":k[a]-=g*(n&&d?-1:1);break;case"end":k[a]+=g*(n&&d?-1:1);break}return k}const AM=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:a}=n,l=s.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:r}),{x:h,y:m}=sk(d,i,u),g=i,k={},T=0;for(let x=0;x<l.length;x++){const{name:C,fn:E}=l[x],{x:A,y:N,data:w,reset:S}=await E({x:h,y:m,initialPlacement:i,placement:g,strategy:r,middlewareData:k,rects:d,platform:a,elements:{reference:t,floating:e}});h=A??h,m=N??m,k={...k,[C]:{...k[C],...w}},S&&T<=50&&(T++,typeof S=="object"&&(S.placement&&(g=S.placement),S.rects&&(d=S.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:r}):S.rects),{x:h,y:m}=sk(d,g,u)),x=-1)}return{x:h,y:m,placement:g,strategy:r,middlewareData:k}};async function Xc(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:a,elements:l,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:g=!1,padding:k=0}=wr(e,t),T=DC(k),C=l[g?m==="floating"?"reference":"floating":m],E=Fd(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(C)))==null||n?C:C.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:u})),A=m==="floating"?{x:i,y:r,width:a.floating.width,height:a.floating.height}:a.reference,N=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),w=await(s.isElement==null?void 0:s.isElement(N))?await(s.getScale==null?void 0:s.getScale(N))||{x:1,y:1}:{x:1,y:1},S=Fd(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:A,offsetParent:N,strategy:u}):A);return{top:(E.top-S.top+T.top)/w.y,bottom:(S.bottom-E.bottom+T.bottom)/w.y,left:(E.left-S.left+T.left)/w.x,right:(S.right-E.right+T.right)/w.x}}const NM=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:a,elements:l,middlewareData:u}=e,{element:d,padding:h=0}=wr(t,e)||{};if(d==null)return{};const m=DC(h),g={x:n,y:i},k=gv(r),T=mv(k),x=await a.getDimensions(d),C=k==="y",E=C?"top":"left",A=C?"bottom":"right",N=C?"clientHeight":"clientWidth",w=s.reference[T]+s.reference[k]-g[k]-s.floating[T],S=g[k]-s.reference[k],R=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let D=R?R[N]:0;(!D||!await(a.isElement==null?void 0:a.isElement(R)))&&(D=l.floating[N]||s.floating[T]);const j=w/2-S/2,V=D/2-x[T]/2-1,B=cs(m[E],V),W=cs(m[A],V),H=B,ie=D-x[T]-W,ee=D/2-x[T]/2+j,Ce=Qm(H,ee,ie),ve=!u.arrow&&Ra(r)!=null&&ee!==Ce&&s.reference[T]/2-(ee<H?B:W)-x[T]/2<0,he=ve?ee<H?ee-H:ee-ie:0;return{[k]:g[k]+he,data:{[k]:Ce,centerOffset:ee-Ce-he,...ve&&{alignmentOffset:he}},reset:ve}}}),OM=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:a,initialPlacement:l,platform:u,elements:d}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:k="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:x=!0,...C}=wr(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const E=Tr(r),A=zi(l),N=Tr(l)===l,w=await(u.isRTL==null?void 0:u.isRTL(d.floating)),S=g||(N||!x?[jd(l)]:TM(l)),R=T!=="none";!g&&R&&S.push(..._M(l,x,T,w));const D=[l,...S],j=await Xc(e,C),V=[];let B=((i=s.flip)==null?void 0:i.overflows)||[];if(h&&V.push(j[E]),m){const ee=wM(r,a,w);V.push(j[ee[0]],j[ee[1]])}if(B=[...B,{placement:r,overflows:V}],!V.every(ee=>ee<=0)){var W,H;const ee=(((W=s.flip)==null?void 0:W.index)||0)+1,Ce=D[ee];if(Ce&&(!(m==="alignment"?A!==zi(Ce):!1)||B.every(Z=>zi(Z.placement)===A?Z.overflows[0]>0:!0)))return{data:{index:ee,overflows:B},reset:{placement:Ce}};let ve=(H=B.filter(he=>he.overflows[0]<=0).sort((he,Z)=>he.overflows[1]-Z.overflows[1])[0])==null?void 0:H.placement;if(!ve)switch(k){case"bestFit":{var ie;const he=(ie=B.filter(Z=>{if(R){const le=zi(Z.placement);return le===A||le==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(le=>le>0).reduce((le,oe)=>le+oe,0)]).sort((Z,le)=>Z[1]-le[1])[0])==null?void 0:ie[0];he&&(ve=he);break}case"initialPlacement":ve=l;break}if(r!==ve)return{reset:{placement:ve}}}return{}}}};function ok(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ak(t){return bM.some(e=>t[e]>=0)}const IM=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=wr(t,e);switch(i){case"referenceHidden":{const s=await Xc(e,{...r,elementContext:"reference"}),a=ok(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:ak(a)}}}case"escaped":{const s=await Xc(e,{...r,altBoundary:!0}),a=ok(s,n.floating);return{data:{escapedOffsets:a,escaped:ak(a)}}}default:return{}}}}},MC=new Set(["left","top"]);async function DM(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),a=Tr(n),l=Ra(n),u=zi(n)==="y",d=MC.has(a)?-1:1,h=s&&u?-1:1,m=wr(e,t);let{mainAxis:g,crossAxis:k,alignmentAxis:T}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof T=="number"&&(k=l==="end"?T*-1:T),u?{x:k*h,y:g*d}:{x:g*d,y:k*h}}const MM=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:a,middlewareData:l}=e,u=await DM(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:r+u.x,y:s+u.y,data:{...u,placement:a}}}}},LM=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:l={fn:C=>{let{x:E,y:A}=C;return{x:E,y:A}}},...u}=wr(t,e),d={x:n,y:i},h=await Xc(e,u),m=zi(Tr(r)),g=pv(m);let k=d[g],T=d[m];if(s){const C=g==="y"?"top":"left",E=g==="y"?"bottom":"right",A=k+h[C],N=k-h[E];k=Qm(A,k,N)}if(a){const C=m==="y"?"top":"left",E=m==="y"?"bottom":"right",A=T+h[C],N=T-h[E];T=Qm(A,T,N)}const x=l.fn({...e,[g]:k,[m]:T});return{...x,data:{x:x.x-n,y:x.y-i,enabled:{[g]:s,[m]:a}}}}}},jM=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:a}=e,{offset:l=0,mainAxis:u=!0,crossAxis:d=!0}=wr(t,e),h={x:n,y:i},m=zi(r),g=pv(m);let k=h[g],T=h[m];const x=wr(l,e),C=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(u){const N=g==="y"?"height":"width",w=s.reference[g]-s.floating[N]+C.mainAxis,S=s.reference[g]+s.reference[N]-C.mainAxis;k<w?k=w:k>S&&(k=S)}if(d){var E,A;const N=g==="y"?"width":"height",w=MC.has(Tr(r)),S=s.reference[m]-s.floating[N]+(w&&((E=a.offset)==null?void 0:E[m])||0)+(w?0:C.crossAxis),R=s.reference[m]+s.reference[N]+(w?0:((A=a.offset)==null?void 0:A[m])||0)-(w?C.crossAxis:0);T<S?T=S:T>R&&(T=R)}return{[g]:k,[m]:T}}}},FM=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:a,elements:l}=e,{apply:u=()=>{},...d}=wr(t,e),h=await Xc(e,d),m=Tr(r),g=Ra(r),k=zi(r)==="y",{width:T,height:x}=s.floating;let C,E;m==="top"||m==="bottom"?(C=m,E=g===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(E=m,C=g==="end"?"top":"bottom");const A=x-h.top-h.bottom,N=T-h.left-h.right,w=cs(x-h[C],A),S=cs(T-h[E],N),R=!e.middlewareData.shift;let D=w,j=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(j=N),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(D=A),R&&!g){const B=Vn(h.left,0),W=Vn(h.right,0),H=Vn(h.top,0),ie=Vn(h.bottom,0);k?j=T-2*(B!==0||W!==0?B+W:Vn(h.left,h.right)):D=x-2*(H!==0||ie!==0?H+ie:Vn(h.top,h.bottom))}await u({...e,availableWidth:j,availableHeight:D});const V=await a.getDimensions(l.floating);return T!==V.width||x!==V.height?{reset:{rects:!0}}:{}}}};function _f(){return typeof window<"u"}function Aa(t){return LC(t)?(t.nodeName||"").toLowerCase():"#document"}function zn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Xi(t){var e;return(e=(LC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function LC(t){return _f()?t instanceof Node||t instanceof zn(t).Node:!1}function Ei(t){return _f()?t instanceof Element||t instanceof zn(t).Element:!1}function Zi(t){return _f()?t instanceof HTMLElement||t instanceof zn(t).HTMLElement:!1}function ck(t){return!_f()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof zn(t).ShadowRoot}const UM=new Set(["inline","contents"]);function _l(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Pi(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!UM.has(r)}const VM=new Set(["table","td","th"]);function BM(t){return VM.has(Aa(t))}const zM=[":popover-open",":modal"];function Rf(t){return zM.some(e=>{try{return t.matches(e)}catch{return!1}})}const WM=["transform","translate","scale","rotate","perspective"],qM=["transform","translate","scale","rotate","perspective","filter"],HM=["paint","layout","strict","content"];function vv(t){const e=yv(),n=Ei(t)?Pi(t):t;return WM.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||qM.some(i=>(n.willChange||"").includes(i))||HM.some(i=>(n.contain||"").includes(i))}function $M(t){let e=ls(t);for(;Zi(e)&&!pa(e);){if(vv(e))return e;if(Rf(e))return null;e=ls(e)}return null}function yv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const KM=new Set(["html","body","#document"]);function pa(t){return KM.has(Aa(t))}function Pi(t){return zn(t).getComputedStyle(t)}function Af(t){return Ei(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ls(t){if(Aa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ck(t)&&t.host||Xi(t);return ck(e)?e.host:e}function jC(t){const e=ls(t);return pa(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zi(e)&&_l(e)?e:jC(e)}function el(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=jC(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),a=zn(r);if(s){const l=Ym(a);return e.concat(a,a.visualViewport||[],_l(r)?r:[],l&&n?el(l):[])}return e.concat(r,el(r,[],n))}function Ym(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function FC(t){const e=Pi(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Zi(t),s=r?t.offsetWidth:n,a=r?t.offsetHeight:i,l=Ld(n)!==s||Ld(i)!==a;return l&&(n=s,i=a),{width:n,height:i,$:l}}function bv(t){return Ei(t)?t:t.contextElement}function ia(t){const e=bv(t);if(!Zi(e))return qi(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=FC(e);let a=(s?Ld(n.width):n.width)/i,l=(s?Ld(n.height):n.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const GM=qi(0);function UC(t){const e=zn(t);return!yv()||!e.visualViewport?GM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ZM(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==zn(t)?!1:e}function Zs(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=bv(t);let a=qi(1);e&&(i?Ei(i)&&(a=ia(i)):a=ia(t));const l=ZM(s,n,i)?UC(s):qi(0);let u=(r.left+l.x)/a.x,d=(r.top+l.y)/a.y,h=r.width/a.x,m=r.height/a.y;if(s){const g=zn(s),k=i&&Ei(i)?zn(i):i;let T=g,x=Ym(T);for(;x&&i&&k!==T;){const C=ia(x),E=x.getBoundingClientRect(),A=Pi(x),N=E.left+(x.clientLeft+parseFloat(A.paddingLeft))*C.x,w=E.top+(x.clientTop+parseFloat(A.paddingTop))*C.y;u*=C.x,d*=C.y,h*=C.x,m*=C.y,u+=N,d+=w,T=zn(x),x=Ym(T)}}return Fd({width:h,height:m,x:u,y:d})}function Nf(t,e){const n=Af(t).scrollLeft;return e?e.left+n:Zs(Xi(t)).left+n}function VC(t,e){const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-Nf(t,n),r=n.top+e.scrollTop;return{x:i,y:r}}function QM(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",a=Xi(i),l=e?Rf(e.floating):!1;if(i===a||l&&s)return n;let u={scrollLeft:0,scrollTop:0},d=qi(1);const h=qi(0),m=Zi(i);if((m||!m&&!s)&&((Aa(i)!=="body"||_l(a))&&(u=Af(i)),Zi(i))){const k=Zs(i);d=ia(i),h.x=k.x+i.clientLeft,h.y=k.y+i.clientTop}const g=a&&!m&&!s?VC(a,u):qi(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+h.x+g.x,y:n.y*d.y-u.scrollTop*d.y+h.y+g.y}}function JM(t){return Array.from(t.getClientRects())}function YM(t){const e=Xi(t),n=Af(t),i=t.ownerDocument.body,r=Vn(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Vn(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let a=-n.scrollLeft+Nf(t);const l=-n.scrollTop;return Pi(i).direction==="rtl"&&(a+=Vn(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:a,y:l}}const lk=25;function XM(t,e){const n=zn(t),i=Xi(t),r=n.visualViewport;let s=i.clientWidth,a=i.clientHeight,l=0,u=0;if(r){s=r.width,a=r.height;const h=yv();(!h||h&&e==="fixed")&&(l=r.offsetLeft,u=r.offsetTop)}const d=Nf(i);if(d<=0){const h=i.ownerDocument,m=h.body,g=getComputedStyle(m),k=h.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,T=Math.abs(i.clientWidth-m.clientWidth-k);T<=lk&&(s-=T)}else d<=lk&&(s+=d);return{width:s,height:a,x:l,y:u}}const eL=new Set(["absolute","fixed"]);function tL(t,e){const n=Zs(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=Zi(t)?ia(t):qi(1),a=t.clientWidth*s.x,l=t.clientHeight*s.y,u=r*s.x,d=i*s.y;return{width:a,height:l,x:u,y:d}}function uk(t,e,n){let i;if(e==="viewport")i=XM(t,n);else if(e==="document")i=YM(Xi(t));else if(Ei(e))i=tL(e,n);else{const r=UC(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Fd(i)}function BC(t,e){const n=ls(t);return n===e||!Ei(n)||pa(n)?!1:Pi(n).position==="fixed"||BC(n,e)}function nL(t,e){const n=e.get(t);if(n)return n;let i=el(t,[],!1).filter(l=>Ei(l)&&Aa(l)!=="body"),r=null;const s=Pi(t).position==="fixed";let a=s?ls(t):t;for(;Ei(a)&&!pa(a);){const l=Pi(a),u=vv(a);!u&&l.position==="fixed"&&(r=null),(s?!u&&!r:!u&&l.position==="static"&&!!r&&eL.has(r.position)||_l(a)&&!u&&BC(t,a))?i=i.filter(h=>h!==a):r=l,a=ls(a)}return e.set(t,i),i}function iL(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const a=[...n==="clippingAncestors"?Rf(e)?[]:nL(e,this._c):[].concat(n),i],l=a[0],u=a.reduce((d,h)=>{const m=uk(e,h,r);return d.top=Vn(m.top,d.top),d.right=cs(m.right,d.right),d.bottom=cs(m.bottom,d.bottom),d.left=Vn(m.left,d.left),d},uk(e,l,r));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function rL(t){const{width:e,height:n}=FC(t);return{width:e,height:n}}function sL(t,e,n){const i=Zi(e),r=Xi(e),s=n==="fixed",a=Zs(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const u=qi(0);function d(){u.x=Nf(r)}if(i||!i&&!s)if((Aa(e)!=="body"||_l(r))&&(l=Af(e)),i){const k=Zs(e,!0,s,e);u.x=k.x+e.clientLeft,u.y=k.y+e.clientTop}else r&&d();s&&!i&&r&&d();const h=r&&!i&&!s?VC(r,l):qi(0),m=a.left+l.scrollLeft-u.x-h.x,g=a.top+l.scrollTop-u.y-h.y;return{x:m,y:g,width:a.width,height:a.height}}function Jp(t){return Pi(t).position==="static"}function dk(t,e){if(!Zi(t)||Pi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Xi(t)===n&&(n=n.ownerDocument.body),n}function zC(t,e){const n=zn(t);if(Rf(t))return n;if(!Zi(t)){let r=ls(t);for(;r&&!pa(r);){if(Ei(r)&&!Jp(r))return r;r=ls(r)}return n}let i=dk(t,e);for(;i&&BM(i)&&Jp(i);)i=dk(i,e);return i&&pa(i)&&Jp(i)&&!vv(i)?n:i||$M(t)||n}const oL=async function(t){const e=this.getOffsetParent||zC,n=this.getDimensions,i=await n(t.floating);return{reference:sL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function aL(t){return Pi(t).direction==="rtl"}const cL={convertOffsetParentRelativeRectToViewportRelativeRect:QM,getDocumentElement:Xi,getClippingRect:iL,getOffsetParent:zC,getElementRects:oL,getClientRects:JM,getDimensions:rL,getScale:ia,isElement:Ei,isRTL:aL};function WC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function lL(t,e){let n=null,i;const r=Xi(t);function s(){var l;clearTimeout(i),(l=n)==null||l.disconnect(),n=null}function a(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),s();const d=t.getBoundingClientRect(),{left:h,top:m,width:g,height:k}=d;if(l||e(),!g||!k)return;const T=Qu(m),x=Qu(r.clientWidth-(h+g)),C=Qu(r.clientHeight-(m+k)),E=Qu(h),N={rootMargin:-T+"px "+-x+"px "+-C+"px "+-E+"px",threshold:Vn(0,cs(1,u))||1};let w=!0;function S(R){const D=R[0].intersectionRatio;if(D!==u){if(!w)return a();D?a(!1,D):i=setTimeout(()=>{a(!1,1e-7)},1e3)}D===1&&!WC(d,t.getBoundingClientRect())&&a(),w=!1}try{n=new IntersectionObserver(S,{...N,root:r.ownerDocument})}catch{n=new IntersectionObserver(S,N)}n.observe(t)}return a(!0),s}function uL(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=i,d=bv(t),h=r||s?[...d?el(d):[],...el(e)]:[];h.forEach(E=>{r&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const m=d&&l?lL(d,n):null;let g=-1,k=null;a&&(k=new ResizeObserver(E=>{let[A]=E;A&&A.target===d&&k&&(k.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var N;(N=k)==null||N.observe(e)})),n()}),d&&!u&&k.observe(d),k.observe(e));let T,x=u?Zs(t):null;u&&C();function C(){const E=Zs(t);x&&!WC(x,E)&&n(),x=E,T=requestAnimationFrame(C)}return n(),()=>{var E;h.forEach(A=>{r&&A.removeEventListener("scroll",n),s&&A.removeEventListener("resize",n)}),m?.(),(E=k)==null||E.disconnect(),k=null,u&&cancelAnimationFrame(T)}}const dL=MM,fL=LM,hL=OM,pL=FM,mL=IM,fk=NM,gL=jM,vL=(t,e,n)=>{const i=new Map,r={platform:cL,...n},s={...r.platform,_c:i};return AM(t,e,{...r,platform:s})};var hd=typeof document<"u"?P.useLayoutEffect:P.useEffect;function Ud(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Ud(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!Ud(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function qC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function hk(t,e){const n=qC(t);return Math.round(e*n)/n}function Yp(t){const e=P.useRef(t);return hd(()=>{e.current=t}),e}function yL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:u,open:d}=t,[h,m]=P.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,k]=P.useState(i);Ud(g,i)||k(i);const[T,x]=P.useState(null),[C,E]=P.useState(null),A=P.useCallback(Z=>{Z!==R.current&&(R.current=Z,x(Z))},[]),N=P.useCallback(Z=>{Z!==D.current&&(D.current=Z,E(Z))},[]),w=s||T,S=a||C,R=P.useRef(null),D=P.useRef(null),j=P.useRef(h),V=u!=null,B=Yp(u),W=Yp(r),H=Yp(d),ie=P.useCallback(()=>{if(!R.current||!D.current)return;const Z={placement:e,strategy:n,middleware:g};W.current&&(Z.platform=W.current),vL(R.current,D.current,Z).then(le=>{const oe={...le,isPositioned:H.current!==!1};ee.current&&!Ud(j.current,oe)&&(j.current=oe,wf.flushSync(()=>{m(oe)}))})},[g,e,n,W,H]);hd(()=>{d===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,m(Z=>({...Z,isPositioned:!1})))},[d]);const ee=P.useRef(!1);hd(()=>(ee.current=!0,()=>{ee.current=!1}),[]),hd(()=>{if(w&&(R.current=w),S&&(D.current=S),w&&S){if(B.current)return B.current(w,S,ie);ie()}},[w,S,ie,B,V]);const Ce=P.useMemo(()=>({reference:R,floating:D,setReference:A,setFloating:N}),[A,N]),ve=P.useMemo(()=>({reference:w,floating:S}),[w,S]),he=P.useMemo(()=>{const Z={position:n,left:0,top:0};if(!ve.floating)return Z;const le=hk(ve.floating,h.x),oe=hk(ve.floating,h.y);return l?{...Z,transform:"translate("+le+"px, "+oe+"px)",...qC(ve.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:le,top:oe}},[n,l,ve.floating,h.x,h.y]);return P.useMemo(()=>({...h,update:ie,refs:Ce,elements:ve,floatingStyles:he}),[h,ie,Ce,ve,he])}const bL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?fk({element:i.current,padding:r}).fn(n):{}:i?fk({element:i,padding:r}).fn(n):{}}}},xL=(t,e)=>({...dL(t),options:[t,e]}),kL=(t,e)=>({...fL(t),options:[t,e]}),SL=(t,e)=>({...gL(t),options:[t,e]}),wL=(t,e)=>({...hL(t),options:[t,e]}),TL=(t,e)=>({...pL(t),options:[t,e]}),CL=(t,e)=>({...mL(t),options:[t,e]}),EL=(t,e)=>({...bL(t),options:[t,e]});var PL="Arrow",HC=P.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return y.jsx(Lt.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});HC.displayName=PL;var _L=HC;function RL(t){const[e,n]=P.useState(void 0);return as(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let a,l;if("borderBoxSize"in s){const u=s.borderBoxSize,d=Array.isArray(u)?u[0]:u;a=d.inlineSize,l=d.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var $C="Popper",[KC,GC]=Pl($C),[WW,ZC]=KC($C),QC="PopperAnchor",JC=P.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=ZC(QC,n),a=P.useRef(null),l=Sn(e,a);return P.useEffect(()=>{s.onAnchorChange(i?.current||a.current)}),i?null:y.jsx(Lt.div,{...r,ref:l})});JC.displayName=QC;var xv="PopperContent",[AL,NL]=KC(xv),YC=P.forwardRef((t,e)=>{const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:g=!1,updatePositionStrategy:k="optimized",onPlaced:T,...x}=t,C=ZC(xv,n),[E,A]=P.useState(null),N=Sn(e,Ae=>A(Ae)),[w,S]=P.useState(null),R=RL(w),D=R?.width??0,j=R?.height??0,V=i+(s!=="center"?"-"+s:""),B=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},W=Array.isArray(d)?d:[d],H=W.length>0,ie={padding:B,boundary:W.filter(IL),altBoundary:H},{refs:ee,floatingStyles:Ce,placement:ve,isPositioned:he,middlewareData:Z}=yL({strategy:"fixed",placement:V,whileElementsMounted:(...Ae)=>uL(...Ae,{animationFrame:k==="always"}),elements:{reference:C.anchor},middleware:[xL({mainAxis:r+j,alignmentAxis:a}),u&&kL({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?SL():void 0,...ie}),u&&wL({...ie}),TL({...ie,apply:({elements:Ae,rects:Ve,availableWidth:Qe,availableHeight:At})=>{const{width:Oi,height:ws}=Ve.reference,ri=Ae.floating.style;ri.setProperty("--radix-popper-available-width",`${Qe}px`),ri.setProperty("--radix-popper-available-height",`${At}px`),ri.setProperty("--radix-popper-anchor-width",`${Oi}px`),ri.setProperty("--radix-popper-anchor-height",`${ws}px`)}}),w&&EL({element:w,padding:l}),DL({arrowWidth:D,arrowHeight:j}),g&&CL({strategy:"referenceHidden",...ie})]}),[le,oe]=tE(ve),F=ii(T);as(()=>{he&&F?.()},[he,F]);const X=Z.arrow?.x,Re=Z.arrow?.y,Me=Z.arrow?.centerOffset!==0,[Be,Ue]=P.useState();return as(()=>{E&&Ue(window.getComputedStyle(E).zIndex)},[E]),y.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ce,transform:he?Ce.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Be,"--radix-popper-transform-origin":[Z.transformOrigin?.x,Z.transformOrigin?.y].join(" "),...Z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:y.jsx(AL,{scope:n,placedSide:le,onArrowChange:S,arrowX:X,arrowY:Re,shouldHideArrow:Me,children:y.jsx(Lt.div,{"data-side":le,"data-align":oe,...x,ref:N,style:{...x.style,animation:he?void 0:"none"}})})})});YC.displayName=xv;var XC="PopperArrow",OL={top:"bottom",right:"left",bottom:"top",left:"right"},eE=P.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=NL(XC,i),a=OL[s.placedSide];return y.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:y.jsx(_L,{...r,ref:n,style:{...r.style,display:"block"}})})});eE.displayName=XC;function IL(t){return t!==null}var DL=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:i,middlewareData:r}=e,a=r.arrow?.centerOffset!==0,l=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[d,h]=tE(n),m={start:"0%",center:"50%",end:"100%"}[h],g=(r.arrow?.x??0)+l/2,k=(r.arrow?.y??0)+u/2;let T="",x="";return d==="bottom"?(T=a?m:`${g}px`,x=`${-u}px`):d==="top"?(T=a?m:`${g}px`,x=`${i.floating.height+u}px`):d==="right"?(T=`${-u}px`,x=a?m:`${k}px`):d==="left"&&(T=`${i.floating.width+u}px`,x=a?m:`${k}px`),{data:{x:T,y:x}}}});function tE(t){const[e,n="center"]=t.split("-");return[e,n]}var ML=JC,LL=YC,jL=eE,[Of]=Pl("Tooltip",[GC]),kv=GC(),nE="TooltipProvider",FL=700,pk="tooltip.open",[UL,iE]=Of(nE),rE=t=>{const{__scopeTooltip:e,delayDuration:n=FL,skipDelayDuration:i=300,disableHoverableContent:r=!1,children:s}=t,a=P.useRef(!0),l=P.useRef(!1),u=P.useRef(0);return P.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),y.jsx(UL,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:P.useCallback(()=>{window.clearTimeout(u.current),a.current=!1},[]),onClose:P.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.current=!0,i)},[i]),isPointerInTransitRef:l,onPointerInTransitChange:P.useCallback(d=>{l.current=d},[]),disableHoverableContent:r,children:s})};rE.displayName=nE;var sE="Tooltip",[qW,If]=Of(sE),Xm="TooltipTrigger",VL=P.forwardRef((t,e)=>{const{__scopeTooltip:n,...i}=t,r=If(Xm,n),s=iE(Xm,n),a=kv(n),l=P.useRef(null),u=Sn(e,l,r.onTriggerChange),d=P.useRef(!1),h=P.useRef(!1),m=P.useCallback(()=>d.current=!1,[]);return P.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),y.jsx(ML,{asChild:!0,...a,children:y.jsx(Lt.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...i,ref:u,onPointerMove:gt(t.onPointerMove,g=>{g.pointerType!=="touch"&&!h.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:gt(t.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:gt(t.onPointerDown,()=>{r.open&&r.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:gt(t.onFocus,()=>{d.current||r.onOpen()}),onBlur:gt(t.onBlur,r.onClose),onClick:gt(t.onClick,r.onClose)})})});VL.displayName=Xm;var BL="TooltipPortal",[HW,zL]=Of(BL,{forceMount:void 0}),ma="TooltipContent",oE=P.forwardRef((t,e)=>{const n=zL(ma,t.__scopeTooltip),{forceMount:i=n.forceMount,side:r="top",...s}=t,a=If(ma,t.__scopeTooltip);return y.jsx(Pa,{present:i||a.open,children:a.disableHoverableContent?y.jsx(aE,{side:r,...s,ref:e}):y.jsx(WL,{side:r,...s,ref:e})})}),WL=P.forwardRef((t,e)=>{const n=If(ma,t.__scopeTooltip),i=iE(ma,t.__scopeTooltip),r=P.useRef(null),s=Sn(e,r),[a,l]=P.useState(null),{trigger:u,onClose:d}=n,h=r.current,{onPointerInTransitChange:m}=i,g=P.useCallback(()=>{l(null),m(!1)},[m]),k=P.useCallback((T,x)=>{const C=T.currentTarget,E={x:T.clientX,y:T.clientY},A=GL(E,C.getBoundingClientRect()),N=ZL(E,A),w=QL(x.getBoundingClientRect()),S=YL([...N,...w]);l(S),m(!0)},[m]);return P.useEffect(()=>()=>g(),[g]),P.useEffect(()=>{if(u&&h){const T=C=>k(C,h),x=C=>k(C,u);return u.addEventListener("pointerleave",T),h.addEventListener("pointerleave",x),()=>{u.removeEventListener("pointerleave",T),h.removeEventListener("pointerleave",x)}}},[u,h,k,g]),P.useEffect(()=>{if(a){const T=x=>{const C=x.target,E={x:x.clientX,y:x.clientY},A=u?.contains(C)||h?.contains(C),N=!JL(E,a);A?g():N&&(g(),d())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[u,h,a,d,g]),y.jsx(aE,{...t,ref:s})}),[qL,HL]=Of(sE,{isInside:!1}),$L=AI("TooltipContent"),aE=P.forwardRef((t,e)=>{const{__scopeTooltip:n,children:i,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:a,...l}=t,u=If(ma,n),d=kv(n),{onClose:h}=u;return P.useEffect(()=>(document.addEventListener(pk,h),()=>document.removeEventListener(pk,h)),[h]),P.useEffect(()=>{if(u.trigger){const m=g=>{g.target?.contains(u.trigger)&&h()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[u.trigger,h]),y.jsx(Tf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:h,children:y.jsxs(LL,{"data-state":u.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx($L,{children:i}),y.jsx(qL,{scope:n,isInside:!0,children:y.jsx(JI,{id:u.contentId,role:"tooltip",children:r||i})})]})})});oE.displayName=ma;var cE="TooltipArrow",KL=P.forwardRef((t,e)=>{const{__scopeTooltip:n,...i}=t,r=kv(n);return HL(cE,n).isInside?null:y.jsx(jL,{...r,...i,ref:e})});KL.displayName=cE;function GL(t,e){const n=Math.abs(e.top-t.y),i=Math.abs(e.bottom-t.y),r=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,i,r,s)){case s:return"left";case r:return"right";case n:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function ZL(t,e,n=5){const i=[];switch(e){case"top":i.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":i.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":i.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":i.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return i}function QL(t){const{top:e,right:n,bottom:i,left:r}=t;return[{x:r,y:e},{x:n,y:e},{x:n,y:i},{x:r,y:i}]}function JL(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const l=e[s].x,u=e[s].y,d=e[a].x,h=e[a].y;u>i!=h>i&&n<(d-l)*(i-u)/(h-u)+l&&(r=!r)}return r}function YL(t){const e=t.slice();return e.sort((n,i)=>n.x<i.x?-1:n.x>i.x?1:n.y<i.y?-1:n.y>i.y?1:0),XL(e)}function XL(t){if(t.length<=1)return t.slice();const e=[];for(let i=0;i<t.length;i++){const r=t[i];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(r.y-a.y)>=(s.y-a.y)*(r.x-a.x))e.pop();else break}e.push(r)}e.pop();const n=[];for(let i=t.length-1;i>=0;i--){const r=t[i];for(;n.length>=2;){const s=n[n.length-1],a=n[n.length-2];if((s.x-a.x)*(r.y-a.y)>=(s.y-a.y)*(r.x-a.x))n.pop();else break}n.push(r)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var ej=rE,lE=oE;const tj=ej,nj=P.forwardRef(({className:t,sideOffset:e=4,...n},i)=>y.jsx(lE,{ref:i,sideOffset:e,className:Rt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));nj.displayName=lE.displayName;const uE=P.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:Rt("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));uE.displayName="Card";const ij=P.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:Rt("flex flex-col space-y-1.5 p-6",t),...e}));ij.displayName="CardHeader";const rj=P.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:Rt("text-2xl font-semibold leading-none tracking-tight",t),...e}));rj.displayName="CardTitle";const sj=P.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:Rt("text-sm text-muted-foreground",t),...e}));sj.displayName="CardDescription";const dE=P.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:Rt("p-6 pt-0",t),...e}));dE.displayName="CardContent";const oj=P.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:Rt("flex items-center p-6 pt-0",t),...e}));oj.displayName="CardFooter";function fE(){return y.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:y.jsx(uE,{className:"w-full max-w-md mx-4",children:y.jsxs(dE,{className:"pt-6",children:[y.jsxs("div",{className:"flex mb-4 gap-2",children:[y.jsx(kD,{className:"h-8 w-8 text-red-500"}),y.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),y.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const hE=P.createContext({});function aj(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const Sv=P.createContext(null),pE=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function cj(t=!0){const e=P.useContext(Sv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,s=P.useId();P.useEffect(()=>{t&&r(s)},[t]);const a=P.useCallback(()=>t&&i&&i(s),[s,i,t]);return!n&&i?[!1,a]:[!0]}const wv=typeof window<"u",lj=wv?P.useLayoutEffect:P.useEffect,Wn=t=>t;let mE=Wn;function Tv(t){let e;return()=>(e===void 0&&(e=t()),e)}const ga=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},kr=t=>t*1e3,Sr=t=>t/1e3,uj={useManualTiming:!1};function dj(t){let e=new Set,n=new Set,i=!1,r=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(d){s.has(d)&&(u.schedule(d),t()),d(a)}const u={schedule:(d,h=!1,m=!1)=>{const k=m&&i?e:n;return h&&s.add(d),k.has(d)||k.add(d),d},cancel:d=>{n.delete(d),s.delete(d)},process:d=>{if(a=d,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(l),e.clear(),i=!1,r&&(r=!1,u.process(d))}};return u}const Ju=["read","resolveKeyframes","update","preRender","render","postRender"],fj=40;function gE(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Ju.reduce((E,A)=>(E[A]=dj(s),E),{}),{read:l,resolveKeyframes:u,update:d,preRender:h,render:m,postRender:g}=a,k=()=>{const E=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(E-r.timestamp,fj),1),r.timestamp=E,r.isProcessing=!0,l.process(r),u.process(r),d.process(r),h.process(r),m.process(r),g.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(k))},T=()=>{n=!0,i=!0,r.isProcessing||t(k)};return{schedule:Ju.reduce((E,A)=>{const N=a[A];return E[A]=(w,S=!1,R=!1)=>(n||T(),N.schedule(w,S,R)),E},{}),cancel:E=>{for(let A=0;A<Ju.length;A++)a[Ju[A]].cancel(E)},state:r,steps:a}}const{schedule:pt,cancel:us,state:en,steps:Xp}=gE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wn,!0),vE=P.createContext({strict:!1}),mk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},va={};for(const t in mk)va[t]={isEnabled:e=>mk[t].some(n=>!!e[n])};function hj(t){for(const e in t)va[e]={...va[e],...t[e]}}const pj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||pj.has(t)}let yE=t=>!Vd(t);function mj(t){t&&(yE=e=>e.startsWith("on")?!Vd(e):t(e))}try{mj(require("@emotion/is-prop-valid").default)}catch{}function gj(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(yE(r)||n===!0&&Vd(r)||!e&&!Vd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function vj(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const Df=P.createContext({});function tl(t){return typeof t=="string"||Array.isArray(t)}function Mf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Cv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ev=["initial",...Cv];function Lf(t){return Mf(t.animate)||Ev.some(e=>tl(t[e]))}function bE(t){return!!(Lf(t)||t.variants)}function yj(t,e){if(Lf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||tl(n)?n:void 0,animate:tl(i)?i:void 0}}return t.inherit!==!1?e:{}}function bj(t){const{initial:e,animate:n}=yj(t,P.useContext(Df));return P.useMemo(()=>({initial:e,animate:n}),[gk(e),gk(n)])}function gk(t){return Array.isArray(t)?t.join(" "):t}const xj=Symbol.for("motionComponentSymbol");function Ko(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function kj(t,e,n){return P.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Ko(n)&&(n.current=i))},[e])}const Pv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Sj="framerAppearId",xE="data-"+Pv(Sj),{schedule:_v}=gE(queueMicrotask,!1),kE=P.createContext({});function wj(t,e,n,i,r){var s,a;const{visualElement:l}=P.useContext(Df),u=P.useContext(vE),d=P.useContext(Sv),h=P.useContext(pE).reducedMotion,m=P.useRef(null);i=i||u.renderer,!m.current&&i&&(m.current=i(t,{visualState:e,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const g=m.current,k=P.useContext(kE);g&&!g.projection&&r&&(g.type==="html"||g.type==="svg")&&Tj(m.current,n,r,k);const T=P.useRef(!1);P.useInsertionEffect(()=>{g&&T.current&&g.update(n,d)});const x=n[xE],C=P.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,x)));return lj(()=>{g&&(T.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),_v.render(g.render),C.current&&g.animationState&&g.animationState.animateChanges())}),P.useEffect(()=>{g&&(!C.current&&g.animationState&&g.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)===null||E===void 0||E.call(window,x)}),C.current=!1))}),g}function Tj(t,e,n,i){const{layoutId:r,layout:s,drag:a,dragConstraints:l,layoutScroll:u,layoutRoot:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:SE(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||l&&Ko(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:u,layoutRoot:d})}function SE(t){if(t)return t.options.allowProjection!==!1?t.projection:SE(t.parent)}function Cj({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var s,a;t&&hj(t);function l(d,h){let m;const g={...P.useContext(pE),...d,layoutId:Ej(d)},{isStatic:k}=g,T=bj(d),x=i(d,k);if(!k&&wv){Pj();const C=_j(g);m=C.MeasureLayout,T.visualElement=wj(r,x,g,e,C.ProjectionNode)}return y.jsxs(Df.Provider,{value:T,children:[m&&T.visualElement?y.jsx(m,{visualElement:T.visualElement,...g}):null,n(r,d,kj(x,T.visualElement,h),x,k,T.visualElement)]})}l.displayName=`motion.${typeof r=="string"?r:`create(${(a=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&a!==void 0?a:""})`}`;const u=P.forwardRef(l);return u[xj]=r,u}function Ej({layoutId:t}){const e=P.useContext(hE).id;return e&&t!==void 0?e+"-"+t:t}function Pj(t,e){P.useContext(vE).strict}function _j(t){const{drag:e,layout:n}=va;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const Rj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rv(t){return typeof t!="string"||t.includes("-")?!1:!!(Rj.indexOf(t)>-1||/[A-Z]/u.test(t))}function vk(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Av(t,e,n,i){if(typeof e=="function"){const[r,s]=vk(i);e=e(n!==void 0?n:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=vk(i);e=e(n!==void 0?n:t.custom,r,s)}return e}const eg=t=>Array.isArray(t),Aj=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Nj=t=>eg(t)?t[t.length-1]||0:t,hn=t=>!!(t&&t.getVelocity);function pd(t){const e=hn(t)?t.get():t;return Aj(e)?e.toValue():e}function Oj({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,s){const a={latestValues:Ij(i,r,s,t),renderState:e()};return n&&(a.onMount=l=>n({props:i,current:l,...a}),a.onUpdate=l=>n(l)),a}const wE=t=>(e,n)=>{const i=P.useContext(Df),r=P.useContext(Sv),s=()=>Oj(t,e,i,r);return n?s():aj(s)};function Ij(t,e,n,i){const r={},s=i(t,{});for(const g in s)r[g]=pd(s[g]);let{initial:a,animate:l}=t;const u=Lf(t),d=bE(t);e&&d&&!u&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const m=h?l:a;if(m&&typeof m!="boolean"&&!Mf(m)){const g=Array.isArray(m)?m:[m];for(let k=0;k<g.length;k++){const T=Av(t,g[k]);if(T){const{transitionEnd:x,transition:C,...E}=T;for(const A in E){let N=E[A];if(Array.isArray(N)){const w=h?N.length-1:0;N=N[w]}N!==null&&(r[A]=N)}for(const A in x)r[A]=x[A]}}}return r}const Na=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ro=new Set(Na),TE=t=>e=>typeof e=="string"&&e.startsWith(t),CE=TE("--"),Dj=TE("var(--"),Nv=t=>Dj(t)?Mj.test(t.split("/*")[0].trim()):!1,Mj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,EE=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Cr=(t,e,n)=>n>e?e:n<t?t:n,Oa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},nl={...Oa,transform:t=>Cr(0,1,t)},Yu={...Oa,default:1},Rl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Yr=Rl("deg"),Hi=Rl("%"),Ie=Rl("px"),Lj=Rl("vh"),jj=Rl("vw"),yk={...Hi,parse:t=>Hi.parse(t)/100,transform:t=>Hi.transform(t*100)},Fj={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie},Uj={rotate:Yr,rotateX:Yr,rotateY:Yr,rotateZ:Yr,scale:Yu,scaleX:Yu,scaleY:Yu,scaleZ:Yu,skew:Yr,skewX:Yr,skewY:Yr,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:nl,originX:yk,originY:yk,originZ:Ie},bk={...Oa,transform:Math.round},Ov={...Fj,...Uj,zIndex:bk,size:Ie,fillOpacity:nl,strokeOpacity:nl,numOctaves:bk},Vj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Bj=Na.length;function zj(t,e,n){let i="",r=!0;for(let s=0;s<Bj;s++){const a=Na[s],l=t[a];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(a.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=EE(l,Ov[a]);if(!u){r=!1;const h=Vj[a]||a;i+=`${h}(${d}) `}n&&(e[a]=d)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function Iv(t,e,n){const{style:i,vars:r,transformOrigin:s}=t;let a=!1,l=!1;for(const u in e){const d=e[u];if(ro.has(u)){a=!0;continue}else if(CE(u)){r[u]=d;continue}else{const h=EE(d,Ov[u]);u.startsWith("origin")?(l=!0,s[u]=h):i[u]=h}}if(e.transform||(a||n?i.transform=zj(e,t.transform,n):i.transform&&(i.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=s;i.transformOrigin=`${u} ${d} ${h}`}}const Wj={offset:"stroke-dashoffset",array:"stroke-dasharray"},qj={offset:"strokeDashoffset",array:"strokeDasharray"};function Hj(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?Wj:qj;t[s.offset]=Ie.transform(-i);const a=Ie.transform(e),l=Ie.transform(n);t[s.array]=`${a} ${l}`}function xk(t,e,n){return typeof t=="string"?t:Ie.transform(e+n*t)}function $j(t,e,n){const i=xk(e,t.x,t.width),r=xk(n,t.y,t.height);return`${i} ${r}`}function Dv(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:a,pathSpacing:l=1,pathOffset:u=0,...d},h,m){if(Iv(t,d,m),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:k,dimensions:T}=t;g.transform&&(T&&(k.transform=g.transform),delete g.transform),T&&(r!==void 0||s!==void 0||k.transform)&&(k.transformOrigin=$j(T,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),i!==void 0&&(g.scale=i),a!==void 0&&Hj(g,a,l,u,!1)}const Mv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),PE=()=>({...Mv(),attrs:{}}),Lv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function _E(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const RE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function AE(t,e,n,i){_E(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(RE.has(r)?r:Pv(r),e.attrs[r])}const Bd={};function Kj(t){Object.assign(Bd,t)}function NE(t,{layout:e,layoutId:n}){return ro.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Bd[t]||t==="opacity")}function jv(t,e,n){var i;const{style:r}=t,s={};for(const a in r)(hn(r[a])||e.style&&hn(e.style[a])||NE(a,t)||((i=n?.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function OE(t,e,n){const i=jv(t,e,n);for(const r in t)if(hn(t[r])||hn(e[r])){const s=Na.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=t[r]}return i}function Gj(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const kk=["x","y","width","height","cx","cy","r"],Zj={useVisualState:wE({scrapeMotionValuesFromProps:OE,createRenderState:PE,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let s=!!t.drag;if(!s){for(const l in r)if(ro.has(l)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let l=0;l<kk.length;l++){const u=kk[l];t[u]!==e[u]&&(a=!0)}a&&pt.read(()=>{Gj(n,i),pt.render(()=>{Dv(i,r,Lv(n.tagName),t.transformTemplate),AE(n,i)})})}})},Qj={useVisualState:wE({scrapeMotionValuesFromProps:jv,createRenderState:Mv})};function IE(t,e,n){for(const i in e)!hn(e[i])&&!NE(i,n)&&(t[i]=e[i])}function Jj({transformTemplate:t},e){return P.useMemo(()=>{const n=Mv();return Iv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Yj(t,e){const n=t.style||{},i={};return IE(i,n,t),Object.assign(i,Jj(t,e)),i}function Xj(t,e){const n={},i=Yj(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function e2(t,e,n,i){const r=P.useMemo(()=>{const s=PE();return Dv(s,e,Lv(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};IE(s,t.style,t),r.style={...s,...r.style}}return r}function t2(t=!1){return(n,i,r,{latestValues:s},a)=>{const u=(Rv(n)?e2:Xj)(i,s,a,n),d=gj(i,typeof n=="string",t),h=n!==P.Fragment?{...d,...u,ref:r}:{},{children:m}=i,g=P.useMemo(()=>hn(m)?m.get():m,[m]);return P.createElement(n,{...h,children:g})}}function n2(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...Rv(i)?Zj:Qj,preloadedFeatures:t,useRender:t2(r),createVisualElement:e,Component:i};return Cj(a)}}function DE(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function jf(t,e,n){const i=t.getProps();return Av(i,e,n!==void 0?n:i.custom,t)}const i2=Tv(()=>window.ScrollTimeline!==void 0);class r2{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(i2()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class s2 extends r2{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Fv(t,e){return t?t[e]||t.default||t:void 0}const tg=2e4;function ME(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<tg;)e+=n,i=t.next(e);return e>=tg?1/0:e}function Uv(t){return typeof t=="function"}function Sk(t,e){t.timeline=e,t.onfinish=null}const Vv=t=>Array.isArray(t)&&typeof t[0]=="number",o2={linearEasing:void 0};function a2(t,e){const n=Tv(t);return()=>{var i;return(i=o2[e])!==null&&i!==void 0?i:n()}}const zd=a2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),LE=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let s=0;s<r;s++)i+=t(ga(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function jE(t){return!!(typeof t=="function"&&zd()||!t||typeof t=="string"&&(t in ng||zd())||Vv(t)||Array.isArray(t)&&t.every(jE))}const Oc=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,ng={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Oc([0,.65,.55,1]),circOut:Oc([.55,0,1,.45]),backIn:Oc([.31,.01,.66,-.59]),backOut:Oc([.33,1.53,.69,.99])};function FE(t,e){if(t)return typeof t=="function"&&zd()?LE(t,e):Vv(t)?Oc(t):Array.isArray(t)?t.map(n=>FE(n,e)||ng.easeOut):ng[t]}const hi={x:!1,y:!1};function UE(){return hi.x||hi.y}function c2(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function VE(t,e){const n=c2(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function wk(t){return e=>{e.pointerType==="touch"||UE()||t(e)}}function l2(t,e,n={}){const[i,r,s]=VE(t,n),a=wk(l=>{const{target:u}=l,d=e(l);if(typeof d!="function"||!u)return;const h=wk(m=>{d(m),u.removeEventListener("pointerleave",h)});u.addEventListener("pointerleave",h,r)});return i.forEach(l=>{l.addEventListener("pointerenter",a,r)}),s}const BE=(t,e)=>e?t===e?!0:BE(t,e.parentElement):!1,Bv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,u2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function d2(t){return u2.has(t.tagName)||t.tabIndex!==-1}const Ic=new WeakSet;function Tk(t){return e=>{e.key==="Enter"&&t(e)}}function em(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const f2=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=Tk(()=>{if(Ic.has(n))return;em(n,"down");const r=Tk(()=>{em(n,"up")}),s=()=>em(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function Ck(t){return Bv(t)&&!UE()}function h2(t,e,n={}){const[i,r,s]=VE(t,n),a=l=>{const u=l.currentTarget;if(!Ck(l)||Ic.has(u))return;Ic.add(u);const d=e(l),h=(k,T)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",g),!(!Ck(k)||!Ic.has(u))&&(Ic.delete(u),typeof d=="function"&&d(k,{success:T}))},m=k=>{h(k,n.useGlobalTarget||BE(u,k.target))},g=k=>{h(k,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",g,r)};return i.forEach(l=>{!d2(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,r),l.addEventListener("focus",d=>f2(d,r),r)}),s}function p2(t){return t==="x"||t==="y"?hi[t]?null:(hi[t]=!0,()=>{hi[t]=!1}):hi.x||hi.y?null:(hi.x=hi.y=!0,()=>{hi.x=hi.y=!1})}const zE=new Set(["width","height","top","left","right","bottom",...Na]);let md;function m2(){md=void 0}const $i={now:()=>(md===void 0&&$i.set(en.isProcessing||uj.useManualTiming?en.timestamp:performance.now()),md),set:t=>{md=t,queueMicrotask(m2)}};function zv(t,e){t.indexOf(e)===-1&&t.push(e)}function Wv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class qv{constructor(){this.subscriptions=[]}add(e){return zv(this.subscriptions,e),()=>Wv(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function WE(t,e){return e?t*(1e3/e):0}const Ek=30,g2=t=>!isNaN(parseFloat(t));class v2{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=$i.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=$i.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=g2(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new qv);const i=this.events[e].add(n);return e==="change"?()=>{i(),pt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=$i.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ek)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ek);return WE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function il(t,e){return new v2(t,e)}function y2(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,il(n))}function b2(t,e){const n=jf(t,e);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const a in s){const l=Nj(s[a]);y2(t,a,l)}}function x2(t){return!!(hn(t)&&t.add)}function ig(t,e){const n=t.getValue("willChange");if(x2(n))return n.add(e)}function qE(t){return t.props[xE]}const HE=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,k2=1e-7,S2=12;function w2(t,e,n,i,r){let s,a,l=0;do a=e+(n-e)/2,s=HE(a,i,r)-t,s>0?n=a:e=a;while(Math.abs(s)>k2&&++l<S2);return a}function Al(t,e,n,i){if(t===e&&n===i)return Wn;const r=s=>w2(s,0,1,t,n);return s=>s===0||s===1?s:HE(r(s),e,i)}const $E=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,KE=t=>e=>1-t(1-e),GE=Al(.33,1.53,.69,.99),Hv=KE(GE),ZE=$E(Hv),QE=t=>(t*=2)<1?.5*Hv(t):.5*(2-Math.pow(2,-10*(t-1))),$v=t=>1-Math.sin(Math.acos(t)),JE=KE($v),YE=$E($v),XE=t=>/^0[^.\s]+$/u.test(t);function T2(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||XE(t):!0}const Bc=t=>Math.round(t*1e5)/1e5,Kv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function C2(t){return t==null}const E2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Gv=(t,e)=>n=>!!(typeof n=="string"&&E2.test(n)&&n.startsWith(t)||e&&!C2(n)&&Object.prototype.hasOwnProperty.call(n,e)),eP=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,s,a,l]=i.match(Kv);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},P2=t=>Cr(0,255,t),tm={...Oa,transform:t=>Math.round(P2(t))},Ws={test:Gv("rgb","red"),parse:eP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+tm.transform(t)+", "+tm.transform(e)+", "+tm.transform(n)+", "+Bc(nl.transform(i))+")"};function _2(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const rg={test:Gv("#"),parse:_2,transform:Ws.transform},Go={test:Gv("hsl","hue"),parse:eP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Hi.transform(Bc(e))+", "+Hi.transform(Bc(n))+", "+Bc(nl.transform(i))+")"},dn={test:t=>Ws.test(t)||rg.test(t)||Go.test(t),parse:t=>Ws.test(t)?Ws.parse(t):Go.test(t)?Go.parse(t):rg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ws.transform(t):Go.transform(t)},R2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function A2(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Kv))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(R2))===null||n===void 0?void 0:n.length)||0)>0}const tP="number",nP="color",N2="var",O2="var(",Pk="${}",I2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rl(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const l=e.replace(I2,u=>(dn.test(u)?(i.color.push(s),r.push(nP),n.push(dn.parse(u))):u.startsWith(O2)?(i.var.push(s),r.push(N2),n.push(u)):(i.number.push(s),r.push(tP),n.push(parseFloat(u))),++s,Pk)).split(Pk);return{values:n,split:l,indexes:i,types:r}}function iP(t){return rl(t).values}function rP(t){const{split:e,types:n}=rl(t),i=e.length;return r=>{let s="";for(let a=0;a<i;a++)if(s+=e[a],r[a]!==void 0){const l=n[a];l===tP?s+=Bc(r[a]):l===nP?s+=dn.transform(r[a]):s+=r[a]}return s}}const D2=t=>typeof t=="number"?0:t;function M2(t){const e=iP(t);return rP(t)(e.map(D2))}const ds={test:A2,parse:iP,createTransformer:rP,getAnimatableNone:M2},L2=new Set(["brightness","contrast","saturate","opacity"]);function j2(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Kv)||[];if(!i)return t;const r=n.replace(i,"");let s=L2.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const F2=/\b([a-z-]*)\(.*?\)/gu,sg={...ds,getAnimatableNone:t=>{const e=t.match(F2);return e?e.map(j2).join(" "):t}},U2={...Ov,color:dn,backgroundColor:dn,outlineColor:dn,fill:dn,stroke:dn,borderColor:dn,borderTopColor:dn,borderRightColor:dn,borderBottomColor:dn,borderLeftColor:dn,filter:sg,WebkitFilter:sg},Zv=t=>U2[t];function sP(t,e){let n=Zv(t);return n!==sg&&(n=ds),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const V2=new Set(["auto","none","0"]);function B2(t,e,n){let i=0,r;for(;i<t.length&&!r;){const s=t[i];typeof s=="string"&&!V2.has(s)&&rl(s).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=sP(n,r)}const _k=t=>t===Oa||t===Ie,Rk=(t,e)=>parseFloat(t.split(", ")[e]),Ak=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return Rk(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?Rk(s[1],t):0}},z2=new Set(["x","y","z"]),W2=Na.filter(t=>!z2.has(t));function q2(t){const e=[];return W2.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const ya={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Ak(4,13),y:Ak(5,14)};ya.translateX=ya.x;ya.translateY=ya.y;const Hs=new Set;let og=!1,ag=!1;function oP(){if(ag){const t=Array.from(Hs).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=q2(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([s,a])=>{var l;(l=i.getValue(s))===null||l===void 0||l.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}ag=!1,og=!1,Hs.forEach(t=>t.complete()),Hs.clear()}function aP(){Hs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ag=!0)})}function H2(){aP(),oP()}class Qv{constructor(e,n,i,r,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Hs.add(this),og||(og=!0,pt.read(aP),pt.resolveKeyframes(oP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=r?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const u=i.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),r&&a===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Hs.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Hs.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const cP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),$2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function K2(t){const e=$2.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function lP(t,e,n=1){const[i,r]=K2(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return cP(a)?parseFloat(a):a}return Nv(r)?lP(r,e,n+1):r}const uP=t=>e=>e.test(t),G2={test:t=>t==="auto",parse:t=>t},dP=[Oa,Ie,Hi,Yr,jj,Lj,G2],Nk=t=>dP.find(uP(t));class fP extends Qv{constructor(e,n,i,r,s){super(e,n,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),Nv(d))){const h=lP(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!zE.has(i)||e.length!==2)return;const[r,s]=e,a=Nk(r),l=Nk(s);if(a!==l)if(_k(a)&&_k(l))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)T2(e[r])&&i.push(r);i.length&&B2(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ya[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const s=n.getValue(i);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=ya[i](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,d])=>{n.getValue(u).set(d)}),this.resolveNoneKeyframes()}}const Ok=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ds.test(t)||t==="0")&&!t.startsWith("url("));function Z2(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Q2(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=Ok(r,e),l=Ok(s,e);return!a||!l?!1:Z2(t)||(n==="spring"||Uv(n))&&i}const J2=t=>t!==null;function Ff(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(J2),s=e&&n!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const Y2=40;class hP{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=$i.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:a,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Y2?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&H2(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=$i.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:a,onComplete:l,onUpdate:u,isGenerator:d}=this.options;if(!d&&!Q2(e,i,r,s))if(a)this.options.duration=0;else{u&&u(Ff(e,this.options,n)),l&&l(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const kt=(t,e,n)=>t+(e-t)*n;function nm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function X2({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,a=0;if(!e)r=s=a=n;else{const l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;r=nm(u,l,t+1/3),s=nm(u,l,t),a=nm(u,l,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}function Wd(t,e){return n=>n>0?e:t}const im=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},eF=[rg,Ws,Go],tF=t=>eF.find(e=>e.test(t));function Ik(t){const e=tF(t);if(!e)return!1;let n=e.parse(t);return e===Go&&(n=X2(n)),n}const Dk=(t,e)=>{const n=Ik(t),i=Ik(e);if(!n||!i)return Wd(t,e);const r={...n};return s=>(r.red=im(n.red,i.red,s),r.green=im(n.green,i.green,s),r.blue=im(n.blue,i.blue,s),r.alpha=kt(n.alpha,i.alpha,s),Ws.transform(r))},nF=(t,e)=>n=>e(t(n)),Nl=(...t)=>t.reduce(nF),cg=new Set(["none","hidden"]);function iF(t,e){return cg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function rF(t,e){return n=>kt(t,e,n)}function Jv(t){return typeof t=="number"?rF:typeof t=="string"?Nv(t)?Wd:dn.test(t)?Dk:aF:Array.isArray(t)?pP:typeof t=="object"?dn.test(t)?Dk:sF:Wd}function pP(t,e){const n=[...t],i=n.length,r=t.map((s,a)=>Jv(s)(s,e[a]));return s=>{for(let a=0;a<i;a++)n[a]=r[a](s);return n}}function sF(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=Jv(t[r])(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function oF(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],l=t.indexes[a][r[a]],u=(n=t.values[l])!==null&&n!==void 0?n:0;i[s]=u,r[a]++}return i}const aF=(t,e)=>{const n=ds.createTransformer(e),i=rl(t),r=rl(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?cg.has(t)&&!r.values.length||cg.has(e)&&!i.values.length?iF(t,e):Nl(pP(oF(i,r),r.values),n):Wd(t,e)};function mP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?kt(t,e,n):Jv(t)(t,e)}const cF=5;function gP(t,e,n){const i=Math.max(e-cF,0);return WE(n-t(i),e-i)}const Tt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},rm=.001;function lF({duration:t=Tt.duration,bounce:e=Tt.bounce,velocity:n=Tt.velocity,mass:i=Tt.mass}){let r,s,a=1-e;a=Cr(Tt.minDamping,Tt.maxDamping,a),t=Cr(Tt.minDuration,Tt.maxDuration,Sr(t)),a<1?(r=d=>{const h=d*a,m=h*t,g=h-n,k=lg(d,a),T=Math.exp(-m);return rm-g/k*T},s=d=>{const m=d*a*t,g=m*n+n,k=Math.pow(a,2)*Math.pow(d,2)*t,T=Math.exp(-m),x=lg(Math.pow(d,2),a);return(-r(d)+rm>0?-1:1)*((g-k)*T)/x}):(r=d=>{const h=Math.exp(-d*t),m=(d-n)*t+1;return-rm+h*m},s=d=>{const h=Math.exp(-d*t),m=(n-d)*(t*t);return h*m});const l=5/t,u=dF(r,s,l);if(t=kr(t),isNaN(u))return{stiffness:Tt.stiffness,damping:Tt.damping,duration:t};{const d=Math.pow(u,2)*i;return{stiffness:d,damping:a*2*Math.sqrt(i*d),duration:t}}}const uF=12;function dF(t,e,n){let i=n;for(let r=1;r<uF;r++)i=i-t(i)/e(i);return i}function lg(t,e){return t*Math.sqrt(1-e*e)}const fF=["duration","bounce"],hF=["stiffness","damping","mass"];function Mk(t,e){return e.some(n=>t[n]!==void 0)}function pF(t){let e={velocity:Tt.velocity,stiffness:Tt.stiffness,damping:Tt.damping,mass:Tt.mass,isResolvedFromDuration:!1,...t};if(!Mk(t,hF)&&Mk(t,fF))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,s=2*Cr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:Tt.mass,stiffness:r,damping:s}}else{const n=lF(t);e={...e,...n,mass:Tt.mass},e.isResolvedFromDuration=!0}return e}function vP(t=Tt.visualDuration,e=Tt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:m,velocity:g,isResolvedFromDuration:k}=pF({...n,velocity:-Sr(n.velocity||0)}),T=g||0,x=d/(2*Math.sqrt(u*h)),C=a-s,E=Sr(Math.sqrt(u/h)),A=Math.abs(C)<5;i||(i=A?Tt.restSpeed.granular:Tt.restSpeed.default),r||(r=A?Tt.restDelta.granular:Tt.restDelta.default);let N;if(x<1){const S=lg(E,x);N=R=>{const D=Math.exp(-x*E*R);return a-D*((T+x*E*C)/S*Math.sin(S*R)+C*Math.cos(S*R))}}else if(x===1)N=S=>a-Math.exp(-E*S)*(C+(T+E*C)*S);else{const S=E*Math.sqrt(x*x-1);N=R=>{const D=Math.exp(-x*E*R),j=Math.min(S*R,300);return a-D*((T+x*E*C)*Math.sinh(j)+S*C*Math.cosh(j))/S}}const w={calculatedDuration:k&&m||null,next:S=>{const R=N(S);if(k)l.done=S>=m;else{let D=0;x<1&&(D=S===0?kr(T):gP(N,S,R));const j=Math.abs(D)<=i,V=Math.abs(a-R)<=r;l.done=j&&V}return l.value=l.done?a:R,l},toString:()=>{const S=Math.min(ME(w),tg),R=LE(D=>w.next(S*D).value,S,30);return S+"ms "+R}};return w}function Lk({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:u,restDelta:d=.5,restSpeed:h}){const m=t[0],g={done:!1,value:m},k=j=>l!==void 0&&j<l||u!==void 0&&j>u,T=j=>l===void 0?u:u===void 0||Math.abs(l-j)<Math.abs(u-j)?l:u;let x=n*e;const C=m+x,E=a===void 0?C:a(C);E!==C&&(x=E-m);const A=j=>-x*Math.exp(-j/i),N=j=>E+A(j),w=j=>{const V=A(j),B=N(j);g.done=Math.abs(V)<=d,g.value=g.done?E:B};let S,R;const D=j=>{k(g.value)&&(S=j,R=vP({keyframes:[g.value,T(g.value)],velocity:gP(N,j,g.value),damping:r,stiffness:s,restDelta:d,restSpeed:h}))};return D(0),{calculatedDuration:null,next:j=>{let V=!1;return!R&&S===void 0&&(V=!0,w(j),D(j)),S!==void 0&&j>=S?R.next(j-S):(!V&&w(j),g)}}}const mF=Al(.42,0,1,1),gF=Al(0,0,.58,1),yP=Al(.42,0,.58,1),vF=t=>Array.isArray(t)&&typeof t[0]!="number",yF={linear:Wn,easeIn:mF,easeInOut:yP,easeOut:gF,circIn:$v,circInOut:YE,circOut:JE,backIn:Hv,backInOut:ZE,backOut:GE,anticipate:QE},jk=t=>{if(Vv(t)){mE(t.length===4);const[e,n,i,r]=t;return Al(e,n,i,r)}else if(typeof t=="string")return yF[t];return t};function bF(t,e,n){const i=[],r=n||mP,s=t.length-1;for(let a=0;a<s;a++){let l=r(t[a],t[a+1]);if(e){const u=Array.isArray(e)?e[a]||Wn:e;l=Nl(u,l)}i.push(l)}return i}function xF(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(mE(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=bF(e,i,r),u=l.length,d=h=>{if(a&&h<t[0])return e[0];let m=0;if(u>1)for(;m<t.length-2&&!(h<t[m+1]);m++);const g=ga(t[m],t[m+1],h);return l[m](g)};return n?h=>d(Cr(t[0],t[s-1],h)):d}function kF(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=ga(0,e,i);t.push(kt(n,1,r))}}function SF(t){const e=[0];return kF(e,t.length-1),e}function wF(t,e){return t.map(n=>n*e)}function TF(t,e){return t.map(()=>e||yP).splice(0,t.length-1)}function qd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=vF(i)?i.map(jk):jk(i),s={done:!1,value:e[0]},a=wF(n&&n.length===e.length?n:SF(e),t),l=xF(a,e,{ease:Array.isArray(r)?r:TF(e,r)});return{calculatedDuration:t,next:u=>(s.value=l(u),s.done=u>=t,s)}}const CF=t=>{const e=({timestamp:n})=>t(n);return{start:()=>pt.update(e,!0),stop:()=>us(e),now:()=>en.isProcessing?en.timestamp:$i.now()}},EF={decay:Lk,inertia:Lk,tween:qd,keyframes:qd,spring:vP},PF=t=>t/100;class Yv extends hP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:i,element:r,keyframes:s}=this.options,a=r?.KeyframeResolver||Qv,l=(u,d)=>this.onKeyframesResolved(u,d);this.resolver=new a(s,l,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=this.options,l=Uv(n)?n:EF[n]||qd;let u,d;l!==qd&&typeof e[0]!="number"&&(u=Nl(PF,mP(e[0],e[1])),e=[0,100]);const h=l({...this.options,keyframes:e});s==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=ME(h));const{calculatedDuration:m}=h,g=m+r,k=g*(i+1)-r;return{generator:h,mirroredGenerator:d,mapPercentToKeyframes:u,calculatedDuration:m,resolvedDuration:g,totalDuration:k}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:j}=this.options;return{done:!0,value:j[j.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:a,mapPercentToKeyframes:l,keyframes:u,calculatedDuration:d,totalDuration:h,resolvedDuration:m}=i;if(this.startTime===null)return s.next(0);const{delay:g,repeat:k,repeatType:T,repeatDelay:x,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const E=this.currentTime-g*(this.speed>=0?1:-1),A=this.speed>=0?E<0:E>h;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let N=this.currentTime,w=s;if(k){const j=Math.min(this.currentTime,h)/m;let V=Math.floor(j),B=j%1;!B&&j>=1&&(B=1),B===1&&V--,V=Math.min(V,k+1),V%2&&(T==="reverse"?(B=1-B,x&&(B-=x/m)):T==="mirror"&&(w=a)),N=Cr(0,1,B)*m}const S=A?{done:!1,value:u[0]}:w.next(N);l&&(S.value=l(S.value));let{done:R}=S;!A&&d!==null&&(R=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return D&&r!==void 0&&(S.value=Ff(u,this.options,r)),C&&C(S.value),D&&this.finish(),S}get duration(){const{resolved:e}=this;return e?Sr(e.calculatedDuration):0}get time(){return Sr(this.currentTime)}set time(e){e=kr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Sr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=CF,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const _F=new Set(["opacity","clipPath","filter","transform"]);function RF(t,e,n,{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:l="easeInOut",times:u}={}){const d={[e]:n};u&&(d.offset=u);const h=FE(l,r);return Array.isArray(h)&&(d.easing=h),t.animate(d,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const AF=Tv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Hd=10,NF=2e4;function OF(t){return Uv(t.type)||t.type==="spring"||!jE(t.ease)}function IF(t,e){const n=new Yv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let s=0;for(;!i.done&&s<NF;)i=n.sample(s),r.push(i.value),s+=Hd;return{times:void 0,keyframes:r,duration:s-Hd,ease:"linear"}}const bP={anticipate:QE,backInOut:ZE,circInOut:YE};function DF(t){return t in bP}class Fk extends hP{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new fP(s,(a,l)=>this.onKeyframesResolved(a,l),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:s,type:a,motionValue:l,name:u,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof s=="string"&&zd()&&DF(s)&&(s=bP[s]),OF(this.options)){const{onComplete:m,onUpdate:g,motionValue:k,element:T,...x}=this.options,C=IF(e,x);e=C.keyframes,e.length===1&&(e[1]=e[0]),i=C.duration,r=C.times,s=C.ease,a="keyframes"}const h=RF(l.owner.current,u,e,{...this.options,duration:i,times:r,ease:s});return h.startTime=d??this.calcStartTime(),this.pendingTimeline?(Sk(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:m}=this.options;l.set(Ff(e,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:r,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Sr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Sr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=kr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Wn;const{animation:i}=n;Sk(i,e)}return Wn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:s,ease:a,times:l}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:h,onComplete:m,element:g,...k}=this.options,T=new Yv({...k,keyframes:i,duration:r,type:s,ease:a,times:l,isGenerator:!0}),x=kr(this.time);d.setWithVelocity(T.sample(x-Hd).value,T.sample(x).value,Hd)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:s,damping:a,type:l}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=n.owner.getProps();return AF()&&i&&_F.has(i)&&!u&&!d&&!r&&s!=="mirror"&&a!==0&&l!=="inertia"}}const MF={type:"spring",stiffness:500,damping:25,restSpeed:10},LF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),jF={type:"keyframes",duration:.8},FF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},UF=(t,{keyframes:e})=>e.length>2?jF:ro.has(t)?t.startsWith("scale")?LF(e[1]):MF:FF;function VF({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const Xv=(t,e,n,i={},r,s)=>a=>{const l=Fv(i,t)||{},u=l.delay||i.delay||0;let{elapsed:d=0}=i;d=d-kr(u);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:g=>{e.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:r};VF(l)||(h={...h,...UF(t,h)}),h.duration&&(h.duration=kr(h.duration)),h.repeatDelay&&(h.repeatDelay=kr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(m=!0)),m&&!s&&e.get()!==void 0){const g=Ff(h.keyframes,l);if(g!==void 0)return pt.update(()=>{h.onUpdate(g),h.onComplete()}),new s2([])}return!s&&Fk.supports(h)?new Fk(h):new Yv(h)};function BF({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function xP(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:l,...u}=e;i&&(a=i);const d=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const m in u){const g=t.getValue(m,(s=t.latestValues[m])!==null&&s!==void 0?s:null),k=u[m];if(k===void 0||h&&BF(h,m))continue;const T={delay:n,...Fv(a||{},m)};let x=!1;if(window.MotionHandoffAnimation){const E=qE(t);if(E){const A=window.MotionHandoffAnimation(E,m,pt);A!==null&&(T.startTime=A,x=!0)}}ig(t,m),g.start(Xv(m,g,k,t.shouldReduceMotion&&zE.has(m)?{type:!1}:T,t,x));const C=g.animation;C&&d.push(C)}return l&&Promise.all(d).then(()=>{pt.update(()=>{l&&b2(t,l)})}),d}function ug(t,e,n={}){var i;const r=jf(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(xP(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:g}=s;return zF(t,e,h+d,m,g,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,h]=u==="beforeChildren"?[a,l]:[l,a];return d().then(()=>h())}else return Promise.all([a(),l(n.delay)])}function zF(t,e,n=0,i=0,r=1,s){const a=[],l=(t.variantChildren.size-1)*i,u=r===1?(d=0)=>d*i:(d=0)=>l-d*i;return Array.from(t.variantChildren).sort(WF).forEach((d,h)=>{d.notify("AnimationStart",e),a.push(ug(d,e,{...s,delay:n+u(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(a)}function WF(t,e){return t.sortNodePosition(e)}function qF(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>ug(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=ug(t,e,n);else{const r=typeof e=="function"?jf(t,e,n.custom):e;i=Promise.all(xP(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const HF=Ev.length;function kP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?kP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<HF;n++){const i=Ev[n],r=t.props[i];(tl(r)||r===!1)&&(e[i]=r)}return e}const $F=[...Cv].reverse(),KF=Cv.length;function GF(t){return e=>Promise.all(e.map(({animation:n,options:i})=>qF(t,n,i)))}function ZF(t){let e=GF(t),n=Uk(),i=!0;const r=u=>(d,h)=>{var m;const g=jf(t,h,u==="exit"?(m=t.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(g){const{transition:k,transitionEnd:T,...x}=g;d={...d,...x,...T}}return d};function s(u){e=u(t)}function a(u){const{props:d}=t,h=kP(t.parent)||{},m=[],g=new Set;let k={},T=1/0;for(let C=0;C<KF;C++){const E=$F[C],A=n[E],N=d[E]!==void 0?d[E]:h[E],w=tl(N),S=E===u?A.isActive:null;S===!1&&(T=C);let R=N===h[E]&&N!==d[E]&&w;if(R&&i&&t.manuallyAnimateOnMount&&(R=!1),A.protectedKeys={...k},!A.isActive&&S===null||!N&&!A.prevProp||Mf(N)||typeof N=="boolean")continue;const D=QF(A.prevProp,N);let j=D||E===u&&A.isActive&&!R&&w||C>T&&w,V=!1;const B=Array.isArray(N)?N:[N];let W=B.reduce(r(E),{});S===!1&&(W={});const{prevResolvedValues:H={}}=A,ie={...H,...W},ee=he=>{j=!0,g.has(he)&&(V=!0,g.delete(he)),A.needsAnimating[he]=!0;const Z=t.getValue(he);Z&&(Z.liveStyle=!1)};for(const he in ie){const Z=W[he],le=H[he];if(k.hasOwnProperty(he))continue;let oe=!1;eg(Z)&&eg(le)?oe=!DE(Z,le):oe=Z!==le,oe?Z!=null?ee(he):g.add(he):Z!==void 0&&g.has(he)?ee(he):A.protectedKeys[he]=!0}A.prevProp=N,A.prevResolvedValues=W,A.isActive&&(k={...k,...W}),i&&t.blockInitialAnimation&&(j=!1),j&&(!(R&&D)||V)&&m.push(...B.map(he=>({animation:he,options:{type:E}})))}if(g.size){const C={};g.forEach(E=>{const A=t.getBaseTarget(E),N=t.getValue(E);N&&(N.liveStyle=!0),C[E]=A??null}),m.push({animation:C})}let x=!!m.length;return i&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(x=!1),i=!1,x?e(m):Promise.resolve()}function l(u,d){var h;if(n[u].isActive===d)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(g=>{var k;return(k=g.animationState)===null||k===void 0?void 0:k.setActive(u,d)}),n[u].isActive=d;const m=a(u);for(const g in n)n[g].protectedKeys={};return m}return{animateChanges:a,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Uk(),i=!0}}}function QF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!DE(e,t):!1}function Fs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Uk(){return{animate:Fs(!0),whileInView:Fs(),whileHover:Fs(),whileTap:Fs(),whileDrag:Fs(),whileFocus:Fs(),exit:Fs()}}class bs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class JF extends bs{constructor(e){super(e),e.animationState||(e.animationState=ZF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Mf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let YF=0;class XF extends bs{constructor(){super(...arguments),this.id=YF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const eU={animation:{Feature:JF},exit:{Feature:XF}};function sl(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Ol(t){return{point:{x:t.pageX,y:t.pageY}}}const tU=t=>e=>Bv(e)&&t(e,Ol(e));function zc(t,e,n,i){return sl(t,e,tU(n),i)}const Vk=(t,e)=>Math.abs(t-e);function nU(t,e){const n=Vk(t.x,e.x),i=Vk(t.y,e.y);return Math.sqrt(n**2+i**2)}class SP{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=om(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,k=nU(m.offset,{x:0,y:0})>=3;if(!g&&!k)return;const{point:T}=m,{timestamp:x}=en;this.history.push({...T,timestamp:x});const{onStart:C,onMove:E}=this.handlers;g||(C&&C(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=sm(g,this.transformPagePoint),pt.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:k,onSessionEnd:T,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=om(m.type==="pointercancel"?this.lastMoveEventInfo:sm(g,this.transformPagePoint),this.history);this.startEvent&&k&&k(m,C),T&&T(m,C)},!Bv(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Ol(e),l=sm(a,this.transformPagePoint),{point:u}=l,{timestamp:d}=en;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,om(l,this.history)),this.removeListeners=Nl(zc(this.contextWindow,"pointermove",this.handlePointerMove),zc(this.contextWindow,"pointerup",this.handlePointerUp),zc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),us(this.updatePoint)}}function sm(t,e){return e?{point:e(t.point)}:t}function Bk(t,e){return{x:t.x-e.x,y:t.y-e.y}}function om({point:t},e){return{point:t,delta:Bk(t,wP(e)),offset:Bk(t,iU(e)),velocity:rU(e,.1)}}function iU(t){return t[0]}function wP(t){return t[t.length-1]}function rU(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=wP(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>kr(e)));)n--;if(!i)return{x:0,y:0};const s=Sr(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const TP=1e-4,sU=1-TP,oU=1+TP,CP=.01,aU=0-CP,cU=0+CP;function Hn(t){return t.max-t.min}function lU(t,e,n){return Math.abs(t-e)<=n}function zk(t,e,n,i=.5){t.origin=i,t.originPoint=kt(e.min,e.max,t.origin),t.scale=Hn(n)/Hn(e),t.translate=kt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=sU&&t.scale<=oU||isNaN(t.scale))&&(t.scale=1),(t.translate>=aU&&t.translate<=cU||isNaN(t.translate))&&(t.translate=0)}function Wc(t,e,n,i){zk(t.x,e.x,n.x,i?i.originX:void 0),zk(t.y,e.y,n.y,i?i.originY:void 0)}function Wk(t,e,n){t.min=n.min+e.min,t.max=t.min+Hn(e)}function uU(t,e,n){Wk(t.x,e.x,n.x),Wk(t.y,e.y,n.y)}function qk(t,e,n){t.min=e.min-n.min,t.max=t.min+Hn(e)}function qc(t,e,n){qk(t.x,e.x,n.x),qk(t.y,e.y,n.y)}function dU(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?kt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?kt(n,t,i.max):Math.min(t,n)),t}function Hk(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function fU(t,{top:e,left:n,bottom:i,right:r}){return{x:Hk(t.x,n,r),y:Hk(t.y,e,i)}}function $k(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function hU(t,e){return{x:$k(t.x,e.x),y:$k(t.y,e.y)}}function pU(t,e){let n=.5;const i=Hn(t),r=Hn(e);return r>i?n=ga(e.min,e.max-i,t.min):i>r&&(n=ga(t.min,t.max-r,e.min)),Cr(0,1,n)}function mU(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const dg=.35;function gU(t=dg){return t===!1?t=0:t===!0&&(t=dg),{x:Kk(t,"left","right"),y:Kk(t,"top","bottom")}}function Kk(t,e,n){return{min:Gk(t,e),max:Gk(t,n)}}function Gk(t,e){return typeof t=="number"?t:t[e]||0}const Zk=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zo=()=>({x:Zk(),y:Zk()}),Qk=()=>({min:0,max:0}),It=()=>({x:Qk(),y:Qk()});function Xn(t){return[t("x"),t("y")]}function EP({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function vU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function yU(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function am(t){return t===void 0||t===1}function fg({scale:t,scaleX:e,scaleY:n}){return!am(t)||!am(e)||!am(n)}function Us(t){return fg(t)||PP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function PP(t){return Jk(t.x)||Jk(t.y)}function Jk(t){return t&&t!=="0%"}function $d(t,e,n){const i=t-n,r=e*i;return n+r}function Yk(t,e,n,i,r){return r!==void 0&&(t=$d(t,r,i)),$d(t,n,i)+e}function hg(t,e=0,n=1,i,r){t.min=Yk(t.min,e,n,i,r),t.max=Yk(t.max,e,n,i,r)}function _P(t,{x:e,y:n}){hg(t.x,e.translate,e.scale,e.originPoint),hg(t.y,n.translate,n.scale,n.originPoint)}const Xk=.999999999999,eS=1.0000000000001;function bU(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,a;for(let l=0;l<r;l++){s=n[l],a=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Jo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,_P(t,a)),i&&Us(s.latestValues)&&Jo(t,s.latestValues))}e.x<eS&&e.x>Xk&&(e.x=1),e.y<eS&&e.y>Xk&&(e.y=1)}function Qo(t,e){t.min=t.min+e,t.max=t.max+e}function tS(t,e,n,i,r=.5){const s=kt(t.min,t.max,r);hg(t,e,n,s,i)}function Jo(t,e){tS(t.x,e.x,e.scaleX,e.scale,e.originX),tS(t.y,e.y,e.scaleY,e.scale,e.originY)}function RP(t,e){return EP(yU(t.getBoundingClientRect(),e))}function xU(t,e,n){const i=RP(t,n),{scroll:r}=e;return r&&(Qo(i.x,r.offset.x),Qo(i.y,r.offset.y)),i}const AP=({current:t})=>t?t.ownerDocument.defaultView:null,kU=new WeakMap;class SU{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=It(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ol(h).point)},s=(h,m)=>{const{drag:g,dragPropagation:k,onDragStart:T}=this.getProps();if(g&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=p2(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xn(C=>{let E=this.getAxisMotionValue(C).get()||0;if(Hi.test(E)){const{projection:A}=this.visualElement;if(A&&A.layout){const N=A.layout.layoutBox[C];N&&(E=Hn(N)*(parseFloat(E)/100))}}this.originPoint[C]=E}),T&&pt.postRender(()=>T(h,m)),ig(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(h,m)=>{const{dragPropagation:g,dragDirectionLock:k,onDirectionLock:T,onDrag:x}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:C}=m;if(k&&this.currentDirection===null){this.currentDirection=wU(C),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",m.point,C),this.updateAxis("y",m.point,C),this.visualElement.render(),x&&x(h,m)},l=(h,m)=>this.stop(h,m),u=()=>Xn(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new SP(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:AP(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&pt.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Xu(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=dU(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ko(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=fU(r.layoutBox,n):this.constraints=!1,this.elastic=gU(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Xn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=mU(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ko(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=xU(i,r.root,this.visualElement.getTransformPagePoint());let a=hU(r.layout.layoutBox,s);if(n){const l=n(vU(a));this.hasMutatedConstraints=!!l,l&&(a=EP(l))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=Xn(h=>{if(!Xu(h,n,this.currentDirection))return;let m=u&&u[h]||{};a&&(m={min:0,max:0});const g=r?200:1e6,k=r?40:1e7,T={type:"inertia",velocity:i?e[h]:0,bounceStiffness:g,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(h,T)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return ig(this.visualElement,e),i.start(Xv(e,i,0,n,this.visualElement,!1))}stopAnimation(){Xn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Xn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Xn(n=>{const{drag:i}=this.getProps();if(!Xu(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:l}=r.layout.layoutBox[n];s.set(e[n]-kt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Ko(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Xn(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const u=l.get();r[a]=pU({min:u,max:u},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Xn(a=>{if(!Xu(a,e,null))return;const l=this.getAxisMotionValue(a),{min:u,max:d}=this.constraints[a];l.set(kt(u,d,r[a]))})}addListeners(){if(!this.visualElement.current)return;kU.set(this.visualElement,this);const e=this.visualElement.current,n=zc(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),i=()=>{const{dragConstraints:u}=this.getProps();Ko(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),pt.read(i);const a=sl(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Xn(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=u[h].translate,m.set(m.get()+u[h].translate))}),this.visualElement.render())}));return()=>{a(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=dg,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:l}}}function Xu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function wU(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class TU extends bs{constructor(e){super(e),this.removeGroupControls=Wn,this.removeListeners=Wn,this.controls=new SU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wn}unmount(){this.removeGroupControls(),this.removeListeners()}}const nS=t=>(e,n)=>{t&&pt.postRender(()=>t(e,n))};class CU extends bs{constructor(){super(...arguments),this.removePointerDownListener=Wn}onPointerDown(e){this.session=new SP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:AP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:nS(e),onStart:nS(n),onMove:i,onEnd:(s,a)=>{delete this.session,r&&pt.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=zc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Sc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ie.test(t))t=parseFloat(t);else return t;const n=iS(t,e.target.x),i=iS(t,e.target.y);return`${n}% ${i}%`}},EU={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ds.parse(t);if(r.length>5)return i;const s=ds.createTransformer(t),a=typeof r[0]!="number"?1:0,l=n.x.scale*e.x,u=n.y.scale*e.y;r[0+a]/=l,r[1+a]/=u;const d=kt(l,u,.5);return typeof r[2+a]=="number"&&(r[2+a]/=d),typeof r[3+a]=="number"&&(r[3+a]/=d),s(r)}};class PU extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;Kj(_U),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),gd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,a=i.projection;return a&&(a.isPresent=s,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||pt.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),_v.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function NP(t){const[e,n]=cj(),i=P.useContext(hE);return y.jsx(PU,{...t,layoutGroup:i,switchLayoutGroup:P.useContext(kE),isPresent:e,safeToRemove:n})}const _U={borderRadius:{...Sc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sc,borderTopRightRadius:Sc,borderBottomLeftRadius:Sc,borderBottomRightRadius:Sc,boxShadow:EU};function RU(t,e,n){const i=hn(t)?t:il(t);return i.start(Xv("",i,e,n)),i.animation}function AU(t){return t instanceof SVGElement&&t.tagName!=="svg"}const NU=(t,e)=>t.depth-e.depth;class OU{constructor(){this.children=[],this.isDirty=!1}add(e){zv(this.children,e),this.isDirty=!0}remove(e){Wv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(NU),this.isDirty=!1,this.children.forEach(e)}}function IU(t,e){const n=$i.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(us(i),t(s-e))};return pt.read(i,!0),()=>us(i)}const OP=["TopLeft","TopRight","BottomLeft","BottomRight"],DU=OP.length,rS=t=>typeof t=="string"?parseFloat(t):t,sS=t=>typeof t=="number"||Ie.test(t);function MU(t,e,n,i,r,s){r?(t.opacity=kt(0,n.opacity!==void 0?n.opacity:1,LU(i)),t.opacityExit=kt(e.opacity!==void 0?e.opacity:1,0,jU(i))):s&&(t.opacity=kt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<DU;a++){const l=`border${OP[a]}Radius`;let u=oS(e,l),d=oS(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||sS(u)===sS(d)?(t[l]=Math.max(kt(rS(u),rS(d),i),0),(Hi.test(d)||Hi.test(u))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=kt(e.rotate||0,n.rotate||0,i))}function oS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const LU=IP(0,.5,JE),jU=IP(.5,.95,Wn);function IP(t,e,n){return i=>i<t?0:i>e?1:n(ga(t,e,i))}function aS(t,e){t.min=e.min,t.max=e.max}function Yn(t,e){aS(t.x,e.x),aS(t.y,e.y)}function cS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function lS(t,e,n,i,r){return t-=e,t=$d(t,1/n,i),r!==void 0&&(t=$d(t,1/r,i)),t}function FU(t,e=0,n=1,i=.5,r,s=t,a=t){if(Hi.test(e)&&(e=parseFloat(e),e=kt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=kt(s.min,s.max,i);t===s&&(l-=e),t.min=lS(t.min,e,n,l,r),t.max=lS(t.max,e,n,l,r)}function uS(t,e,[n,i,r],s,a){FU(t,e[n],e[i],e[r],e.scale,s,a)}const UU=["x","scaleX","originX"],VU=["y","scaleY","originY"];function dS(t,e,n,i){uS(t.x,e,UU,n?n.x:void 0,i?i.x:void 0),uS(t.y,e,VU,n?n.y:void 0,i?i.y:void 0)}function fS(t){return t.translate===0&&t.scale===1}function DP(t){return fS(t.x)&&fS(t.y)}function hS(t,e){return t.min===e.min&&t.max===e.max}function BU(t,e){return hS(t.x,e.x)&&hS(t.y,e.y)}function pS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function MP(t,e){return pS(t.x,e.x)&&pS(t.y,e.y)}function mS(t){return Hn(t.x)/Hn(t.y)}function gS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class zU{constructor(){this.members=[]}add(e){zv(this.members,e),e.scheduleRender()}remove(e){if(Wv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function WU(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y,a=n?.z||0;if((r||s||a)&&(i=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:m,rotateY:g,skewX:k,skewY:T}=n;d&&(i=`perspective(${d}px) ${i}`),h&&(i+=`rotate(${h}deg) `),m&&(i+=`rotateX(${m}deg) `),g&&(i+=`rotateY(${g}deg) `),k&&(i+=`skewX(${k}deg) `),T&&(i+=`skewY(${T}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(i+=`scale(${l}, ${u})`),i||"none"}const Vs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Dc=typeof window<"u"&&window.MotionDebug!==void 0,cm=["","X","Y","Z"],qU={visibility:"hidden"},vS=1e3;let HU=0;function lm(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function LP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=qE(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",pt,!(r||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&LP(i)}function jP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},l=e?.()){this.id=HU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Dc&&(Vs.totalNodes=Vs.resolvedTargetDeltas=Vs.recalculatedProjection=0),this.nodes.forEach(GU),this.nodes.forEach(XU),this.nodes.forEach(e3),this.nodes.forEach(ZU),Dc&&window.MotionDebug.record(Vs)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new OU)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new qv),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const u=this.eventHandlers.get(a);u&&u.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=AU(a),this.instance=a;const{layoutId:u,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||u)&&(this.isLayoutDirty=!0),t){let m;const g=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=IU(g,250),gd.hasAnimatedSinceResize&&(gd.hasAnimatedSinceResize=!1,this.nodes.forEach(bS))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeTargetChanged:k,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||s3,{onLayoutAnimationStart:C,onLayoutAnimationComplete:E}=h.getProps(),A=!this.targetLayout||!MP(this.targetLayout,T)||k,N=!g&&k;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||g&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,N);const w={...Fv(x,"layout"),onPlay:C,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else g||bS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,us(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(t3),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&LP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yS);return}this.isUpdating||this.nodes.forEach(JU),this.isUpdating=!1,this.nodes.forEach(YU),this.nodes.forEach($U),this.nodes.forEach(KU),this.clearAllSnapshots();const l=$i.now();en.delta=Cr(0,1e3/60,l-en.timestamp),en.timestamp=l,en.isProcessing=!0,Xp.update.process(en),Xp.preRender.process(en),Xp.render.process(en),en.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_v.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(QU),this.sharedNodes.forEach(n3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=It(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l){const u=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!DP(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;a&&(l||Us(this.latestValues)||h)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return a&&(u=this.removeTransform(u)),o3(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:l}=this.options;if(!l)return It();const u=l.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(a3))){const{scroll:h}=this.root;h&&(Qo(u.x,h.offset.x),Qo(u.y,h.offset.y))}return u}removeElementScroll(a){var l;const u=It();if(Yn(u,a),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return u;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:g}=h;h!==this.root&&m&&g.layoutScroll&&(m.wasRoot&&Yn(u,a),Qo(u.x,m.offset.x),Qo(u.y,m.offset.y))}return u}applyTransform(a,l=!1){const u=It();Yn(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Jo(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Us(h.latestValues)&&Jo(u,h.latestValues)}return Us(this.latestValues)&&Jo(u,this.latestValues),u}removeTransform(a){const l=It();Yn(l,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Us(d.latestValues))continue;fg(d.latestValues)&&d.updateSnapshot();const h=It(),m=d.measurePageBox();Yn(h,m),dS(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Us(this.latestValues)&&dS(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==en.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(!(!this.layout||!(m||g))){if(this.resolvedRelativeTargetAt=en.timestamp,!this.targetDelta&&!this.relativeTarget){const k=this.getClosestProjectingParent();k&&k.layout&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),qc(this.relativeTargetOrigin,this.layout.layoutBox,k.layout.layoutBox),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=It(),this.targetWithTransforms=It()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),uU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yn(this.target,this.layout.layoutBox),_P(this.target,this.targetDelta)):Yn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const k=this.getClosestProjectingParent();k&&!!k.resumingFrom==!!this.resumingFrom&&!k.options.layoutScroll&&k.target&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),qc(this.relativeTargetOrigin,this.target,k.target),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Dc&&Vs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||fg(this.parent.latestValues)||PP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===en.timestamp&&(d=!1),d)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;Yn(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,k=this.treeScale.y;bU(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=It());const{target:T}=l;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cS(this.prevProjectionDelta.x,this.projectionDelta.x),cS(this.prevProjectionDelta.y,this.projectionDelta.y)),Wc(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==k||!gS(this.projectionDelta.x,this.prevProjectionDelta.x)||!gS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T)),Dc&&Vs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zo(),this.projectionDelta=Zo(),this.projectionDeltaWithTransform=Zo()}setAnimationOrigin(a,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},m=Zo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=It(),k=u?u.source:void 0,T=this.layout?this.layout.source:void 0,x=k!==T,C=this.getStack(),E=!C||C.members.length<=1,A=!!(x&&!E&&this.options.crossfade===!0&&!this.path.some(r3));this.animationProgress=0;let N;this.mixTargetDelta=w=>{const S=w/1e3;xS(m.x,a.x,S),xS(m.y,a.y,S),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qc(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),i3(this.relativeTarget,this.relativeTargetOrigin,g,S),N&&BU(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=It()),Yn(N,this.relativeTarget)),x&&(this.animationValues=h,MU(h,d,this.latestValues,S,A,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(us(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pt.update(()=>{gd.hasAnimatedSinceResize=!0,this.currentAnimation=RU(0,vS,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=a;if(!(!l||!u||!d)){if(this!==a&&this.layout&&d&&FP(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||It();const m=Hn(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+m;const g=Hn(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+g}Yn(l,u),Jo(l,h),Wc(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new zU),this.sharedNodes.get(a).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&lm("z",a,d,this.animationValues);for(let h=0;h<cm.length;h++)lm(`rotate${cm[h]}`,a,d,this.animationValues),lm(`skew${cm[h]}`,a,d,this.animationValues);a.render();for(const h in d)a.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);a.scheduleRender()}getProjectionStyles(a){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return qU;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=pd(a?.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=pd(a?.pointerEvents)||""),this.hasProjected&&!Us(this.latestValues)&&(x.transform=h?h({},""):"none",this.hasProjected=!1),x}const g=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=WU(this.projectionDeltaWithTransform,this.treeScale,g),h&&(d.transform=h(g,d.transform));const{x:k,y:T}=this.projectionDelta;d.transformOrigin=`${k.origin*100}% ${T.origin*100}% 0`,m.animationValues?d.opacity=m===this?(u=(l=g.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:d.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const x in Bd){if(g[x]===void 0)continue;const{correct:C,applyTo:E}=Bd[x],A=d.transform==="none"?g[x]:C(g[x],m);if(E){const N=E.length;for(let w=0;w<N;w++)d[E[w]]=A}else d[x]=A}return this.options.layoutId&&(d.pointerEvents=m===this?pd(a?.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(yS),this.root.sharedNodes.clear()}}}function $U(t){t.updateLayout()}function KU(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?Xn(m=>{const g=a?n.measuredBox[m]:n.layoutBox[m],k=Hn(g);g.min=i[m].min,g.max=g.min+k}):FP(s,n.layoutBox,i)&&Xn(m=>{const g=a?n.measuredBox[m]:n.layoutBox[m],k=Hn(i[m]);g.max=g.min+k,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+k)});const l=Zo();Wc(l,i,n.layoutBox);const u=Zo();a?Wc(u,t.applyTransform(r,!0),n.measuredBox):Wc(u,i,n.layoutBox);const d=!DP(l);let h=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:k}=m;if(g&&k){const T=It();qc(T,n.layoutBox,g.layoutBox);const x=It();qc(x,i,k.layoutBox),MP(T,x)||(h=!0),m.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=T,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function GU(t){Dc&&Vs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ZU(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function QU(t){t.clearSnapshot()}function yS(t){t.clearMeasurements()}function JU(t){t.isLayoutDirty=!1}function YU(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function bS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function XU(t){t.resolveTargetDelta()}function e3(t){t.calcProjection()}function t3(t){t.resetSkewAndRotation()}function n3(t){t.removeLeadSnapshot()}function xS(t,e,n){t.translate=kt(e.translate,0,n),t.scale=kt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function kS(t,e,n,i){t.min=kt(e.min,n.min,i),t.max=kt(e.max,n.max,i)}function i3(t,e,n,i){kS(t.x,e.x,n.x,i),kS(t.y,e.y,n.y,i)}function r3(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const s3={duration:.45,ease:[.4,0,.1,1]},SS=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),wS=SS("applewebkit/")&&!SS("chrome/")?Math.round:Wn;function TS(t){t.min=wS(t.min),t.max=wS(t.max)}function o3(t){TS(t.x),TS(t.y)}function FP(t,e,n){return t==="position"||t==="preserve-aspect"&&!lU(mS(e),mS(n),.2)}function a3(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const c3=jP({attachResizeListener:(t,e)=>sl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),um={current:void 0},UP=jP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!um.current){const t=new c3({});t.mount(window),t.setOptions({layoutScroll:!0}),um.current=t}return um.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),l3={pan:{Feature:CU},drag:{Feature:TU,ProjectionNode:UP,MeasureLayout:NP}};function CS(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,s=i[r];s&&pt.postRender(()=>s(e,Ol(e)))}class u3 extends bs{mount(){const{current:e}=this.node;e&&(this.unmount=l2(e,n=>(CS(this.node,n,"Start"),i=>CS(this.node,i,"End"))))}unmount(){}}class d3 extends bs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Nl(sl(this.node.current,"focus",()=>this.onFocus()),sl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ES(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),s=i[r];s&&pt.postRender(()=>s(e,Ol(e)))}class f3 extends bs{mount(){const{current:e}=this.node;e&&(this.unmount=h2(e,n=>(ES(this.node,n,"Start"),(i,{success:r})=>ES(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const pg=new WeakMap,dm=new WeakMap,h3=t=>{const e=pg.get(t.target);e&&e(t)},p3=t=>{t.forEach(h3)};function m3({root:t,...e}){const n=t||document;dm.has(n)||dm.set(n,{});const i=dm.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(p3,{root:t,...e})),i[r]}function g3(t,e,n){const i=m3(e);return pg.set(t,n),i.observe(t),()=>{pg.delete(t),i.unobserve(t)}}const v3={some:0,all:1};class y3 extends bs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:v3[r]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),g=d?h:m;g&&g(u)};return g3(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(b3(e,n))&&this.startObserver()}unmount(){}}function b3({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const x3={inView:{Feature:y3},tap:{Feature:f3},focus:{Feature:d3},hover:{Feature:u3}},k3={layout:{ProjectionNode:UP,MeasureLayout:NP}},mg={current:null},VP={current:!1};function S3(){if(VP.current=!0,!!wv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>mg.current=t.matches;t.addListener(e),e()}else mg.current=!1}const w3=[...dP,dn,ds],T3=t=>w3.find(uP(t)),PS=new WeakMap;function C3(t,e,n){for(const i in e){const r=e[i],s=n[i];if(hn(r))t.addValue(i,r);else if(hn(s))t.addValue(i,il(r,{owner:t}));else if(s!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,il(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const _S=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class E3{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const k=$i.now();this.renderScheduledAt<k&&(this.renderScheduledAt=k,pt.render(this.render,!1,!0))};const{latestValues:u,renderState:d,onUpdate:h}=a;this.onUpdate=h,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Lf(n),this.isVariantNode=bE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const k in g){const T=g[k];u[k]!==void 0&&hn(T)&&T.set(u[k],!1)}}mount(e){this.current=e,PS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),VP.current||S3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:mg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){PS.delete(this.current),this.projection&&this.projection.unmount(),us(this.notifyUpdate),us(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ro.has(e),r=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&pt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in va){const n=va[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):It()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<_S.length;i++){const r=_S[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=C3(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=il(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(cP(r)||XE(r))?r=parseFloat(r):!T3(r)&&ds.test(n)&&(r=sP(e,n)),this.setBaseTarget(e,hn(r)?r.get():r)),hn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=Av(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!hn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new qv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class BP extends E3{constructor(){super(...arguments),this.KeyframeResolver=fP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;hn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function P3(t){return window.getComputedStyle(t)}class _3 extends BP{constructor(){super(...arguments),this.type="html",this.renderInstance=_E}readValueFromInstance(e,n){if(ro.has(n)){const i=Zv(n);return i&&i.default||0}else{const i=P3(e),r=(CE(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return RP(e,n)}build(e,n,i){Iv(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return jv(e,n,i)}}class R3 extends BP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=It}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ro.has(n)){const i=Zv(n);return i&&i.default||0}return n=RE.has(n)?n:Pv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return OE(e,n,i)}build(e,n,i){Dv(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){AE(e,n,i,r)}mount(e){this.isSVGTag=Lv(e.tagName),super.mount(e)}}const A3=(t,e)=>Rv(t)?new R3(e):new _3(e,{allowProjection:t!==P.Fragment}),N3=n2({...eU,...x3,...l3,...k3},A3),In=vj(N3),O3=lv("inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95 duration-200",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-lg shadow-primary/20",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-accent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",glow:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-[0_0_20px_-5px_var(--primary)] hover:shadow-[0_0_30px_-5px_var(--primary)] border border-primary/50"},size:{default:"h-11 px-6 py-2",sm:"h-9 rounded-lg px-3",lg:"h-14 rounded-xl px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Et=P.forwardRef(({className:t,variant:e,size:n,asChild:i=!1,...r},s)=>{const a=i?_I:"button";return y.jsx(a,{className:Rt(O3({variant:e,size:n,className:t})),ref:s,...r})});Et.displayName="Button";var Il=t=>t.type==="checkbox",qs=t=>t instanceof Date,bn=t=>t==null;const zP=t=>typeof t=="object";var Mt=t=>!bn(t)&&!Array.isArray(t)&&zP(t)&&!qs(t),I3=t=>Mt(t)&&t.target?Il(t.target)?t.target.checked:t.target.value:t,D3=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,M3=(t,e)=>t.has(D3(e)),L3=t=>{const e=t.constructor&&t.constructor.prototype;return Mt(e)&&e.hasOwnProperty("isPrototypeOf")},ey=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function un(t){let e;const n=Array.isArray(t),i=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(ey&&(t instanceof Blob||i))&&(n||Mt(t)))if(e=n?[]:{},!n&&!L3(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=un(t[r]));else return t;return e}var Uf=t=>Array.isArray(t)?t.filter(Boolean):[],Ut=t=>t===void 0,Te=(t,e,n)=>{if(!e||!Mt(t))return n;const i=Uf(e.split(/[,[\].]+?/)).reduce((r,s)=>bn(r)?r:r[s],t);return Ut(i)||i===t?Ut(t[e])?n:t[e]:i},Ui=t=>typeof t=="boolean",ty=t=>/^\w*$/.test(t),WP=t=>Uf(t.replace(/["|']|\]/g,"").split(/\.|\[/)),st=(t,e,n)=>{let i=-1;const r=ty(e)?[e]:WP(e),s=r.length,a=s-1;for(;++i<s;){const l=r[i];let u=n;if(i!==a){const d=t[l];u=Mt(d)||Array.isArray(d)?d:isNaN(+r[i+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=u,t=t[l]}};const RS={BLUR:"blur",FOCUS_OUT:"focusout"},gi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},fr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};qt.createContext(null);var j3=(t,e,n,i=!0)=>{const r={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(r,s,{get:()=>{const a=s;return e._proxyFormState[a]!==gi.all&&(e._proxyFormState[a]=!i||gi.all),t[a]}});return r},Wi=t=>typeof t=="string",F3=(t,e,n,i,r)=>Wi(t)?(i&&e.watch.add(t),Te(n,t,r)):Array.isArray(t)?t.map(s=>(i&&e.watch.add(s),Te(n,s))):(i&&(e.watchAll=!0),n),qP=(t,e,n,i,r)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[i]:r||!0}}:{},Hc=t=>Array.isArray(t)?t:[t],AS=()=>{let t=[];return{get observers(){return t},next:r=>{for(const s of t)s.next&&s.next(r)},subscribe:r=>(t.push(r),{unsubscribe:()=>{t=t.filter(s=>s!==r)}}),unsubscribe:()=>{t=[]}}},gg=t=>bn(t)||!zP(t);function ts(t,e){if(gg(t)||gg(e))return t===e;if(qs(t)&&qs(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(const r of n){const s=t[r];if(!i.includes(r))return!1;if(r!=="ref"){const a=e[r];if(qs(s)&&qs(a)||Mt(s)&&Mt(a)||Array.isArray(s)&&Array.isArray(a)?!ts(s,a):s!==a)return!1}}return!0}var vn=t=>Mt(t)&&!Object.keys(t).length,ny=t=>t.type==="file",vi=t=>typeof t=="function",Kd=t=>{if(!ey)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},HP=t=>t.type==="select-multiple",iy=t=>t.type==="radio",U3=t=>iy(t)||Il(t),fm=t=>Kd(t)&&t.isConnected;function V3(t,e){const n=e.slice(0,-1).length;let i=0;for(;i<n;)t=Ut(t)?i++:t[e[i++]];return t}function B3(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ut(t[e]))return!1;return!0}function zt(t,e){const n=Array.isArray(e)?e:ty(e)?[e]:WP(e),i=n.length===1?t:V3(t,n),r=n.length-1,s=n[r];return i&&delete i[s],r!==0&&(Mt(i)&&vn(i)||Array.isArray(i)&&B3(i))&&zt(t,n.slice(0,-1)),t}var $P=t=>{for(const e in t)if(vi(t[e]))return!0;return!1};function Gd(t,e={}){const n=Array.isArray(t);if(Mt(t)||n)for(const i in t)Array.isArray(t[i])||Mt(t[i])&&!$P(t[i])?(e[i]=Array.isArray(t[i])?[]:{},Gd(t[i],e[i])):bn(t[i])||(e[i]=!0);return e}function KP(t,e,n){const i=Array.isArray(t);if(Mt(t)||i)for(const r in t)Array.isArray(t[r])||Mt(t[r])&&!$P(t[r])?Ut(e)||gg(n[r])?n[r]=Array.isArray(t[r])?Gd(t[r],[]):{...Gd(t[r])}:KP(t[r],bn(e)?{}:e[r],n[r]):n[r]=!ts(t[r],e[r]);return n}var wc=(t,e)=>KP(t,e,Gd(e));const NS={value:!1,isValid:!1},OS={value:!0,isValid:!0};var GP=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ut(t[0].attributes.value)?Ut(t[0].value)||t[0].value===""?OS:{value:t[0].value,isValid:!0}:OS:NS}return NS},ZP=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:i})=>Ut(t)?t:e?t===""?NaN:t&&+t:n&&Wi(t)?new Date(t):i?i(t):t;const IS={isValid:!1,value:null};var QP=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,IS):IS;function DS(t){const e=t.ref;return ny(e)?e.files:iy(e)?QP(t.refs).value:HP(e)?[...e.selectedOptions].map(({value:n})=>n):Il(e)?GP(t.refs).value:ZP(Ut(e.value)?t.ref.value:e.value,t)}var z3=(t,e,n,i)=>{const r={};for(const s of t){const a=Te(e,s);a&&st(r,s,a._f)}return{criteriaMode:n,names:[...t],fields:r,shouldUseNativeValidation:i}},Zd=t=>t instanceof RegExp,Tc=t=>Ut(t)?t:Zd(t)?t.source:Mt(t)?Zd(t.value)?t.value.source:t.value:t,MS=t=>({isOnSubmit:!t||t===gi.onSubmit,isOnBlur:t===gi.onBlur,isOnChange:t===gi.onChange,isOnAll:t===gi.all,isOnTouch:t===gi.onTouched});const LS="AsyncFunction";var W3=t=>!!t&&!!t.validate&&!!(vi(t.validate)&&t.validate.constructor.name===LS||Mt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===LS)),q3=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),jS=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(i=>t.startsWith(i)&&/^\.\w+/.test(t.slice(i.length))));const $c=(t,e,n,i)=>{for(const r of n||Object.keys(t)){const s=Te(t,r);if(s){const{_f:a,...l}=s;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],r)&&!i)return!0;if(a.ref&&e(a.ref,a.name)&&!i)return!0;if($c(l,e))break}else if(Mt(l)&&$c(l,e))break}}};function FS(t,e,n){const i=Te(t,n);if(i||ty(n))return{error:i,name:n};const r=n.split(".");for(;r.length;){const s=r.join("."),a=Te(e,s),l=Te(t,s);if(a&&!Array.isArray(a)&&n!==s)return{name:n};if(l&&l.type)return{name:s,error:l};r.pop()}return{name:n}}var H3=(t,e,n,i)=>{n(t);const{name:r,...s}=t;return vn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(a=>e[a]===(!i||gi.all))},$3=(t,e,n)=>!t||!e||t===e||Hc(t).some(i=>i&&(n?i===e:i.startsWith(e)||e.startsWith(i))),K3=(t,e,n,i,r)=>r.isOnAll?!1:!n&&r.isOnTouch?!(e||t):(n?i.isOnBlur:r.isOnBlur)?!t:(n?i.isOnChange:r.isOnChange)?t:!0,G3=(t,e)=>!Uf(Te(t,e)).length&&zt(t,e),Z3=(t,e,n)=>{const i=Hc(Te(t,n));return st(i,"root",e[n]),st(t,n,i),t},vd=t=>Wi(t);function US(t,e,n="validate"){if(vd(t)||Array.isArray(t)&&t.every(vd)||Ui(t)&&!t)return{type:n,message:vd(t)?t:"",ref:e}}var Uo=t=>Mt(t)&&!Zd(t)?t:{value:t,message:""},VS=async(t,e,n,i,r,s)=>{const{ref:a,refs:l,required:u,maxLength:d,minLength:h,min:m,max:g,pattern:k,validate:T,name:x,valueAsNumber:C,mount:E}=t._f,A=Te(n,x);if(!E||e.has(x))return{};const N=l?l[0]:a,w=H=>{r&&N.reportValidity&&(N.setCustomValidity(Ui(H)?"":H||""),N.reportValidity())},S={},R=iy(a),D=Il(a),j=R||D,V=(C||ny(a))&&Ut(a.value)&&Ut(A)||Kd(a)&&a.value===""||A===""||Array.isArray(A)&&!A.length,B=qP.bind(null,x,i,S),W=(H,ie,ee,Ce=fr.maxLength,ve=fr.minLength)=>{const he=H?ie:ee;S[x]={type:H?Ce:ve,message:he,ref:a,...B(H?Ce:ve,he)}};if(s?!Array.isArray(A)||!A.length:u&&(!j&&(V||bn(A))||Ui(A)&&!A||D&&!GP(l).isValid||R&&!QP(l).isValid)){const{value:H,message:ie}=vd(u)?{value:!!u,message:u}:Uo(u);if(H&&(S[x]={type:fr.required,message:ie,ref:N,...B(fr.required,ie)},!i))return w(ie),S}if(!V&&(!bn(m)||!bn(g))){let H,ie;const ee=Uo(g),Ce=Uo(m);if(!bn(A)&&!isNaN(A)){const ve=a.valueAsNumber||A&&+A;bn(ee.value)||(H=ve>ee.value),bn(Ce.value)||(ie=ve<Ce.value)}else{const ve=a.valueAsDate||new Date(A),he=oe=>new Date(new Date().toDateString()+" "+oe),Z=a.type=="time",le=a.type=="week";Wi(ee.value)&&A&&(H=Z?he(A)>he(ee.value):le?A>ee.value:ve>new Date(ee.value)),Wi(Ce.value)&&A&&(ie=Z?he(A)<he(Ce.value):le?A<Ce.value:ve<new Date(Ce.value))}if((H||ie)&&(W(!!H,ee.message,Ce.message,fr.max,fr.min),!i))return w(S[x].message),S}if((d||h)&&!V&&(Wi(A)||s&&Array.isArray(A))){const H=Uo(d),ie=Uo(h),ee=!bn(H.value)&&A.length>+H.value,Ce=!bn(ie.value)&&A.length<+ie.value;if((ee||Ce)&&(W(ee,H.message,ie.message),!i))return w(S[x].message),S}if(k&&!V&&Wi(A)){const{value:H,message:ie}=Uo(k);if(Zd(H)&&!A.match(H)&&(S[x]={type:fr.pattern,message:ie,ref:a,...B(fr.pattern,ie)},!i))return w(ie),S}if(T){if(vi(T)){const H=await T(A,n),ie=US(H,N);if(ie&&(S[x]={...ie,...B(fr.validate,ie.message)},!i))return w(ie.message),S}else if(Mt(T)){let H={};for(const ie in T){if(!vn(H)&&!i)break;const ee=US(await T[ie](A,n),N,ie);ee&&(H={...ee,...B(ie,ee.message)},w(ee.message),i&&(S[x]=H))}if(!vn(H)&&(S[x]={ref:N,...H},!i))return S}}return w(!0),S};const Q3={mode:gi.onSubmit,reValidateMode:gi.onChange,shouldFocusError:!0};function J3(t={}){let e={...Q3,...t},n={submitCount:0,isDirty:!1,isLoading:vi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const i={};let r=Mt(e.defaultValues)||Mt(e.values)?un(e.values||e.defaultValues)||{}:{},s=e.shouldUnregister?{}:un(r),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...h};const g={array:AS(),state:AS()},k=MS(e.mode),T=MS(e.reValidateMode),x=e.criteriaMode===gi.all,C=M=>K=>{clearTimeout(d),d=setTimeout(M,K)},E=async M=>{if(!e.disabled&&(h.isValid||m.isValid||M)){const K=e.resolver?vn((await V()).errors):await W(i,!0);K!==n.isValid&&g.state.next({isValid:K})}},A=(M,K)=>{!e.disabled&&(h.isValidating||h.validatingFields||m.isValidating||m.validatingFields)&&((M||Array.from(l.mount)).forEach(J=>{J&&(K?st(n.validatingFields,J,K):zt(n.validatingFields,J))}),g.state.next({validatingFields:n.validatingFields,isValidating:!vn(n.validatingFields)}))},N=(M,K=[],J,ye,me=!0,ue=!0)=>{if(ye&&J&&!e.disabled){if(a.action=!0,ue&&Array.isArray(Te(i,M))){const ke=J(Te(i,M),ye.argA,ye.argB);me&&st(i,M,ke)}if(ue&&Array.isArray(Te(n.errors,M))){const ke=J(Te(n.errors,M),ye.argA,ye.argB);me&&st(n.errors,M,ke),G3(n.errors,M)}if((h.touchedFields||m.touchedFields)&&ue&&Array.isArray(Te(n.touchedFields,M))){const ke=J(Te(n.touchedFields,M),ye.argA,ye.argB);me&&st(n.touchedFields,M,ke)}(h.dirtyFields||m.dirtyFields)&&(n.dirtyFields=wc(r,s)),g.state.next({name:M,isDirty:ie(M,K),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else st(s,M,K)},w=(M,K)=>{st(n.errors,M,K),g.state.next({errors:n.errors})},S=M=>{n.errors=M,g.state.next({errors:n.errors,isValid:!1})},R=(M,K,J,ye)=>{const me=Te(i,M);if(me){const ue=Te(s,M,Ut(J)?Te(r,M):J);Ut(ue)||ye&&ye.defaultChecked||K?st(s,M,K?ue:DS(me._f)):ve(M,ue),a.mount&&E()}},D=(M,K,J,ye,me)=>{let ue=!1,ke=!1;const Je={name:M};if(!e.disabled){if(!J||ye){(h.isDirty||m.isDirty)&&(ke=n.isDirty,n.isDirty=Je.isDirty=ie(),ue=ke!==Je.isDirty);const ct=ts(Te(r,M),K);ke=!!Te(n.dirtyFields,M),ct?zt(n.dirtyFields,M):st(n.dirtyFields,M,!0),Je.dirtyFields=n.dirtyFields,ue=ue||(h.dirtyFields||m.dirtyFields)&&ke!==!ct}if(J){const ct=Te(n.touchedFields,M);ct||(st(n.touchedFields,M,J),Je.touchedFields=n.touchedFields,ue=ue||(h.touchedFields||m.touchedFields)&&ct!==J)}ue&&me&&g.state.next(Je)}return ue?Je:{}},j=(M,K,J,ye)=>{const me=Te(n.errors,M),ue=(h.isValid||m.isValid)&&Ui(K)&&n.isValid!==K;if(e.delayError&&J?(u=C(()=>w(M,J)),u(e.delayError)):(clearTimeout(d),u=null,J?st(n.errors,M,J):zt(n.errors,M)),(J?!ts(me,J):me)||!vn(ye)||ue){const ke={...ye,...ue&&Ui(K)?{isValid:K}:{},errors:n.errors,name:M};n={...n,...ke},g.state.next(ke)}},V=async M=>{A(M,!0);const K=await e.resolver(s,e.context,z3(M||l.mount,i,e.criteriaMode,e.shouldUseNativeValidation));return A(M),K},B=async M=>{const{errors:K}=await V(M);if(M)for(const J of M){const ye=Te(K,J);ye?st(n.errors,J,ye):zt(n.errors,J)}else n.errors=K;return K},W=async(M,K,J={valid:!0})=>{for(const ye in M){const me=M[ye];if(me){const{_f:ue,...ke}=me;if(ue){const Je=l.array.has(ue.name),ct=me._f&&W3(me._f);ct&&h.validatingFields&&A([ye],!0);const St=await VS(me,l.disabled,s,x,e.shouldUseNativeValidation&&!K,Je);if(ct&&h.validatingFields&&A([ye]),St[ue.name]&&(J.valid=!1,K))break;!K&&(Te(St,ue.name)?Je?Z3(n.errors,St,ue.name):st(n.errors,ue.name,St[ue.name]):zt(n.errors,ue.name))}!vn(ke)&&await W(ke,K,J)}}return J.valid},H=()=>{for(const M of l.unMount){const K=Te(i,M);K&&(K._f.refs?K._f.refs.every(J=>!fm(J)):!fm(K._f.ref))&&Qe(M)}l.unMount=new Set},ie=(M,K)=>!e.disabled&&(M&&K&&st(s,M,K),!ts(X(),r)),ee=(M,K,J)=>F3(M,l,{...a.mount?s:Ut(K)?r:Wi(M)?{[M]:K}:K},J,K),Ce=M=>Uf(Te(a.mount?s:r,M,e.shouldUnregister?Te(r,M,[]):[])),ve=(M,K,J={})=>{const ye=Te(i,M);let me=K;if(ye){const ue=ye._f;ue&&(!ue.disabled&&st(s,M,ZP(K,ue)),me=Kd(ue.ref)&&bn(K)?"":K,HP(ue.ref)?[...ue.ref.options].forEach(ke=>ke.selected=me.includes(ke.value)):ue.refs?Il(ue.ref)?ue.refs.length>1?ue.refs.forEach(ke=>(!ke.defaultChecked||!ke.disabled)&&(ke.checked=Array.isArray(me)?!!me.find(Je=>Je===ke.value):me===ke.value)):ue.refs[0]&&(ue.refs[0].checked=!!me):ue.refs.forEach(ke=>ke.checked=ke.value===me):ny(ue.ref)?ue.ref.value="":(ue.ref.value=me,ue.ref.type||g.state.next({name:M,values:un(s)})))}(J.shouldDirty||J.shouldTouch)&&D(M,me,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&F(M)},he=(M,K,J)=>{for(const ye in K){const me=K[ye],ue=`${M}.${ye}`,ke=Te(i,ue);(l.array.has(M)||Mt(me)||ke&&!ke._f)&&!qs(me)?he(ue,me,J):ve(ue,me,J)}},Z=(M,K,J={})=>{const ye=Te(i,M),me=l.array.has(M),ue=un(K);st(s,M,ue),me?(g.array.next({name:M,values:un(s)}),(h.isDirty||h.dirtyFields||m.isDirty||m.dirtyFields)&&J.shouldDirty&&g.state.next({name:M,dirtyFields:wc(r,s),isDirty:ie(M,ue)})):ye&&!ye._f&&!bn(ue)?he(M,ue,J):ve(M,ue,J),jS(M,l)&&g.state.next({...n}),g.state.next({name:a.mount?M:void 0,values:un(s)})},le=async M=>{a.mount=!0;const K=M.target;let J=K.name,ye=!0;const me=Te(i,J),ue=ke=>{ye=Number.isNaN(ke)||qs(ke)&&isNaN(ke.getTime())||ts(ke,Te(s,J,ke))};if(me){let ke,Je;const ct=K.type?DS(me._f):I3(M),St=M.type===RS.BLUR||M.type===RS.FOCUS_OUT,Jf=!q3(me._f)&&!e.resolver&&!Te(n.errors,J)&&!me._f.deps||K3(St,Te(n.touchedFields,J),n.isSubmitted,T,k),lo=jS(J,l,St);st(s,J,ct),St?(me._f.onBlur&&me._f.onBlur(M),u&&u(0)):me._f.onChange&&me._f.onChange(M);const uo=D(J,ct,St),Yf=!vn(uo)||lo;if(!St&&g.state.next({name:J,type:M.type,values:un(s)}),Jf)return(h.isValid||m.isValid)&&(e.mode==="onBlur"?St&&E():St||E()),Yf&&g.state.next({name:J,...lo?{}:uo});if(!St&&lo&&g.state.next({...n}),e.resolver){const{errors:fo}=await V([J]);if(ue(ct),ye){const La=FS(n.errors,i,J),ho=FS(fo,i,La.name||J);ke=ho.error,J=ho.name,Je=vn(fo)}}else A([J],!0),ke=(await VS(me,l.disabled,s,x,e.shouldUseNativeValidation))[J],A([J]),ue(ct),ye&&(ke?Je=!1:(h.isValid||m.isValid)&&(Je=await W(i,!0)));ye&&(me._f.deps&&F(me._f.deps),j(J,Je,ke,uo))}},oe=(M,K)=>{if(Te(n.errors,K)&&M.focus)return M.focus(),1},F=async(M,K={})=>{let J,ye;const me=Hc(M);if(e.resolver){const ue=await B(Ut(M)?M:me);J=vn(ue),ye=M?!me.some(ke=>Te(ue,ke)):J}else M?(ye=(await Promise.all(me.map(async ue=>{const ke=Te(i,ue);return await W(ke&&ke._f?{[ue]:ke}:ke)}))).every(Boolean),!(!ye&&!n.isValid)&&E()):ye=J=await W(i);return g.state.next({...!Wi(M)||(h.isValid||m.isValid)&&J!==n.isValid?{}:{name:M},...e.resolver||!M?{isValid:J}:{},errors:n.errors}),K.shouldFocus&&!ye&&$c(i,oe,M?me:l.mount),ye},X=M=>{const K={...a.mount?s:r};return Ut(M)?K:Wi(M)?Te(K,M):M.map(J=>Te(K,J))},Re=(M,K)=>({invalid:!!Te((K||n).errors,M),isDirty:!!Te((K||n).dirtyFields,M),error:Te((K||n).errors,M),isValidating:!!Te(n.validatingFields,M),isTouched:!!Te((K||n).touchedFields,M)}),Me=M=>{M&&Hc(M).forEach(K=>zt(n.errors,K)),g.state.next({errors:M?n.errors:{}})},Be=(M,K,J)=>{const ye=(Te(i,M,{_f:{}})._f||{}).ref,me=Te(n.errors,M)||{},{ref:ue,message:ke,type:Je,...ct}=me;st(n.errors,M,{...ct,...K,ref:ye}),g.state.next({name:M,errors:n.errors,isValid:!1}),J&&J.shouldFocus&&ye&&ye.focus&&ye.focus()},Ue=(M,K)=>vi(M)?g.state.subscribe({next:J=>M(ee(void 0,K),J)}):ee(M,K,!0),Ae=M=>g.state.subscribe({next:K=>{$3(M.name,K.name,M.exact)&&H3(K,M.formState||h,Ma,M.reRenderRoot)&&M.callback({values:{...s},...n,...K})}}).unsubscribe,Ve=M=>(a.mount=!0,m={...m,...M.formState},Ae({...M,formState:m})),Qe=(M,K={})=>{for(const J of M?Hc(M):l.mount)l.mount.delete(J),l.array.delete(J),K.keepValue||(zt(i,J),zt(s,J)),!K.keepError&&zt(n.errors,J),!K.keepDirty&&zt(n.dirtyFields,J),!K.keepTouched&&zt(n.touchedFields,J),!K.keepIsValidating&&zt(n.validatingFields,J),!e.shouldUnregister&&!K.keepDefaultValue&&zt(r,J);g.state.next({values:un(s)}),g.state.next({...n,...K.keepDirty?{isDirty:ie()}:{}}),!K.keepIsValid&&E()},At=({disabled:M,name:K})=>{(Ui(M)&&a.mount||M||l.disabled.has(K))&&(M?l.disabled.add(K):l.disabled.delete(K))},Oi=(M,K={})=>{let J=Te(i,M);const ye=Ui(K.disabled)||Ui(e.disabled);return st(i,M,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:M}},name:M,mount:!0,...K}}),l.mount.add(M),J?At({disabled:Ui(K.disabled)?K.disabled:e.disabled,name:M}):R(M,!0,K.value),{...ye?{disabled:K.disabled||e.disabled}:{},...e.progressive?{required:!!K.required,min:Tc(K.min),max:Tc(K.max),minLength:Tc(K.minLength),maxLength:Tc(K.maxLength),pattern:Tc(K.pattern)}:{},name:M,onChange:le,onBlur:le,ref:me=>{if(me){Oi(M,K),J=Te(i,M);const ue=Ut(me.value)&&me.querySelectorAll&&me.querySelectorAll("input,select,textarea")[0]||me,ke=U3(ue),Je=J._f.refs||[];if(ke?Je.find(ct=>ct===ue):ue===J._f.ref)return;st(i,M,{_f:{...J._f,...ke?{refs:[...Je.filter(fm),ue,...Array.isArray(Te(r,M))?[{}]:[]],ref:{type:ue.type,name:M}}:{ref:ue}}}),R(M,!1,void 0,ue)}else J=Te(i,M,{}),J._f&&(J._f.mount=!1),(e.shouldUnregister||K.shouldUnregister)&&!(M3(l.array,M)&&a.action)&&l.unMount.add(M)}}},ws=()=>e.shouldFocusError&&$c(i,oe,l.mount),ri=M=>{Ui(M)&&(g.state.next({disabled:M}),$c(i,(K,J)=>{const ye=Te(i,J);ye&&(K.disabled=ye._f.disabled||M,Array.isArray(ye._f.refs)&&ye._f.refs.forEach(me=>{me.disabled=ye._f.disabled||M}))},0,!1))},oo=(M,K)=>async J=>{let ye;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let me=un(s);if(g.state.next({isSubmitting:!0}),e.resolver){const{errors:ue,values:ke}=await V();n.errors=ue,me=ke}else await W(i);if(l.disabled.size)for(const ue of l.disabled)st(me,ue,void 0);if(zt(n.errors,"root"),vn(n.errors)){g.state.next({errors:{}});try{await M(me,J)}catch(ue){ye=ue}}else K&&await K({...n.errors},J),ws(),setTimeout(ws);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:vn(n.errors)&&!ye,submitCount:n.submitCount+1,errors:n.errors}),ye)throw ye},jl=(M,K={})=>{Te(i,M)&&(Ut(K.defaultValue)?Z(M,un(Te(r,M))):(Z(M,K.defaultValue),st(r,M,un(K.defaultValue))),K.keepTouched||zt(n.touchedFields,M),K.keepDirty||(zt(n.dirtyFields,M),n.isDirty=K.defaultValue?ie(M,un(Te(r,M))):ie()),K.keepError||(zt(n.errors,M),h.isValid&&E()),g.state.next({...n}))},Da=(M,K={})=>{const J=M?un(M):r,ye=un(J),me=vn(M),ue=me?r:ye;if(K.keepDefaultValues||(r=J),!K.keepValues){if(K.keepDirtyValues){const ke=new Set([...l.mount,...Object.keys(wc(r,s))]);for(const Je of Array.from(ke))Te(n.dirtyFields,Je)?st(ue,Je,Te(s,Je)):Z(Je,Te(ue,Je))}else{if(ey&&Ut(M))for(const ke of l.mount){const Je=Te(i,ke);if(Je&&Je._f){const ct=Array.isArray(Je._f.refs)?Je._f.refs[0]:Je._f.ref;if(Kd(ct)){const St=ct.closest("form");if(St){St.reset();break}}}}for(const ke of l.mount)Z(ke,Te(ue,ke))}s=un(ue),g.array.next({values:{...ue}}),g.state.next({values:{...ue}})}l={mount:K.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!h.isValid||!!K.keepIsValid||!!K.keepDirtyValues,a.watch=!!e.shouldUnregister,g.state.next({submitCount:K.keepSubmitCount?n.submitCount:0,isDirty:me?!1:K.keepDirty?n.isDirty:!!(K.keepDefaultValues&&!ts(M,r)),isSubmitted:K.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:me?{}:K.keepDirtyValues?K.keepDefaultValues&&s?wc(r,s):n.dirtyFields:K.keepDefaultValues&&M?wc(r,M):K.keepDirty?n.dirtyFields:{},touchedFields:K.keepTouched?n.touchedFields:{},errors:K.keepErrors?n.errors:{},isSubmitSuccessful:K.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},ao=(M,K)=>Da(vi(M)?M(s):M,K),Fl=(M,K={})=>{const J=Te(i,M),ye=J&&J._f;if(ye){const me=ye.refs?ye.refs[0]:ye.ref;me.focus&&(me.focus(),K.shouldSelect&&vi(me.select)&&me.select())}},Ma=M=>{n={...n,...M}},nr={control:{register:Oi,unregister:Qe,getFieldState:Re,handleSubmit:oo,setError:Be,_subscribe:Ae,_runSchema:V,_getWatch:ee,_getDirty:ie,_setValid:E,_setFieldArray:N,_setDisabledField:At,_setErrors:S,_getFieldArray:Ce,_reset:Da,_resetDefaultValues:()=>vi(e.defaultValues)&&e.defaultValues().then(M=>{ao(M,e.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:H,_disableForm:ri,_subjects:g,_proxyFormState:h,get _fields(){return i},get _formValues(){return s},get _state(){return a},set _state(M){a=M},get _defaultValues(){return r},get _names(){return l},set _names(M){l=M},get _formState(){return n},get _options(){return e},set _options(M){e={...e,...M}}},subscribe:Ve,trigger:F,register:Oi,handleSubmit:oo,watch:Ue,setValue:Z,getValues:X,reset:ao,resetField:jl,clearErrors:Me,unregister:Qe,setError:Be,setFocus:Fl,getFieldState:Re};return{...nr,formControl:nr}}function Y3(t={}){const e=qt.useRef(void 0),n=qt.useRef(void 0),[i,r]=qt.useState({isDirty:!1,isValidating:!1,isLoading:vi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:vi(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:J3(t),formState:i},t.formControl&&t.defaultValues&&!vi(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const s=e.current.control;return s._options=t,qt.useLayoutEffect(()=>s._subscribe({formState:s._proxyFormState,callback:()=>r({...s._formState}),reRenderRoot:!0}),[s]),qt.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),qt.useEffect(()=>{if(s._proxyFormState.isDirty){const a=s._getDirty();a!==i.isDirty&&s._subjects.state.next({isDirty:a})}},[s,i.isDirty]),qt.useEffect(()=>{t.values&&!ts(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,r(a=>({...a}))):s._resetDefaultValues()},[t.values,s]),qt.useEffect(()=>{t.errors&&!vn(t.errors)&&s._setErrors(t.errors)},[t.errors,s]),qt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),qt.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=j3(i,s),e.current}const BS=(t,e,n)=>{if(t&&"reportValidity"in t){const i=Te(n,e);t.setCustomValidity(i&&i.message||""),t.reportValidity()}},JP=(t,e)=>{for(const n in e.fields){const i=e.fields[n];i&&i.ref&&"reportValidity"in i.ref?BS(i.ref,n,t):i.refs&&i.refs.forEach(r=>BS(r,n,t))}},X3=(t,e)=>{e.shouldUseNativeValidation&&JP(t,e);const n={};for(const i in t){const r=Te(e.fields,i),s=Object.assign(t[i]||{},{ref:r&&r.ref});if(e4(e.names||Object.keys(t),i)){const a=Object.assign({},Te(n,i));st(a,"root",s),st(n,i,a)}else st(n,i,s)}return n},e4=(t,e)=>t.some(n=>n.startsWith(e+"."));var t4=function(t,e){for(var n={};t.length;){var i=t[0],r=i.code,s=i.message,a=i.path.join(".");if(!n[a])if("unionErrors"in i){var l=i.unionErrors[0].errors[0];n[a]={message:l.message,type:l.code}}else n[a]={message:s,type:r};if("unionErrors"in i&&i.unionErrors.forEach(function(h){return h.errors.forEach(function(m){return t.push(m)})}),e){var u=n[a].types,d=u&&u[i.code];n[a]=qP(a,e,n,r,d?[].concat(d,i.message):i.message)}t.shift()}return n},n4=function(t,e,n){return n===void 0&&(n={}),function(i,r,s){try{return Promise.resolve((function(a,l){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](i,e)).then(function(d){return s.shouldUseNativeValidation&&JP({},s),{errors:{},values:n.raw?i:d}})}catch(d){return l(d)}return u&&u.then?u.then(void 0,l):u})(0,function(a){if((function(l){return Array.isArray(l?.errors)})(a))return{values:{},errors:X3(t4(a.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw a}))}catch(a){return Promise.reject(a)}}},Xe;(function(t){t.assertEqual=r=>r;function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const a of r)s[a]=a;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(l=>typeof r[r[l]]!="number"),a={};for(const l of s)a[l]=r[l];return t.objectValues(a)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&s.push(a);return s},t.find=(r,s)=>{for(const a of r)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(Xe||(Xe={}));var vg;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(vg||(vg={}));const xe=Xe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mr=t=>{switch(typeof t){case"undefined":return xe.undefined;case"string":return xe.string;case"number":return isNaN(t)?xe.nan:xe.number;case"boolean":return xe.boolean;case"function":return xe.function;case"bigint":return xe.bigint;case"symbol":return xe.symbol;case"object":return Array.isArray(t)?xe.array:t===null?xe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?xe.promise:typeof Map<"u"&&t instanceof Map?xe.map:typeof Set<"u"&&t instanceof Set?xe.set:typeof Date<"u"&&t instanceof Date?xe.date:xe.object;default:return xe.unknown}},ce=Xe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),i4=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class qn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(r);else if(a.code==="invalid_return_type")r(a.returnTypeError);else if(a.code==="invalid_arguments")r(a.argumentsError);else if(a.path.length===0)i._errors.push(n(a));else{let l=i,u=0;for(;u<a.path.length;){const d=a.path[u];u===a.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(a))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return r(this),i}static assert(e){if(!(e instanceof qn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Xe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}qn.create=t=>new qn(t);const ba=(t,e)=>{let n;switch(t.code){case ce.invalid_type:t.received===xe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Xe.jsonStringifyReplacer)}`;break;case ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${Xe.joinValues(t.keys,", ")}`;break;case ce.invalid_union:n="Invalid input";break;case ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Xe.joinValues(t.options)}`;break;case ce.invalid_enum_value:n=`Invalid enum value. Expected ${Xe.joinValues(t.options)}, received '${t.received}'`;break;case ce.invalid_arguments:n="Invalid function arguments";break;case ce.invalid_return_type:n="Invalid function return type";break;case ce.invalid_date:n="Invalid date";break;case ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Xe.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ce.custom:n="Invalid input";break;case ce.invalid_intersection_types:n="Intersection results could not be merged";break;case ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,Xe.assertNever(t)}return{message:n}};let YP=ba;function r4(t){YP=t}function Qd(){return YP}const Jd=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],a={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let l="";const u=i.filter(d=>!!d).slice().reverse();for(const d of u)l=d(a,{data:e,defaultError:l}).message;return{...r,path:s,message:l}},s4=[];function ge(t,e){const n=Qd(),i=Jd({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===ba?void 0:ba].filter(r=>!!r)});t.common.issues.push(i)}class pn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Le;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,a=await r.value;i.push({key:s,value:a})}return pn.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:a}=r;if(s.status==="aborted"||a.status==="aborted")return Le;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||r.alwaysSet)&&(i[s.value]=a.value)}return{status:e.value,value:i}}}const Le=Object.freeze({status:"aborted"}),Yo=t=>({status:"dirty",value:t}),wn=t=>({status:"valid",value:t}),yg=t=>t.status==="aborted",bg=t=>t.status==="dirty",Qs=t=>t.status==="valid",ol=t=>typeof Promise<"u"&&t instanceof Promise;function Yd(t,e,n,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function XP(t,e,n,i,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var _e;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(_e||(_e={}));var Mc,Lc;class Qi{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const zS=(t,e)=>{if(Qs(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new qn(t.common.issues);return this._error=n,this._error}}};function ze(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(a,l)=>{var u,d;const{message:h}=t;return a.code==="invalid_enum_value"?{message:h??l.defaultError}:typeof l.data>"u"?{message:(u=h??i)!==null&&u!==void 0?u:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(d=h??n)!==null&&d!==void 0?d:l.defaultError}},description:r}}class He{get description(){return this._def.description}_getType(e){return mr(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:mr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pn,ctx:{common:e.parent.common,data:e.data,parsedType:mr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(ol(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const r={common:{issues:[],async:(i=n?.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mr(e)},s=this._parseSync({data:e,path:r.path,parent:r});return zS(r,s)}"~validate"(e){var n,i;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mr(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:r});return Qs(s)?{value:s.value}:{issues:r.common.issues}}catch(s){!((i=(n=s?.message)===null||n===void 0?void 0:n.toLowerCase())===null||i===void 0)&&i.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(s=>Qs(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mr(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(ol(r)?r:Promise.resolve(r));return zS(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const a=e(r),l=()=>s.addIssue({code:ce.custom,...i(r)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new _i({schema:this,typeName:De.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ki.create(this,this._def)}nullable(){return ms.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ci.create(this)}promise(){return ka.create(this,this._def)}or(e){return ul.create([this,e],this._def)}and(e){return dl.create(this,e,this._def)}transform(e){return new _i({...ze(this._def),schema:this,typeName:De.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new gl({...ze(this._def),innerType:this,defaultValue:n,typeName:De.ZodDefault})}brand(){return new ry({typeName:De.ZodBranded,type:this,...ze(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new vl({...ze(this._def),innerType:this,catchValue:n,typeName:De.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Dl.create(this,e)}readonly(){return yl.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const o4=/^c[^\s-]{8,}$/i,a4=/^[0-9a-z]+$/,c4=/^[0-9A-HJKMNP-TV-Z]{26}$/i,l4=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,u4=/^[a-z0-9_-]{21}$/i,d4=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,f4=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,h4=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,p4="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hm;const m4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,g4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,v4=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,y4=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,b4=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,x4=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,e_="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",k4=new RegExp(`^${e_}$`);function t_(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function S4(t){return new RegExp(`^${t_(t)}$`)}function n_(t){let e=`${e_}T${t_(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function w4(t,e){return!!((e==="v4"||!e)&&m4.test(t)||(e==="v6"||!e)&&v4.test(t))}function T4(t,e){if(!d4.test(t))return!1;try{const[n]=t.split("."),i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||!r.typ||!r.alg||e&&r.alg!==e)}catch{return!1}}function C4(t,e){return!!((e==="v4"||!e)&&g4.test(t)||(e==="v6"||!e)&&y4.test(t))}class Si extends He{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==xe.string){const s=this._getOrReturnCtx(e);return ge(s,{code:ce.invalid_type,expected:xe.string,received:s.parsedType}),Le}const i=new pn;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),ge(r,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),ge(r,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,l=e.data.length<s.value;(a||l)&&(r=this._getOrReturnCtx(e,r),a?ge(r,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&ge(r,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")h4.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"email",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")hm||(hm=new RegExp(p4,"u")),hm.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"emoji",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")l4.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"uuid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")u4.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"nanoid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")o4.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"cuid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")a4.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"cuid2",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")c4.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"ulid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),ge(r,{validation:"url",code:ce.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"regex",code:ce.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),ge(r,{code:ce.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),ge(r,{code:ce.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),ge(r,{code:ce.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?n_(s).test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{code:ce.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?k4.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{code:ce.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?S4(s).test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{code:ce.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?f4.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"duration",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?w4(e.data,s.version)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"ip",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?T4(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"jwt",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?C4(e.data,s.version)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"cidr",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?b4.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"base64",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?x4.test(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{validation:"base64url",code:ce.invalid_string,message:s.message}),i.dirty()):Xe.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ce.invalid_string,..._e.errToObj(i)})}_addCheck(e){return new Si({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._e.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._e.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._e.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._e.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._e.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._e.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._e.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._e.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._e.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",..._e.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",..._e.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._e.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",..._e.errToObj(e)})}datetime(e){var n,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(i=e?.local)!==null&&i!==void 0?i:!1,..._e.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,..._e.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",..._e.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,..._e.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,..._e.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,..._e.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,..._e.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,..._e.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,..._e.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,..._e.errToObj(n)})}nonempty(e){return this.min(1,_e.errToObj(e))}trim(){return new Si({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Si({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Si({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Si.create=t=>{var e;return new Si({checks:[],typeName:De.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ze(t)})};function E4(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=parseInt(t.toFixed(r).replace(".","")),a=parseInt(e.toFixed(r).replace(".",""));return s%a/Math.pow(10,r)}class fs extends He{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==xe.number){const s=this._getOrReturnCtx(e);return ge(s,{code:ce.invalid_type,expected:xe.number,received:s.parsedType}),Le}let i;const r=new pn;for(const s of this._def.checks)s.kind==="int"?Xe.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ce.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ce.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ce.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?E4(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ce.not_finite,message:s.message}),r.dirty()):Xe.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,_e.toString(n))}gt(e,n){return this.setLimit("min",e,!1,_e.toString(n))}lte(e,n){return this.setLimit("max",e,!0,_e.toString(n))}lt(e,n){return this.setLimit("max",e,!1,_e.toString(n))}setLimit(e,n,i,r){return new fs({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:_e.toString(r)}]})}_addCheck(e){return new fs({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_e.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_e.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:_e.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:_e.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_e.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_e.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Xe.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}fs.create=t=>new fs({checks:[],typeName:De.ZodNumber,coerce:t?.coerce||!1,...ze(t)});class hs extends He{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==xe.bigint)return this._getInvalidInput(e);let i;const r=new pn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ce.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ce.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):Xe.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ge(n,{code:ce.invalid_type,expected:xe.bigint,received:n.parsedType}),Le}gte(e,n){return this.setLimit("min",e,!0,_e.toString(n))}gt(e,n){return this.setLimit("min",e,!1,_e.toString(n))}lte(e,n){return this.setLimit("max",e,!0,_e.toString(n))}lt(e,n){return this.setLimit("max",e,!1,_e.toString(n))}setLimit(e,n,i,r){return new hs({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:_e.toString(r)}]})}_addCheck(e){return new hs({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_e.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:_e.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}hs.create=t=>{var e;return new hs({checks:[],typeName:De.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ze(t)})};class al extends He{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==xe.boolean){const i=this._getOrReturnCtx(e);return ge(i,{code:ce.invalid_type,expected:xe.boolean,received:i.parsedType}),Le}return wn(e.data)}}al.create=t=>new al({typeName:De.ZodBoolean,coerce:t?.coerce||!1,...ze(t)});class Js extends He{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==xe.date){const s=this._getOrReturnCtx(e);return ge(s,{code:ce.invalid_type,expected:xe.date,received:s.parsedType}),Le}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ge(s,{code:ce.invalid_date}),Le}const i=new pn;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),ge(r,{code:ce.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),ge(r,{code:ce.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):Xe.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Js({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:_e.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:_e.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Js.create=t=>new Js({checks:[],coerce:t?.coerce||!1,typeName:De.ZodDate,...ze(t)});class Xd extends He{_parse(e){if(this._getType(e)!==xe.symbol){const i=this._getOrReturnCtx(e);return ge(i,{code:ce.invalid_type,expected:xe.symbol,received:i.parsedType}),Le}return wn(e.data)}}Xd.create=t=>new Xd({typeName:De.ZodSymbol,...ze(t)});class cl extends He{_parse(e){if(this._getType(e)!==xe.undefined){const i=this._getOrReturnCtx(e);return ge(i,{code:ce.invalid_type,expected:xe.undefined,received:i.parsedType}),Le}return wn(e.data)}}cl.create=t=>new cl({typeName:De.ZodUndefined,...ze(t)});class ll extends He{_parse(e){if(this._getType(e)!==xe.null){const i=this._getOrReturnCtx(e);return ge(i,{code:ce.invalid_type,expected:xe.null,received:i.parsedType}),Le}return wn(e.data)}}ll.create=t=>new ll({typeName:De.ZodNull,...ze(t)});class xa extends He{constructor(){super(...arguments),this._any=!0}_parse(e){return wn(e.data)}}xa.create=t=>new xa({typeName:De.ZodAny,...ze(t)});class $s extends He{constructor(){super(...arguments),this._unknown=!0}_parse(e){return wn(e.data)}}$s.create=t=>new $s({typeName:De.ZodUnknown,...ze(t)});class Er extends He{_parse(e){const n=this._getOrReturnCtx(e);return ge(n,{code:ce.invalid_type,expected:xe.never,received:n.parsedType}),Le}}Er.create=t=>new Er({typeName:De.ZodNever,...ze(t)});class ef extends He{_parse(e){if(this._getType(e)!==xe.undefined){const i=this._getOrReturnCtx(e);return ge(i,{code:ce.invalid_type,expected:xe.void,received:i.parsedType}),Le}return wn(e.data)}}ef.create=t=>new ef({typeName:De.ZodVoid,...ze(t)});class Ci extends He{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==xe.array)return ge(n,{code:ce.invalid_type,expected:xe.array,received:n.parsedType}),Le;if(r.exactLength!==null){const a=n.data.length>r.exactLength.value,l=n.data.length<r.exactLength.value;(a||l)&&(ge(n,{code:a?ce.too_big:ce.too_small,minimum:l?r.exactLength.value:void 0,maximum:a?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(ge(n,{code:ce.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(ge(n,{code:ce.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((a,l)=>r.type._parseAsync(new Qi(n,a,n.path,l)))).then(a=>pn.mergeArray(i,a));const s=[...n.data].map((a,l)=>r.type._parseSync(new Qi(n,a,n.path,l)));return pn.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new Ci({...this._def,minLength:{value:e,message:_e.toString(n)}})}max(e,n){return new Ci({...this._def,maxLength:{value:e,message:_e.toString(n)}})}length(e,n){return new Ci({...this._def,exactLength:{value:e,message:_e.toString(n)}})}nonempty(e){return this.min(1,e)}}Ci.create=(t,e)=>new Ci({type:t,minLength:null,maxLength:null,exactLength:null,typeName:De.ZodArray,...ze(e)});function Ho(t){if(t instanceof xt){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=Ki.create(Ho(i))}return new xt({...t._def,shape:()=>e})}else return t instanceof Ci?new Ci({...t._def,type:Ho(t.element)}):t instanceof Ki?Ki.create(Ho(t.unwrap())):t instanceof ms?ms.create(Ho(t.unwrap())):t instanceof Ji?Ji.create(t.items.map(e=>Ho(e))):t}class xt extends He{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Xe.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==xe.object){const d=this._getOrReturnCtx(e);return ge(d,{code:ce.invalid_type,expected:xe.object,received:d.parsedType}),Le}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Er&&this._def.unknownKeys==="strip"))for(const d in r.data)a.includes(d)||l.push(d);const u=[];for(const d of a){const h=s[d],m=r.data[d];u.push({key:{status:"valid",value:d},value:h._parse(new Qi(r,m,r.path,d)),alwaysSet:d in r.data})}if(this._def.catchall instanceof Er){const d=this._def.unknownKeys;if(d==="passthrough")for(const h of l)u.push({key:{status:"valid",value:h},value:{status:"valid",value:r.data[h]}});else if(d==="strict")l.length>0&&(ge(r,{code:ce.unrecognized_keys,keys:l}),i.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const h of l){const m=r.data[h];u.push({key:{status:"valid",value:h},value:d._parse(new Qi(r,m,r.path,h)),alwaysSet:h in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const d=[];for(const h of u){const m=await h.key,g=await h.value;d.push({key:m,value:g,alwaysSet:h.alwaysSet})}return d}).then(d=>pn.mergeObjectSync(i,d)):pn.mergeObjectSync(i,u)}get shape(){return this._def.shape()}strict(e){return _e.errToObj,new xt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var r,s,a,l;const u=(a=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,n,i).message)!==null&&a!==void 0?a:i.defaultError;return n.code==="unrecognized_keys"?{message:(l=_e.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new xt({...this._def,unknownKeys:"strip"})}passthrough(){return new xt({...this._def,unknownKeys:"passthrough"})}extend(e){return new xt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new xt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:De.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new xt({...this._def,catchall:e})}pick(e){const n={};return Xe.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new xt({...this._def,shape:()=>n})}omit(e){const n={};return Xe.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new xt({...this._def,shape:()=>n})}deepPartial(){return Ho(this)}partial(e){const n={};return Xe.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}),new xt({...this._def,shape:()=>n})}required(e){const n={};return Xe.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof Ki;)s=s._def.innerType;n[i]=s}}),new xt({...this._def,shape:()=>n})}keyof(){return i_(Xe.objectKeys(this.shape))}}xt.create=(t,e)=>new xt({shape:()=>t,unknownKeys:"strip",catchall:Er.create(),typeName:De.ZodObject,...ze(e)});xt.strictCreate=(t,e)=>new xt({shape:()=>t,unknownKeys:"strict",catchall:Er.create(),typeName:De.ZodObject,...ze(e)});xt.lazycreate=(t,e)=>new xt({shape:t,unknownKeys:"strip",catchall:Er.create(),typeName:De.ZodObject,...ze(e)});class ul extends He{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const a=s.map(l=>new qn(l.ctx.common.issues));return ge(n,{code:ce.invalid_union,unionErrors:a}),Le}if(n.common.async)return Promise.all(i.map(async s=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(r);{let s;const a=[];for(const u of i){const d={...n,common:{...n.common,issues:[]},parent:null},h=u._parseSync({data:n.data,path:n.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!s&&(s={result:h,ctx:d}),d.common.issues.length&&a.push(d.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=a.map(u=>new qn(u));return ge(n,{code:ce.invalid_union,unionErrors:l}),Le}}get options(){return this._def.options}}ul.create=(t,e)=>new ul({options:t,typeName:De.ZodUnion,...ze(e)});const hr=t=>t instanceof hl?hr(t.schema):t instanceof _i?hr(t.innerType()):t instanceof pl?[t.value]:t instanceof ps?t.options:t instanceof ml?Xe.objectValues(t.enum):t instanceof gl?hr(t._def.innerType):t instanceof cl?[void 0]:t instanceof ll?[null]:t instanceof Ki?[void 0,...hr(t.unwrap())]:t instanceof ms?[null,...hr(t.unwrap())]:t instanceof ry||t instanceof yl?hr(t.unwrap()):t instanceof vl?hr(t._def.innerType):[];class Vf extends He{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.object)return ge(n,{code:ce.invalid_type,expected:xe.object,received:n.parsedType}),Le;const i=this.discriminator,r=n.data[i],s=this.optionsMap.get(r);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(ge(n,{code:ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Le)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const r=new Map;for(const s of n){const a=hr(s.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of a){if(r.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);r.set(l,s)}}return new Vf({typeName:De.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:r,...ze(i)})}}function xg(t,e){const n=mr(t),i=mr(e);if(t===e)return{valid:!0,data:t};if(n===xe.object&&i===xe.object){const r=Xe.objectKeys(e),s=Xe.objectKeys(t).filter(l=>r.indexOf(l)!==-1),a={...t,...e};for(const l of s){const u=xg(t[l],e[l]);if(!u.valid)return{valid:!1};a[l]=u.data}return{valid:!0,data:a}}else if(n===xe.array&&i===xe.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const a=t[s],l=e[s],u=xg(a,l);if(!u.valid)return{valid:!1};r.push(u.data)}return{valid:!0,data:r}}else return n===xe.date&&i===xe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class dl extends He{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,a)=>{if(yg(s)||yg(a))return Le;const l=xg(s.value,a.value);return l.valid?((bg(s)||bg(a))&&n.dirty(),{status:n.value,value:l.data}):(ge(i,{code:ce.invalid_intersection_types}),Le)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,a])=>r(s,a)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}dl.create=(t,e,n)=>new dl({left:t,right:e,typeName:De.ZodIntersection,...ze(n)});class Ji extends He{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==xe.array)return ge(i,{code:ce.invalid_type,expected:xe.array,received:i.parsedType}),Le;if(i.data.length<this._def.items.length)return ge(i,{code:ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Le;!this._def.rest&&i.data.length>this._def.items.length&&(ge(i,{code:ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((a,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new Qi(i,a,i.path,l)):null}).filter(a=>!!a);return i.common.async?Promise.all(s).then(a=>pn.mergeArray(n,a)):pn.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Ji({...this._def,rest:e})}}Ji.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ji({items:t,typeName:De.ZodTuple,rest:null,...ze(e)})};class fl extends He{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==xe.object)return ge(i,{code:ce.invalid_type,expected:xe.object,received:i.parsedType}),Le;const r=[],s=this._def.keyType,a=this._def.valueType;for(const l in i.data)r.push({key:s._parse(new Qi(i,l,i.path,l)),value:a._parse(new Qi(i,i.data[l],i.path,l)),alwaysSet:l in i.data});return i.common.async?pn.mergeObjectAsync(n,r):pn.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof He?new fl({keyType:e,valueType:n,typeName:De.ZodRecord,...ze(i)}):new fl({keyType:Si.create(),valueType:e,typeName:De.ZodRecord,...ze(n)})}}class tf extends He{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==xe.map)return ge(i,{code:ce.invalid_type,expected:xe.map,received:i.parsedType}),Le;const r=this._def.keyType,s=this._def.valueType,a=[...i.data.entries()].map(([l,u],d)=>({key:r._parse(new Qi(i,l,i.path,[d,"key"])),value:s._parse(new Qi(i,u,i.path,[d,"value"]))}));if(i.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of a){const d=await u.key,h=await u.value;if(d.status==="aborted"||h.status==="aborted")return Le;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(d.value,h.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const u of a){const d=u.key,h=u.value;if(d.status==="aborted"||h.status==="aborted")return Le;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(d.value,h.value)}return{status:n.value,value:l}}}}tf.create=(t,e,n)=>new tf({valueType:e,keyType:t,typeName:De.ZodMap,...ze(n)});class Ys extends He{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==xe.set)return ge(i,{code:ce.invalid_type,expected:xe.set,received:i.parsedType}),Le;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(ge(i,{code:ce.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(ge(i,{code:ce.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function a(u){const d=new Set;for(const h of u){if(h.status==="aborted")return Le;h.status==="dirty"&&n.dirty(),d.add(h.value)}return{status:n.value,value:d}}const l=[...i.data.values()].map((u,d)=>s._parse(new Qi(i,u,i.path,d)));return i.common.async?Promise.all(l).then(u=>a(u)):a(l)}min(e,n){return new Ys({...this._def,minSize:{value:e,message:_e.toString(n)}})}max(e,n){return new Ys({...this._def,maxSize:{value:e,message:_e.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ys.create=(t,e)=>new Ys({valueType:t,minSize:null,maxSize:null,typeName:De.ZodSet,...ze(e)});class ra extends He{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.function)return ge(n,{code:ce.invalid_type,expected:xe.function,received:n.parsedType}),Le;function i(l,u){return Jd({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Qd(),ba].filter(d=>!!d),issueData:{code:ce.invalid_arguments,argumentsError:u}})}function r(l,u){return Jd({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Qd(),ba].filter(d=>!!d),issueData:{code:ce.invalid_return_type,returnTypeError:u}})}const s={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof ka){const l=this;return wn(async function(...u){const d=new qn([]),h=await l._def.args.parseAsync(u,s).catch(k=>{throw d.addIssue(i(u,k)),d}),m=await Reflect.apply(a,this,h);return await l._def.returns._def.type.parseAsync(m,s).catch(k=>{throw d.addIssue(r(m,k)),d})})}else{const l=this;return wn(function(...u){const d=l._def.args.safeParse(u,s);if(!d.success)throw new qn([i(u,d.error)]);const h=Reflect.apply(a,this,d.data),m=l._def.returns.safeParse(h,s);if(!m.success)throw new qn([r(h,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ra({...this._def,args:Ji.create(e).rest($s.create())})}returns(e){return new ra({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new ra({args:e||Ji.create([]).rest($s.create()),returns:n||$s.create(),typeName:De.ZodFunction,...ze(i)})}}class hl extends He{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}hl.create=(t,e)=>new hl({getter:t,typeName:De.ZodLazy,...ze(e)});class pl extends He{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ge(n,{received:n.data,code:ce.invalid_literal,expected:this._def.value}),Le}return{status:"valid",value:e.data}}get value(){return this._def.value}}pl.create=(t,e)=>new pl({value:t,typeName:De.ZodLiteral,...ze(e)});function i_(t,e){return new ps({values:t,typeName:De.ZodEnum,...ze(e)})}class ps extends He{constructor(){super(...arguments),Mc.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return ge(n,{expected:Xe.joinValues(i),received:n.parsedType,code:ce.invalid_type}),Le}if(Yd(this,Mc)||XP(this,Mc,new Set(this._def.values)),!Yd(this,Mc).has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return ge(n,{received:n.data,code:ce.invalid_enum_value,options:i}),Le}return wn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ps.create(e,{...this._def,...n})}exclude(e,n=this._def){return ps.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Mc=new WeakMap;ps.create=i_;class ml extends He{constructor(){super(...arguments),Lc.set(this,void 0)}_parse(e){const n=Xe.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==xe.string&&i.parsedType!==xe.number){const r=Xe.objectValues(n);return ge(i,{expected:Xe.joinValues(r),received:i.parsedType,code:ce.invalid_type}),Le}if(Yd(this,Lc)||XP(this,Lc,new Set(Xe.getValidEnumValues(this._def.values))),!Yd(this,Lc).has(e.data)){const r=Xe.objectValues(n);return ge(i,{received:i.data,code:ce.invalid_enum_value,options:r}),Le}return wn(e.data)}get enum(){return this._def.values}}Lc=new WeakMap;ml.create=(t,e)=>new ml({values:t,typeName:De.ZodNativeEnum,...ze(e)});class ka extends He{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.promise&&n.common.async===!1)return ge(n,{code:ce.invalid_type,expected:xe.promise,received:n.parsedType}),Le;const i=n.parsedType===xe.promise?n.data:Promise.resolve(n.data);return wn(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ka.create=(t,e)=>new ka({type:t,typeName:De.ZodPromise,...ze(e)});class _i extends He{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===De.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:a=>{ge(i,a),a.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const a=r.transform(i.data,s);if(i.common.async)return Promise.resolve(a).then(async l=>{if(n.value==="aborted")return Le;const u=await this._def.schema._parseAsync({data:l,path:i.path,parent:i});return u.status==="aborted"?Le:u.status==="dirty"||n.value==="dirty"?Yo(u.value):u});{if(n.value==="aborted")return Le;const l=this._def.schema._parseSync({data:a,path:i.path,parent:i});return l.status==="aborted"?Le:l.status==="dirty"||n.value==="dirty"?Yo(l.value):l}}if(r.type==="refinement"){const a=l=>{const u=r.refinement(l,s);if(i.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(i.common.async===!1){const l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return l.status==="aborted"?Le:(l.status==="dirty"&&n.dirty(),a(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(l=>l.status==="aborted"?Le:(l.status==="dirty"&&n.dirty(),a(l.value).then(()=>({status:n.value,value:l.value}))))}if(r.type==="transform")if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Qs(a))return a;const l=r.transform(a.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>Qs(a)?Promise.resolve(r.transform(a.value,s)).then(l=>({status:n.value,value:l})):a);Xe.assertNever(r)}}_i.create=(t,e,n)=>new _i({schema:t,typeName:De.ZodEffects,effect:e,...ze(n)});_i.createWithPreprocess=(t,e,n)=>new _i({schema:e,effect:{type:"preprocess",transform:t},typeName:De.ZodEffects,...ze(n)});class Ki extends He{_parse(e){return this._getType(e)===xe.undefined?wn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ki.create=(t,e)=>new Ki({innerType:t,typeName:De.ZodOptional,...ze(e)});class ms extends He{_parse(e){return this._getType(e)===xe.null?wn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ms.create=(t,e)=>new ms({innerType:t,typeName:De.ZodNullable,...ze(e)});class gl extends He{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===xe.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}gl.create=(t,e)=>new gl({innerType:t,typeName:De.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ze(e)});class vl extends He{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return ol(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new qn(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new qn(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}vl.create=(t,e)=>new vl({innerType:t,typeName:De.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ze(e)});class nf extends He{_parse(e){if(this._getType(e)!==xe.nan){const i=this._getOrReturnCtx(e);return ge(i,{code:ce.invalid_type,expected:xe.nan,received:i.parsedType}),Le}return{status:"valid",value:e.data}}}nf.create=t=>new nf({typeName:De.ZodNaN,...ze(t)});const P4=Symbol("zod_brand");class ry extends He{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class Dl extends He{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Le:s.status==="dirty"?(n.dirty(),Yo(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Le:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new Dl({in:e,out:n,typeName:De.ZodPipeline})}}class yl extends He{_parse(e){const n=this._def.innerType._parse(e),i=r=>(Qs(r)&&(r.value=Object.freeze(r.value)),r);return ol(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}yl.create=(t,e)=>new yl({innerType:t,typeName:De.ZodReadonly,...ze(e)});function WS(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function r_(t,e={},n){return t?xa.create().superRefine((i,r)=>{var s,a;const l=t(i);if(l instanceof Promise)return l.then(u=>{var d,h;if(!u){const m=WS(e,i),g=(h=(d=m.fatal)!==null&&d!==void 0?d:n)!==null&&h!==void 0?h:!0;r.addIssue({code:"custom",...m,fatal:g})}});if(!l){const u=WS(e,i),d=(a=(s=u.fatal)!==null&&s!==void 0?s:n)!==null&&a!==void 0?a:!0;r.addIssue({code:"custom",...u,fatal:d})}}):xa.create()}const _4={object:xt.lazycreate};var De;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(De||(De={}));const R4=(t,e={message:`Input not instance of ${t.name}`})=>r_(n=>n instanceof t,e),s_=Si.create,o_=fs.create,A4=nf.create,N4=hs.create,a_=al.create,O4=Js.create,I4=Xd.create,D4=cl.create,M4=ll.create,L4=xa.create,j4=$s.create,F4=Er.create,U4=ef.create,V4=Ci.create,B4=xt.create,z4=xt.strictCreate,W4=ul.create,q4=Vf.create,H4=dl.create,$4=Ji.create,K4=fl.create,G4=tf.create,Z4=Ys.create,Q4=ra.create,J4=hl.create,Y4=pl.create,X4=ps.create,eV=ml.create,tV=ka.create,qS=_i.create,nV=Ki.create,iV=ms.create,rV=_i.createWithPreprocess,sV=Dl.create,oV=()=>s_().optional(),aV=()=>o_().optional(),cV=()=>a_().optional(),lV={string:(t=>Si.create({...t,coerce:!0})),number:(t=>fs.create({...t,coerce:!0})),boolean:(t=>al.create({...t,coerce:!0})),bigint:(t=>hs.create({...t,coerce:!0})),date:(t=>Js.create({...t,coerce:!0}))},uV=Le;var yi=Object.freeze({__proto__:null,defaultErrorMap:ba,setErrorMap:r4,getErrorMap:Qd,makeIssue:Jd,EMPTY_PATH:s4,addIssueToContext:ge,ParseStatus:pn,INVALID:Le,DIRTY:Yo,OK:wn,isAborted:yg,isDirty:bg,isValid:Qs,isAsync:ol,get util(){return Xe},get objectUtil(){return vg},ZodParsedType:xe,getParsedType:mr,ZodType:He,datetimeRegex:n_,ZodString:Si,ZodNumber:fs,ZodBigInt:hs,ZodBoolean:al,ZodDate:Js,ZodSymbol:Xd,ZodUndefined:cl,ZodNull:ll,ZodAny:xa,ZodUnknown:$s,ZodNever:Er,ZodVoid:ef,ZodArray:Ci,ZodObject:xt,ZodUnion:ul,ZodDiscriminatedUnion:Vf,ZodIntersection:dl,ZodTuple:Ji,ZodRecord:fl,ZodMap:tf,ZodSet:Ys,ZodFunction:ra,ZodLazy:hl,ZodLiteral:pl,ZodEnum:ps,ZodNativeEnum:ml,ZodPromise:ka,ZodEffects:_i,ZodTransformer:_i,ZodOptional:Ki,ZodNullable:ms,ZodDefault:gl,ZodCatch:vl,ZodNaN:nf,BRAND:P4,ZodBranded:ry,ZodPipeline:Dl,ZodReadonly:yl,custom:r_,Schema:He,ZodSchema:He,late:_4,get ZodFirstPartyTypeKind(){return De},coerce:lV,any:L4,array:V4,bigint:N4,boolean:a_,date:O4,discriminatedUnion:q4,effect:qS,enum:X4,function:Q4,instanceof:R4,intersection:H4,lazy:J4,literal:Y4,map:G4,nan:A4,nativeEnum:eV,never:F4,null:M4,nullable:iV,number:o_,object:B4,oboolean:cV,onumber:aV,optional:nV,ostring:oV,pipeline:sV,preprocess:rV,promise:tV,record:K4,set:Z4,strictObject:z4,string:s_,symbol:I4,transformer:qS,tuple:$4,undefined:D4,union:W4,unknown:j4,void:U4,NEVER:uV,ZodIssueCode:ce,quotelessJson:i4,ZodError:qn});const dV=yi.object({name:yi.string().min(1,"Name is required"),email:yi.string().email("Invalid email address"),companyName:yi.string().min(1,"Company name is required"),message:yi.string().optional()});yi.object({message:yi.string(),field:yi.string().optional()}),yi.object({message:yi.string()});const pm={contact:{create:{method:"POST",path:"/api/contact",responses:{201:yi.custom()}}}};function fV(){const{toast:t}=zT();return gI({mutationFn:async e=>{const n=await fetch(pm.contact.create.path,{method:pm.contact.create.method,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){if(n.status===400){const i=await n.json();throw new Error(i.message||"Validation failed")}throw new Error("Failed to submit request")}return pm.contact.create.responses[201].parse(await n.json())},onSuccess:()=>{t({title:"Request Received",description:"We'll be in touch with you shortly!"})},onError:e=>{t({title:"Error",description:e.message,variant:"destructive"})}})}var mm="focusScope.autoFocusOnMount",gm="focusScope.autoFocusOnUnmount",HS={bubbles:!1,cancelable:!0},hV="FocusScope",c_=P.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...a}=t,[l,u]=P.useState(null),d=ii(r),h=ii(s),m=P.useRef(null),g=Sn(e,x=>u(x)),k=P.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;P.useEffect(()=>{if(i){let x=function(N){if(k.paused||!l)return;const w=N.target;l.contains(w)?m.current=w:Xr(m.current,{select:!0})},C=function(N){if(k.paused||!l)return;const w=N.relatedTarget;w!==null&&(l.contains(w)||Xr(m.current,{select:!0}))},E=function(N){if(document.activeElement===document.body)for(const S of N)S.removedNodes.length>0&&Xr(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",C);const A=new MutationObserver(E);return l&&A.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",C),A.disconnect()}}},[i,l,k.paused]),P.useEffect(()=>{if(l){KS.add(k);const x=document.activeElement;if(!l.contains(x)){const E=new CustomEvent(mm,HS);l.addEventListener(mm,d),l.dispatchEvent(E),E.defaultPrevented||(pV(bV(l_(l)),{select:!0}),document.activeElement===x&&Xr(l))}return()=>{l.removeEventListener(mm,d),setTimeout(()=>{const E=new CustomEvent(gm,HS);l.addEventListener(gm,h),l.dispatchEvent(E),E.defaultPrevented||Xr(x??document.body,{select:!0}),l.removeEventListener(gm,h),KS.remove(k)},0)}}},[l,d,h,k]);const T=P.useCallback(x=>{if(!n&&!i||k.paused)return;const C=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,E=document.activeElement;if(C&&E){const A=x.currentTarget,[N,w]=mV(A);N&&w?!x.shiftKey&&E===w?(x.preventDefault(),n&&Xr(N,{select:!0})):x.shiftKey&&E===N&&(x.preventDefault(),n&&Xr(w,{select:!0})):E===A&&x.preventDefault()}},[n,i,k.paused]);return y.jsx(Lt.div,{tabIndex:-1,...a,ref:g,onKeyDown:T})});c_.displayName=hV;function pV(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(Xr(i,{select:e}),document.activeElement!==n)return}function mV(t){const e=l_(t),n=$S(e,t),i=$S(e.reverse(),t);return[n,i]}function l_(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function $S(t,e){for(const n of t)if(!gV(n,{upTo:e}))return n}function gV(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function vV(t){return t instanceof HTMLInputElement&&"select"in t}function Xr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&vV(t)&&e&&t.select()}}var KS=yV();function yV(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=GS(t,e),t.unshift(e)},remove(e){t=GS(t,e),t[0]?.resume()}}}function GS(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function bV(t){return t.filter(e=>e.tagName!=="A")}var vm=0;function xV(){P.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??ZS()),document.body.insertAdjacentElement("beforeend",t[1]??ZS()),vm++,()=>{vm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),vm--}},[])}function ZS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Bi=function(){return Bi=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Bi.apply(this,arguments)};function u_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function kV(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var yd="right-scroll-bar-position",bd="width-before-scroll-bar",SV="with-scroll-bars-hidden",wV="--removed-body-scroll-bar-size";function ym(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function TV(t,e){var n=P.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var CV=typeof window<"u"?P.useLayoutEffect:P.useEffect,QS=new WeakMap;function EV(t,e){var n=TV(null,function(i){return t.forEach(function(r){return ym(r,i)})});return CV(function(){var i=QS.get(n);if(i){var r=new Set(i),s=new Set(t),a=n.current;r.forEach(function(l){s.has(l)||ym(l,null)}),s.forEach(function(l){r.has(l)||ym(l,a)})}QS.set(n,t)},[t]),n}function PV(t){return t}function _V(t,e){e===void 0&&(e=PV);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var a=e(s,i);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(s){for(i=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){i=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(s),a=n}var u=function(){var h=a;a=[],h.forEach(s)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),n}}}};return r}function RV(t){t===void 0&&(t={});var e=_V(null);return e.options=Bi({async:!0,ssr:!1},t),e}var d_=function(t){var e=t.sideCar,n=u_(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return P.createElement(i,Bi({},n))};d_.isSideCarExport=!0;function AV(t,e){return t.useMedium(e),d_}var f_=RV(),bm=function(){},Bf=P.forwardRef(function(t,e){var n=P.useRef(null),i=P.useState({onScrollCapture:bm,onWheelCapture:bm,onTouchMoveCapture:bm}),r=i[0],s=i[1],a=t.forwardProps,l=t.children,u=t.className,d=t.removeScrollBar,h=t.enabled,m=t.shards,g=t.sideCar,k=t.noIsolation,T=t.inert,x=t.allowPinchZoom,C=t.as,E=C===void 0?"div":C,A=t.gapMode,N=u_(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=g,S=EV([n,e]),R=Bi(Bi({},N),r);return P.createElement(P.Fragment,null,h&&P.createElement(w,{sideCar:f_,removeScrollBar:d,shards:m,noIsolation:k,inert:T,setCallbacks:s,allowPinchZoom:!!x,lockRef:n,gapMode:A}),a?P.cloneElement(P.Children.only(l),Bi(Bi({},R),{ref:S})):P.createElement(E,Bi({},R,{className:u,ref:S}),l))});Bf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bf.classNames={fullWidth:bd,zeroRight:yd};var NV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function OV(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=NV();return e&&t.setAttribute("nonce",e),t}function IV(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function DV(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var MV=function(){var t=0,e=null;return{add:function(n){t==0&&(e=OV())&&(IV(e,n),DV(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},LV=function(){var t=MV();return function(e,n){P.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},h_=function(){var t=LV(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},jV={left:0,top:0,right:0,gap:0},xm=function(t){return parseInt(t||"",10)||0},FV=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[xm(n),xm(i),xm(r)]},UV=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return jV;var e=FV(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},VV=h_(),sa="data-scroll-locked",BV=function(t,e,n,i){var r=t.left,s=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(SV,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(l,"px ").concat(i,`;
  }
  body[`).concat(sa,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yd,` {
    right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(bd,` {
    margin-right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(yd," .").concat(yd,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(bd," .").concat(bd,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(sa,`] {
    `).concat(wV,": ").concat(l,`px;
  }
`)},JS=function(){var t=parseInt(document.body.getAttribute(sa)||"0",10);return isFinite(t)?t:0},zV=function(){P.useEffect(function(){return document.body.setAttribute(sa,(JS()+1).toString()),function(){var t=JS()-1;t<=0?document.body.removeAttribute(sa):document.body.setAttribute(sa,t.toString())}},[])},WV=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;zV();var s=P.useMemo(function(){return UV(r)},[r]);return P.createElement(VV,{styles:BV(s,!e,r,n?"":"!important")})},kg=!1;if(typeof window<"u")try{var ed=Object.defineProperty({},"passive",{get:function(){return kg=!0,!0}});window.addEventListener("test",ed,ed),window.removeEventListener("test",ed,ed)}catch{kg=!1}var Vo=kg?{passive:!1}:!1,qV=function(t){return t.tagName==="TEXTAREA"},p_=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!qV(t)&&n[e]==="visible")},HV=function(t){return p_(t,"overflowY")},$V=function(t){return p_(t,"overflowX")},YS=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=m_(t,i);if(r){var s=g_(t,i),a=s[1],l=s[2];if(a>l)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},KV=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},GV=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},m_=function(t,e){return t==="v"?HV(e):$V(e)},g_=function(t,e){return t==="v"?KV(e):GV(e)},ZV=function(t,e){return t==="h"&&e==="rtl"?-1:1},QV=function(t,e,n,i,r){var s=ZV(t,window.getComputedStyle(e).direction),a=s*i,l=n.target,u=e.contains(l),d=!1,h=a>0,m=0,g=0;do{var k=g_(t,l),T=k[0],x=k[1],C=k[2],E=x-C-s*T;(T||E)&&m_(t,l)&&(m+=E,g+=T),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!u&&l!==document.body||u&&(e.contains(l)||e===l));return(h&&Math.abs(m)<1||!h&&Math.abs(g)<1)&&(d=!0),d},td=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},XS=function(t){return[t.deltaX,t.deltaY]},ew=function(t){return t&&"current"in t?t.current:t},JV=function(t,e){return t[0]===e[0]&&t[1]===e[1]},YV=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},XV=0,Bo=[];function eB(t){var e=P.useRef([]),n=P.useRef([0,0]),i=P.useRef(),r=P.useState(XV++)[0],s=P.useState(h_)[0],a=P.useRef(t);P.useEffect(function(){a.current=t},[t]),P.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var x=kV([t.lockRef.current],(t.shards||[]).map(ew),!0).filter(Boolean);return x.forEach(function(C){return C.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),x.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var l=P.useCallback(function(x,C){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!a.current.allowPinchZoom;var E=td(x),A=n.current,N="deltaX"in x?x.deltaX:A[0]-E[0],w="deltaY"in x?x.deltaY:A[1]-E[1],S,R=x.target,D=Math.abs(N)>Math.abs(w)?"h":"v";if("touches"in x&&D==="h"&&R.type==="range")return!1;var j=YS(D,R);if(!j)return!0;if(j?S=D:(S=D==="v"?"h":"v",j=YS(D,R)),!j)return!1;if(!i.current&&"changedTouches"in x&&(N||w)&&(i.current=S),!S)return!0;var V=i.current||S;return QV(V,C,x,V==="h"?N:w)},[]),u=P.useCallback(function(x){var C=x;if(!(!Bo.length||Bo[Bo.length-1]!==s)){var E="deltaY"in C?XS(C):td(C),A=e.current.filter(function(S){return S.name===C.type&&(S.target===C.target||C.target===S.shadowParent)&&JV(S.delta,E)})[0];if(A&&A.should){C.cancelable&&C.preventDefault();return}if(!A){var N=(a.current.shards||[]).map(ew).filter(Boolean).filter(function(S){return S.contains(C.target)}),w=N.length>0?l(C,N[0]):!a.current.noIsolation;w&&C.cancelable&&C.preventDefault()}}},[]),d=P.useCallback(function(x,C,E,A){var N={name:x,delta:C,target:E,should:A,shadowParent:tB(E)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(w){return w!==N})},1)},[]),h=P.useCallback(function(x){n.current=td(x),i.current=void 0},[]),m=P.useCallback(function(x){d(x.type,XS(x),x.target,l(x,t.lockRef.current))},[]),g=P.useCallback(function(x){d(x.type,td(x),x.target,l(x,t.lockRef.current))},[]);P.useEffect(function(){return Bo.push(s),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",u,Vo),document.addEventListener("touchmove",u,Vo),document.addEventListener("touchstart",h,Vo),function(){Bo=Bo.filter(function(x){return x!==s}),document.removeEventListener("wheel",u,Vo),document.removeEventListener("touchmove",u,Vo),document.removeEventListener("touchstart",h,Vo)}},[]);var k=t.removeScrollBar,T=t.inert;return P.createElement(P.Fragment,null,T?P.createElement(s,{styles:YV(r)}):null,k?P.createElement(WV,{gapMode:t.gapMode}):null)}function tB(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const nB=AV(f_,eB);var v_=P.forwardRef(function(t,e){return P.createElement(Bf,Bi({},t,{ref:e,sideCar:nB}))});v_.classNames=Bf.classNames;var iB=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},zo=new WeakMap,nd=new WeakMap,id={},km=0,y_=function(t){return t&&(t.host||y_(t.parentNode))},rB=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=y_(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},sB=function(t,e,n,i){var r=rB(e,Array.isArray(t)?t:[t]);id[n]||(id[n]=new WeakMap);var s=id[n],a=[],l=new Set,u=new Set(r),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};r.forEach(d);var h=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(g){if(l.has(g))h(g);else try{var k=g.getAttribute(i),T=k!==null&&k!=="false",x=(zo.get(g)||0)+1,C=(s.get(g)||0)+1;zo.set(g,x),s.set(g,C),a.push(g),x===1&&T&&nd.set(g,!0),C===1&&g.setAttribute(n,"true"),T||g.setAttribute(i,"true")}catch(E){console.error("aria-hidden: cannot operate on ",g,E)}})};return h(e),l.clear(),km++,function(){a.forEach(function(m){var g=zo.get(m)-1,k=s.get(m)-1;zo.set(m,g),s.set(m,k),g||(nd.has(m)||m.removeAttribute(i),nd.delete(m)),k||m.removeAttribute(n)}),km--,km||(zo=new WeakMap,zo=new WeakMap,nd=new WeakMap,id={})}},oB=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=iB(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),sB(i,r,n,"aria-hidden")):function(){return null}},sy="Dialog",[b_]=Pl(sy),[aB,Ni]=b_(sy),x_=t=>{const{__scopeDialog:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:a=!0}=t,l=P.useRef(null),u=P.useRef(null),[d=!1,h]=ZT({prop:i,defaultProp:r,onChange:s});return y.jsx(aB,{scope:e,triggerRef:l,contentRef:u,contentId:Qp(),titleId:Qp(),descriptionId:Qp(),open:d,onOpenChange:h,onOpenToggle:P.useCallback(()=>h(m=>!m),[h]),modal:a,children:n})};x_.displayName=sy;var k_="DialogTrigger",S_=P.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=Ni(k_,n),s=Sn(e,r.triggerRef);return y.jsx(Lt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":cy(r.open),...i,ref:s,onClick:gt(t.onClick,r.onOpenToggle)})});S_.displayName=k_;var oy="DialogPortal",[cB,w_]=b_(oy,{forceMount:void 0}),T_=t=>{const{__scopeDialog:e,forceMount:n,children:i,container:r}=t,s=Ni(oy,e);return y.jsx(cB,{scope:e,forceMount:n,children:P.Children.map(i,a=>y.jsx(Pa,{present:n||s.open,children:y.jsx(sv,{asChild:!0,container:r,children:a})}))})};T_.displayName=oy;var rf="DialogOverlay",C_=P.forwardRef((t,e)=>{const n=w_(rf,t.__scopeDialog),{forceMount:i=n.forceMount,...r}=t,s=Ni(rf,t.__scopeDialog);return s.modal?y.jsx(Pa,{present:i||s.open,children:y.jsx(uB,{...r,ref:e})}):null});C_.displayName=rf;var lB=Yc("DialogOverlay.RemoveScroll"),uB=P.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=Ni(rf,n);return y.jsx(v_,{as:lB,allowPinchZoom:!0,shards:[r.contentRef],children:y.jsx(Lt.div,{"data-state":cy(r.open),...i,ref:e,style:{pointerEvents:"auto",...i.style}})})}),Xs="DialogContent",E_=P.forwardRef((t,e)=>{const n=w_(Xs,t.__scopeDialog),{forceMount:i=n.forceMount,...r}=t,s=Ni(Xs,t.__scopeDialog);return y.jsx(Pa,{present:i||s.open,children:s.modal?y.jsx(dB,{...r,ref:e}):y.jsx(fB,{...r,ref:e})})});E_.displayName=Xs;var dB=P.forwardRef((t,e)=>{const n=Ni(Xs,t.__scopeDialog),i=P.useRef(null),r=Sn(e,n.contentRef,i);return P.useEffect(()=>{const s=i.current;if(s)return oB(s)},[]),y.jsx(P_,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gt(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:gt(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&s.preventDefault()}),onFocusOutside:gt(t.onFocusOutside,s=>s.preventDefault())})}),fB=P.forwardRef((t,e)=>{const n=Ni(Xs,t.__scopeDialog),i=P.useRef(!1),r=P.useRef(!1);return y.jsx(P_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(i.current||n.triggerRef.current?.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const a=s.target;n.triggerRef.current?.contains(a)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),P_=P.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,...a}=t,l=Ni(Xs,n),u=P.useRef(null),d=Sn(e,u);return xV(),y.jsxs(y.Fragment,{children:[y.jsx(c_,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:y.jsx(Tf,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":cy(l.open),...a,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(hB,{titleId:l.titleId}),y.jsx(mB,{contentRef:u,descriptionId:l.descriptionId})]})]})}),ay="DialogTitle",__=P.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=Ni(ay,n);return y.jsx(Lt.h2,{id:r.titleId,...i,ref:e})});__.displayName=ay;var R_="DialogDescription",A_=P.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=Ni(R_,n);return y.jsx(Lt.p,{id:r.descriptionId,...i,ref:e})});A_.displayName=R_;var N_="DialogClose",O_=P.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=Ni(N_,n);return y.jsx(Lt.button,{type:"button",...i,ref:e,onClick:gt(t.onClick,()=>r.onOpenChange(!1))})});O_.displayName=N_;function cy(t){return t?"open":"closed"}var I_="DialogTitleWarning",[KW,D_]=EI(I_,{contentName:Xs,titleName:ay,docsSlug:"dialog"}),hB=({titleId:t})=>{const e=D_(I_),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return P.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},pB="DialogDescriptionWarning",mB=({contentRef:t,descriptionId:e})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${D_(pB).contentName}}.`;return P.useEffect(()=>{const r=t.current?.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(i))},[i,t,e]),null},gB=x_,vB=S_,yB=T_,M_=C_,L_=E_,j_=__,F_=A_,bB=O_;const xB=gB,kB=vB,SB=yB,U_=P.forwardRef(({className:t,...e},n)=>y.jsx(M_,{ref:n,className:Rt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));U_.displayName=M_.displayName;const V_=P.forwardRef(({className:t,children:e,...n},i)=>y.jsxs(SB,{children:[y.jsx(U_,{}),y.jsxs(L_,{ref:i,className:Rt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,y.jsxs(bB,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(fv,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));V_.displayName=L_.displayName;const B_=({className:t,...e})=>y.jsx("div",{className:Rt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});B_.displayName="DialogHeader";const z_=P.forwardRef(({className:t,...e},n)=>y.jsx(j_,{ref:n,className:Rt("text-lg font-semibold leading-none tracking-tight",t),...e}));z_.displayName=j_.displayName;const W_=P.forwardRef(({className:t,...e},n)=>y.jsx(F_,{ref:n,className:Rt("text-sm text-muted-foreground",t),...e}));W_.displayName=F_.displayName;const xd=P.forwardRef(({className:t,type:e,...n},i)=>y.jsx("input",{type:e,className:Rt("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:i,...n}));xd.displayName="Input";const q_=P.forwardRef(({className:t,...e},n)=>y.jsx("textarea",{className:Rt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));q_.displayName="Textarea";var wB="Label",H_=P.forwardRef((t,e)=>y.jsx(Lt.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));H_.displayName=wB;var $_=H_;const TB=lv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),jc=P.forwardRef(({className:t,...e},n)=>y.jsx($_,{ref:n,className:Rt(TB(),t),...e}));jc.displayName=$_.displayName;function wi({children:t}){const[e,n]=P.useState(!1),{mutate:i,isPending:r}=fV(),s=Y3({resolver:n4(dV),defaultValues:{name:"",email:"",companyName:"",message:""}}),a=l=>{i(l,{onSuccess:()=>{n(!1),s.reset()}})};return y.jsxs(xB,{open:e,onOpenChange:n,children:[y.jsx(kB,{asChild:!0,children:t}),y.jsxs(V_,{className:"sm:max-w-[425px] bg-card border-white/10 backdrop-blur-xl",children:[y.jsxs(B_,{children:[y.jsx(z_,{className:"text-2xl font-display",children:"Let's Talk"}),y.jsx(W_,{className:"text-muted-foreground",children:"Ready to transform your customer experience? Fill out the form below."})]}),y.jsxs("form",{onSubmit:s.handleSubmit(a),className:"space-y-4 mt-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(jc,{htmlFor:"name",children:"Name"}),y.jsx(xd,{id:"name",placeholder:"John Doe",...s.register("name"),className:"bg-background/50 border-white/10 focus:border-primary/50"}),s.formState.errors.name&&y.jsx("p",{className:"text-sm text-destructive",children:s.formState.errors.name.message})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(jc,{htmlFor:"email",children:"Work Email"}),y.jsx(xd,{id:"email",type:"email",placeholder:"john@company.com",...s.register("email"),className:"bg-background/50 border-white/10 focus:border-primary/50"}),s.formState.errors.email&&y.jsx("p",{className:"text-sm text-destructive",children:s.formState.errors.email.message})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(jc,{htmlFor:"companyName",children:"Company"}),y.jsx(xd,{id:"companyName",placeholder:"Acme Inc.",...s.register("companyName"),className:"bg-background/50 border-white/10 focus:border-primary/50"}),s.formState.errors.companyName&&y.jsx("p",{className:"text-sm text-destructive",children:s.formState.errors.companyName.message})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(jc,{htmlFor:"message",children:"How can we help?"}),y.jsx(q_,{id:"message",placeholder:"Tell us about your needs...",...s.register("message"),className:"bg-background/50 border-white/10 focus:border-primary/50 min-h-[100px]"})]}),y.jsx("div",{className:"pt-4",children:y.jsx(Et,{type:"submit",className:"w-full",disabled:r,children:r?y.jsxs(y.Fragment,{children:[y.jsx(xC,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Book Demo"})})]})]})]})}function rd({icon:t,title:e,description:n,delay:i=0}){return y.jsxs(In.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:i},className:"group relative p-8 rounded-2xl bg-gradient-to-br from-card to-card/50 border border-white/5 hover:border-primary/50 transition-all duration-300 hover:-translate-y-1",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),y.jsxs("div",{className:"relative z-10",children:[y.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center mb-6 group-hover:bg-primary/20 transition-colors",children:y.jsx(t,{className:"w-6 h-6 text-primary group-hover:text-accent transition-colors"})}),y.jsx("h3",{className:"text-xl font-display font-semibold mb-3 text-foreground group-hover:text-white transition-colors",children:e}),y.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n})]})]})}var tw={};function CB(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}var EB=Object.defineProperty,PB=(t,e,n)=>e in t?EB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nw=(t,e,n)=>PB(t,typeof e!="symbol"?e+"":e,n);class kn{constructor(){nw(this,"_locking"),nw(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(r=>e=()=>{this._locks-=1,r()}),i=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),i}}function Pt(t,e){if(!t)throw new Error(e)}const _B=34028234663852886e22,RB=-34028234663852886e22,AB=4294967295,NB=2147483647,OB=-2147483648;function kd(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>NB||t<OB)throw new Error("invalid int 32: "+t)}function Sg(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>AB||t<0)throw new Error("invalid uint 32: "+t)}function K_(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>_B||t<RB))throw new Error("invalid float 32: "+t)}const G_=Symbol("@bufbuild/protobuf/enum-type");function IB(t){const e=t[G_];return Pt(e,"missing enum type on enum object"),e}function Z_(t,e,n,i){t[G_]=Q_(e,n.map(r=>({no:r.no,name:r.name,localName:t[r.no]})))}function Q_(t,e,n){const i=Object.create(null),r=Object.create(null),s=[];for(const a of e){const l=J_(a);s.push(l),i[a.name]=l,r[a.no]=l}return{typeName:t,values:s,findName(a){return i[a]},findNumber(a){return r[a]}}}function DB(t,e,n){const i={};for(const r of e){const s=J_(r);i[s.localName]=s.no,i[s.no]=s.localName}return Z_(i,t,e),i}function J_(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class ly{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const i=this.getType(),r=i.runtime.bin,s=r.makeReadOptions(n);return r.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,n){const i=this.getType(),r=i.runtime.json,s=r.makeReadOptions(n);return r.readMessage(i,e,s,this),this}fromJsonString(e,n){let i;try{i=JSON.parse(e)}catch(r){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(r instanceof Error?r.message:String(r)))}return this.fromJson(i,n)}toBinary(e){const n=this.getType(),i=n.runtime.bin,r=i.makeWriteOptions(e),s=r.writerFactory();return i.writeMessage(this,s,r),s.finish()}toJson(e){const n=this.getType(),i=n.runtime.json,r=i.makeWriteOptions(e);return i.writeMessage(this,r)}toJsonString(e){var n;const i=this.toJson(e);return JSON.stringify(i,null,(n=e?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function MB(t,e,n,i){var r;const s=(r=i?.localName)!==null&&r!==void 0?r:e.substring(e.lastIndexOf(".")+1),a={[s]:function(l){t.util.initFields(this),t.util.initPartial(l,this)}}[s];return Object.setPrototypeOf(a.prototype,new ly),Object.assign(a,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(l,u){return new a().fromBinary(l,u)},fromJson(l,u){return new a().fromJson(l,u)},fromJsonString(l,u){return new a().fromJsonString(l,u)},equals(l,u){return t.util.equals(a,l,u)}}),a}function LB(){let t=0,e=0;for(let i=0;i<28;i+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let i=3;i<=31;i+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Sm(t,e,n){for(let s=0;s<28;s=s+7){const a=t>>>s,l=!(!(a>>>7)&&e==0),u=(l?a|128:a)&255;if(n.push(u),!l)return}const i=t>>>28&15|(e&7)<<4,r=e>>3!=0;if(n.push((r?i|128:i)&255),!!r){for(let s=3;s<31;s=s+7){const a=e>>>s,l=!!(a>>>7),u=(l?a|128:a)&255;if(n.push(u),!l)return}n.push(e>>>31&1)}}const Sd=4294967296;function iw(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let i=0,r=0;function s(a,l){const u=Number(t.slice(a,l));r*=n,i=i*n+u,i>=Sd&&(r=r+(i/Sd|0),i=i%Sd)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?X_(i,r):uy(i,r)}function jB(t,e){let n=uy(t,e);const i=n.hi&2147483648;i&&(n=X_(n.lo,n.hi));const r=Y_(n.lo,n.hi);return i?"-"+r:r}function Y_(t,e){if({lo:t,hi:e}=FB(t,e),e<=2097151)return String(Sd*e+t);const n=t&16777215,i=(t>>>24|e<<8)&16777215,r=e>>16&65535;let s=n+i*6777216+r*6710656,a=i+r*8147497,l=r*2;const u=1e7;return s>=u&&(a+=Math.floor(s/u),s%=u),a>=u&&(l+=Math.floor(a/u),a%=u),l.toString()+rw(a)+rw(s)}function FB(t,e){return{lo:t>>>0,hi:e>>>0}}function uy(t,e){return{lo:t|0,hi:e|0}}function X_(t,e){return e=~e,t?t=~t+1:e+=1,uy(t,e)}const rw=t=>{const e=String(t);return"0000000".slice(e.length)+e};function sw(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function UB(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function VB(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof tw!="object"||tw.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),a=BigInt("0"),l=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const d=typeof u=="bigint"?u:BigInt(u);if(d>s||d<r)throw new Error("int64 invalid: ".concat(u));return d},uParse(u){const d=typeof u=="bigint"?u:BigInt(u);if(d>l||d<a)throw new Error("uint64 invalid: ".concat(u));return d},enc(u){return t.setBigInt64(0,this.parse(u),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(u){return t.setBigInt64(0,this.uParse(u),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(u,d){return t.setInt32(0,u,!0),t.setInt32(4,d,!0),t.getBigInt64(0,!0)},uDec(u,d){return t.setInt32(0,u,!0),t.setInt32(4,d,!0),t.getBigUint64(0,!0)}}}const n=r=>Pt(/^-?[0-9]+$/.test(r),"int64 invalid: ".concat(r)),i=r=>Pt(/^[0-9]+$/.test(r),"uint64 invalid: ".concat(r));return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),i(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),n(r),iw(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),i(r),iw(r)},dec(r,s){return jB(r,s)},uDec(r,s){return Y_(r,s)}}}const vt=VB();var ne;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(ne||(ne={}));var gs;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(gs||(gs={}));function Qr(t,e,n){if(e===n)return!0;if(t==ne.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==n[i])return!1;return!0}switch(t){case ne.UINT64:case ne.FIXED64:case ne.INT64:case ne.SFIXED64:case ne.SINT64:return e==n}return!1}function Sa(t,e){switch(t){case ne.BOOL:return!1;case ne.UINT64:case ne.FIXED64:case ne.INT64:case ne.SFIXED64:case ne.SINT64:return e==0?vt.zero:"0";case ne.DOUBLE:case ne.FLOAT:return 0;case ne.BYTES:return new Uint8Array(0);case ne.STRING:return"";default:return 0}}function e1(t,e){switch(t){case ne.BOOL:return e===!1;case ne.STRING:return e==="";case ne.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var Dt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Dt||(Dt={}));class BB{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let n=new Uint8Array(e),i=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],i),i+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Sg(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return kd(e),sw(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){K_(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Sg(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){kd(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return kd(e),e=(e<<1^e>>31)>>>0,sw(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),r=vt.enc(e);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),r=vt.uEnc(e);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}int64(e){let n=vt.enc(e);return Sm(n.lo,n.hi,this.buf),this}sint64(e){let n=vt.enc(e),i=n.hi>>31,r=n.lo<<1^i,s=(n.hi<<1|n.lo>>>31)^i;return Sm(r,s,this.buf),this}uint64(e){let n=vt.uEnc(e);return Sm(n.lo,n.hi,this.buf),this}}class zB{constructor(e,n){this.varint64=LB,this.uint32=UB,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,i=e&7;if(n<=0||i<0||i>5)throw new Error("illegal tag: field no "+n+" wire type "+i);return[n,i]}skip(e,n){let i=this.pos;switch(e){case Dt.Varint:for(;this.buf[this.pos++]&128;);break;case Dt.Bit64:this.pos+=4;case Dt.Bit32:this.pos+=4;break;case Dt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Dt.StartGroup:for(;;){const[s,a]=this.tag();if(a===Dt.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(a,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return vt.dec(...this.varint64())}uint64(){return vt.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),i=-(e&1);return e=(e>>>1|(n&1)<<31)^i,n=n>>>1^i,vt.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return vt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return vt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function WB(t,e,n,i){let r;return{typeName:e,extendee:n,get field(){if(!r){const s=typeof i=="function"?i():i;s.name=e.split(".").pop(),s.jsonName="[".concat(e,"]"),r=t.util.newFieldList([s]).list()[0]}return r},runtime:t}}function t1(t){const e=t.field.localName,n=Object.create(null);return n[e]=qB(t),[n,()=>n[e]]}function qB(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Sa(e.T,e.L);case"message":const n=e.T,i=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function HB(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),zf=[];for(let t=0;t<vr.length;t++)zf[vr[t].charCodeAt(0)]=t;zf[45]=vr.indexOf("+");zf[95]=vr.indexOf("/");const n1={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),i=0,r=0,s,a=0;for(let l=0;l<t.length;l++){if(s=zf[t.charCodeAt(l)],s===void 0)switch(t[l]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:a=s,r=1;break;case 1:n[i++]=a<<2|(s&48)>>4,a=s,r=2;break;case 2:n[i++]=(a&15)<<4|(s&60)>>2,a=s,r=3;break;case 3:n[i++]=(a&3)<<6|s,r=0;break}}if(r==1)throw Error("invalid base64 string.");return n.subarray(0,i)},enc(t){let e="",n=0,i,r=0;for(let s=0;s<t.length;s++)switch(i=t[s],n){case 0:e+=vr[i>>2],r=(i&3)<<4,n=1;break;case 1:e+=vr[r|i>>4],r=(i&15)<<2,n=2;break;case 2:e+=vr[r|i>>6],e+=vr[i&63],n=0;break}return n&&(e+=vr[r],e+="=",n==1&&(e+="=")),e}};function $B(t,e,n){r1(e,t);const i=e.runtime.bin.makeReadOptions(n),r=HB(t.getType().runtime.bin.listUnknownFields(t),e.field),[s,a]=t1(e);for(const l of r)e.runtime.bin.readField(s,i.readerFactory(l.data),e.field,l.wireType,i);return a()}function KB(t,e,n,i){r1(e,t);const r=e.runtime.bin.makeReadOptions(i),s=e.runtime.bin.makeWriteOptions(i);if(i1(t,e)){const d=t.getType().runtime.bin.listUnknownFields(t).filter(h=>h.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const h of d)t.getType().runtime.bin.onUnknownField(t,h.no,h.wireType,h.data)}const a=s.writerFactory();let l=e.field;!l.opt&&!l.repeated&&(l.kind=="enum"||l.kind=="scalar")&&(l=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(l,n,a,s);const u=r.readerFactory(a.finish());for(;u.pos<u.len;){const[d,h]=u.tag(),m=u.skip(h,d);t.getType().runtime.bin.onUnknownField(t,d,h,m)}}function i1(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(i=>i.no==e.field.no)}function r1(t,e){Pt(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function s1(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!e1(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function ow(t,e){const n=t.localName,i=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=i?t.T.values[0].no:void 0;break;case"scalar":e[n]=i?Sa(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function yr(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(ly.prototype).every(i=>i in t&&typeof t[i]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function o1(t,e){return yr(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}ne.DOUBLE,ne.FLOAT,ne.INT64,ne.UINT64,ne.INT32,ne.UINT32,ne.BOOL,ne.STRING,ne.BYTES;const aw={ignoreUnknownFields:!1},cw={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function GB(t){return t?Object.assign(Object.assign({},aw),t):aw}function ZB(t){return t?Object.assign(Object.assign({},cw),t):cw}const sf=Symbol(),wd=Symbol();function QB(){return{makeReadOptions:GB,makeWriteOptions:ZB,readMessage(t,e,n,i){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(Vi(e)));i=i??new t;const r=new Map,s=n.typeRegistry;for(const[a,l]of Object.entries(e)){const u=t.fields.findJsonName(a);if(u){if(u.oneof){if(l===null&&u.kind=="scalar")continue;const d=r.get(u.oneof);if(d!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(u.oneof.name,'" present: "').concat(d,'", "').concat(a,'"'));r.set(u.oneof,a)}lw(i,l,u,n,t)}else{let d=!1;if(s?.findExtension&&a.startsWith("[")&&a.endsWith("]")){const h=s.findExtension(a.substring(1,a.length-1));if(h&&h.extendee.typeName==t.typeName){d=!0;const[m,g]=t1(h);lw(m,l,h.field,n,h),KB(i,h,g(),n)}}if(!d&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(a,'" is unknown'))}}return i},writeMessage(t,e){const n=t.getType(),i={};let r;try{for(r of n.fields.byNumber()){if(!s1(r,t)){if(r.req)throw"required field not set";if(!e.emitDefaultValues||!YB(r))continue}const a=r.oneof?t[r.oneof.localName].value:t[r.localName],l=uw(r,a,e);l!==void 0&&(i[e.useProtoFieldName?r.name:r.jsonName]=l)}const s=e.typeRegistry;if(s?.findExtensionFor)for(const a of n.runtime.bin.listUnknownFields(t)){const l=s.findExtensionFor(n.typeName,a.no);if(l&&i1(t,l)){const u=$B(t,l,e),d=uw(l.field,u,e);d!==void 0&&(i[l.field.jsonName]=d)}}}catch(s){const a=r?"cannot encode field ".concat(n.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),l=s instanceof Error?s.message:String(s);throw new Error(a+(l.length>0?": ".concat(l):""))}return i},readScalar(t,e,n){return Kc(t,e,n??gs.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||e1(t,e)))return Td(t,e)},debug:Vi}}function Vi(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function lw(t,e,n,i,r){let s=n.localName;if(n.repeated){if(Pt(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Vi(e)));const a=t[s];for(const l of e){if(l===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Vi(l)));switch(n.kind){case"message":a.push(n.T.fromJson(l,i));break;case"enum":const u=wm(n.T,l,i.ignoreUnknownFields,!0);u!==wd&&a.push(u);break;case"scalar":try{a.push(Kc(n.T,l,n.L,!0))}catch(d){let h="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Vi(l));throw d instanceof Error&&d.message.length>0&&(h+=": ".concat(d.message)),new Error(h)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Vi(e)));const a=t[s];for(const[l,u]of Object.entries(e)){if(u===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: map value null"));let d;try{d=JB(n.K,l)}catch(h){let m="cannot decode map key for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Vi(e));throw h instanceof Error&&h.message.length>0&&(m+=": ".concat(h.message)),new Error(m)}switch(n.V.kind){case"message":a[d]=n.V.T.fromJson(u,i);break;case"enum":const h=wm(n.V.T,u,i.ignoreUnknownFields,!0);h!==wd&&(a[d]=h);break;case"scalar":try{a[d]=Kc(n.V.T,u,gs.BIGINT,!0)}catch(m){let g="cannot decode map value for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Vi(e));throw m instanceof Error&&m.message.length>0&&(g+=": ".concat(m.message)),new Error(g)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const a=n.T;if(e===null&&a.typeName!="google.protobuf.Value")return;let l=t[s];yr(l)?l.fromJson(e,i):(t[s]=l=a.fromJson(e,i),a.fieldWrapper&&!n.oneof&&(t[s]=a.fieldWrapper.unwrapField(l)));break;case"enum":const u=wm(n.T,e,i.ignoreUnknownFields,!1);switch(u){case sf:ow(n,t);break;case wd:break;default:t[s]=u;break}break;case"scalar":try{const d=Kc(n.T,e,n.L,!1);d===sf?ow(n,t):t[s]=d}catch(d){let h="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Vi(e));throw d instanceof Error&&d.message.length>0&&(h+=": ".concat(d.message)),new Error(h)}break}}function JB(t,e){if(t===ne.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Kc(t,e,gs.BIGINT,!0).toString()}function Kc(t,e,n,i){if(e===null)return i?Sa(t,n):sf;switch(t){case ne.DOUBLE:case ne.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==ne.FLOAT&&K_(r),r;case ne.INT32:case ne.FIXED32:case ne.SFIXED32:case ne.SINT32:case ne.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return t==ne.UINT32||t==ne.FIXED32?Sg(s):kd(s),s;case ne.INT64:case ne.SFIXED64:case ne.SINT64:if(typeof e!="number"&&typeof e!="string")break;const a=vt.parse(e);return n?a.toString():a;case ne.FIXED64:case ne.UINT64:if(typeof e!="number"&&typeof e!="string")break;const l=vt.uParse(e);return n?l.toString():l;case ne.BOOL:if(typeof e!="boolean")break;return e;case ne.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case ne.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return n1.dec(e)}throw new Error}function wm(t,e,n,i){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:i?t.values[0].no:sf;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r!==void 0)return r.no;if(n)return wd;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(Vi(e)))}function YB(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function uw(t,e,n){if(t.kind=="map"){Pt(typeof e=="object"&&e!=null);const i={},r=Object.entries(e);switch(t.V.kind){case"scalar":for(const[a,l]of r)i[a.toString()]=Td(t.V.T,l);break;case"message":for(const[a,l]of r)i[a.toString()]=l.toJson(n);break;case"enum":const s=t.V.T;for(const[a,l]of r)i[a.toString()]=Tm(s,l,n.enumAsInteger);break}return n.emitDefaultValues||r.length>0?i:void 0}if(t.repeated){Pt(Array.isArray(e));const i=[];switch(t.kind){case"scalar":for(let r=0;r<e.length;r++)i.push(Td(t.T,e[r]));break;case"enum":for(let r=0;r<e.length;r++)i.push(Tm(t.T,e[r],n.enumAsInteger));break;case"message":for(let r=0;r<e.length;r++)i.push(e[r].toJson(n));break}return n.emitDefaultValues||i.length>0?i:void 0}switch(t.kind){case"scalar":return Td(t.T,e);case"enum":return Tm(t.T,e,n.enumAsInteger);case"message":return o1(t.T,e).toJson(n)}}function Tm(t,e,n){var i;if(Pt(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const r=t.findNumber(e);return(i=r?.name)!==null&&i!==void 0?i:e}function Td(t,e){switch(t){case ne.INT32:case ne.SFIXED32:case ne.SINT32:case ne.FIXED32:case ne.UINT32:return Pt(typeof e=="number"),e;case ne.FLOAT:case ne.DOUBLE:return Pt(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case ne.STRING:return Pt(typeof e=="string"),e;case ne.BOOL:return Pt(typeof e=="boolean"),e;case ne.UINT64:case ne.FIXED64:case ne.INT64:case ne.SFIXED64:case ne.SINT64:return Pt(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case ne.BYTES:return Pt(e instanceof Uint8Array),n1.enc(e)}}const Wo=Symbol("@bufbuild/protobuf/unknown-fields"),dw={readUnknownFields:!0,readerFactory:t=>new zB(t)},fw={writeUnknownFields:!0,writerFactory:()=>new BB};function XB(t){return t?Object.assign(Object.assign({},dw),t):dw}function e5(t){return t?Object.assign(Object.assign({},fw),t):fw}function t5(){return{makeReadOptions:XB,makeWriteOptions:e5,listUnknownFields(t){var e;return(e=t[Wo])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Wo]},writeUnknownFields(t,e){const i=t[Wo];if(i)for(const r of i)e.tag(r.no,r.wireType).raw(r.data)},onUnknownField(t,e,n,i){const r=t;Array.isArray(r[Wo])||(r[Wo]=[]),r[Wo].push({no:e,wireType:n,data:i})},readMessage(t,e,n,i,r){const s=t.getType(),a=r?e.len:e.pos+n;let l,u;for(;e.pos<a&&([l,u]=e.tag(),!(r===!0&&u==Dt.EndGroup));){const d=s.fields.find(l);if(!d){const h=e.skip(u,l);i.readUnknownFields&&this.onUnknownField(t,l,u,h);continue}hw(t,e,d,u,i)}if(r&&(u!=Dt.EndGroup||l!==n))throw new Error("invalid end group tag")},readField:hw,writeMessage(t,e,n){const i=t.getType();for(const r of i.fields.byNumber()){if(!s1(r,t)){if(r.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(r.name," to binary: required field not set"));continue}const s=r.oneof?t[r.oneof.localName].value:t[r.localName];pw(r,s,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,i){e!==void 0&&pw(t,e,n,i)}}}function hw(t,e,n,i,r){let{repeated:s,localName:a}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=a&&delete t.value,t.case=a,a="value"),n.kind){case"scalar":case"enum":const l=n.kind=="enum"?ne.INT32:n.T;let u=of;if(n.kind=="scalar"&&n.L>0&&(u=i5),s){let g=t[a];if(i==Dt.LengthDelimited&&l!=ne.STRING&&l!=ne.BYTES){let T=e.uint32()+e.pos;for(;e.pos<T;)g.push(u(e,l))}else g.push(u(e,l))}else t[a]=u(e,l);break;case"message":const d=n.T;s?t[a].push(Cd(e,new d,r,n)):yr(t[a])?Cd(e,t[a],r,n):(t[a]=Cd(e,new d,r,n),d.fieldWrapper&&!n.oneof&&!n.repeated&&(t[a]=d.fieldWrapper.unwrapField(t[a])));break;case"map":let[h,m]=n5(n,e,r);t[a][h]=m;break}}function Cd(t,e,n,i){const r=e.getType().runtime.bin,s=i?.delimited;return r.readMessage(e,t,s?i.no:t.uint32(),n,s),e}function n5(t,e,n){const i=e.uint32(),r=e.pos+i;let s,a;for(;e.pos<r;){const[l]=e.tag();switch(l){case 1:s=of(e,t.K);break;case 2:switch(t.V.kind){case"scalar":a=of(e,t.V.T);break;case"enum":a=e.int32();break;case"message":a=Cd(e,new t.V.T,n,void 0);break}break}}if(s===void 0&&(s=Sa(t.K,gs.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),a===void 0)switch(t.V.kind){case"scalar":a=Sa(t.V.T,gs.BIGINT);break;case"enum":a=t.V.T.values[0].no;break;case"message":a=new t.V.T;break}return[s,a]}function i5(t,e){const n=of(t,e);return typeof n=="bigint"?n.toString():n}function of(t,e){switch(e){case ne.STRING:return t.string();case ne.BOOL:return t.bool();case ne.DOUBLE:return t.double();case ne.FLOAT:return t.float();case ne.INT32:return t.int32();case ne.INT64:return t.int64();case ne.UINT64:return t.uint64();case ne.FIXED64:return t.fixed64();case ne.BYTES:return t.bytes();case ne.FIXED32:return t.fixed32();case ne.SFIXED32:return t.sfixed32();case ne.SFIXED64:return t.sfixed64();case ne.SINT64:return t.sint64();case ne.UINT32:return t.uint32();case ne.SINT32:return t.sint32()}}function pw(t,e,n,i){Pt(e!==void 0);const r=t.repeated;switch(t.kind){case"scalar":case"enum":let s=t.kind=="enum"?ne.INT32:t.T;if(r)if(Pt(Array.isArray(e)),t.packed)s5(n,s,t.no,e);else for(const a of e)Gc(n,s,t.no,a);else Gc(n,s,t.no,e);break;case"message":if(r){Pt(Array.isArray(e));for(const a of e)mw(n,i,t,a)}else mw(n,i,t,e);break;case"map":Pt(typeof e=="object"&&e!=null);for(const[a,l]of Object.entries(e))r5(n,i,t,a,l);break}}function r5(t,e,n,i,r){t.tag(n.no,Dt.LengthDelimited),t.fork();let s=i;switch(n.K){case ne.INT32:case ne.FIXED32:case ne.UINT32:case ne.SFIXED32:case ne.SINT32:s=Number.parseInt(i);break;case ne.BOOL:Pt(i=="true"||i=="false"),s=i=="true";break}switch(Gc(t,n.K,1,s),n.V.kind){case"scalar":Gc(t,n.V.T,2,r);break;case"enum":Gc(t,ne.INT32,2,r);break;case"message":Pt(r!==void 0),t.tag(2,Dt.LengthDelimited).bytes(r.toBinary(e));break}t.join()}function mw(t,e,n,i){const r=o1(n.T,i);n.delimited?t.tag(n.no,Dt.StartGroup).raw(r.toBinary(e)).tag(n.no,Dt.EndGroup):t.tag(n.no,Dt.LengthDelimited).bytes(r.toBinary(e))}function Gc(t,e,n,i){Pt(i!==void 0);let[r,s]=a1(e);t.tag(n,r)[s](i)}function s5(t,e,n,i){if(!i.length)return;t.tag(n,Dt.LengthDelimited).fork();let[,r]=a1(e);for(let s=0;s<i.length;s++)t[r](i[s]);t.join()}function a1(t){let e=Dt.Varint;switch(t){case ne.BYTES:case ne.STRING:e=Dt.LengthDelimited;break;case ne.DOUBLE:case ne.FIXED64:case ne.SFIXED64:e=Dt.Bit64;break;case ne.FIXED32:case ne.SFIXED32:case ne.FLOAT:e=Dt.Bit32;break}const n=ne[t].toLowerCase();return[e,n]}function o5(){return{setEnumType:Z_,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const i of n.fields.byMember()){const r=i.localName,s=e,a=t;if(a[r]!=null)switch(i.kind){case"oneof":const l=a[r].case;if(l===void 0)continue;const u=i.findField(l);let d=a[r].value;u&&u.kind=="message"&&!yr(d,u.T)?d=new u.T(d):u&&u.kind==="scalar"&&u.T===ne.BYTES&&(d=Cc(d)),s[r]={case:l,value:d};break;case"scalar":case"enum":let h=a[r];i.T===ne.BYTES&&(h=i.repeated?h.map(Cc):Cc(h)),s[r]=h;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===ne.BYTES)for(const[k,T]of Object.entries(a[r]))s[r][k]=Cc(T);else Object.assign(s[r],a[r]);break;case"message":const g=i.V.T;for(const k of Object.keys(a[r])){let T=a[r][k];g.fieldWrapper||(T=new g(T)),s[r][k]=T}break}break;case"message":const m=i.T;if(i.repeated)s[r]=a[r].map(g=>yr(g,m)?g:new m(g));else{const g=a[r];m.fieldWrapper?m.typeName==="google.protobuf.BytesValue"?s[r]=Cc(g):s[r]=g:s[r]=yr(g,m)?g:new m(g)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(i=>{const r=e[i.localName],s=n[i.localName];if(i.repeated){if(r.length!==s.length)return!1;switch(i.kind){case"message":return r.every((a,l)=>i.T.equals(a,s[l]));case"scalar":return r.every((a,l)=>Qr(i.T,a,s[l]));case"enum":return r.every((a,l)=>Qr(ne.INT32,a,s[l]))}throw new Error("repeated cannot contain ".concat(i.kind))}switch(i.kind){case"message":let a=r,l=s;return i.T.fieldWrapper&&(a!==void 0&&!yr(a)&&(a=i.T.fieldWrapper.wrapField(a)),l!==void 0&&!yr(l)&&(l=i.T.fieldWrapper.wrapField(l))),i.T.equals(a,l);case"enum":return Qr(ne.INT32,r,s);case"scalar":return Qr(i.T,r,s);case"oneof":if(r.case!==s.case)return!1;const u=i.findField(r.case);if(u===void 0)return!0;switch(u.kind){case"message":return u.T.equals(r.value,s.value);case"enum":return Qr(ne.INT32,r.value,s.value);case"scalar":return Qr(u.T,r.value,s.value)}throw new Error("oneof cannot contain ".concat(u.kind));case"map":const d=Object.keys(r).concat(Object.keys(s));switch(i.V.kind){case"message":const h=i.V.T;return d.every(g=>h.equals(r[g],s[g]));case"enum":return d.every(g=>Qr(ne.INT32,r[g],s[g]));case"scalar":const m=i.V.T;return d.every(g=>Qr(m,r[g],s[g]))}break}})},clone(t){const e=t.getType(),n=new e,i=n;for(const r of e.fields.byMember()){const s=t[r.localName];let a;if(r.repeated)a=s.map(sd);else if(r.kind=="map"){a=i[r.localName];for(const[l,u]of Object.entries(s))a[l]=sd(u)}else r.kind=="oneof"?a=r.findField(s.case)?{case:s.case,value:sd(s.value)}:{case:void 0}:a=sd(s);i[r.localName]=a}for(const r of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(i,r.no,r.wireType,r.data);return n}}}function sd(t){if(t===void 0)return t;if(yr(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Cc(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function a5(t,e,n){return{syntax:t,json:QB(),bin:t5(),util:Object.assign(Object.assign({},o5()),{newFieldList:e,initFields:n}),makeMessageType(i,r,s){return MB(this,i,r,s)},makeEnum:DB,makeEnumType:Q_,getEnumType:IB,makeExtension(i,r,s){return WB(this,i,r,s)}}}class c5{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const i of this.list())n[i.jsonName]=n[i.name]=i;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const i of this.list())n[i.no]=i;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const i of this.list())i.oneof?i.oneof!==n&&(n=i.oneof,e.push(n)):e.push(i)}return this.members}}function c1(t,e){const n=l1(t);return e?n:p5(h5(n))}function l5(t){return c1(t,!1)}const u5=l1;function l1(t){let e=!1;const n=[];for(let i=0;i<t.length;i++){let r=t.charAt(i);switch(r){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),e=!1;break;default:e&&(e=!1,r=r.toUpperCase()),n.push(r);break}}return n.join("")}const d5=new Set(["constructor","toString","toJSON","valueOf"]),f5=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),u1=t=>"".concat(t,"$"),h5=t=>f5.has(t)?u1(t):t,p5=t=>d5.has(t)?u1(t):t;class m5{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=l5(e)}addField(e){Pt(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function g5(t,e){var n,i,r,s,a,l;const u=[];let d;for(const h of typeof t=="function"?t():t){const m=h;if(m.localName=c1(h.name,h.oneof!==void 0),m.jsonName=(n=h.jsonName)!==null&&n!==void 0?n:u5(h.name),m.repeated=(i=h.repeated)!==null&&i!==void 0?i:!1,h.kind=="scalar"&&(m.L=(r=h.L)!==null&&r!==void 0?r:gs.BIGINT),m.delimited=(s=h.delimited)!==null&&s!==void 0?s:!1,m.req=(a=h.req)!==null&&a!==void 0?a:!1,m.opt=(l=h.opt)!==null&&l!==void 0?l:!1,h.packed===void 0&&(m.packed=h.kind=="enum"||h.kind=="scalar"&&h.T!=ne.BYTES&&h.T!=ne.STRING),h.oneof!==void 0){const g=typeof h.oneof=="string"?h.oneof:h.oneof.name;(!d||d.name!=g)&&(d=new m5(g)),m.oneof=d,d.addField(m)}u.push(m)}return u}const q=a5("proto3",t=>new c5(t,e=>g5(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,i=t;if(e.repeated){i[n]=[];continue}switch(e.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=Sa(e.T,e.L);break}}});class On extends ly{constructor(e){super(),this.seconds=vt.zero,this.nanos=0,q.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(q.json.debug(e)));const i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=vt.parse(r/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?i="."+r.substring(0,3)+"Z":r.substring(6)==="000"?i="."+r.substring(0,6)+"Z":i="."+r+"Z"}return new Date(n).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return On.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new On({seconds:vt.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new On().fromBinary(e,n)}static fromJson(e,n){return new On().fromJson(e,n)}static fromJsonString(e,n){return new On().fromJsonString(e,n)}static equals(e,n){return q.util.equals(On,e,n)}}On.runtime=q;On.typeName="google.protobuf.Timestamp";On.fields=q.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const v5=q.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:On},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:y5,repeated:!0},{no:5,name:"events",kind:"message",T:x5,repeated:!0}]),y5=q.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:b5,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),b5=q.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:On},{no:3,name:"value",kind:"scalar",T:2}]),x5=q.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:On},{no:7,name:"normalized_end_timestamp",kind:"message",T:On,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),d1=q.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),bi=q.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),Ft=q.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),dy=q.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Fc=q.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),bl=q.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Ti=q.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),Bs=q.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),k5=q.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Qt=q.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),Wf=q.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:af,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:T1}]),af=q.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),S5=q.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:q.getEnumType(Ft),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),eo=q.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:q.getEnumType(oa)},{no:4,name:"tracks",kind:"message",T:Xo,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:S5},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:q.getEnumType(xl)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:q.getEnumType(Ti)},{no:18,name:"kind_details",kind:"enum",T:q.getEnumType(w5),repeated:!0}]),oa=q.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),xl=q.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"}]),w5=q.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Ht=q.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),T5=q.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:rs,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:q.getEnumType(f1)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),Xo=q.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:q.getEnumType(bi)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:q.getEnumType(Ft)},{no:10,name:"layers",kind:"message",T:rs,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:T5,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:q.getEnumType(Ht)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:T1},{no:19,name:"audio_features",kind:"enum",T:q.getEnumType(Qt),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:q.getEnumType(d1)}]),rs=q.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:q.getEnumType(dy)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),f1=q.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),xn=q.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:q.getEnumType(Ke)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:fy,oneof:"value"},{no:3,name:"speaker",kind:"message",T:C5,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:g1,oneof:"value"},{no:7,name:"transcription",kind:"message",T:E5,oneof:"value"},{no:8,name:"metrics",kind:"message",T:v5,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:cf,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:hy,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:py,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:my,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:lf,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:uf,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:df,oneof:"value"},{no:18,name:"encrypted_packet",kind:"message",T:h1,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),Ke=q.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),h1=q.makeMessageType("livekit.EncryptedPacket",()=>[{no:1,name:"encryption_type",kind:"enum",T:q.getEnumType(Ht)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}]),p1=q.makeMessageType("livekit.EncryptedPacketPayload",()=>[{no:1,name:"user",kind:"message",T:fy,oneof:"value"},{no:3,name:"chat_message",kind:"message",T:cf,oneof:"value"},{no:4,name:"rpc_request",kind:"message",T:hy,oneof:"value"},{no:5,name:"rpc_ack",kind:"message",T:py,oneof:"value"},{no:6,name:"rpc_response",kind:"message",T:my,oneof:"value"},{no:7,name:"stream_header",kind:"message",T:lf,oneof:"value"},{no:8,name:"stream_chunk",kind:"message",T:uf,oneof:"value"},{no:9,name:"stream_trailer",kind:"message",T:df,oneof:"value"}]),C5=q.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:m1,repeated:!0}]),m1=q.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),fy=q.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),g1=q.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),E5=q.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:P5,repeated:!0}]),P5=q.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),cf=q.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),hy=q.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),py=q.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),my=q.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:v1,oneof:"value"}]),v1=q.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),y1=q.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),b1=q.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:q.getEnumType(x1)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),x1=q.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),k1=q.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:q.getEnumType(S1)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),S1=q.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),w1=q.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:gw},{no:2,name:"screen",kind:"message",T:gw},{no:3,name:"resume_connection",kind:"enum",T:q.getEnumType(bl)},{no:4,name:"disabled_codecs",kind:"message",T:_5},{no:5,name:"force_relay",kind:"enum",T:q.getEnumType(bl)}]),gw=q.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:q.getEnumType(bl)}]),_5=q.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:af,repeated:!0},{no:2,name:"publish",kind:"message",T:af,repeated:!0}]),T1=q.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),wg=q.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),C1=q.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:q.getEnumType(wg)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),E1=q.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),lf=q.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:q.getEnumType(Ht)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:C1,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:E1,oneof:"content_header"}],{localName:"DataStream_Header"}),uf=q.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),df=q.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),R5=q.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),xi=q.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),Tg=q.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),A5=q.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),N5=q.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:vs,oneof:"message"},{no:2,name:"answer",kind:"message",T:vs,oneof:"message"},{no:3,name:"trickle",kind:"message",T:qf,oneof:"message"},{no:4,name:"add_track",kind:"message",T:kl,oneof:"message"},{no:5,name:"mute",kind:"message",T:Hf,oneof:"message"},{no:6,name:"subscription",kind:"message",T:$f,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:P1,oneof:"message"},{no:8,name:"leave",kind:"message",T:Kf,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:R1,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:O1,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:xy,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Fi,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:yy,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:M1,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:vy,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:_1,oneof:"message"}]),vw=q.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:O5,oneof:"message"},{no:2,name:"answer",kind:"message",T:vs,oneof:"message"},{no:3,name:"offer",kind:"message",T:vs,oneof:"message"},{no:4,name:"trickle",kind:"message",T:qf,oneof:"message"},{no:5,name:"update",kind:"message",T:M5,oneof:"message"},{no:6,name:"track_published",kind:"message",T:gy,oneof:"message"},{no:8,name:"leave",kind:"message",T:Kf,oneof:"message"},{no:9,name:"mute",kind:"message",T:Hf,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:L5,oneof:"message"},{no:11,name:"room_update",kind:"message",T:j5,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:U5,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:B5,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:W5,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:H5,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:D5,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:I5,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:K5,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:Q5,oneof:"message"},{no:22,name:"request_response",kind:"message",T:J5,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:Y5,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:$5,oneof:"message"},{no:25,name:"media_sections_requirement",kind:"message",T:n6,oneof:"message"},{no:26,name:"subscribed_audio_codec_update",kind:"message",T:q5,oneof:"message"}]),Cg=q.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:rs,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:q.getEnumType(f1)}]),kl=q.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:q.getEnumType(bi)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:q.getEnumType(Ft)},{no:9,name:"layers",kind:"message",T:rs,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:Cg,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:q.getEnumType(Ht)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:q.getEnumType(d1)},{no:17,name:"audio_features",kind:"enum",T:q.getEnumType(Qt),repeated:!0}]),qf=q.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:q.getEnumType(xi)},{no:3,name:"final",kind:"scalar",T:8}]),Hf=q.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),O5=q.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Wf},{no:2,name:"participant",kind:"message",T:eo},{no:3,name:"other_participants",kind:"message",T:eo,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:A1,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:w1},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:b1},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:af,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),I5=q.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:A1,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:w1},{no:3,name:"server_info",kind:"message",T:b1},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),gy=q.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Xo}]),D5=q.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),vs=q.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13},{no:4,name:"mid_to_track_id",kind:"map",K:9,V:{kind:"scalar",T:9}}]),M5=q.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:eo,repeated:!0}]),$f=q.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:y1,repeated:!0}]),P1=q.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:q.getEnumType(dy)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),vy=q.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:q.getEnumType(Qt),repeated:!0}]),_1=q.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),Kf=q.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:q.getEnumType(Ti)},{no:3,name:"action",kind:"enum",T:q.getEnumType(aa)},{no:4,name:"regions",kind:"message",T:G5}]),aa=q.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),R1=q.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:rs,repeated:!0}]),yy=q.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),A1=q.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),L5=q.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:m1,repeated:!0}]),j5=q.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Wf}]),F5=q.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:q.getEnumType(Fc)},{no:3,name:"score",kind:"scalar",T:2}]),U5=q.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:F5,repeated:!0}]),V5=q.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:q.getEnumType(Tg)}]),B5=q.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:V5,repeated:!0}]),by=q.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:q.getEnumType(dy)},{no:2,name:"enabled",kind:"scalar",T:8}]),z5=q.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:by,repeated:!0}]),W5=q.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:by,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:z5,repeated:!0}]),q5=q.makeMessageType("livekit.SubscribedAudioCodecUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_audio_codecs",kind:"message",T:R5,repeated:!0}]),N1=q.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),O1=q.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:N1,repeated:!0}]),H5=q.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),$5=q.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:Wf},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:eo},{no:4,name:"other_participants",kind:"message",T:eo,repeated:!0}]),xy=q.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:vs},{no:2,name:"subscription",kind:"message",T:$f},{no:3,name:"publish_tracks",kind:"message",T:gy,repeated:!0},{no:4,name:"data_channels",kind:"message",T:D1,repeated:!0},{no:5,name:"offer",kind:"message",T:vs},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:I1,repeated:!0}]),I1=q.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),D1=q.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:q.getEnumType(xi)}]),Fi=q.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:q.getEnumType(A5),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),M1=q.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),K5=q.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),G5=q.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:Z5,repeated:!0}]),Z5=q.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),Q5=q.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:q.getEnumType(k5)}]),J5=q.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:q.getEnumType(ky)},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"trickle",kind:"message",T:qf,oneof:"request"},{no:5,name:"add_track",kind:"message",T:kl,oneof:"request"},{no:6,name:"mute",kind:"message",T:Hf,oneof:"request"},{no:7,name:"update_metadata",kind:"message",T:yy,oneof:"request"},{no:8,name:"update_audio_track",kind:"message",T:vy,oneof:"request"},{no:9,name:"update_video_track",kind:"message",T:_1,oneof:"request"}]),ky=q.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"}]),Y5=q.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),L1=q.makeMessageType("livekit.ConnectionSettings",()=>[{no:1,name:"auto_subscribe",kind:"scalar",T:8},{no:2,name:"adaptive_stream",kind:"scalar",T:8},{no:3,name:"subscriber_allow_pause",kind:"scalar",T:8,opt:!0},{no:4,name:"disable_ice_lite",kind:"scalar",T:8}]),X5=q.makeMessageType("livekit.JoinRequest",()=>[{no:1,name:"client_info",kind:"message",T:k1},{no:2,name:"connection_settings",kind:"message",T:L1},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"participant_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"add_track_requests",kind:"message",T:kl,repeated:!0},{no:6,name:"publisher_offer",kind:"message",T:vs},{no:7,name:"reconnect",kind:"scalar",T:8},{no:8,name:"reconnect_reason",kind:"enum",T:q.getEnumType(Bs)},{no:9,name:"participant_sid",kind:"scalar",T:9},{no:10,name:"sync_state",kind:"message",T:xy}]),e6=q.makeMessageType("livekit.WrappedJoinRequest",()=>[{no:1,name:"compression",kind:"enum",T:q.getEnumType(t6)},{no:2,name:"join_request",kind:"scalar",T:12}]),t6=q.makeEnum("livekit.WrappedJoinRequest.Compression",[{no:0,name:"NONE"},{no:1,name:"GZIP"}]),n6=q.makeMessageType("livekit.MediaSectionsRequirement",()=>[{no:1,name:"num_audios",kind:"scalar",T:13},{no:2,name:"num_videos",kind:"scalar",T:13}]);function i6(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ed={exports:{}},r6=Ed.exports,yw;function s6(){return yw||(yw=1,(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(r6,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],s={},a=null;function l(x,C){var E=x[C];if(typeof E.bind=="function")return E.bind(x);try{return Function.prototype.bind.call(E,x)}catch{return function(){return Function.prototype.apply.apply(E,[x,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(x){return x==="debug"&&(x="log"),typeof console===n?!1:x==="trace"&&i?u:console[x]!==void 0?l(console,x):console.log!==void 0?l(console,"log"):e}function h(){for(var x=this.getLevel(),C=0;C<r.length;C++){var E=r[C];this[E]=C<x?e:this.methodFactory(E,x,this.name)}if(this.log=this.debug,typeof console===n&&x<this.levels.SILENT)return"No console available for logging"}function m(x){return function(){typeof console!==n&&(h.call(this),this[x].apply(this,arguments))}}function g(x,C,E){return d(x)||m.apply(this,arguments)}function k(x,C){var E=this,A,N,w,S="loglevel";typeof x=="string"?S+=":"+x:typeof x=="symbol"&&(S=void 0);function R(W){var H=(r[W]||"silent").toUpperCase();if(!(typeof window===n||!S)){try{window.localStorage[S]=H;return}catch{}try{window.document.cookie=encodeURIComponent(S)+"="+H+";"}catch{}}}function D(){var W;if(!(typeof window===n||!S)){try{W=window.localStorage[S]}catch{}if(typeof W===n)try{var H=window.document.cookie,ie=encodeURIComponent(S),ee=H.indexOf(ie+"=");ee!==-1&&(W=/^([^;]+)/.exec(H.slice(ee+ie.length+1))[1])}catch{}return E.levels[W]===void 0&&(W=void 0),W}}function j(){if(!(typeof window===n||!S)){try{window.localStorage.removeItem(S)}catch{}try{window.document.cookie=encodeURIComponent(S)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function V(W){var H=W;if(typeof H=="string"&&E.levels[H.toUpperCase()]!==void 0&&(H=E.levels[H.toUpperCase()]),typeof H=="number"&&H>=0&&H<=E.levels.SILENT)return H;throw new TypeError("log.setLevel() called with invalid level: "+W)}E.name=x,E.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},E.methodFactory=C||g,E.getLevel=function(){return w??N??A},E.setLevel=function(W,H){return w=V(W),H!==!1&&R(w),h.call(E)},E.setDefaultLevel=function(W){N=V(W),D()||E.setLevel(W,!1)},E.resetLevel=function(){w=null,j(),h.call(E)},E.enableAll=function(W){E.setLevel(E.levels.TRACE,W)},E.disableAll=function(W){E.setLevel(E.levels.SILENT,W)},E.rebuild=function(){if(a!==E&&(A=V(a.getLevel())),h.call(E),a===E)for(var W in s)s[W].rebuild()},A=V(a?a.getLevel():"WARN");var B=D();B!=null&&(w=V(B)),h.call(E)}a=new k,a.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var E=s[C];return E||(E=s[C]=new k(C,a.methodFactory)),E};var T=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=T),a},a.getLoggers=function(){return s},a.default=a,a})})(Ed)),Ed.exports}var Gf=s6(),Eg;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(Eg||(Eg={}));var Ri;(function(t){t.Default="livekit",t.Room="livekit-room",t.TokenSource="livekit-token-source",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Ri||(Ri={}));let qe=Gf.getLogger("livekit");Object.values(Ri).map(t=>Gf.getLogger(t));qe.setDefaultLevel(Eg.info);function Pr(t){const e=Gf.getLogger(t);return e.setDefaultLevel(qe.getLevel()),e}const o6=Gf.getLogger("lk-e2ee"),Ec=7e3,a6=[0,300,4*300,9*300,16*300,Ec,Ec,Ec,Ec,Ec];class c6{constructor(e){this._retryDelays=e!==void 0?[...e]:a6}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function l6(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function I(t,e,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(h){try{d(i.next(h))}catch(m){a(m)}}function u(h){try{d(i.throw(h))}catch(m){a(m)}}function d(h){h.done?s(h.value):r(h.value).then(l,u)}d((i=i.apply(t,e||[])).next())})}function bw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function br(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof bw=="function"?bw(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(a){return new Promise(function(l,u){a=t[s](a),r(l,u,a.done,a.value)})}}function r(s,a,l,u){Promise.resolve(u).then(function(d){s({value:d,done:l})},a)}}var od={exports:{}},xw;function u6(){if(xw)return od.exports;xw=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(S,R,D){return Function.prototype.apply.call(S,R,D)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:n=function(S){return Object.getOwnPropertyNames(S)};function i(w){console&&console.warn&&console.warn(w)}var r=Number.isNaN||function(S){return S!==S};function s(){s.init.call(this)}od.exports=s,od.exports.once=E,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function l(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(w){if(typeof w!="number"||w<0||r(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");a=w}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||r(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function u(w){return w._maxListeners===void 0?s.defaultMaxListeners:w._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(S){for(var R=[],D=1;D<arguments.length;D++)R.push(arguments[D]);var j=S==="error",V=this._events;if(V!==void 0)j=j&&V.error===void 0;else if(!j)return!1;if(j){var B;if(R.length>0&&(B=R[0]),B instanceof Error)throw B;var W=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw W.context=B,W}var H=V[S];if(H===void 0)return!1;if(typeof H=="function")e(H,this,R);else for(var ie=H.length,ee=T(H,ie),D=0;D<ie;++D)e(ee[D],this,R);return!0};function d(w,S,R,D){var j,V,B;if(l(R),V=w._events,V===void 0?(V=w._events=Object.create(null),w._eventsCount=0):(V.newListener!==void 0&&(w.emit("newListener",S,R.listener?R.listener:R),V=w._events),B=V[S]),B===void 0)B=V[S]=R,++w._eventsCount;else if(typeof B=="function"?B=V[S]=D?[R,B]:[B,R]:D?B.unshift(R):B.push(R),j=u(w),j>0&&B.length>j&&!B.warned){B.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=w,W.type=S,W.count=B.length,i(W)}return w}s.prototype.addListener=function(S,R){return d(this,S,R,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(S,R){return d(this,S,R,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(w,S,R){var D={fired:!1,wrapFn:void 0,target:w,type:S,listener:R},j=h.bind(D);return j.listener=R,D.wrapFn=j,j}s.prototype.once=function(S,R){return l(R),this.on(S,m(this,S,R)),this},s.prototype.prependOnceListener=function(S,R){return l(R),this.prependListener(S,m(this,S,R)),this},s.prototype.removeListener=function(S,R){var D,j,V,B,W;if(l(R),j=this._events,j===void 0)return this;if(D=j[S],D===void 0)return this;if(D===R||D.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete j[S],j.removeListener&&this.emit("removeListener",S,D.listener||R));else if(typeof D!="function"){for(V=-1,B=D.length-1;B>=0;B--)if(D[B]===R||D[B].listener===R){W=D[B].listener,V=B;break}if(V<0)return this;V===0?D.shift():x(D,V),D.length===1&&(j[S]=D[0]),j.removeListener!==void 0&&this.emit("removeListener",S,W||R)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(S){var R,D,j;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[S]),this;if(arguments.length===0){var V=Object.keys(D),B;for(j=0;j<V.length;++j)B=V[j],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=D[S],typeof R=="function")this.removeListener(S,R);else if(R!==void 0)for(j=R.length-1;j>=0;j--)this.removeListener(S,R[j]);return this};function g(w,S,R){var D=w._events;if(D===void 0)return[];var j=D[S];return j===void 0?[]:typeof j=="function"?R?[j.listener||j]:[j]:R?C(j):T(j,j.length)}s.prototype.listeners=function(S){return g(this,S,!0)},s.prototype.rawListeners=function(S){return g(this,S,!1)},s.listenerCount=function(w,S){return typeof w.listenerCount=="function"?w.listenerCount(S):k.call(w,S)},s.prototype.listenerCount=k;function k(w){var S=this._events;if(S!==void 0){var R=S[w];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function T(w,S){for(var R=new Array(S),D=0;D<S;++D)R[D]=w[D];return R}function x(w,S){for(;S+1<w.length;S++)w[S]=w[S+1];w.pop()}function C(w){for(var S=new Array(w.length),R=0;R<S.length;++R)S[R]=w[R].listener||w[R];return S}function E(w,S){return new Promise(function(R,D){function j(B){w.removeListener(S,V),D(B)}function V(){typeof w.removeListener=="function"&&w.removeListener("error",j),R([].slice.call(arguments))}N(w,S,V,{once:!0}),S!=="error"&&A(w,j,{once:!0})})}function A(w,S,R){typeof w.on=="function"&&N(w,"error",S,R)}function N(w,S,R,D){if(typeof w.on=="function")D.once?w.once(S,R):w.on(S,R);else if(typeof w.addEventListener=="function")w.addEventListener(S,function j(V){D.once&&w.removeEventListener(S,j),R(V)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return od.exports}var er=u6();let j1=!0,F1=!0;function Uc(t,e,n){const i=t.match(e);return i&&i.length>=n&&parseFloat(i[n],10)}function so(t,e,n){if(!t.RTCPeerConnection)return;const i=t.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(a,l){if(a!==e)return r.apply(this,arguments);const u=d=>{const h=n(d);h&&(l.handleEvent?l.handleEvent(h):l(h))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,u),r.apply(this,[a,u])};const s=i.removeEventListener;i.removeEventListener=function(a,l){if(a!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(l))return s.apply(this,arguments);const u=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[a,u])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(a){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),a&&this.addEventListener(e,this["_on"+e]=a)},enumerable:!0,configurable:!0})}function d6(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(j1=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function f6(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(F1=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function U1(){if(typeof window=="object"){if(j1)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Sy(t,e){F1&&console.warn(t+" is deprecated, please use "+e+" instead.")}function h6(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(r=>r.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Uc(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Uc(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Uc(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Uc(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function kw(t){return Object.prototype.toString.call(t)==="[object Object]"}function V1(t){return kw(t)?Object.keys(t).reduce(function(e,n){const i=kw(t[n]),r=i?V1(t[n]):t[n],s=i&&!Object.keys(r).length;return r===void 0||s?e:Object.assign(e,{[n]:r})},{}):t}function Pg(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?Pg(t,t.get(e[i]),n):i.endsWith("Ids")&&e[i].forEach(r=>{Pg(t,t.get(r),n)})}))}function Sw(t,e,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(e===null)return r;const s=[];return t.forEach(a=>{a.type==="track"&&a.trackIdentifier===e.id&&s.push(a)}),s.forEach(a=>{t.forEach(l=>{l.type===i&&l.trackId===a.id&&Pg(t,l,r)})}),r}const ww=U1;function B1(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const i=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const u={};return Object.keys(l).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const h=typeof l[d]=="object"?l[d]:{ideal:l[d]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const m=function(g,k){return g?g+k.charAt(0).toUpperCase()+k.slice(1):k==="deviceId"?"sourceId":k};if(h.ideal!==void 0){u.optional=u.optional||[];let g={};typeof h.ideal=="number"?(g[m("min",d)]=h.ideal,u.optional.push(g),g={},g[m("max",d)]=h.ideal,u.optional.push(g)):(g[m("",d)]=h.ideal,u.optional.push(g))}h.exact!==void 0&&typeof h.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[m("",d)]=h.exact):["min","max"].forEach(g=>{h[g]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[m(g,d)]=h[g])})}),l.advanced&&(u.optional=(u.optional||[]).concat(l.advanced)),u},r=function(l,u){if(e.version>=61)return u(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const d=function(h,m,g){m in h&&!(g in h)&&(h[g]=h[m],delete h[m])};l=JSON.parse(JSON.stringify(l)),d(l.audio,"autoGainControl","googAutoGainControl"),d(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=i(l.audio)}if(l&&typeof l.video=="object"){let d=l.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const h=e.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete l.video.facingMode;let m;if(d.exact==="environment"||d.ideal==="environment"?m=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(g=>{g=g.filter(T=>T.kind==="videoinput");let k=g.find(T=>m.some(x=>T.label.toLowerCase().includes(x)));return!k&&g.length&&m.includes("back")&&(k=g[g.length-1]),k&&(l.video.deviceId=d.exact?{exact:k.deviceId}:{ideal:k.deviceId}),l.video=i(l.video),ww("chrome: "+JSON.stringify(l)),u(l)})}l.video=i(l.video)}return ww("chrome: "+JSON.stringify(l)),u(l)},s=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(l,u,d){r(l,h=>{n.webkitGetUserMedia(h,u,m=>{d&&d(s(m))})})};if(n.getUserMedia=a.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(u){return r(u,d=>l(d).then(h=>{if(d.audio&&!h.getAudioTracks().length||d.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(s(h))))}}}function z1(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function W1(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",r=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(l=>l.track&&l.track.id===r.track.id):s={track:r.track};const a=new Event("track");a.track=r.track,a.receiver=s,a.transceiver={receiver:s},a.streams=[i.stream],this.dispatchEvent(a)}),i.stream.getTracks().forEach(r=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(l=>l.track&&l.track.id===r.id):s={track:r};const a=new Event("track");a.track=r,a.receiver=s,a.transceiver={receiver:s},a.streams=[i.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else so(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function q1(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(r,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=r.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:r}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,u){let d=r.apply(this,arguments);return d||(d=e(this,l),this._senders.push(d)),d};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){s.apply(this,arguments);const u=this._senders.indexOf(l);u!==-1&&this._senders.splice(u,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(a=>{this._senders.push(e(this,a))})};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],i.apply(this,[s]),s.getTracks().forEach(a=>{const l=this._senders.find(u=>u.track===a);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function H1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(a=>a._pc=this),s});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=i.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(a=>Sw(a,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=n.apply(this,[]);return r.forEach(s=>s._pc=this),r}),so(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(s=>Sw(s,r.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let r,s,a;return this.getSenders().forEach(l=>{l.track===i&&(r?a=!0:r=l)}),this.getReceivers().forEach(l=>(l.track===i&&(s?a=!0:s=l),l.track===i)),a||r&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function $1(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(u)===-1&&this._shimmedLocalStreams[l.id].push(u):this._shimmedLocalStreams[l.id]=[l,u],u};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(d=>{if(this.getSenders().find(m=>m.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const u=this.getSenders().filter(d=>l.indexOf(d)===-1);this._shimmedLocalStreams[a.id]=[a].concat(u)};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],i.apply(this,arguments)};const r=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const u=this._shimmedLocalStreams[l].indexOf(a);u!==-1&&this._shimmedLocalStreams[l].splice(u,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),r.apply(this,arguments)}}function K1(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return $1(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const h=n.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(m=>this._reverseStreams[m.id])};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(m=>{if(this.getSenders().find(k=>k.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const m=new t.MediaStream(h.getTracks());this._streams[h.id]=m,this._reverseStreams[m.id]=h,h=m}i.apply(this,[h])};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},t.RTCPeerConnection.prototype.addTrack=function(h,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const g=[].slice.call(arguments,1);if(g.length!==1||!g[0].getTracks().find(x=>x===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(x=>x.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const T=this._streams[m.id];if(T)T.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const x=new t.MediaStream([h]);this._streams[m.id]=x,this._reverseStreams[x.id]=m,this.addStream(x)}return this.getSenders().find(x=>x.track===h)};function s(d,h){let m=h.sdp;return Object.keys(d._reverseStreams||[]).forEach(g=>{const k=d._reverseStreams[g],T=d._streams[k.id];m=m.replace(new RegExp(T.id,"g"),k.id)}),new RTCSessionDescription({type:h.type,sdp:m})}function a(d,h){let m=h.sdp;return Object.keys(d._reverseStreams||[]).forEach(g=>{const k=d._reverseStreams[g],T=d._streams[k.id];m=m.replace(new RegExp(k.id,"g"),T.id)}),new RTCSessionDescription({type:h.type,sdp:m})}["createOffer","createAnswer"].forEach(function(d){const h=t.RTCPeerConnection.prototype[d],m={[d](){const g=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[T=>{const x=s(this,T);g[0].apply(null,[x])},T=>{g[1]&&g[1].apply(null,T)},arguments[2]]):h.apply(this,arguments).then(T=>s(this,T))}};t.RTCPeerConnection.prototype[d]=m[d]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=a(this,arguments[0]),l.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const d=u.get.apply(this);return d.type===""?d:s(this,d)}}),t.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let g;Object.keys(this._streams).forEach(k=>{this._streams[k].getTracks().find(x=>h.track===x)&&(g=this._streams[k])}),g&&(g.getTracks().length===1?this.removeStream(this._reverseStreams[g.id]):g.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function _g(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=t.RTCPeerConnection.prototype[n],r={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=r[n]})}function G1(t,e){so(t,"negotiationneeded",n=>{const i=n.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}var Tw=Object.freeze({__proto__:null,fixNegotiationNeeded:G1,shimAddTrackRemoveTrack:K1,shimAddTrackRemoveTrackWithNative:$1,shimGetSendersWithDtmf:q1,shimGetUserMedia:B1,shimMediaStream:z1,shimOnTrack:W1,shimPeerConnection:_g,shimSenderReceiverGetStats:H1});function Z1(t,e){const n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(r,s,a){Sy("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(r).then(s,a)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const r=function(a,l,u){l in a&&!(u in a)&&(a[u]=a[l],delete a[l])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),r(a.audio,"autoGainControl","mozAutoGainControl"),r(a.audio,"noiseSuppression","mozNoiseSuppression")),s(a)},i&&i.prototype.getSettings){const a=i.prototype.getSettings;i.prototype.getSettings=function(){const l=a.apply(this,arguments);return r(l,"mozAutoGainControl","autoGainControl"),r(l,"mozNoiseSuppression","noiseSuppression"),l}}if(i&&i.prototype.applyConstraints){const a=i.prototype.applyConstraints;i.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),r(l,"autoGainControl","mozAutoGainControl"),r(l,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[l])}}}}function p6(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(i)})}function Q1(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Rg(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const s=t.RTCPeerConnection.prototype[r],a={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=a[r]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,a,l]=arguments;return i.apply(this,[s||null]).then(u=>{if(e.version<53&&!a)try{u.forEach(d=>{d.type=n[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;u.forEach((h,m)=>{u.set(m,Object.assign({},h,{type:n[h.type]||h.type}))})}return u}).then(a,l)}}function J1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Y1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i}),so(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function X1(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Sy("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function eR(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function tR(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const r=i.length>0;r&&i.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(r){const{sender:a}=s,l=a.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=i,a.sendEncodings=i,this.setParametersPromises.push(a.setParameters(l).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return s})}function nR(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function iR(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function rR(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var Cw=Object.freeze({__proto__:null,shimAddTransceiver:tR,shimCreateAnswer:rR,shimCreateOffer:iR,shimGetDisplayMedia:p6,shimGetParameters:nR,shimGetUserMedia:Z1,shimOnTrack:Q1,shimPeerConnection:Rg,shimRTCDataChannel:eR,shimReceiverGetStats:Y1,shimRemoveStream:X1,shimSenderGetStats:J1});function sR(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(r=>e.call(this,r,i)),i.getVideoTracks().forEach(r=>e.call(this,r,i))},t.RTCPeerConnection.prototype.addTrack=function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s&&s.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const r=n.getTracks();this.getSenders().forEach(s=>{r.includes(s.track)&&this.removeTrack(s)})})}}function oR(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const s=new Event("addstream");s.stream=r,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(s=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(s)>=0)return;i._remoteStreams.push(s);const a=new Event("addstream");a.stream=s,i.dispatchEvent(a)})}),e.apply(i,arguments)}}}function aR(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,i=e.createAnswer,r=e.setLocalDescription,s=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(d,h){const m=arguments.length>=2?arguments[2]:arguments[0],g=n.apply(this,[m]);return h?(g.then(d,h),Promise.resolve()):g},e.createAnswer=function(d,h){const m=arguments.length>=2?arguments[2]:arguments[0],g=i.apply(this,[m]);return h?(g.then(d,h),Promise.resolve()):g};let l=function(u,d,h){const m=r.apply(this,[u]);return h?(m.then(d,h),Promise.resolve()):m};e.setLocalDescription=l,l=function(u,d,h){const m=s.apply(this,[u]);return h?(m.then(d,h),Promise.resolve()):m},e.setRemoteDescription=l,l=function(u,d,h){const m=a.apply(this,[u]);return h?(m.then(d,h),Promise.resolve()):m},e.addIceCandidate=l}function cR(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,i=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=r=>i(lR(r))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,r,s){e.mediaDevices.getUserMedia(i).then(r,s)}).bind(e))}function lR(t){return t&&t.video!==void 0?Object.assign({},t,{video:V1(t.video)}):t}function uR(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(i,r){if(i&&i.iceServers){const s=[];for(let a=0;a<i.iceServers.length;a++){let l=i.iceServers[a];l.urls===void 0&&l.url?(Sy("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,s.push(l)):s.push(i.iceServers[a])}i.iceServers=s}return new e(i,r)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function dR(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function fR(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const r=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):i.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const s=this.getTransceivers().find(a=>a.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):i.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function hR(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var Ew=Object.freeze({__proto__:null,shimAudioContext:hR,shimCallbacksAPI:aR,shimConstraints:lR,shimCreateOfferLegacy:fR,shimGetUserMedia:cR,shimLocalStreamsAPI:sR,shimRTCIceServerUrls:uR,shimRemoteStreamsAPI:oR,shimTrackEventTransceiver:dR}),Cm={exports:{}},Pw;function m6(){return Pw||(Pw=1,(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(n){return n.split(`
m=`).map((r,s)=>(s>0?"m="+r:r).trim()+`\r
`)},e.getDescription=function(n){const i=e.splitSections(n);return i&&i[0]},e.getMediaSections=function(n){const i=e.splitSections(n);return i.shift(),i},e.matchPrefix=function(n,i){return e.splitLines(n).filter(r=>r.indexOf(i)===0)},e.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const r={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let s=8;s<i.length;s+=2)switch(i[s]){case"raddr":r.relatedAddress=i[s+1];break;case"rport":r.relatedPort=parseInt(i[s+1],10);break;case"tcptype":r.tcpType=i[s+1];break;case"ufrag":r.ufrag=i[s+1],r.usernameFragment=i[s+1];break;default:r[i[s]]===void 0&&(r[i[s]]=i[s+1]);break}return r},e.writeCandidate=function(n){const i=[];i.push(n.foundation);const r=n.component;r==="rtp"?i.push(1):r==="rtcp"?i.push(2):i.push(r),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const s=n.type;return i.push("typ"),i.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let i=n.substring(9).split(" ");const r={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),r.name=i[0],r.clockRate=parseInt(i[1],10),r.channels=i.length===3?parseInt(i[2],10):1,r.numChannels=r.channels,r},e.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const r=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(r!==1?"/"+r:"")+`\r
`},e.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const i={};let r;const s=n.substring(n.indexOf(" ")+1).split(";");for(let a=0;a<s.length;a++)r=s[a].trim().split("="),i[r[0].trim()]=r[1];return i},e.writeFmtp=function(n){let i="",r=n.payloadType;if(n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(a=>{n.parameters[a]!==void 0?s.push(a+"="+n.parameters[a]):s.push(a)}),i+="a=fmtp:"+r+" "+s.join(";")+`\r
`}return i},e.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(n){let i="",r=n.payloadType;return n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{i+="a=rtcp-fb:"+r+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(n){const i=n.indexOf(" "),r={ssrc:parseInt(n.substring(7,i),10)},s=n.indexOf(":",i);return s>-1?(r.attribute=n.substring(i+1,s),r.value=n.substring(s+1)):r.attribute=n.substring(i+1),r},e.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(r=>parseInt(r,10))}},e.getMid=function(n){const i=e.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:e.matchPrefix(n+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,i){let r="a=setup:"+i+`\r
`;return n.fingerprints.forEach(s=>{r+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),r},e.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,i){return e.matchPrefix(n+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,i){const r=e.matchPrefix(n+i,"a=ice-ufrag:")[0],s=e.matchPrefix(n+i,"a=ice-pwd:")[0];return r&&s?{usernameFragment:r.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");i.profile=s[2];for(let l=3;l<s.length;l++){const u=s[l],d=e.matchPrefix(n,"a=rtpmap:"+u+" ")[0];if(d){const h=e.parseRtpMap(d),m=e.matchPrefix(n,"a=fmtp:"+u+" ");switch(h.parameters=m.length?e.parseFmtp(m[0]):{},h.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+u+" ").map(e.parseRtcpFb),i.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(h.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(l=>{i.headerExtensions.push(e.parseExtmap(l))});const a=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(l=>{a.forEach(u=>{l.rtcpFeedback.find(h=>h.type===u.type&&h.parameter===u.parameter)||l.rtcpFeedback.push(u)})}),i},e.writeRtpDescription=function(n,i){let r="";r+="m="+n+" ",r+=i.codecs.length>0?"9":"0",r+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=i.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(a=>{r+=e.writeRtpMap(a),r+=e.writeFmtp(a),r+=e.writeRtcpFb(a)});let s=0;return i.codecs.forEach(a=>{a.maxptime>s&&(s=a.maxptime)}),s>0&&(r+="a=maxptime:"+s+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(a=>{r+=e.writeExtmap(a)}),r},e.parseRtpEncodingParameters=function(n){const i=[],r=e.parseRtpParameters(n),s=r.fecMechanisms.indexOf("RED")!==-1,a=r.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(n,"a=ssrc:").map(g=>e.parseSsrcMedia(g)).filter(g=>g.attribute==="cname"),u=l.length>0&&l[0].ssrc;let d;const h=e.matchPrefix(n,"a=ssrc-group:FID").map(g=>g.substring(17).split(" ").map(T=>parseInt(T,10)));h.length>0&&h[0].length>1&&h[0][0]===u&&(d=h[0][1]),r.codecs.forEach(g=>{if(g.name.toUpperCase()==="RTX"&&g.parameters.apt){let k={ssrc:u,codecPayloadType:parseInt(g.parameters.apt,10)};u&&d&&(k.rtx={ssrc:d}),i.push(k),s&&(k=JSON.parse(JSON.stringify(k)),k.fec={ssrc:u,mechanism:a?"red+ulpfec":"red"},i.push(k))}}),i.length===0&&u&&i.push({ssrc:u});let m=e.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,i.forEach(g=>{g.maxBitrate=m})),i},e.parseRtcpParameters=function(n){const i={},r=e.matchPrefix(n,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];r&&(i.cname=r.value,i.ssrc=r.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=s.length>0,i.compound=s.length===0;const a=e.matchPrefix(n,"a=rtcp-mux");return i.mux=a.length>0,i},e.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+=`a=rtcp-rsize\r
`),n.mux&&(i+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),i},e.parseMsid=function(n){let i;const r=e.matchPrefix(n,"a=msid:");if(r.length===1)return i=r[0].substring(7).split(" "),{stream:i[0],track:i[1]};const s=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(s.length>0)return i=s[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(n){const i=e.parseMLine(n),r=e.matchPrefix(n,"a=max-message-size:");let s;r.length>0&&(s=parseInt(r[0].substring(19),10)),isNaN(s)&&(s=65536);const a=e.matchPrefix(n,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:i.fmt,maxMessageSize:s};const l=e.matchPrefix(n,"a=sctpmap:");if(l.length>0){const u=l[0].substring(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,i){let r=[];return n.protocol!=="DTLS/SCTP"?r=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:r=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&r.push("a=max-message-size:"+i.maxMessageSize+`\r
`),r.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,i,r){let s;const a=i!==void 0?i:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+s+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,i){const r=e.splitLines(n);for(let s=0;s<r.length;s++)switch(r[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[s].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const r=e.splitLines(n)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},e.parseOLine=function(n){const r=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=e.splitLines(n);for(let r=0;r<i.length;r++)if(i[r].length<2||i[r].charAt(1)!=="=")return!1;return!0},t.exports=e})(Cm)),Cm.exports}var pR=m6(),ca=i6(pR),g6=CB({__proto__:null,default:ca},[pR]);function Pd(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const r=new e(i),s=ca.parseCandidate(i.candidate);for(const a in s)a in r||Object.defineProperty(r,a,{value:s[a]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new e(i)},t.RTCIceCandidate.prototype=e.prototype,so(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Ag(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||so(t,"icecandidate",e=>{if(e.candidate){const n=ca.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function _d(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const u=ca.splitSections(l.sdp);return u.shift(),u.some(d=>{const h=ca.parseMLine(d);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},i=function(l){const u=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const d=parseInt(u[1],10);return d!==d?-1:d},r=function(l){let u=65536;return e.browser==="firefox"&&(e.version<57?l===-1?u=16384:u=2147483637:e.version<60?u=e.version===57?65535:65536:u=2147483637),u},s=function(l,u){let d=65536;e.browser==="firefox"&&e.version===57&&(d=65535);const h=ca.matchPrefix(l.sdp,"a=max-message-size:");return h.length>0?d=parseInt(h[0].substring(19),10):e.browser==="firefox"&&u!==-1&&(d=2147483637),d},a=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const u=i(arguments[0]),d=r(u),h=s(arguments[0],u);let m;d===0&&h===0?m=Number.POSITIVE_INFINITY:d===0||h===0?m=Math.max(d,h):m=Math.min(d,h);const g={};Object.defineProperty(g,"maxMessageSize",{get(){return m}}),this._sctp=g}return a.apply(this,arguments)}}function Rd(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(i,r){const s=i.send;i.send=function(){const l=arguments[0],u=l.length||l.size||l.byteLength;if(i.readyState==="open"&&r.sctp&&u>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return s.apply(i,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const r=n.apply(this,arguments);return e(r,this),r},so(t,"datachannel",i=>(e(i.channel,i.target),i))}function Ng(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const s=r.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const a=new Event("connectionstatechange",r);s.dispatchEvent(a)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function Og(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=r.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&r instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:r.type,sdp:s}):r.sdp=s}return n.apply(this,arguments)}}function Ad(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Nd(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return n.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?n.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>n.apply(this,[a]))})}var v6=Object.freeze({__proto__:null,removeExtmapAllowMixed:Og,shimAddIceCandidateNullOrEmpty:Ad,shimConnectionState:Ng,shimMaxMessageSize:_d,shimParameterlessSetLocalDescription:Nd,shimRTCIceCandidate:Pd,shimRTCIceCandidateRelayProtocol:Ag,shimSendThrowTypeError:Rd});function y6(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=U1,i=h6(t),r={browserDetails:i,commonShim:v6,extractVersion:Uc,disableLog:d6,disableWarnings:f6,sdp:g6};switch(i.browser){case"chrome":if(!Tw||!_g||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=Tw,Ad(t,i),Nd(t),B1(t,i),z1(t),_g(t,i),W1(t),K1(t,i),q1(t),H1(t),G1(t,i),Pd(t),Ag(t),Ng(t),_d(t,i),Rd(t),Og(t,i);break;case"firefox":if(!Cw||!Rg||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=Cw,Ad(t,i),Nd(t),Z1(t,i),Rg(t,i),Q1(t),X1(t),J1(t),Y1(t),eR(t),tR(t),nR(t),iR(t),rR(t),Pd(t),Ng(t),_d(t,i),Rd(t);break;case"safari":if(!Ew||!e.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=Ew,Ad(t,i),Nd(t),uR(t),fR(t),aR(t),sR(t),oR(t),dR(t),cR(t),hR(t),Pd(t),Ag(t),_d(t,i),Rd(t),Og(t,i);break;default:n("Unsupported browser!");break}return r}y6({window:typeof window>"u"?void 0:window});const b6=/version\/(\d+(\.?_?\d+)+)/i;let Em;function Mn(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Em===void 0||e){const i=x6.find(r=>{let{test:s}=r;return s.test(n)});Em=i?.describe(n)}return Em}const x6=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:Od(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:Pm(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:Od(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:Pm(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:Od(b6,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:Pm(t)}}}];function Od(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=e.match(t);return i&&i.length>=n&&i[n]||""}function Pm(t){return t.includes("mac os")?Od(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var k6="2.16.1";const S6=k6,w6=16;class tr extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var ht;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout",t[t.WebSocket=6]="WebSocket"})(ht||(ht={}));class Fe extends tr{constructor(e,n,i,r){super(1,e),this.name="ConnectionError",this.status=i,this.reason=n,this.context=r,this.reasonName=ht[n]}static notAllowed(e,n,i){return new Fe(e,ht.NotAllowed,n,i)}static timeout(e){return new Fe(e,ht.Timeout)}static leaveRequest(e,n){return new Fe(e,ht.LeaveRequest,void 0,n)}static internal(e,n){return new Fe(e,ht.InternalError,void 0,n)}static cancelled(e){return new Fe(e,ht.Cancelled)}static serverUnreachable(e,n){return new Fe(e,ht.ServerUnreachable,n)}static websocket(e,n,i){return new Fe(e,ht.WebSocket,n,i)}}class wy extends tr{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class xr extends tr{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class T6 extends tr{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class Wt extends tr{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class Ig extends tr{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class _w extends tr{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class Rw extends tr{constructor(e,n){super(15,e),this.name="SignalRequestError",this.reason=n,this.reasonName=typeof n=="string"?n:ky[n]}}var yn;(function(t){t[t.AlreadyOpened=0]="AlreadyOpened",t[t.AbnormalEnd=1]="AbnormalEnd",t[t.DecodeFailed=2]="DecodeFailed",t[t.LengthExceeded=3]="LengthExceeded",t[t.Incomplete=4]="Incomplete",t[t.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",t[t.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(yn||(yn={}));class ti extends tr{constructor(e,n){super(16,e),this.name="DataStreamError",this.reason=n,this.reasonName=yn[n]}}class qo extends tr{constructor(e){super(18,e),this.name="SignalReconnectError"}}var Sl;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(Sl||(Sl={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(Sl||(Sl={}));class rn{}rn.setTimeout=function(){return setTimeout(...arguments)};rn.setInterval=function(){return setInterval(...arguments)};rn.clearTimeout=function(){return clearTimeout(...arguments)};rn.clearInterval=function(){return clearInterval(...arguments)};var Q;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(Q||(Q={}));var te;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(te||(te={}));var pe;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(pe||(pe={}));var fe;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(fe||(fe={}));function C6(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}class ot{constructor(e,n,i,r,s){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&i!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:i,maxFramerate:r,priority:s};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const E6=["vp8","h264"],P6=["vp8","h264","vp9","av1","h265"];function _6(t){return!!E6.find(e=>e===t)}const R6=_6;var Aw;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(Aw||(Aw={}));var Dg;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(Dg||(Dg={}));const wl={h90:new ot(160,90,9e4,20),h180:new ot(320,180,16e4,20),h216:new ot(384,216,18e4,20),h360:new ot(640,360,45e4,20),h540:new ot(960,540,8e5,25),h720:new ot(1280,720,17e5,30),h1080:new ot(1920,1080,3e6,30),h1440:new ot(2560,1440,5e6,30),h2160:new ot(3840,2160,8e6,30)},Mg={h120:new ot(160,120,7e4,20),h180:new ot(240,180,125e3,20),h240:new ot(320,240,14e4,20),h360:new ot(480,360,33e4,20),h480:new ot(640,480,5e5,20),h540:new ot(720,540,6e5,25),h720:new ot(960,720,13e5,30),h1080:new ot(1440,1080,23e5,30),h1440:new ot(1920,1440,38e5,30)},Ty={h360fps3:new ot(640,360,2e5,3,"medium"),h360fps15:new ot(640,360,4e5,15,"medium"),h720fps5:new ot(1280,720,8e5,5,"medium"),h720fps15:new ot(1280,720,15e5,15,"medium"),h720fps30:new ot(1280,720,2e6,30,"medium"),h1080fps15:new ot(1920,1080,25e5,15,"medium"),h1080fps30:new ot(1920,1080,5e6,30,"medium"),original:new ot(0,0,7e6,30,"medium")};function mR(t,e,n){var i,r,s,a;const{optionsWithoutProcessor:l,audioProcessor:u,videoProcessor:d}=yR(t??{}),h=e?.processor,m=n?.processor,g=l??{};return g.audio===!0&&(g.audio={}),g.video===!0&&(g.video={}),g.audio&&(Lg(g.audio,e),(i=(s=g.audio).deviceId)!==null&&i!==void 0||(s.deviceId={ideal:"default"}),(u||h)&&(g.audio.processor=u??h)),g.video&&(Lg(g.video,n),(r=(a=g.video).deviceId)!==null&&r!==void 0||(a.deviceId={ideal:"default"}),(d||m)&&(g.video.processor=d??m)),g}function Lg(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function Cy(t){var e,n,i,r;const s={};if(t.video)if(typeof t.video=="object"){const a={},l=a,u=t.video;Object.keys(u).forEach(d=>{d==="resolution"?Lg(l,u.resolution):l[d]=u[d]}),s.video=a,(e=(i=s.video).deviceId)!==null&&e!==void 0||(i.deviceId={ideal:"default"})}else s.video=t.video?{deviceId:{ideal:"default"}}:!1;else s.video=!1;return t.audio?typeof t.audio=="object"?(s.audio=t.audio,(n=(r=s.audio).deviceId)!==null&&n!==void 0||(r.deviceId={ideal:"default"})):s.audio={deviceId:{ideal:"default"}}:s.audio=!1,s}function gR(t){return I(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return(function*(){const i=vR();if(i){const r=i.createAnalyser();r.fftSize=2048;const s=r.frequencyBinCount,a=new Uint8Array(s);i.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(r),yield sn(n),r.getByteTimeDomainData(a);const u=a.some(d=>d!==128&&d!==0);return i.close(),!u}return!1})()})}function vR(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const i=()=>I(this,void 0,void 0,function*(){var r;try{n.state==="suspended"&&(yield n.resume())}catch(s){console.warn("Error trying to auto-resume audio context",s)}finally{(r=window.document.body)===null||r===void 0||r.removeEventListener("click",i)}});n.addEventListener("statechange",()=>{var r;n.state==="closed"&&((r=window.document.body)===null||r===void 0||r.removeEventListener("click",i))}),window.document.body.addEventListener("click",i)}return n}}function A6(t){return t==="audioinput"?Y.Source.Microphone:t==="videoinput"?Y.Source.Camera:Y.Source.Unknown}function jg(t){return t===Y.Source.Microphone?"audioinput":t===Y.Source.Camera?"videoinput":void 0}function N6(t){var e,n;let i=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(i=typeof i=="boolean"?{}:i,no()?i=Object.assign(Object.assign({},i),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):i=Object.assign(Object.assign({},i),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:i,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function Zc(t){return t.split("/")[1].toLowerCase()}function O6(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new gy({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function Ge(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?Ge(t.track):{})}}function I6(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function D6(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const i=[...Object.keys(e),...Object.keys(t)],r={};for(const s of i)t[s]!==e[s]&&(r[s]=(n=e[s])!==null&&n!==void 0?n:"");return r}function yR(t){const e=Object.assign({},t);let n,i;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(i=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:C6(e)}}function M6(t){switch(t){case Ft.CAMERA:return Y.Source.Camera;case Ft.MICROPHONE:return Y.Source.Microphone;case Ft.SCREEN_SHARE:return Y.Source.ScreenShare;case Ft.SCREEN_SHARE_AUDIO:return Y.Source.ScreenShareAudio;default:return Y.Source.Unknown}}function Nw(t,e){return t.width*t.height<e.width*e.height}function L6(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(i=>i.quality===e)}const j6=5e3,Pc=[];var Bn;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(Bn||(Bn={}));class Y extends er.EventEmitter{get streamState(){return this._streamState}setStreamState(e){this._streamState=e}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var r;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=Y.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=qe,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),j6):this.handleAppVisibilityChanged()},this.log=Pr((r=i.loggerName)!==null&&r!==void 0?r:Ri.Track),this.loggerContextCb=i.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=Y.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Ge(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===Y.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===Y.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Pc.forEach(s=>{s.parentElement===null&&!e&&(e=s)}),e&&Pc.splice(Pc.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),ea(this.mediaStreamTrack,e);const i=e.srcObject.getTracks(),r=i.some(s=>s.kind==="audio");return e.play().then(()=>{this.emit(r?fe.AudioPlaybackStarted:fe.VideoPlaybackStarted)}).catch(s=>{s.name==="NotAllowedError"?this.emit(r?fe.AudioPlaybackFailed:fe.VideoPlaybackFailed,s):s.name==="AbortError"?qe.debug("".concat(r?"audio":"video"," playback aborted, likely due to new play request")):qe.warn("could not playback ".concat(r?"audio":"video"),s),r&&e&&i.some(a=>a.kind==="video")&&s.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(fe.ElementAttached,e),e}detach(e){try{if(e){la(this.mediaStreamTrack,e);const i=this.attachedElements.indexOf(e);return i>=0&&(this.attachedElements.splice(i,1),this.recycleElement(e),this.emit(fe.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(i=>{la(this.mediaStreamTrack,i),n.push(i),this.recycleElement(i),this.emit(fe.ElementDetached,i)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Pr(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Pc.forEach(i=>{i.parentElement||(n=!1)}),n&&Pc.push(e)}}handleAppVisibilityChanged(){return I(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===Y.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){Dn()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Dn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function ea(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let i;t.kind==="audio"?i=n.getAudioTracks():i=n.getVideoTracks(),i.includes(t)||(i.forEach(r=>{n.removeTrack(r)}),n.addTrack(t)),(!no()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(no()||to())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function la(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(d){d.Audio="audio",d.Video="video",d.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(d){d.Camera="camera",d.Microphone="microphone",d.ScreenShare="screen_share",d.ScreenShareAudio="screen_share_audio",d.Unknown="unknown"})(n=t.Source||(t.Source={}));let i;(function(d){d.Active="active",d.Paused="paused",d.Unknown="unknown"})(i=t.StreamState||(t.StreamState={}));function r(d){switch(d){case e.Audio:return bi.AUDIO;case e.Video:return bi.VIDEO;default:return bi.DATA}}t.kindToProto=r;function s(d){switch(d){case bi.AUDIO:return e.Audio;case bi.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=s;function a(d){switch(d){case n.Camera:return Ft.CAMERA;case n.Microphone:return Ft.MICROPHONE;case n.ScreenShare:return Ft.SCREEN_SHARE;case n.ScreenShareAudio:return Ft.SCREEN_SHARE_AUDIO;default:return Ft.UNKNOWN}}t.sourceToProto=a;function l(d){switch(d){case Ft.CAMERA:return n.Camera;case Ft.MICROPHONE:return n.Microphone;case Ft.SCREEN_SHARE:return n.ScreenShare;case Ft.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=l;function u(d){switch(d){case Tg.ACTIVE:return i.Active;case Tg.PAUSED:return i.Paused;default:return i.Unknown}}t.streamStateFromProto=u})(Y||(Y={}));const F6="|",Ow="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function U6(t){const e=t.split(F6);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function sn(t){return I(this,void 0,void 0,function*(){return new Promise(e=>rn.setTimeout(e,t))})}function Fg(){return"addTransceiver"in RTCPeerConnection.prototype}function Ug(){return"addTrack"in RTCPeerConnection.prototype}function V6(){if(!("getCapabilities"in RTCRtpSender)||no()||to())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/av1"){e=!0;break}}return e}function B6(){if(!("getCapabilities"in RTCRtpSender)||to())return!1;if(no()){const n=Mn();if(n?.version&&Ai(n.version,"16")<0||n?.os==="iOS"&&n?.osVersion&&Ai(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/vp9"){e=!0;break}}return e}function ki(t){return t==="av1"||t==="vp9"}function Vg(t){return!document||Tl()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function z6(){return typeof RTCPeerConnection>"u"?!1:Fg()||Ug()}function to(){var t;return((t=Mn())===null||t===void 0?void 0:t.name)==="Firefox"}function Iw(){const t=Mn();return!!t&&t.name==="Chrome"&&t.os!=="iOS"}function no(){var t;return((t=Mn())===null||t===void 0?void 0:t.name)==="Safari"}function Tl(){const t=Mn();return t?.name==="Safari"||t?.os==="iOS"}function W6(){const t=Mn();return t?.name==="Safari"&&t.version.startsWith("17.")||t?.os==="iOS"&&!!t?.osVersion&&Ai(t.osVersion,"17")>=0}function q6(t){return t||(t=Mn()),t?.name==="Safari"&&Ai(t.version,"18.3")>0||t?.os==="iOS"&&!!t?.osVersion&&Ai(t.osVersion,"18.3")>0}function bR(){var t,e;return Dn()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function H6(){const t=Mn(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&Ai(t.osVersion,e)>=0?!0:t.name==="Safari"&&Ai(t.version,e)>=0}function Dn(){return typeof document<"u"}function Yi(){return navigator.product=="ReactNative"}function wa(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function _m(t){return wa(t)?t.hostname.split(".")[0]:null}function xR(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function kR(){if(!Yi())return;let t=xR();if(t)return t.platform}function Dw(){if(Dn())return window.devicePixelRatio;if(Yi()){let t=xR();if(t)return t.devicePixelRatio}return 1}function Ai(t,e){const n=t.split("."),i=e.split("."),r=Math.min(n.length,i.length);for(let s=0;s<r;++s){const a=parseInt(n[s],10),l=parseInt(i[s],10);if(a>l)return 1;if(a<l)return-1;if(s===r-1&&a===l)return 0}return t===""&&e!==""?-1:e===""?1:n.length==i.length?0:n.length<i.length?-1:1}function $6(t){for(const e of t)e.target.handleResize(e)}function K6(t){for(const e of t)e.target.handleVisibilityChanged(e)}let Rm=null;const Mw=()=>(Rm||(Rm=new ResizeObserver($6)),Rm);let Am=null;const Lw=()=>(Am||(Am=new IntersectionObserver(K6,{root:null,rootMargin:"0px"})),Am);function G6(){var t;const e=new k1({sdk:S1.JS,protocol:w6,version:S6});return Yi()&&(e.os=(t=kR())!==null&&t!==void 0?t:""),e}function jw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const r=document.createElement("canvas");r.width=t,r.height=e;const s=r.getContext("2d");s?.fillRect(0,0,r.width,r.height),i&&s&&(s.beginPath(),s.arc(t/2,e/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const a=r.captureStream(),[l]=a.getTracks();if(!l)throw Error("Could not get empty media stream video track");return l.enabled=n,l}let _c;function Nm(){if(!_c){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const i=t.createMediaStreamDestination();if(e.connect(n),n.connect(i),e.start(),[_c]=i.stream.getAudioTracks(),!_c)throw Error("Could not get empty media stream audio track");_c.enabled=!1}return _c.clone()}class ni{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((i,r)=>I(this,void 0,void 0,function*(){this.resolve=i,this.reject=r,e&&(yield e(i,r))})).finally(()=>{var i;this._isResolved=!0,(i=this.onFinally)===null||i===void 0||i.call(this)})}}function Z6(t){return P6.includes(t)}function ss(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact!==void 0)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal!==void 0)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function Q6(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function Cl(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function J6(t,e){return t.segments.map(n=>{let{id:i,text:r,language:s,startTime:a,endTime:l,final:u}=n;var d;const h=(d=e.get(i))!==null&&d!==void 0?d:Date.now(),m=Date.now();return u?e.delete(i):e.set(i,h),{id:i,text:r,startTime:Number.parseInt(a.toString()),endTime:Number.parseInt(l.toString()),final:u,language:s,firstReceivedTime:h,lastReceivedTime:m}})}function Y6(t){const{id:e,timestamp:n,message:i,editTimestamp:r}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:r?Number.parseInt(r.toString()):void 0,message:i}}function Fw(t){switch(t.reason){case ht.LeaveRequest:return t.context;case ht.Cancelled:return Ti.CLIENT_INITIATED;case ht.NotAllowed:return Ti.USER_REJECTED;case ht.ServerUnreachable:return Ti.JOIN_FAILURE;default:return Ti.UNKNOWN_REASON}}function Id(t){return t!==void 0?Number(t):void 0}function zs(t){return t!==void 0?BigInt(t):void 0}function ua(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function Gi(t){return!!t&&t.kind==Y.Kind.Audio}function xs(t){return!!t&&t.kind==Y.Kind.Video}function Jr(t){return ua(t)&&xs(t)}function pr(t){return ua(t)&&Gi(t)}function Bg(t){return!!t&&!t.isLocal}function X6(t){return!!t&&!t.isLocal}function Om(t){return Bg(t)&&xs(t)}function e8(t){return t.isLocal}function t8(t,e){const n=[];let i=new TextEncoder().encode(t);for(;i.length>e;){let r=e;for(;r>0;){const s=i[r];if(s!==void 0&&(s&192)!==128)break;r--}n.push(i.slice(0,r)),i=i.slice(r)}return i.length>0&&n.push(i),n}function n8(t){var e;const n=t.get("Cache-Control");if(n){const i=(e=n.match(/(?:^|[,\s])max-age=(\d+)/))===null||e===void 0?void 0:e[1];if(i)return parseInt(i,10)}}function i8(t,e){const n=new URL(Q6(t));return e.forEach((i,r)=>{n.searchParams.set(r,i)}),wR(n,"rtc")}function r8(t){const e=new URL(Cl(t));return wR(e,"validate")}function SR(t){return t.endsWith("/")?t:"".concat(t,"/")}function wR(t,e){return t.pathname="".concat(SR(t.pathname)).concat(e),t.toString()}function Uw(t){if(typeof t=="string")return vw.fromJson(JSON.parse(t),{ignoreUnknownFields:!0});if(t instanceof ArrayBuffer)return vw.fromBinary(new Uint8Array(t));throw new Error("could not decode websocket message: ".concat(typeof t))}function s8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Unknown reason";if(!(t instanceof AbortSignal))return e;const n=t.reason;switch(typeof n){case"string":return n;case"object":return n instanceof Error?n.message:e;default:return"toString"in n?n.toString():e}}const o8=10,Rc="lk_e2ee",a8="LKFrameEncryptionKey",c8={sharedKey:!1,ratchetSalt:a8,ratchetWindowSize:8,failureTolerance:o8,keyringSize:16};var os;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(os||(os={}));var Vw;(function(t){t.KeyRatcheted="keyRatcheted"})(Vw||(Vw={}));var is;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(is||(is={}));var Bw;(function(t){t.Error="cryptorError"})(Bw||(Bw={}));function l8(){return u8()||zg()}function zg(){return typeof window.RTCRtpScriptTransform<"u"}function u8(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function d8(t){var e,n,i,r,s;if(((e=t.value)===null||e===void 0?void 0:e.case)!=="sipDtmf"&&((n=t.value)===null||n===void 0?void 0:n.case)!=="metrics"&&((i=t.value)===null||i===void 0?void 0:i.case)!=="speaker"&&((r=t.value)===null||r===void 0?void 0:r.case)!=="transcription"&&((s=t.value)===null||s===void 0?void 0:s.case)!=="encryptedPacket")return new p1({value:t.value})}class GW extends er.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,i,r)=>{qe.debug("key ratcheted event received",{ratchetResult:n,participantId:i,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},c8),e),this.on(os.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,i){const r={key:e,participantIdentity:n,keyIndex:i};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(i??0),r),this.emit(os.SetKey,r)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(os.RatchetRequest,e,n)}}var zw;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(zw||(zw={}));class f8 extends er.EventEmitter{constructor(e,n){super(),this.decryptDataRequests=new Map,this.encryptDataRequests=new Map,this.onWorkerMessage=i=>{var r,s;const{kind:a,data:l}=i.data;switch(a){case"error":if(qe.error(l.error.message),l.uuid){const h=this.decryptDataRequests.get(l.uuid);if(h?.reject){h.reject(l.error);break}const m=this.encryptDataRequests.get(l.uuid);if(m?.reject){m.reject(l.error);break}}this.emit(is.EncryptionError,l.error,l.participantIdentity);break;case"initAck":l.enabled&&this.keyProvider.getKeys().forEach(h=>{this.postKey(h)});break;case"enable":if(l.enabled&&this.keyProvider.getKeys().forEach(h=>{this.postKey(h)}),this.encryptionEnabled!==l.enabled&&l.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(is.ParticipantEncryptionStatusChanged,l.enabled,this.room.localParticipant),this.encryptionEnabled=l.enabled;else if(l.participantIdentity){const h=(s=this.room)===null||s===void 0?void 0:s.getParticipantByIdentity(l.participantIdentity);if(!h)throw TypeError("couldn't set encryption status, participant not found".concat(l.participantIdentity));this.emit(is.ParticipantEncryptionStatusChanged,l.enabled,h)}break;case"ratchetKey":this.keyProvider.emit(os.KeyRatcheted,l.ratchetResult,l.participantIdentity,l.keyIndex);break;case"decryptDataResponse":const u=this.decryptDataRequests.get(l.uuid);u?.resolve&&u.resolve(l);break;case"encryptDataResponse":const d=this.encryptDataRequests.get(l.uuid);d?.resolve&&d.resolve(l);break}},this.onWorkerError=i=>{qe.error("e2ee worker encountered an error:",{error:i.error}),this.emit(is.EncryptionError,i.error,void 0)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1,this.dataChannelEncryptionEnabled=n}get isEnabled(){return this.encryptionEnabled}get isDataChannelEncryptionEnabled(){return this.isEnabled&&this.dataChannelEncryptionEnabled}setup(e){if(!l8())throw new wy("tried to setup end-to-end encryption on an unsupported browser");if(qe.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:o6.getLevel()}};this.worker&&(qe.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){qe.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?qe.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(pe.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(Q.TrackPublished,(i,r)=>this.setParticipantCryptorEnabled(i.trackInfo.encryption!==Ht.NONE,r.identity)),e.on(Q.ConnectionStateChanged,i=>{i===Ye.Connected&&e.remoteParticipants.forEach(r=>{r.trackPublications.forEach(s=>{this.setParticipantCryptorEnabled(s.trackInfo.encryption!==Ht.NONE,r.identity)})})}).on(Q.TrackUnsubscribed,(i,r,s)=>{var a;const l={kind:"removeTransform",data:{participantIdentity:s.identity,trackId:i.mediaStreamID}};(a=this.worker)===null||a===void 0||a.postMessage(l)}).on(Q.TrackSubscribed,(i,r,s)=>{this.setupE2EEReceiver(i,s.identity,r.trackInfo)}).on(Q.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(i=>{this.postKey(i)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(te.LocalSenderCreated,(i,r)=>I(this,void 0,void 0,function*(){this.setupE2EESender(r,i)})),e.localParticipant.on(te.LocalTrackPublished,i=>{if(!xs(i.track)||!Tl())return;const r={kind:"updateCodec",data:{trackId:i.track.mediaStreamID,codec:Zc(i.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}),n.on(os.SetKey,i=>this.postKey(i)).on(os.RatchetRequest,(i,r)=>this.postRatchetRequest(i,r))}encryptData(e){return I(this,void 0,void 0,function*(){if(!this.worker)throw Error("could not encrypt data, worker is missing");const n=crypto.randomUUID(),i={kind:"encryptDataRequest",data:{uuid:n,payload:e,participantIdentity:this.room.localParticipant.identity}},r=new ni;return r.onFinally=()=>{this.encryptDataRequests.delete(n)},this.encryptDataRequests.set(n,r),this.worker.postMessage(i),r.promise})}handleEncryptedData(e,n,i,r){if(!this.worker)throw Error("could not handle encrypted data, worker is missing");const s=crypto.randomUUID(),a={kind:"decryptDataRequest",data:{uuid:s,payload:e,iv:n,participantIdentity:i,keyIndex:r}},l=new ni;return l.onFinally=()=>{this.decryptDataRequests.delete(s)},this.decryptDataRequests.set(s,l),this.worker.postMessage(a),l.promise}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const i={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(i)}postKey(e){let{key:n,participantIdentity:i,keyIndex:r}=e;var s;if(!this.worker)throw Error("could not set key, worker is missing");const a={kind:"setKey",data:{participantIdentity:i,isPublisher:i===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity),key:n,keyIndex:r}};this.worker.postMessage(a)}postEnable(e,n){if(this.worker){const i={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(i)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const i={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,i){if(e.receiver){if(!i?.mimeType||i.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?Zc(i.mimeType):void 0)}}setupE2EESender(e,n){if(!ua(e)||!n){n||qe.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,i,r){return I(this,void 0,void 0,function*(){if(this.worker){if(zg()&&!Iw()){const s={kind:"decode",participantIdentity:i,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{if(Rc in e&&r){const u={kind:"updateCodec",data:{trackId:n,codec:r,participantIdentity:i}};this.worker.postMessage(u);return}let s=e.writableStream,a=e.readableStream;if(!s||!a){const u=e.createEncodedStreams();e.writableStream=u.writable,s=u.writable,e.readableStream=u.readable,a=u.readable}const l={kind:"decode",data:{readableStream:a,writableStream:s,trackId:n,codec:r,participantIdentity:i,isReuse:Rc in e}};this.worker.postMessage(l,[a,s])}e[Rc]=!0}})}handleSender(e,n,i){var r;if(!(Rc in e||!this.worker)){if(!(!((r=this.room)===null||r===void 0)&&r.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(zg()&&!Iw()){qe.info("initialize script transform");const s={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{qe.info("initialize encoded streams");const s=e.createEncodedStreams(),a={kind:"encode",data:{readableStream:s.readable,writableStream:s.writable,codec:i,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(a,[s.readable,s.writable])}e[Rc]=!0}}}const h8=500,p8=15e3;class da{constructor(){this.failedConnectionAttempts=new Map,this.backOffPromises=new Map}static getInstance(){return this._instance||(this._instance=new da),this._instance}addFailedConnectionAttempt(e){var n;const i=new URL(e),r=_m(i);if(!r)return;let s=(n=this.failedConnectionAttempts.get(r))!==null&&n!==void 0?n:0;this.failedConnectionAttempts.set(r,s+1),this.backOffPromises.set(r,sn(Math.min(h8*Math.pow(2,s),p8)))}getBackOffPromise(e){const n=new URL(e),i=n&&_m(n);return i&&this.backOffPromises.get(i)||Promise.resolve()}resetFailedConnectionAttempts(e){const n=new URL(e),i=n&&_m(n);i&&(this.failedConnectionAttempts.set(i,0),this.backOffPromises.set(i,Promise.resolve()))}resetAll(){this.backOffPromises.clear(),this.failedConnectionAttempts.clear()}}da._instance=null;const Im="default";class Jt{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new Jt),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return I(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var s;if(((s=Jt.userMediaPromiseMap)===null||s===void 0?void 0:s.size)>0){qe.debug("awaiting getUserMedia promise");try{n?yield Jt.userMediaPromiseMap.get(n):yield Promise.all(Jt.userMediaPromiseMap.values())}catch{qe.warn("error waiting for media permissons")}}let a=yield navigator.mediaDevices.enumerateDevices();if(r&&!(no()&&i.hasDeviceInUse(n))&&(a.filter(u=>u.kind===n).length===0||a.some(u=>{const d=u.label==="",h=n?u.kind===n:!0;return d&&h}))){const u={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},d=yield navigator.mediaDevices.getUserMedia(u);a=yield navigator.mediaDevices.enumerateDevices(),d.getTracks().forEach(h=>{h.stop()})}return i._previousDevices=a,n&&(a=a.filter(l=>l.kind===n)),a})()})}normalizeDeviceId(e,n,i){return I(this,void 0,void 0,function*(){if(n!==Im)return n;const r=yield this.getDevices(e),s=r.find(l=>l.deviceId===Im);if(!s){qe.warn("could not reliably determine default device");return}const a=r.find(l=>l.deviceId!==Im&&l.groupId===(i??s.groupId));if(!a){qe.warn("could not reliably determine default device");return}return a?.deviceId})}hasDeviceInUse(e){return e?Jt.userMediaPromiseMap.has(e):Jt.userMediaPromiseMap.size>0}}Jt.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];Jt.userMediaPromiseMap=new Map;var Qc;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Qc||(Qc={}));class m8{constructor(){this.pendingTasks=new Map,this.taskMutex=new kn,this.nextTaskIndex=0}run(e){return I(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Qc.WAITING};this.pendingTasks.set(n.id,n);const i=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Qc.RUNNING,yield e()}finally{n.status=Qc.COMPLETED,this.pendingTasks.delete(n.id),i()}})}flush(){return I(this,void 0,void 0,function*(){return this.run(()=>I(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}class g8{get readyState(){return this.ws.readyState}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i,r;if(!((i=n.signal)===null||i===void 0)&&i.aborted)throw new DOMException("This operation was aborted","AbortError");this.url=e;const s=new WebSocket(e,(r=n.protocols)!==null&&r!==void 0?r:[]);s.binaryType="arraybuffer",this.ws=s;const a=function(){let{closeCode:l,reason:u}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return s.close(l,u)};this.opened=new Promise((l,u)=>{s.onopen=()=>{l({readable:new ReadableStream({start(d){s.onmessage=h=>{let{data:m}=h;return d.enqueue(m)},s.onerror=h=>d.error(h)},cancel:a}),writable:new WritableStream({write(d){s.send(d)},abort(){s.close()},close:a}),protocol:s.protocol,extensions:s.extensions}),s.removeEventListener("error",u)},s.addEventListener("error",u)}),this.closed=new Promise((l,u)=>{const d=()=>I(this,void 0,void 0,function*(){const h=new Promise(g=>{s.readyState!==WebSocket.CLOSED&&s.addEventListener("close",k=>{g(k)},{once:!0})}),m=yield Promise.race([sn(250),h]);m?l(m):u(new Error("Encountered unspecified websocket error without a timely close event"))});s.onclose=h=>{let{code:m,reason:g}=h;l({closeCode:m,reason:g}),s.removeEventListener("error",d)},s.addEventListener("error",d)}),n.signal&&(n.signal.onabort=()=>s.close()),this.close=a}}const v8=["syncState","trickle","offer","answer","simulate","leave"];function y8(t){const e=v8.indexOf(t.case)>=0;return qe.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var at;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(at||(at={}));const b8=250;class Ey{get currentState(){return this.state}get isDisconnected(){return this.state===at.DISCONNECTING||this.state===at.DISCONNECTED}get isEstablishingConnection(){return this.state===at.CONNECTING||this.state===at.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;this.rtt=0,this.state=at.DISCONNECTED,this.log=qe,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0,this.onMediaSectionsRequirement=void 0},this.log=Pr((i=n.loggerName)!==null&&i!==void 0?i:Ri.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new m8,this.queuedRequests=[],this.closingLock=new kn,this.connectionLock=new kn,this.state=at.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,i,r){return I(this,void 0,void 0,function*(){return this.state=at.CONNECTING,this.options=i,yield this.connect(e,n,i,r)})}reconnect(e,n,i,r){return I(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=at.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:i,reconnectReason:r}))})}connect(e,n,i,r){return I(this,void 0,void 0,function*(){const s=yield this.connectionLock.lock();this.connectOptions=i;const a=G6(),l=i.singlePeerConnection?k8(n,a,i):x8(n,a,i),u=i8(e,l),d=r8(u);return new Promise((h,m)=>I(this,void 0,void 0,function*(){var g,k;try{let T=!1;const x=w=>I(this,void 0,void 0,function*(){if(T)return;T=!0;const S=w instanceof Event?w.currentTarget:w,R=s8(S,"Abort handler called");this.streamWriter&&!this.isDisconnected?this.sendLeave().then(()=>this.close(R)).catch(D=>{this.log.error(D),this.close()}):this.close(),C(),m(Fe.cancelled(R))});r?.addEventListener("abort",x);const C=()=>{clearTimeout(E),r?.removeEventListener("abort",x)},E=setTimeout(()=>{x(Fe.timeout("room connection has timed out (signal)"))},i.websocketTimeout),A=(w,S)=>{this.handleSignalConnected(w,E,S)},N=new URL(u);N.searchParams.has("access_token")&&N.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(N),Object.assign({reconnect:i.reconnect,reconnectReason:i.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new g8(u);try{this.ws.closed.then(B=>{var W;this.isEstablishingConnection&&m(Fe.internal("Websocket got closed during a (re)connection attempt: ".concat(B.reason))),B.closeCode!==1e3&&(this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:B.reason,code:B.closeCode,wasClean:B.closeCode===1e3,state:this.state})),this.state===at.CONNECTED&&this.handleOnClose((W=B.reason)!==null&&W!==void 0?W:"Unexpected WS error"))}).catch(B=>{this.isEstablishingConnection&&m(Fe.internal("Websocket error during a (re)connection attempt: ".concat(B)))});const w=yield this.ws.opened.catch(B=>I(this,void 0,void 0,function*(){if(this.state!==at.CONNECTED){this.state=at.DISCONNECTED,clearTimeout(E);const W=yield this.handleConnectionError(B,d);m(W);return}this.handleWSError(B),m(B)}));if(clearTimeout(E),!w)return;const S=w.readable.getReader();this.streamWriter=w.writable.getWriter();const R=yield S.read();if(S.releaseLock(),!R.value)throw Fe.internal("no message received as first message");const D=Uw(R.value),j=this.validateFirstMessage(D,(g=i.reconnect)!==null&&g!==void 0?g:!1);if(!j.isValid){m(j.error);return}((k=D.message)===null||k===void 0?void 0:k.case)==="join"&&(this.pingTimeoutDuration=D.message.value.pingTimeout,this.pingIntervalDuration=D.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})));const V=j.shouldProcessFirstMessage?D:void 0;A(w,V),h(j.response)}catch(w){m(w)}finally{C()}}finally{s()}}))})}startReadingLoop(e,n){return I(this,void 0,void 0,function*(){for(n&&this.handleSignalResponse(n);;){this.signalLatency&&(yield sn(this.signalLatency));const{done:i,value:r}=yield e.read();if(i)break;const s=Uw(r);this.handleSignalResponse(s)}})}close(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Close method called on signal client";return(function*(){if([at.DISCONNECTING||at.DISCONNECTED].includes(e.state)){e.log.debug("ignoring signal close as it's already in disconnecting state");return}const r=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=at.DISCONNECTING),e.ws){e.ws.close({closeCode:1e3,reason:i});const s=e.ws.closed;e.ws=void 0,e.streamWriter=void 0,yield Promise.race([s,sn(b8)])}}catch(s){e.log.debug("websocket error while closing",Object.assign(Object.assign({},e.logContext),{error:s}))}finally{n&&(e.state=at.DISCONNECTED),r()}})()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:ta(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:ta(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new qf({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new Hf({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return I(this,arguments,void 0,function(i,r){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){const l=s.getNextRequestId();return yield s.sendRequest({case:"updateMetadata",value:new yy({requestId:l,metadata:i,name:r,attributes:a})}),l})()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new R1({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new O1({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:vt.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new M1({timestamp:vt.parse(Date.now()),rtt:vt.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new vy({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new Kf({reason:Ti.CLIENT_INITIATED,action:aa.DISCONNECT})})}sendRequest(e){return I(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(function*(){if(!r&&!y8(n)&&i.state===at.RECONNECTING){i.queuedRequests.push(()=>I(i,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(r||(yield i.requestQueue.flush()),i.signalLatency&&(yield sn(i.signalLatency)),i.isDisconnected){i.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!i.streamWriter){i.log.error("cannot send signal request before connected, type: ".concat(n?.case),i.logContext);return}const a=new N5({message:n});try{i.useJSON?yield i.streamWriter.write(a.toJsonString()):yield i.streamWriter.write(a.toBinary())}catch(l){i.log.error("error sending signal message",Object.assign(Object.assign({},i.logContext),{error:l}))}})()})}handleSignalResponse(e){var n,i;const r=e.message;if(r==null){this.log.debug("received unsupported message",this.logContext);return}let s=!1;if(r.case==="answer"){const a=Ww(r.value);this.onAnswer&&this.onAnswer(a,r.value.id,r.value.midToTrackId)}else if(r.case==="offer"){const a=Ww(r.value);this.onOffer&&this.onOffer(a,r.value.id,r.value.midToTrackId)}else if(r.case==="trickle"){const a=JSON.parse(r.value.candidateInit);this.onTrickle&&this.onTrickle(a,r.value.target)}else r.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=r.value.participants)!==null&&n!==void 0?n:[]):r.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(r.value):r.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((i=r.value.speakers)!==null&&i!==void 0?i:[]):r.case==="leave"?this.onLeave&&this.onLeave(r.value):r.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(r.value.sid,r.value.muted):r.case==="roomUpdate"?this.onRoomUpdate&&r.value.room&&this.onRoomUpdate(r.value.room):r.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(r.value):r.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(r.value):r.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(r.value):r.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(r.value):r.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(r.value):r.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(r.value):r.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(r.value):r.case==="pong"||(r.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(r.value.lastPingTimestamp.toString()),this.resetPingTimeout(),s=!0):r.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(r.value):r.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(r.value.trackSid):r.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(r.value.token),this.onRoomMoved&&this.onRoomMoved(r.value)):r.case==="mediaSectionsRequirement"?this.onMediaSectionsRequirement&&this.onMediaSectionsRequirement(r.value):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:r.case})));s||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return I(this,void 0,void 0,function*(){if(this.state===at.DISCONNECTED)return;const n=this.onClose;yield this.close(void 0,e),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=rn.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&rn.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=rn.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&rn.clearInterval(this.pingInterval)}handleSignalConnected(e,n,i){this.state=at.CONNECTED,clearTimeout(n),this.startPingInterval(),this.startReadingLoop(e.readable.getReader(),i)}validateFirstMessage(e,n){var i,r,s,a,l;return((i=e.message)===null||i===void 0?void 0:i.case)==="join"?{isValid:!0,response:e.message.value}:this.state===at.RECONNECTING&&((r=e.message)===null||r===void 0?void 0:r.case)!=="leave"?((s=e.message)===null||s===void 0?void 0:s.case)==="reconnect"?{isValid:!0,response:e.message.value}:(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),{isValid:!0,response:void 0,shouldProcessFirstMessage:!0}):this.isEstablishingConnection&&((a=e.message)===null||a===void 0?void 0:a.case)==="leave"?{isValid:!1,error:Fe.leaveRequest("Received leave request while trying to (re)connect",e.message.value.reason)}:n?{isValid:!1,error:Fe.internal("Unexpected first message")}:{isValid:!1,error:Fe.internal("did not receive join response, got ".concat((l=e.message)===null||l===void 0?void 0:l.case," instead"))}}handleConnectionError(e,n){return I(this,void 0,void 0,function*(){try{const i=yield fetch(n);if(i.status.toFixed(0).startsWith("4")){const r=yield i.text();return Fe.notAllowed(r,i.status)}else return e instanceof Fe?e:Fe.internal("Encountered unknown websocket error during connection: ".concat(e),{status:i.status,statusText:i.statusText})}catch(i){return i instanceof Fe?i:Fe.serverUnreachable(i instanceof Error?i.message:"server was not reachable")}})}}function Ww(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function ta(t,e){return new vs({sdp:t.sdp,type:t.type,id:e})}function x8(t,e,n){var i;const r=new URLSearchParams;return r.set("access_token",t),n.reconnect&&(r.set("reconnect","1"),n.sid&&r.set("sid",n.sid)),r.set("auto_subscribe",n.autoSubscribe?"1":"0"),r.set("sdk",Yi()?"reactnative":"js"),r.set("version",e.version),r.set("protocol",e.protocol.toString()),e.deviceModel&&r.set("device_model",e.deviceModel),e.os&&r.set("os",e.os),e.osVersion&&r.set("os_version",e.osVersion),e.browser&&r.set("browser",e.browser),e.browserVersion&&r.set("browser_version",e.browserVersion),n.adaptiveStream&&r.set("adaptive_stream","1"),n.reconnectReason&&r.set("reconnect_reason",n.reconnectReason.toString()),!((i=navigator.connection)===null||i===void 0)&&i.type&&r.set("network",navigator.connection.type),r}function k8(t,e,n){const i=new URLSearchParams;i.set("access_token",t);const r=new X5({clientInfo:e,connectionSettings:new L1({autoSubscribe:!!n.autoSubscribe,adaptiveStream:!!n.adaptiveStream}),reconnect:!!n.reconnect,participantSid:n.sid?n.sid:void 0});n.reconnectReason&&(r.reconnectReason=n.reconnectReason);const s=new e6({joinRequest:r.toBinary()});return i.set("join_request",btoa(new TextDecoder("utf-8").decode(s.toBinary()))),i}class qw{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class S8{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const i=Date.now();i-this._lastCleanup>this.ttl/2&&this.cleanup();const r=i+this.ttl;return this._map.set(e,{value:n,expiresAt:r}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,i]of this._map.entries())i.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e(i.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],i=this.asValueMap();for(const[r,s]of i.entries())n.push(e(s,r,i));return n}asValueMap(){const e=new Map;for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e.set(n,i.value);return e}}var fi={},Dm={},Mm={exports:{}},Hw;function Py(){if(Hw)return Mm.exports;Hw=1;var t=Mm.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})}),Mm.exports}var $w;function w8(){return $w||($w=1,(function(t){var e=function(l){return String(Number(l))===l?Number(l):l},n=function(l,u,d,h){if(h&&!d)u[h]=e(l[1]);else for(var m=0;m<d.length;m+=1)l[m+1]!=null&&(u[d[m]]=e(l[m+1]))},i=function(l,u,d){var h=l.name&&l.names;l.push&&!u[l.push]?u[l.push]=[]:h&&!u[l.name]&&(u[l.name]={});var m=l.push?{}:h?u[l.name]:u;n(d.match(l.reg),m,l.names,l.name),l.push&&u[l.push].push(m)},r=Py(),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(l){var u={},d=[],h=u;return l.split(/(\r\n|\r|\n)/).filter(s).forEach(function(m){var g=m[0],k=m.slice(2);g==="m"&&(d.push({rtp:[],fmtp:[]}),h=d[d.length-1]);for(var T=0;T<(r[g]||[]).length;T+=1){var x=r[g][T];if(x.reg.test(k))return i(x,h,k)}}),u.media=d,u};var a=function(l,u){var d=u.split(/=(.+)/,2);return d.length===2?l[d[0]]=e(d[1]):d.length===1&&u.length>1&&(l[d[0]]=void 0),l};t.parseParams=function(l){return l.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(l){return l.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(l){for(var u=[],d=l.split(" ").map(e),h=0;h<d.length;h+=3)u.push({component:d[h],ip:d[h+1],port:d[h+2]});return u},t.parseImageAttributes=function(l){return l.split(" ").map(function(u){return u.substring(1,u.length-1).split(",").reduce(a,{})})},t.parseSimulcastStreamList=function(l){return l.split(";").map(function(u){return u.split(",").map(function(d){var h,m=!1;return d[0]!=="~"?h=e(d):(h=e(d.substring(1,d.length)),m=!0),{scid:h,paused:m}})})}})(Dm)),Dm}var Lm,Kw;function T8(){if(Kw)return Lm;Kw=1;var t=Py(),e=/%[sdv%]/g,n=function(a){var l=1,u=arguments,d=u.length;return a.replace(e,function(h){if(l>=d)return h;var m=u[l];switch(l+=1,h){case"%%":return"%";case"%s":return String(m);case"%d":return Number(m);case"%v":return""}})},i=function(a,l,u){var d=l.format instanceof Function?l.format(l.push?u:u[l.name]):l.format,h=[a+"="+d];if(l.names)for(var m=0;m<l.names.length;m+=1){var g=l.names[m];l.name?h.push(u[l.name][g]):h.push(u[l.names[m]])}else h.push(u[l.name]);return n.apply(null,h)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];return Lm=function(a,l){l=l||{},a.version==null&&(a.version=0),a.name==null&&(a.name=" "),a.media.forEach(function(m){m.payloads==null&&(m.payloads="")});var u=l.outerOrder||r,d=l.innerOrder||s,h=[];return u.forEach(function(m){t[m].forEach(function(g){g.name in a&&a[g.name]!=null?h.push(i(m,g,a)):g.push in a&&a[g.push]!=null&&a[g.push].forEach(function(k){h.push(i(m,g,k))})})}),a.media.forEach(function(m){h.push(i("m",t.m[0],m)),d.forEach(function(g){t[g].forEach(function(k){k.name in m&&m[k.name]!=null?h.push(i(g,k,m)):k.push in m&&m[k.push]!=null&&m[k.push].forEach(function(T){h.push(i(g,k,T))})})})}),h.join(`\r
`)+`\r
`},Lm}var Gw;function C8(){if(Gw)return fi;Gw=1;var t=w8(),e=T8(),n=Py();return fi.grammar=n,fi.write=e,fi.parse=t.parse,fi.parseParams=t.parseParams,fi.parseFmtpConfig=t.parseFmtpConfig,fi.parsePayloads=t.parsePayloads,fi.parseRemoteCandidates=t.parseRemoteCandidates,fi.parseImageAttributes=t.parseImageAttributes,fi.parseSimulcastStreamList=t.parseSimulcastStreamList,fi}var es=C8();function _y(t,e,n){var i,r,s;e===void 0&&(e=50),n===void 0&&(n={});var a=(i=n.isImmediate)!=null&&i,l=(r=n.callback)!=null&&r,u=n.maxWait,d=Date.now(),h=[];function m(){if(u!==void 0){var k=Date.now()-d;if(k+e>=u)return u-k}return e}var g=function(){var k=[].slice.call(arguments),T=this;return new Promise(function(x,C){var E=a&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,d=Date.now(),!a){var N=t.apply(T,k);l&&l(N),h.forEach(function(w){return(0,w.resolve)(N)}),h=[]}},m()),E){var A=t.apply(T,k);return l&&l(A),x(A)}h.push({resolve:x,reject:C})})};return g.cancel=function(k){s!==void 0&&clearTimeout(s),h.forEach(function(T){return(0,T.reject)(k)}),h=[]},g}const E8=.7,P8=20,fa={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class Zw extends er.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;super(),this.log=qe,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=_y(r=>I(this,void 0,void 0,function*(){this.emit(fa.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(r)r(s);else throw s}}),P8),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Pr((i=n.loggerName)!==null&&i!==void 0?i:Ri.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new kn}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var i;n.candidate&&((i=this.onIceCandidate)===null||i===void 0||i.call(this,n.candidate))},e.onicecandidateerror=n=>{var i;(i=this.onIceCandidateError)===null||i===void 0||i.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var i;(i=this.onDataChannel)===null||i===void 0||i.call(this,n)},e.ontrack=n=>{var i;(i=this.onTrack)===null||i===void 0||i.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return I(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return I(this,void 0,void 0,function*(){var i;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let r;if(e.type==="offer"){let{stereoMids:s,nackMids:a}=_8(e);this.remoteStereoMids=s,this.remoteNackMids=a}else if(e.type==="answer"){const s=es.parse((i=e.sdp)!==null&&i!==void 0?i:"");s.media.forEach(a=>{const l=Ry(a.mid);a.type==="audio"&&this.trackBitrates.some(u=>{if(!u.transceiver||l!=u.transceiver.mid)return!1;let d=0;if(a.rtp.some(m=>m.codec.toUpperCase()===u.codec.toUpperCase()?(d=m.payload,!0):!1),d===0)return!0;let h=!1;for(const m of a.fmtp)if(m.payload===d){m.config=m.config.split(";").filter(g=>!g.includes("maxaveragebitrate")).join(";"),u.maxbr>0&&(m.config+=";maxaveragebitrate=".concat(u.maxbr*1e3)),h=!0;break}return h||u.maxbr>0&&a.fmtp.push({payload:d,config:"maxaveragebitrate=".concat(u.maxbr*1e3)}),!0})}),r=es.write(s)}return yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(s=>{this.pc.addIceCandidate(s)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(fa.NegotiationComplete),e.sdp&&es.parse(e.sdp).media.forEach(a=>{a.type==="video"&&this.emit(fa.RTPVideoPayloadTypes,a.rtp)})),!0})}createAndSendOffer(e){return I(this,void 0,void 0,function*(){var n;const i=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const l=this._pc.remoteDescription;if(e?.iceRestart&&l)yield this._pc.setRemoteDescription(l);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=this.latestOfferId+1;this.latestOfferId=r;const s=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:s.sdp},this.logContext));const a=es.parse((n=s.sdp)!==null&&n!==void 0?n:"");if(a.media.forEach(l=>{Jw(l),l.type==="audio"?Qw(l,["all"],[]):l.type==="video"&&this.trackBitrates.some(u=>{if(!l.msid||!u.cid||!l.msid.includes(u.cid))return!1;let d=0;if(l.rtp.some(m=>m.codec.toUpperCase()===u.codec.toUpperCase()?(d=m.payload,!0):!1),d===0||(ki(u.codec)&&!no()&&this.ensureVideoDDExtensionForSVC(l,a),!ki(u.codec)))return!0;const h=Math.round(u.maxbr*E8);for(const m of l.fmtp)if(m.payload===d){m.config.includes("x-google-start-bitrate")||(m.config+=";x-google-start-bitrate=".concat(h));break}return!0})}),this.latestOfferId>r){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:r}));return}yield this.setMungedSDP(s,es.write(a)),this.onOffer(s,this.latestOfferId)}finally{i()}})}createAndSetAnswer(){return I(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),i=es.parse((e=n.sdp)!==null&&e!==void 0?e:"");return i.media.forEach(r=>{Jw(r),r.type==="audio"&&Qw(r,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,es.write(i)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTransceiverOfKind(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new Wt("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new Wt("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return I(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const i=new Map,r=new Map;if((yield this._pc.getStats()).forEach(l=>{switch(l.type){case"transport":n=l.selectedCandidatePairId;break;case"candidate-pair":n===""&&l.selected&&(n=l.id),i.set(l.id,l);break;case"remote-candidate":r.set(l.id,"".concat(l.address,":").concat(l.port));break}}),n==="")return;const a=(e=i.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(a!==void 0)return r.get(a)})}setMungedSDP(e,n,i){return I(this,void 0,void 0,function*(){if(n){const r=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(i?"remote":"local"," description"),this.logContext),i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(s){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:s,sdp:n})),e.sdp=r}}try{i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(r){let s="unknown error";r instanceof Error?s=r.message:typeof r=="string"&&(s=r);const a={error:s,sdp:e.sdp};throw!i&&this.pc.remoteDescription&&(a.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:a})),new Ig(s)}})}ensureVideoDDExtensionForSVC(e,n){var i,r;if(!((i=e.ext)===null||i===void 0?void 0:i.some(a=>a.uri===Ow))){if(this.ddExtID===0){let a=0;n.media.forEach(l=>{var u;l.type==="video"&&((u=l.ext)===null||u===void 0||u.forEach(d=>{d.value>a&&(a=d.value)}))}),this.ddExtID=a+1}(r=e.ext)===null||r===void 0||r.push({value:this.ddExtID,uri:Ow})}}}function Qw(t,e,n){const i=Ry(t.mid);let r=0;t.rtp.some(s=>s.codec==="opus"?(r=s.payload,!0):!1),r>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(i)&&!t.rtcpFb.some(s=>s.payload===r&&s.type==="nack")&&t.rtcpFb.push({payload:r,type:"nack"}),(e.includes(i)||e.length===1&&e[0]==="all")&&t.fmtp.some(s=>s.payload===r?(s.config.includes("stereo=1")||(s.config+=";stereo=1"),!0):!1))}function _8(t){var e;const n=[],i=[],r=es.parse((e=t.sdp)!==null&&e!==void 0?e:"");let s=0;return r.media.forEach(a=>{var l;const u=Ry(a.mid);a.type==="audio"&&(a.rtp.some(d=>d.codec==="opus"?(s=d.payload,!0):!1),!((l=a.rtcpFb)===null||l===void 0)&&l.some(d=>d.payload===s&&d.type==="nack")&&i.push(u),a.fmtp.some(d=>d.payload===s?(d.config.includes("sprop-stereo=1")&&n.push(u),!0):!1))}),{stereoMids:n,nackMids:i}}function Jw(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}function Ry(t){return typeof t=="number"?t.toFixed(0):t}const Wg="vp8",R8={audioPreset:Dg.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:Ty.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:Wg,backupCodec:!0,preConnectBuffer:!1},TR={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},CR={deviceId:{ideal:"default"},resolution:wl.h720.resolution},A8={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new c6,disconnectOnPageLeave:!0,webAudioMix:!1,singlePeerConnection:!1},Ay={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Ct;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(Ct||(Ct={}));class N8{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,i){var r;this.peerConnectionTimeout=Ay.peerConnectionTimeout,this.log=qe,this.updateState=()=>{var s,a;const l=this.state,u=this.requiredTransports.map(d=>d.getConnectionState());u.every(d=>d==="connected")?this.state=Ct.CONNECTED:u.some(d=>d==="failed")?this.state=Ct.FAILED:u.some(d=>d==="connecting")?this.state=Ct.CONNECTING:u.every(d=>d==="closed")?this.state=Ct.CLOSED:u.some(d=>d==="closed")?this.state=Ct.CLOSING:u.every(d=>d==="new")&&(this.state=Ct.NEW),l!==this.state&&(this.log.debug("pc state change: from ".concat(Ct[l]," to ").concat(Ct[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),(a=this.subscriber)===null||a===void 0?void 0:a.getConnectionState()))},this.log=Pr((r=i.loggerName)!==null&&r!==void 0?r:Ri.PCManager),this.loggerOptions=i,this.isPublisherConnectionRequired=n!=="subscriber-primary",this.isSubscriberConnectionRequired=n==="subscriber-primary",this.publisher=new Zw(e,i),n!=="publisher-only"&&(this.subscriber=new Zw(e,i),this.subscriber.onConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.subscriber.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,xi.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,s)},this.subscriber.onTrack=s=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,s)}),this.publisher.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,xi.PUBLISHER)},this.publisher.onTrack=s=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,s)},this.publisher.onOffer=(s,a)=>{var l;(l=this.onPublisherOffer)===null||l===void 0||l.call(this,s,a)},this.state=Ct.NEW,this.connectionLock=new kn,this.remoteOfferLock=new kn}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return I(this,void 0,void 0,function*(){var e;if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const n=this.publisher;for(const i of n.getSenders())try{n.canRemoveTrack()&&n.removeTrack(i)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),(e=this.subscriber)===null||e===void 0?void 0:e.close()]),this.updateState()})}triggerIceRestart(){return I(this,void 0,void 0,function*(){this.subscriber&&(this.subscriber.restartingIce=!0),this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return I(this,void 0,void 0,function*(){var i;n===xi.PUBLISHER?yield this.publisher.addIceCandidate(e):yield(i=this.subscriber)===null||i===void 0?void 0:i.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return I(this,void 0,void 0,function*(){var i,r,s;this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:(i=this.subscriber)===null||i===void 0?void 0:i.getSignallingState().toString()}));const a=yield this.remoteOfferLock.lock();try{return(yield(r=this.subscriber)===null||r===void 0?void 0:r.setRemoteDescription(e,n))?yield(s=this.subscriber)===null||s===void 0?void 0:s.createAndSetAnswer():void 0}finally{a()}})}updateConfiguration(e,n){var i;this.publisher.setConfiguration(e),(i=this.subscriber)===null||i===void 0||i.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return I(this,void 0,void 0,function*(){var i;const r=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((i=this.requiredTransports)===null||i===void 0?void 0:i.map(s=>this.ensureTransportConnected(s,e,n)))}finally{r()}})}negotiate(e){return I(this,void 0,void 0,function*(){return new Promise((n,i)=>I(this,void 0,void 0,function*(){const r=setTimeout(()=>{i("negotiation timed out")},this.peerConnectionTimeout),s=()=>{clearTimeout(r),i("negotiation aborted")};e.signal.addEventListener("abort",s),this.publisher.once(fa.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(fa.NegotiationComplete,()=>{clearTimeout(r),n()})}),yield this.publisher.negotiate(a=>{clearTimeout(r),i(a)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTransceiverOfKind(e,n){return this.publisher.addTransceiverOfKind(e,n)}getMidForReceiver(e){const i=(this.subscriber?this.subscriber.getTransceivers():this.publisher.getTransceivers()).find(r=>r.receiver===e);return i?.mid}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===xi.PUBLISHER?this.publisher.getConnectedAddress():e===xi.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&this.subscriber&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return I(this,arguments,void 0,function(i,r){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return(function*(){if(i.getConnectionState()!=="connected")return new Promise((u,d)=>I(s,void 0,void 0,function*(){const h=()=>{this.log.warn("abort transport connection",this.logContext),rn.clearTimeout(m),d(Fe.cancelled("room connection has been cancelled"))};r?.signal.aborted&&h(),r?.signal.addEventListener("abort",h);const m=rn.setTimeout(()=>{r?.signal.removeEventListener("abort",h),d(Fe.internal("could not establish pc connection"))},a);for(;this.state!==Ct.CONNECTED;)if(yield sn(50),r?.signal.aborted){d(Fe.cancelled("room connection has been cancelled"));return}rn.clearTimeout(m),r?.signal.removeEventListener("abort",h),u()}))})()})}}const ER=5e3,O8=3e4;class tt{static fetchRegionSettings(e,n,i){return I(this,void 0,void 0,function*(){const r=yield tt.fetchLock.lock();try{const s=yield fetch("".concat(I8(e),"/regions"),{headers:{authorization:"Bearer ".concat(n)},signal:i});if(s.ok){const a=n8(s.headers),l=a?a*1e3:ER;return{regionSettings:yield s.json(),updatedAtInMs:Date.now(),maxAgeInMs:l}}else throw s.status===401?Fe.notAllowed("Could not fetch region settings: ".concat(s.statusText),s.status):Fe.internal("Could not fetch region settings: ".concat(s.statusText))}catch(s){throw s instanceof Fe?s:i?.aborted?Fe.cancelled("Region fetching was aborted"):Fe.serverUnreachable("Could not fetch region settings, ".concat(s instanceof Error?"".concat(s.name,": ").concat(s.message):s))}finally{r()}})}static scheduleRefetch(e,n,i){return I(this,void 0,void 0,function*(){const r=tt.settingsTimeouts.get(e.hostname);clearTimeout(r),tt.settingsTimeouts.set(e.hostname,setTimeout(()=>I(this,void 0,void 0,function*(){try{const s=yield tt.fetchRegionSettings(e,n);tt.updateCachedRegionSettings(e,n,s)}catch(s){if(s instanceof Fe&&s.reason===ht.NotAllowed){qe.debug("token is not valid, cancelling auto region refresh");return}qe.debug("auto refetching of region settings failed",{error:s}),tt.scheduleRefetch(e,n,i)}}),i))})}static updateCachedRegionSettings(e,n,i){tt.cache.set(e.hostname,i),tt.scheduleRefetch(e,n,i.maxAgeInMs)}static stopRefetch(e){const n=tt.settingsTimeouts.get(e);n&&(clearTimeout(n),tt.settingsTimeouts.delete(e))}static scheduleCleanup(e){let n=tt.connectionTrackers.get(e);n&&(n.cleanupTimeout&&clearTimeout(n.cleanupTimeout),n.cleanupTimeout=setTimeout(()=>{const i=tt.connectionTrackers.get(e);i&&i.connectionCount===0&&(qe.debug("stopping region refetch after disconnect delay",{hostname:e}),tt.stopRefetch(e)),i&&(i.cleanupTimeout=void 0)},O8))}static cancelCleanup(e){const n=tt.connectionTrackers.get(e);n?.cleanupTimeout&&(clearTimeout(n.cleanupTimeout),n.cleanupTimeout=void 0)}notifyConnected(){const e=this.serverUrl.hostname;let n=tt.connectionTrackers.get(e);n||(n={connectionCount:0},tt.connectionTrackers.set(e,n)),n.connectionCount++,tt.cancelCleanup(e)}notifyDisconnected(){const e=this.serverUrl.hostname,n=tt.connectionTrackers.get(e);n&&(n.connectionCount=Math.max(0,n.connectionCount-1),n.connectionCount===0&&tt.scheduleCleanup(e))}constructor(e,n){this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return wa(this.serverUrl)}getServerUrl(){return this.serverUrl}fetchRegionSettings(e){return I(this,void 0,void 0,function*(){return tt.fetchRegionSettings(this.serverUrl,this.token,e)})}getNextBestRegionUrl(e){return I(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");let n=tt.cache.get(this.serverUrl.hostname);(!n||Date.now()-n.updatedAtInMs>n.maxAgeInMs)&&(n=yield this.fetchRegionSettings(e),tt.updateCachedRegionSettings(this.serverUrl,this.token,n));const i=n.regionSettings.regions.filter(r=>!this.attemptedRegions.find(s=>s.url===r.url));if(i.length>0){const r=i[0];return this.attemptedRegions.push(r),qe.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}setServerReportedRegions(e){tt.updateCachedRegionSettings(this.serverUrl,this.token,e)}}tt.cache=new Map;tt.settingsTimeouts=new Map;tt.connectionTrackers=new Map;tt.fetchLock=new kn;function I8(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class _t extends Error{constructor(e,n,i){super(n),this.code=e,this.message=Yw(n,_t.MAX_MESSAGE_BYTES),this.data=i?Yw(i,_t.MAX_DATA_BYTES):void 0}static fromProto(e){return new _t(e.code,e.message,e.data)}toProto(){return new v1({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new _t(_t.ErrorCode[e],_t.ErrorMessage[e],n)}}_t.MAX_MESSAGE_BYTES=256;_t.MAX_DATA_BYTES=15360;_t.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};_t.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const PR=15360;function Ny(t){return new TextEncoder().encode(t).length}function Yw(t,e){if(Ny(t)<=e)return t;let n=0,i=t.length;const r=new TextEncoder;for(;n<i;){const s=Math.floor((n+i+1)/2);r.encode(t.slice(0,s)).length<=e?n=s:i=s-1}return t.slice(0,n)}const Oy=2e3;function Zf(t,e){if(!e)return 0;let n,i;return"bytesReceived"in t?(n=t.bytesReceived,i=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,i=e.bytesSent),n===void 0||i===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-i)*8*1e3/(t.timestamp-e.timestamp)}const Iy=typeof MediaRecorder<"u";class D8{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const M8=Iy?MediaRecorder:D8;class L8 extends M8{constructor(e,n){if(!Iy)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let i,r;const s=()=>r===void 0,a=()=>{this.removeEventListener("dataavailable",i),this.removeEventListener("stop",a),this.removeEventListener("error",l),r?.close(),r=void 0},l=u=>{r?.error(u),this.removeEventListener("dataavailable",i),this.removeEventListener("stop",a),this.removeEventListener("error",l),r=void 0};this.byteStream=new ReadableStream({start:u=>{r=u,i=d=>I(this,void 0,void 0,function*(){let h;if(d.data.arrayBuffer){const m=yield d.data.arrayBuffer();h=new Uint8Array(m)}else if(d.data.byteArray)h=d.data.byteArray;else throw new Error("no data available!");s()||u.enqueue(h)}),this.addEventListener("dataavailable",i)},cancel:()=>{a()}}),this.addEventListener("stop",a),this.addEventListener("error",l)}}function j8(){return Iy}const F8=1e3,U8=1e4;class _R extends Y{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0;super(e,n,s),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=_y(()=>I(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>I(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(fe.Ended,this)},this.reacquireTrack=!1,this.providedByUser=r,this.muteLock=new kn,this.pauseUpstreamLock=new kn,this.trackChangeLock=new kn,this.trackChangeLock.lock().then(a=>I(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(e,!0)}finally{a()}})),this._constraints=e.getConstraints(),i&&(this._constraints=i)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Y.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return I(this,void 0,void 0,function*(){var i;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(s=>{la(this._mediaStreamTrack,s)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(ea(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}this.sender&&((i=this.sender.transport)===null||i===void 0?void 0:i.state)!=="closed"&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(s=>{ea(r??e,s)}))})}waitForDimensions(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F8;return(function*(){var i;if(e.kind===Y.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((i=Mn())===null||i===void 0?void 0:i.os)==="iOS"&&(yield sn(10));const r=Date.now();for(;Date.now()-r<n;){const s=e.dimensions;if(s)return s;yield sn(50)}throw new xr("unable to get track dimensions after timeout")})()})}setDeviceId(e){return I(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===ss(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),ss(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){if(e.source===Y.Source.ScreenShare)return;const{deviceId:i,groupId:r}=e._mediaStreamTrack.getSettings(),s=e.kind===Y.Kind.Audio?"audioinput":"videoinput";return n?Jt.getInstance().normalizeDeviceId(s,i,r):i})()})}mute(){return I(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return I(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return I(this,void 0,void 0,function*(){const i=yield this.trackChangeLock.lock();try{if(!this.sender)throw new xr("unable to replace an unpublished track");let r,s;return typeof n=="boolean"?r=n:n!==void 0&&(r=n.userProvidedTrack,s=n.stopProcessor),this.providedByUser=r??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),s&&this.processor&&(yield this.internalStopProcessor()),this}finally{i()}})}restart(e){return I(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{e||(e=this._constraints);const{deviceId:i,facingMode:r}=e,s=l6(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const a={audio:!1,video:!1};this.kind===Y.Kind.Video?a.video=i||r?{deviceId:i,facingMode:r}:!0:a.audio=i?Object.assign({deviceId:i},s):!0,this.attachedElements.forEach(d=>{la(this.mediaStreamTrack,d)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const u=(yield navigator.mediaDevices.getUserMedia(a)).getTracks()[0];return this.kind===Y.Kind.Video&&(yield u.applyConstraints(s)),u.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(u),this._constraints=e,this.emit(fe.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?fe.Muted:fe.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return I(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),bR()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return I(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(fe.UpstreamPaused,this);const i=Mn();if(i?.name==="Safari"&&Ai(i.version,"12.0")<0)throw new wy("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return I(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(fe.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return I(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return I(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var s;const a=yield i.trackChangeLock.lock();try{i.log.debug("setting up processor",i.logContext);const l=document.createElement(i.kind),u={kind:i.kind,track:i._mediaStreamTrack,element:l,audioContext:i.audioContext};if(yield n.init(u),i.log.debug("processor initialized",i.logContext),i.processor&&(yield i.internalStopProcessor()),i.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(ea(i._mediaStreamTrack,l),l.muted=!0,l.play().catch(d=>{d instanceof DOMException&&d.name==="AbortError"?(i.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},i.logContext),{error:d})),setTimeout(()=>{l.play().catch(h=>{i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{err:h}))})},100)):i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{error:d}))}),i.processor=n,i.processorElement=l,i.processor.processedTrack){for(const d of i.attachedElements)d!==i.processorElement&&r&&(la(i._mediaStreamTrack,d),ea(i.processor.processedTrack,d));yield(s=i.sender)===null||s===void 0?void 0:s.replaceTrack(i.processor.processedTrack)}i.emit(fe.TrackProcessorUpdate,i.processor)}finally{a()}})()})}getProcessor(){return this.processor}stopProcessor(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){const i=yield e.trackChangeLock.lock();try{yield e.internalStopProcessor(n)}finally{i()}})()})}internalStopProcessor(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var i,r;e.processor&&(e.log.debug("stopping processor",e.logContext),(i=e.processor.processedTrack)===null||i===void 0||i.stop(),yield e.processor.destroy(),e.processor=void 0,n||((r=e.processorElement)===null||r===void 0||r.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(fe.TrackProcessorUpdate))})()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!j8()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new L8(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},U8)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class ff extends _R{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(e,Y.Kind.Audio,n,i,s),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>I(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(l){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:l}));return}a&&this.prevStats&&(this._currentBitrate=Zf(a,this.prevStats)),this.prevStats=a}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(fe.AudioTrackFeatureUpdate,this,Qt.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(fe.AudioTrackFeatureUpdate,this,Qt.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=r,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Y.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const i=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==ss(this._constraints.deviceId);return this.source===Y.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||i)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return I(this,void 0,void 0,function*(){let n;if(e){const i=Cy({audio:e});typeof i.audio!="boolean"&&(n=i.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return I(this,void 0,void 0,function*(){const i=yield n.restart.call(this,e);return this.checkForSilence(),i})}startMonitor(){Dn()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Oy)))}setProcessor(e){return I(this,void 0,void 0,function*(){var n;const i=yield this.trackChangeLock.lock();try{if(!Yi()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const r={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(r),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(fe.TrackProcessorUpdate,this.processor)}finally{i()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return I(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let i;return n.forEach(r=>{r.type==="outbound-rtp"&&(i={type:"audio",streamId:r.id,packetsSent:r.packetsSent,packetsLost:r.packetsLost,bytesSent:r.bytesSent,timestamp:r.timestamp,roundTripTime:r.roundTripTime,jitter:r.jitter})}),i})}checkForSilence(){return I(this,void 0,void 0,function*(){const e=yield gR(this);return e&&(this.isMuted||this.log.debug("silence detected on local audio track",this.logContext),this.emit(fe.AudioSilenceDetected)),e})}}function V8(t,e,n){switch(t.kind){case"audio":return new ff(t,e,!1,void 0,n);case"video":return new hf(t,e,!1,n);default:throw new xr("unsupported track type: ".concat(t.kind))}}const B8=Object.values(wl),z8=Object.values(Mg),W8=Object.values(Ty),q8=[wl.h180,wl.h360],H8=[Mg.h180,Mg.h360],$8=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var i,r;return new ot(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((i=t.encoding.maxFramerate)!==null&&i!==void 0?i:30)/((r=n.fps)!==null&&r!==void 0?r:30))))),n.fps,t.encoding.priority)}),qg=["q","h","f"];function Hg(t,e,n,i){var r,s;let a=i?.videoEncoding;t&&(a=i?.screenShareEncoding);const l=i?.simulcast,u=i?.scalabilityMode,d=i?.videoCodec;if(!a&&!l&&!u||!e||!n)return[{}];a||(a=G8(t,e,n,d),qe.debug("using video encoding",a));const h=a.maxFramerate,m=new ot(e,n,a.maxBitrate,a.maxFramerate,a.priority);if(u&&ki(d)){const T=new RR(u),x=[];if(T.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(u));const C=Mn();if(Tl()||Yi()||C?.name==="Chrome"&&Ai(C?.version,"113")<0){const E=T.suffix=="h"?2:3,A=q6(C);for(let N=0;N<T.spatial;N+=1)x.push({rid:qg[2-N],maxBitrate:a.maxBitrate/Math.pow(E,N),maxFramerate:m.encoding.maxFramerate,scaleResolutionDownBy:A?Math.pow(2,N):void 0});x[0].scalabilityMode=u}else x.push({maxBitrate:a.maxBitrate,maxFramerate:m.encoding.maxFramerate,scalabilityMode:u});return m.encoding.priority&&(x[0].priority=m.encoding.priority,x[0].networkPriority=m.encoding.priority),qe.debug("using svc encoding",{encodings:x}),x}if(!l)return[a];let g=[];t?g=(r=eT(i?.screenShareSimulcastLayers))!==null&&r!==void 0?r:Xw(t,m):g=(s=eT(i?.videoSimulcastLayers))!==null&&s!==void 0?s:Xw(t,m);let k;if(g.length>0){const T=g[0];g.length>1&&([,k]=g);const x=Math.max(e,n);if(x>=960&&k)return jm(e,n,[T,k,m],h);if(x>=480)return jm(e,n,[T,m],h)}return jm(e,n,[m])}function K8(t,e,n){var i,r,s,a;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&qe.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const l=t.mediaStreamTrack.getSettings(),u=(i=l.width)!==null&&i!==void 0?i:(r=t.dimensions)===null||r===void 0?void 0:r.width,d=(s=l.height)!==null&&s!==void 0?s:(a=t.dimensions)===null||a===void 0?void 0:a.height;return t.source===Y.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),Hg(t.source===Y.Source.ScreenShare,u,d,n)}function G8(t,e,n,i){const r=Z8(t,e,n);let{encoding:s}=r[0];const a=Math.max(e,n);for(let l=0;l<r.length;l+=1){const u=r[l];if(s=u.encoding,u.width>=a)break}if(i)switch(i){case"av1":case"h265":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.7;break;case"vp9":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.85;break}return s}function Z8(t,e,n){if(t)return W8;const i=e>n?e/n:n/e;return Math.abs(i-16/9)<Math.abs(i-4/3)?B8:z8}function Xw(t,e){if(t)return $8(e);const{width:n,height:i}=e,r=n>i?n/i:i/n;return Math.abs(r-16/9)<Math.abs(r-4/3)?q8:H8}function jm(t,e,n,i){const r=[];if(n.forEach((s,a)=>{if(a>=qg.length)return;const l=Math.min(t,e),d={rid:qg[a],scaleResolutionDownBy:Math.max(1,l/Math.min(s.width,s.height)),maxBitrate:s.encoding.maxBitrate},h=i&&s.encoding.maxFramerate?Math.min(i,s.encoding.maxFramerate):s.encoding.maxFramerate;h&&(d.maxFramerate=h);const m=to()||a===0;s.encoding.priority&&m&&(d.priority=s.encoding.priority,d.networkPriority=s.encoding.priority),r.push(d)}),Yi()&&kR()==="ios"){let s;r.forEach(l=>{s?l.maxFramerate&&l.maxFramerate>s&&(s=l.maxFramerate):s=l.maxFramerate});let a=!0;r.forEach(l=>{var u;l.maxFramerate!=s&&(a&&(a=!1,qe.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),qe.info('Setting framerate of encoding "'.concat((u=l.rid)!==null&&u!==void 0?u:"",'" to ').concat(s)),l.maxFramerate=s)})}return r}function eT(t){if(t)return t.sort((e,n)=>{const{encoding:i}=e,{encoding:r}=n;return i.maxBitrate>r.maxBitrate?1:i.maxBitrate<r.maxBitrate?-1:i.maxBitrate===r.maxBitrate&&i.maxFramerate&&r.maxFramerate?i.maxFramerate>r.maxFramerate?1:-1:0})}class RR{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function Q8(t){return t.source===Y.Source.ScreenShare||t.constraints.height&&ss(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const J8=5e3;class hf extends _R{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0;super(e,Y.Kind.Video,n,i,r),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>I(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(u){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:u}));return}const a=new Map(s.map(u=>[u.rid,u])),l=s.some(u=>u.qualityLimitationReason==="cpu");if(l!==this.isCpuConstrained&&(this.isCpuConstrained=l,this.isCpuConstrained&&this.emit(fe.CpuConstrained)),this.prevStats){let u=0;a.forEach((d,h)=>{var m;const g=(m=this.prevStats)===null||m===void 0?void 0:m.get(h);u+=Zf(d,g)}),this._currentBitrate=u}this.prevStats=a}),this.senderLock=new kn}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!Dn())return;const i=(n=this.sender)===null||n===void 0?void 0:n.getParameters();i&&(this.encodings=i.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Oy))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return I(this,void 0,void 0,function*(){var n,i,r,s,a;yield e.pauseUpstream.call(this);try{for(var l=!0,u=br(this.simulcastCodecs.values()),d;d=yield u.next(),n=d.done,!n;l=!0)s=d.value,l=!1,yield(a=s.sender)===null||a===void 0?void 0:a.replaceTrack(null)}catch(h){i={error:h}}finally{try{!l&&!n&&(r=u.return)&&(yield r.call(u))}finally{if(i)throw i.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return I(this,void 0,void 0,function*(){var n,i,r,s,a;yield e.resumeUpstream.call(this);try{for(var l=!0,u=br(this.simulcastCodecs.values()),d;d=yield u.next(),n=d.done,!n;l=!0){s=d.value,l=!1;const h=s;yield(a=h.sender)===null||a===void 0?void 0:a.replaceTrack(h.mediaStreamTrack)}}catch(h){i={error:h}}finally{try{!l&&!n&&(r=u.return)&&(yield r.call(u))}finally{if(i)throw i.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Y.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===Y.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return I(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],i=yield this.sender.getStats();return i.forEach(r=>{var s;if(r.type==="outbound-rtp"){const a={type:"video",streamId:r.id,frameHeight:r.frameHeight,frameWidth:r.frameWidth,framesPerSecond:r.framesPerSecond,framesSent:r.framesSent,firCount:r.firCount,pliCount:r.pliCount,nackCount:r.nackCount,packetsSent:r.packetsSent,bytesSent:r.bytesSent,qualityLimitationReason:r.qualityLimitationReason,qualityLimitationDurations:r.qualityLimitationDurations,qualityLimitationResolutionChanges:r.qualityLimitationResolutionChanges,rid:(s=r.rid)!==null&&s!==void 0?s:r.id,retransmittedPacketsSent:r.retransmittedPacketsSent,targetBitrate:r.targetBitrate,timestamp:r.timestamp},l=i.get(r.remoteId);l&&(a.jitter=l.jitter,a.packetsLost=l.packetsLost,a.roundTripTime=l.roundTripTime),n.push(a)}}),n.sort((r,s)=>{var a,l;return((a=s.frameWidth)!==null&&a!==void 0?a:0)-((l=r.frameWidth)!==null&&l!==void 0?l:0)}),n})}setPublishingQuality(e){const n=[];for(let i=Bn.LOW;i<=Bn.HIGH;i+=1)n.push(new by({quality:i,enabled:i<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(ki(this.codec),n)}restartTrack(e){return I(this,void 0,void 0,function*(){var n,i,r,s,a;let l;if(e){const m=Cy({video:e});typeof m.video!="boolean"&&(l=m.video)}yield this.restart(l),this.isCpuConstrained=!1;try{for(var u=!0,d=br(this.simulcastCodecs.values()),h;h=yield d.next(),n=h.done,!n;u=!0){s=h.value,u=!1;const m=s;m.sender&&((a=m.sender.transport)===null||a===void 0?void 0:a.state)!=="closed"&&(m.mediaStreamTrack=this.mediaStreamTrack.clone(),yield m.sender.replaceTrack(m.mediaStreamTrack))}}catch(m){i={error:m}}finally{try{!u&&!n&&(r=d.return)&&(yield r.call(d))}finally{if(i)throw i.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return I(this,arguments,void 0,function(i){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var a,l,u,d,h,m;if(yield n.setProcessor.call(r,i,s),!((h=r.processor)===null||h===void 0)&&h.processedTrack)try{for(var g=!0,k=br(r.simulcastCodecs.values()),T;T=yield k.next(),a=T.done,!a;g=!0)d=T.value,g=!1,yield(m=d.sender)===null||m===void 0?void 0:m.replaceTrack(r.processor.processedTrack)}catch(x){l={error:x}}finally{try{!g&&!a&&(u=k.return)&&(yield u.call(k))}finally{if(l)throw l.error}}})()})}setDegradationPreference(e){return I(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const i={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,i),i}setSimulcastTrackSender(e,n){const i=this.simulcastCodecs.get(e);i&&(i.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},J8))}setPublishingCodecs(e){return I(this,void 0,void 0,function*(){var n,i,r,s,a,l,u;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(ki(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const d=[];try{for(n=!0,i=br(e);r=yield i.next(),s=r.done,!s;n=!0){u=r.value,n=!1;const h=u;if(!this.codec||this.codec===h.codec)yield this.setPublishingLayers(ki(h.codec),h.qualities);else{const m=this.simulcastCodecs.get(h.codec);if(this.log.debug("try setPublishingCodec for ".concat(h.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:m})),!m||!m.sender){for(const g of h.qualities)if(g.enabled){d.push(h.codec);break}}else m.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(h.codec),this.logContext),yield tT(m.sender,m.encodings,h.qualities,this.senderLock,ki(h.codec),this.log,this.logContext))}}}catch(h){a={error:h}}finally{try{!n&&!s&&(l=i.return)&&(yield l.call(i))}finally{if(a)throw a.error}}return d})}setPublishingLayers(e,n){return I(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield tT(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return I(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((i,r)=>{var s;return Object.assign(Object.assign({},i),{active:r===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((s=this.mediaStreamTrack.getSettings().height)!==null&&s!==void 0?s:360)/360)),scalabilityMode:r===0&&ki(this.codec)?"L1T3":void 0,maxFramerate:r===0?15:0,maxBitrate:r===0?i.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return I(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),bR()&&this.isInBackground&&this.source===Y.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function tT(t,e,n,i,r,s,a){return I(this,void 0,void 0,function*(){const l=yield i.lock();s.debug("setPublishingLayersForSender",Object.assign(Object.assign({},a),{sender:t,qualities:n,senderEncodings:e}));try{const u=t.getParameters(),{encodings:d}=u;if(!d)return;if(d.length!==e.length){s.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},a),{encodings:d,senderEncodings:e}));return}let h=!1;!1&&d[0].scalabilityMode||(r&&n.some(k=>k.enabled)&&n.forEach(k=>k.enabled=!0),d.forEach((g,k)=>{var T;let x=(T=g.rid)!==null&&T!==void 0?T:"";x===""&&(x="q");const C=AR(x),E=n.find(A=>A.quality===C);E&&g.active!==E.enabled&&(h=!0,g.active=E.enabled,s.debug("setting layer ".concat(E.quality," to ").concat(g.active?"enabled":"disabled"),a),to()&&(E.enabled?(g.scaleResolutionDownBy=e[k].scaleResolutionDownBy,g.maxBitrate=e[k].maxBitrate,g.maxFrameRate=e[k].maxFrameRate):(g.scaleResolutionDownBy=4,g.maxBitrate=10,g.maxFrameRate=2)))})),h&&(u.encodings=d,s.debug("setting encodings",Object.assign(Object.assign({},a),{encodings:u.encodings})),yield t.setParameters(u))}finally{l()}})}function AR(t){switch(t){case"f":return Bn.HIGH;case"h":return Bn.MEDIUM;case"q":return Bn.LOW;default:return Bn.HIGH}}function nT(t,e,n,i){if(!n)return[new rs({quality:Bn.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(i){const r=n[0].scalabilityMode,s=new RR(r),a=[],l=s.suffix=="h"?1.5:2,u=s.suffix=="h"?2:3;for(let d=0;d<s.spatial;d+=1)a.push(new rs({quality:Math.min(Bn.HIGH,s.spatial-1)-d,width:Math.ceil(t/Math.pow(l,d)),height:Math.ceil(e/Math.pow(l,d)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(u,d)):0,ssrc:0}));return a}return n.map(r=>{var s,a,l;const u=(s=r.scaleResolutionDownBy)!==null&&s!==void 0?s:1;let d=AR((a=r.rid)!==null&&a!==void 0?a:"");return new rs({quality:d,width:Math.ceil(t/u),height:Math.ceil(e/u),bitrate:(l=r.maxBitrate)!==null&&l!==void 0?l:0,ssrc:0})})}const iT="_lossy",rT="_reliable",Y8=2*1e3,Fm="leave-reconnect",X8=3e4,ez=8*1024,tz=256*1024;var ei;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(ei||(ei={}));class nz extends er.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=Ay.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=ei.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=qe,this.reliableDataSequence=1,this.reliableMessageBuffer=new qw,this.reliableReceivedState=new S8(X8),this.lossyDataStatCurrentBytes=0,this.lossyDataStatByterate=0,this.lossyDataDropCount=0,this.midToTrackId={},this.isWaitingForNetworkReconnect=!1,this.handleDataChannel=i=>I(this,[i],void 0,function(r){var s=this;let{channel:a}=r;return(function*(){if(a){if(a.label===rT)s.reliableDCSub=a;else if(a.label===iT)s.lossyDCSub=a;else return;s.log.debug("on data channel ".concat(a.id,", ").concat(a.label),s.logContext),a.onmessage=s.handleDataMessage}})()}),this.handleDataMessage=i=>I(this,void 0,void 0,function*(){var r,s,a,l,u;const d=yield this.dataProcessLock.lock();try{let h;if(i.data instanceof ArrayBuffer)h=i.data;else if(i.data instanceof Blob)h=yield i.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:i.data}));return}const m=xn.fromBinary(new Uint8Array(h));if(m.sequence>0&&m.participantSid!==""){const g=this.reliableReceivedState.get(m.participantSid);if(g&&m.sequence<=g)return;this.reliableReceivedState.set(m.participantSid,m.sequence)}if(((r=m.value)===null||r===void 0?void 0:r.case)==="speaker")this.emit(pe.ActiveSpeakersUpdate,m.value.value.speakers);else if(((s=m.value)===null||s===void 0?void 0:s.case)==="encryptedPacket"){if(!this.e2eeManager){this.log.error("Received encrypted packet but E2EE not set up",this.logContext);return}const g=yield(a=this.e2eeManager)===null||a===void 0?void 0:a.handleEncryptedData(m.value.value.encryptedValue,m.value.value.iv,m.participantIdentity,m.value.value.keyIndex),k=p1.fromBinary(g.payload),T=new xn({value:k.value,participantIdentity:m.participantIdentity,participantSid:m.participantSid});((l=T.value)===null||l===void 0?void 0:l.case)==="user"&&sT(T,T.value.value),this.emit(pe.DataPacketReceived,T,m.value.value.encryptionType)}else((u=m.value)===null||u===void 0?void 0:u.case)==="user"&&sT(m,m.value.value),this.emit(pe.DataPacketReceived,m,Ht.NONE)}finally{d()}}),this.handleDataError=i=>{const s=i.currentTarget.maxRetransmits===0?"lossy":"reliable";if(i instanceof ErrorEvent&&i.error){const{error:a}=i.error;this.log.error("DataChannel error on ".concat(s,": ").concat(i.message),Object.assign(Object.assign({},this.logContext),{error:a}))}else this.log.error("Unknown DataChannel error on ".concat(s),Object.assign(Object.assign({},this.logContext),{event:i}))},this.handleBufferedAmountLow=i=>{const s=i.currentTarget.maxRetransmits===0?Ke.LOSSY:Ke.RELIABLE;this.updateAndEmitDCBufferStatus(s)},this.handleDisconnect=(i,r)=>{if(this._isClosed)return;this.log.warn("".concat(i," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const s=u=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(u,"ms. giving up"),this.logContext),this.emit(pe.Disconnected),this.close()},a=Date.now()-this.reconnectStart;let l=this.getNextRetryDelay({elapsedMs:a,retryCount:this.reconnectAttempts});if(l===null){s(a);return}i===Fm&&(l=0),this.log.debug("reconnecting in ".concat(l,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=rn.setTimeout(()=>this.attemptReconnect(r).finally(()=>this.reconnectTimeout=void 0),l)},this.waitForRestarted=()=>new Promise((i,r)=>{this.pcState===ei.Connected&&i();const s=()=>{this.off(pe.Disconnected,a),i()},a=()=>{this.off(pe.Restarted,s),r()};this.once(pe.Restarted,s),this.once(pe.Disconnected,a)}),this.updateAndEmitDCBufferStatus=i=>{if(i===Ke.RELIABLE){const s=this.dataChannelForKind(i);s&&this.reliableMessageBuffer.alignBufferedAmount(s.bufferedAmount)}const r=this.isBufferStatusLow(i);typeof r<"u"&&r!==this.dcBufferStatus.get(i)&&(this.dcBufferStatus.set(i,r),this.emit(pe.DCBufferStatusChanged,r,i))},this.isBufferStatusLow=i=>{const r=this.dataChannelForKind(i);if(r)return r.bufferedAmount<=r.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>I(this,void 0,void 0,function*(){!this.url||!(yield fetch(Cl(this.url),{method:"HEAD"}).then(r=>r.ok).catch(()=>!1))||(this.log.info("detected network reconnected"),(this.client.currentState===at.RECONNECTING||this.isWaitingForNetworkReconnect&&this.client.currentState===at.CONNECTED)&&(this.clearReconnectTimeout(),this.attemptReconnect(Bs.RR_SIGNAL_DISCONNECTED),this.isWaitingForNetworkReconnect=!1))}),this.handleBrowserOffline=()=>I(this,void 0,void 0,function*(){if(this.url)try{yield Promise.race([fetch(Cl(this.url),{method:"HEAD"}),sn(4e3).then(()=>Promise.reject())])}catch{window.navigator.onLine===!1&&(this.log.info("detected network interruption"),this.isWaitingForNetworkReconnect=!0)}}),this.log=Pr((n=e.loggerName)!==null&&n!==void 0?n:Ri.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new Ey(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.closingLock=new kn,this.dataProcessLock=new kn,this.dcBufferStatus=new Map([[Ke.LOSSY,!0],[Ke.RELIABLE,!0]]),this.client.onParticipantUpdate=i=>this.emit(pe.ParticipantUpdate,i),this.client.onConnectionQuality=i=>this.emit(pe.ConnectionQualityUpdate,i),this.client.onRoomUpdate=i=>this.emit(pe.RoomUpdate,i),this.client.onSubscriptionError=i=>this.emit(pe.SubscriptionError,i),this.client.onSubscriptionPermissionUpdate=i=>this.emit(pe.SubscriptionPermissionUpdate,i),this.client.onSpeakersChanged=i=>this.emit(pe.SpeakersChanged,i),this.client.onStreamStateUpdate=i=>this.emit(pe.StreamStateChanged,i),this.client.onRequestResponse=i=>this.emit(pe.SignalRequestResponse,i)}get logContext(){var e,n,i,r,s,a;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(r=(i=this.latestJoinResponse)===null||i===void 0?void 0:i.room)===null||r===void 0?void 0:r.sid,participant:(a=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.participant)===null||a===void 0?void 0:a.identity,pID:this.participantSid}}join(e,n,i,r){return I(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=i,this.maxJoinAttempts=i.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const s=yield this.client.join(e,n,i,r);return this._isClosed=!1,this.latestJoinResponse=s,this.subscriberPrimary=s.subscriberPrimary,this.pcManager||(yield this.configure(s)),(!this.subscriberPrimary||s.fastPublish)&&this.negotiate().catch(a=>{qe.error(a,this.logContext)}),this.registerOnLineListener(),this.clientConfiguration=s.clientConfiguration,this.emit(pe.SignalConnected,s),s}catch(s){if(s instanceof Fe&&s.reason===ht.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,i,r);throw s}})}close(){return I(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(pe.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),this.cleanupLossyDataStats(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return I(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=i=>{i&&(i.close(),i.onbufferedamountlow=null,i.onclose=null,i.onclosing=null,i.onerror=null,i.onmessage=null,i.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new qw,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupLossyDataStats(){this.lossyDataStatByterate=0,this.lossyDataStatCurrentBytes=0,this.lossyDataStatInterval&&(clearInterval(this.lossyDataStatInterval),this.lossyDataStatInterval=void 0),this.lossyDataDropCount=0}cleanupClient(){return I(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new xr("a track with the same ID has already been published");return new Promise((n,i)=>{const r=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],i(Fe.timeout("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[e.cid]={resolve:s=>{clearTimeout(r),n(s)},reject:()=>{clearTimeout(r),i(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return I(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return I(this,void 0,void 0,function*(){var n,i;if(this.pcManager&&this.pcManager.currentState!==Ct.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new N8(r,this.options.singlePeerConnection?"publisher-only":e.subscriberPrimary?"subscriber-primary":"publisher-primary",this.loggerOptions),this.emit(pe.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(s,a)=>{this.client.sendIceCandidate(s,a)},this.pcManager.onPublisherOffer=(s,a)=>{this.client.sendOffer(s,a)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(s,a,l)=>I(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(s),this.logContext),["closed","disconnected","failed"].includes(a)&&(this.publisherConnectionPromise=void 0),s===Ct.CONNECTED){const h=this.pcState===ei.New;this.pcState=ei.Connected,h&&this.emit(pe.Connected,e)}else s===Ct.FAILED&&(this.pcState===ei.Connected||this.pcState===ei.Reconnecting)&&(this.pcState=ei.Disconnected,this.handleDisconnect("peerconnection failed",l==="failed"?Bs.RR_SUBSCRIBER_FAILED:Bs.RR_PUBLISHER_FAILED));const u=this.client.isDisconnected||this.client.currentState===at.RECONNECTING,d=[Ct.FAILED,Ct.CLOSING,Ct.CLOSED].includes(s);u&&d&&!this._isClosed&&this.emit(pe.Offline)}),this.pcManager.onTrack=s=>{s.streams.length!==0&&this.emit(pe.MediaTrackAdded,s.track,s.streams[0],s.receiver)},iz((i=e.serverInfo)===null||i===void 0?void 0:i.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n,i)=>I(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,midToTrackId:i})),this.midToTrackId=i,yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n,i)=>I(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;this.midToTrackId=i;const r=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);r&&this.client.sendAnswer(r,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:i}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],i(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(pe.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(pe.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{var n;this.token=e,(n=this.regionUrlProvider)===null||n===void 0||n.updateToken(e)},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(pe.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(pe.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(pe.RoomMoved,e)},this.client.onMediaSectionsRequirement=e=>{var n,i;const r={direction:"recvonly"};for(let s=0;s<e.numAudios;s++)(n=this.pcManager)===null||n===void 0||n.addPublisherTransceiverOfKind("audio",r);for(let s=0;s<e.numVideos;s++)(i=this.pcManager)===null||i===void 0||i.addPublisherTransceiverOfKind("video",r);this.negotiate()},this.client.onClose=()=>{this.handleDisconnect("signal",Bs.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e?.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions({updatedAtInMs:Date.now(),maxAgeInMs:ER,regionSettings:e.regions})),e.action){case aa.DISCONNECT:this.emit(pe.Disconnected,e?.reason),this.close();break;case aa.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Fm);break;case aa.RESUME:this.handleDisconnect(Fm)}}}makeRTCConfiguration(e){var n;const i=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),i.encodedInsertableStreams=!0),e.iceServers&&!i.iceServers){const r=[];e.iceServers.forEach(s=>{const a={urls:s.urls};s.username&&(a.username=s.username),s.credential&&(a.credential=s.credential),r.push(a)}),i.iceServers=r}return e.clientConfiguration&&e.clientConfiguration.forceRelay===bl.ENABLED&&(i.iceTransportPolicy="relay"),i.sdpSemantics="unified-plan",i.continualGatheringPolicy="gather_continually",i}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(iT,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(rT,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow,this.cleanupLossyDataStats(),this.lossyDataStatInterval=setInterval(()=>{this.lossyDataStatByterate=this.lossyDataStatCurrentBytes,this.lossyDataStatCurrentBytes=0;const e=this.dataChannelForKind(Ke.LOSSY);if(e){const n=this.lossyDataStatByterate/10;e.bufferedAmountLowThreshold=Math.min(Math.max(n,ez),tz)}},1e3))}createSender(e,n,i){return I(this,void 0,void 0,function*(){if(Fg())return yield this.createTransceiverRTCRtpSender(e,n,i);if(Ug())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new Wt("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,i,r){return I(this,void 0,void 0,function*(){if(Fg())return this.createSimulcastTransceiverSender(e,n,i,r);if(Ug())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new Wt("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,i){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Wt("publisher is closed");const r=[];e.mediaStream&&r.push(e.mediaStream),xs(e)&&(e.codec=n.videoCodec);const s={direction:"sendonly",streams:r};return i&&(s.sendEncodings=i),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,s)).sender})}createSimulcastTransceiverSender(e,n,i,r){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Wt("publisher is closed");const s={direction:"sendonly"};r&&(s.sendEncodings=r);const a=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,s);if(i.videoCodec)return e.setSimulcastTrackSender(i.videoCodec,a.sender),a.sender})}createRTCRtpSender(e){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Wt("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return I(this,void 0,void 0,function*(){var n,i,r;if(!this._isClosed){if(this.attemptingReconnect){qe.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===bl.DISABLED||((r=(i=this.pcManager)===null||i===void 0?void 0:i.currentState)!==null&&r!==void 0?r:Ct.NEW)===Ct.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let a=!0;s instanceof Wt?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:s})),a=!1):s instanceof qo||(this.fullReconnectOnNext=!0),a?this.handleDisconnect("reconnect",Bs.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(pe.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return I(this,void 0,void 0,function*(){var n,i,r;try{if(!this.url||!this.token)throw new Wt("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(pe.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let s;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new qo;s=yield this.join(e??this.url,this.token,this.signalOpts)}catch(a){throw a instanceof Fe&&a.reason===ht.NotAllowed?new Wt("could not reconnect, token might be expired"):new qo}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(pe.SignalRestarted,s),yield this.waitForPCReconnected(),this.client.currentState!==at.CONNECTED)throw new qo("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(pe.Restarted)}catch(s){const a=yield(i=this.regionUrlProvider)===null||i===void 0?void 0:i.getNextBestRegionUrl();if(a){yield this.restartConnection(a);return}else throw(r=this.regionUrlProvider)===null||r===void 0||r.resetAttempts(),s}})}resumeConnection(e){return I(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new Wt("could not reconnect, url or token not saved");if(!this.pcManager)throw new Wt("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(pe.Resuming);let i;try{this.setupSignalClientCallbacks(),i=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(r){let s="";throw r instanceof Error&&(s=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof Fe&&r.reason===ht.NotAllowed?new Wt("could not reconnect, token might be expired"):r instanceof Fe&&r.reason===ht.LeaveRequest?r:new qo(s)}if(this.emit(pe.SignalResumed),i){const r=this.makeRTCConfiguration(i);this.pcManager.updateConfiguration(r),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=i.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==at.CONNECTED)throw new qo("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),i?.lastMessageSeq&&this.resendReliableMessagesForResume(i.lastMessageSeq),this.emit(pe.Resumed)})}waitForPCInitialConnection(e,n){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Wt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return I(this,void 0,void 0,function*(){this.pcState=ei.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield sn(Y8),!this.pcManager)throw new Wt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=ei.Connected}catch(e){throw this.pcState=ei.Disconnected,Fe.internal("could not establish PC connection, ".concat(e.message))}})}publishRpcResponse(e,n,i,r){return I(this,void 0,void 0,function*(){const s=new xn({destinationIdentities:[e],kind:Ke.RELIABLE,value:{case:"rpcResponse",value:new my({requestId:n,value:r?{case:"error",value:r.toProto()}:{case:"payload",value:i??""}})}});yield this.sendDataPacket(s,Ke.RELIABLE)})}publishRpcAck(e,n){return I(this,void 0,void 0,function*(){const i=new xn({destinationIdentities:[e],kind:Ke.RELIABLE,value:{case:"rpcAck",value:new py({requestId:n})}});yield this.sendDataPacket(i,Ke.RELIABLE)})}sendDataPacket(e,n){return I(this,void 0,void 0,function*(){if(yield this.ensurePublisherConnected(n),this.e2eeManager&&this.e2eeManager.isDataChannelEncryptionEnabled){const s=d8(e);if(s){const a=yield this.e2eeManager.encryptData(s.toBinary());e.value={case:"encryptedPacket",value:new h1({encryptedValue:a.payload,iv:a.iv,keyIndex:a.keyIndex})}}}n===Ke.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const i=e.toBinary(),r=this.dataChannelForKind(n);if(r){if(n===Ke.RELIABLE)yield this.waitForBufferStatusLow(n),this.reliableMessageBuffer.push({data:i,sequence:e.sequence});else{if(!this.isBufferStatusLow(n)){this.lossyDataDropCount+=1,this.lossyDataDropCount%100===0&&this.log.warn("dropping lossy data channel messages, total dropped: ".concat(this.lossyDataDropCount),this.logContext);return}this.lossyDataStatCurrentBytes+=i.byteLength}if(this.attemptingReconnect)return;r.send(i)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return I(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(Ke.RELIABLE);const n=this.dataChannelForKind(Ke.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(i=>{n.send(i.data)})),this.updateAndEmitDCBufferStatus(Ke.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,i)=>I(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const r=()=>i("Engine closed");for(this.once(pe.Closing,r);!this.dcBufferStatus.get(e);)yield sn(10);this.off(pe.Closing,r),n()}}))}ensureDataTransportConnected(e){return I(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return(function*(){var s;if(!i.pcManager)throw new Wt("PC manager is closed");const a=r?i.pcManager.subscriber:i.pcManager.publisher,l=r?"Subscriber":"Publisher";if(!a)throw Fe.internal("".concat(l," connection not set"));let u=!1;!r&&!i.dataChannelForKind(n,r)&&(i.createDataChannels(),u=!0),!u&&!r&&!i.pcManager.publisher.isICEConnected&&i.pcManager.publisher.getICEConnectionState()!=="checking"&&(u=!0),u&&i.negotiate().catch(m=>{qe.error(m,i.logContext)});const d=i.dataChannelForKind(n,r);if(d?.readyState==="open")return;const h=new Date().getTime()+i.peerConnectionTimeout;for(;new Date().getTime()<h;){if(a.isICEConnected&&((s=i.dataChannelForKind(n,r))===null||s===void 0?void 0:s.readyState)==="open")return;yield sn(50)}throw Fe.internal("could not establish ".concat(l," connection, state: ").concat(a.getICEConnectionState()))})()})}ensurePublisherConnected(e){return I(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Ct.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return I(this,void 0,void 0,function*(){return new Promise((e,n)=>I(this,void 0,void 0,function*(){if(!this.pcManager){n(new Ig("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const i=new AbortController,r=()=>{i.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(pe.Closing,r),this.pcManager.publisher.once(fa.RTPVideoPayloadTypes,s=>{const a=new Map;s.forEach(l=>{const u=l.codec.toLowerCase();Z6(u)&&a.set(l.payload,u)}),this.emit(pe.RTPVideoMapUpdate,a)});try{yield this.pcManager.negotiate(i),e()}catch(s){s instanceof Ig&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Bs.RR_UNKNOWN),n(s)}finally{this.off(pe.Closing,r)}}))})}dataChannelForKind(e,n){if(n){if(e===Ke.LOSSY)return this.lossyDCSub;if(e===Ke.RELIABLE)return this.reliableDCSub}else{if(e===Ke.LOSSY)return this.lossyDC;if(e===Ke.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var i,r,s,a;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const l=this.pcManager.publisher.getLocalDescription(),u=this.pcManager.publisher.getRemoteDescription(),d=(i=this.pcManager.subscriber)===null||i===void 0?void 0:i.getRemoteDescription(),h=(r=this.pcManager.subscriber)===null||r===void 0?void 0:r.getLocalDescription(),m=(a=(s=this.signalOpts)===null||s===void 0?void 0:s.autoSubscribe)!==null&&a!==void 0?a:!0,g=new Array,k=new Array;e.forEach(T=>{T.isDesired!==m&&g.push(T.trackSid),T.isEnabled||k.push(T.trackSid)}),this.client.sendSyncState(new xy({answer:this.options.singlePeerConnection?u?ta({sdp:u.sdp,type:u.type}):void 0:h?ta({sdp:h.sdp,type:h.type}):void 0,offer:this.options.singlePeerConnection?l?ta({sdp:l.sdp,type:l.type}):void 0:d?ta({sdp:d.sdp,type:d.type}):void 0,subscription:new $f({trackSids:g,subscribe:!m,participantTracks:[]}),publishTracks:O6(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:k,datachannelReceiveStates:this.reliableReceivedState.map((T,x)=>new I1({publisherSid:x,lastSeq:T}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(i,r)=>{i?.id!==void 0&&i.id!==null&&e.push(new D1({label:i.label,id:i.id,target:r}))};return n(this.dataChannelForKind(Ke.LOSSY),xi.PUBLISHER),n(this.dataChannelForKind(Ke.RELIABLE),xi.PUBLISHER),n(this.dataChannelForKind(Ke.LOSSY,!0),xi.SUBSCRIBER),n(this.dataChannelForKind(Ke.RELIABLE,!0),xi.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&rn.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Dn()&&(window.addEventListener("online",this.handleBrowserOnLine),window.addEventListener("offline",this.handleBrowserOffline))}deregisterOnLineListener(){Dn()&&(window.removeEventListener("online",this.handleBrowserOnLine),window.removeEventListener("offline",this.handleBrowserOffline))}getTrackIdForReceiver(e){var n;const i=(n=this.pcManager)===null||n===void 0?void 0:n.getMidForReceiver(e);if(i){const r=Object.entries(this.midToTrackId).find(s=>{let[a]=s;return a===i});if(r)return r[1]}}}function iz(t){return t!==void 0&&t>13}function sT(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const i=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=i,e.destinationIdentities=i}class NR{get info(){return this._info}validateBytesReceived(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(e&&this.bytesReceived<this.totalByteSize)throw new ti("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),yn.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new ti("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),yn.LengthExceeded)}}constructor(e,n,i,r){this.reader=n,this.totalByteSize=i,this._info=e,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=r}}class rz extends NR{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const i=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,i)}[Symbol.asyncIterator](){const e=this.reader.getReader();let n=new ni,i=null,r=null;if(this.signal){const a=this.signal;r=()=>{var l;(l=n.reject)===null||l===void 0||l.call(n,a.reason)},a.addEventListener("abort",r),i=a}const s=()=>{e.releaseLock(),i&&r&&i.removeEventListener("abort",r),this.signal=void 0};return{next:()=>I(this,void 0,void 0,function*(){var a,l;try{const{done:u,value:d}=yield Promise.race([e.read(),n.promise,(l=(a=this.outOfBandFailureRejectingFuture)===null||a===void 0?void 0:a.promise)!==null&&l!==void 0?l:new Promise(()=>{})]);return u?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(d),{done:!1,value:d.content})}catch(u){throw s(),u}}),return(){return I(this,void 0,void 0,function*(){return s(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var i,r,s,a;let l=new Set;const u=n.signal?e.withAbortSignal(n.signal):e;try{for(var d=!0,h=br(u),m;m=yield h.next(),i=m.done,!i;d=!0){a=m.value,d=!1;const g=a;l.add(g)}}catch(g){r={error:g}}finally{try{!d&&!i&&(s=h.return)&&(yield s.call(h))}finally{if(r)throw r.error}}return Array.from(l)})()})}}class sz extends NR{constructor(e,n,i,r){super(e,n,i,r),this.receivedChunks=new Map}handleChunkReceived(e){var n;const i=Id(e.chunkIndex),r=this.receivedChunks.get(i);if(r&&r.version>e.version)return;this.receivedChunks.set(i,e),this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const s=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,s)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let i=new ni,r=null,s=null;if(this.signal){const l=this.signal;s=()=>{var u;(u=i.reject)===null||u===void 0||u.call(i,l.reason)},l.addEventListener("abort",s),r=l}const a=()=>{e.releaseLock(),r&&s&&r.removeEventListener("abort",s),this.signal=void 0};return{next:()=>I(this,void 0,void 0,function*(){var l,u;try{const{done:d,value:h}=yield Promise.race([e.read(),i.promise,(u=(l=this.outOfBandFailureRejectingFuture)===null||l===void 0?void 0:l.promise)!==null&&u!==void 0?u:new Promise(()=>{})]);if(d)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(h);let m;try{m=n.decode(h.content)}catch(g){throw new ti("Cannot decode datastream chunk ".concat(h.chunkIndex," as text: ").concat(g),yn.DecodeFailed)}return{done:!1,value:m}}}catch(d){throw a(),d}}),return(){return I(this,void 0,void 0,function*(){return a(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var i,r,s,a;let l="";const u=n.signal?e.withAbortSignal(n.signal):e;try{for(var d=!0,h=br(u),m;m=yield h.next(),i=m.done,!i;d=!0)a=m.value,d=!1,l+=a}catch(g){r={error:g}}finally{try{!d&&!i&&(s=h.return)&&(yield s.call(h))}finally{if(r)throw r.error}}return l})()})}}class oz{constructor(){this.log=qe,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new ti('A text stream handler for topic "'.concat(e,'" has already been set.'),yn.HandlerAlreadyRegistered);this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new ti('A byte stream handler for topic "'.concat(e,'" has already been set.'),yn.HandlerAlreadyRegistered);this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}clearControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear()}validateParticipantHasNoActiveDataStreams(e){var n,i,r,s;const a=Array.from(this.textStreamControllers.entries()).filter(u=>u[1].sendingParticipantIdentity===e),l=Array.from(this.byteStreamControllers.entries()).filter(u=>u[1].sendingParticipantIdentity===e);if(a.length>0||l.length>0){const u=new ti("Participant ".concat(e," unexpectedly disconnected in the middle of sending data"),yn.AbnormalEnd);for(const[d,h]of l)(i=(n=h.outOfBandFailureRejectingFuture).reject)===null||i===void 0||i.call(n,u),this.byteStreamControllers.delete(d);for(const[d,h]of a)(s=(r=h.outOfBandFailureRejectingFuture).reject)===null||s===void 0||s.call(r,u),this.textStreamControllers.delete(d)}}handleDataStreamPacket(e,n){return I(this,void 0,void 0,function*(){switch(e.value.case){case"streamHeader":return this.handleStreamHeader(e.value.value,e.participantIdentity,n);case"streamChunk":return this.handleStreamChunk(e.value.value,n);case"streamTrailer":return this.handleStreamTrailer(e.value.value,n);default:throw new Error('DataPacket of value "'.concat(e.value.case,'" is not data stream related!'))}})}handleStreamHeader(e,n,i){return I(this,void 0,void 0,function*(){var r;if(e.contentHeader.case==="byteHeader"){const s=this.byteStreamHandlers.get(e.topic);if(!s){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let a;const l=new ni;l.promise.catch(h=>{this.log.error(h)});const u={id:e.streamId,name:(r=e.contentHeader.value.name)!==null&&r!==void 0?r:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Id(e.timestamp),attributes:e.attributes,encryptionType:i},d=new ReadableStream({start:h=>{if(a=h,this.textStreamControllers.has(e.streamId))throw new ti("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),yn.AlreadyOpened);this.byteStreamControllers.set(e.streamId,{info:u,controller:a,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:l})}});s(new rz(u,d,Id(e.totalLength),l),{identity:n})}else if(e.contentHeader.case==="textHeader"){const s=this.textStreamHandlers.get(e.topic);if(!s){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let a;const l=new ni;l.promise.catch(h=>{this.log.error(h)});const u={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes,encryptionType:i},d=new ReadableStream({start:h=>{if(a=h,this.textStreamControllers.has(e.streamId))throw new ti("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),yn.AlreadyOpened);this.textStreamControllers.set(e.streamId,{info:u,controller:a,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:l})}});s(new sz(u,d,Id(e.totalLength),l),{identity:n})}})}handleStreamChunk(e,n){const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?(i.controller.error(new ti("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),yn.EncryptionTypeMismatch)),this.byteStreamControllers.delete(e.streamId)):e.content.length>0&&i.controller.enqueue(e));const r=this.textStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?(r.controller.error(new ti("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),yn.EncryptionTypeMismatch)),this.textStreamControllers.delete(e.streamId)):e.content.length>0&&r.controller.enqueue(e))}handleStreamTrailer(e,n){const i=this.textStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?i.controller.error(new ti("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),yn.EncryptionTypeMismatch)):(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close(),this.textStreamControllers.delete(e.streamId)));const r=this.byteStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?r.controller.error(new ti("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),yn.EncryptionTypeMismatch)):(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),e.attributes),r.controller.close()),this.byteStreamControllers.delete(e.streamId))}}class OR{constructor(e,n,i){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=i,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return I(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class az extends OR{}class cz extends OR{}const oT=15e3;class lz{constructor(e,n){this.engine=e,this.log=n}setupEngine(e){this.engine=e}sendText(e,n){return I(this,void 0,void 0,function*(){var i;const r=crypto.randomUUID(),a=new TextEncoder().encode(e).byteLength,l=(i=n?.attachments)===null||i===void 0?void 0:i.map(()=>crypto.randomUUID()),u=new Array(l?l.length+1:1).fill(0),d=(m,g)=>{var k;u[g]=m;const T=u.reduce((x,C)=>x+C,0);(k=n?.onProgress)===null||k===void 0||k.call(n,T)},h=yield this.streamText({streamId:r,totalSize:a,destinationIdentities:n?.destinationIdentities,topic:n?.topic,attachedStreamIds:l,attributes:n?.attributes});return yield h.write(e),d(1,0),yield h.close(),n?.attachments&&l&&(yield Promise.all(n.attachments.map((m,g)=>I(this,void 0,void 0,function*(){return this._sendFile(l[g],m,{topic:n.topic,mimeType:m.type,onProgress:k=>{d(k,g+1)}})})))),h.info})}streamText(e){return I(this,void 0,void 0,function*(){var n,i,r;const s=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),a={id:s,mimeType:"text/plain",timestamp:Date.now(),topic:(i=e?.topic)!==null&&i!==void 0?i:"",size:e?.totalSize,attributes:e?.attributes,encryptionType:!((r=this.engine.e2eeManager)===null||r===void 0)&&r.isDataChannelEncryptionEnabled?Ht.GCM:Ht.NONE},l=new lf({streamId:s,mimeType:a.mimeType,topic:a.topic,timestamp:zs(a.timestamp),totalLength:zs(e?.totalSize),attributes:a.attributes,contentHeader:{case:"textHeader",value:new C1({version:e?.version,attachedStreamIds:e?.attachedStreamIds,replyToStreamId:e?.replyToStreamId,operationType:e?.type==="update"?wg.UPDATE:wg.CREATE})}}),u=e?.destinationIdentities,d=new xn({destinationIdentities:u,value:{case:"streamHeader",value:l}});yield this.engine.sendDataPacket(d,Ke.RELIABLE);let h=0;const m=this.engine,g=new WritableStream({write(x){return I(this,void 0,void 0,function*(){for(const C of t8(x,oT)){const E=new uf({content:C,streamId:s,chunkIndex:zs(h)}),A=new xn({destinationIdentities:u,value:{case:"streamChunk",value:E}});yield m.sendDataPacket(A,Ke.RELIABLE),h+=1}})},close(){return I(this,void 0,void 0,function*(){const x=new df({streamId:s}),C=new xn({destinationIdentities:u,value:{case:"streamTrailer",value:x}});yield m.sendDataPacket(C,Ke.RELIABLE)})},abort(x){console.log("Sink error:",x)}});let k=()=>I(this,void 0,void 0,function*(){yield T.close()});m.once(pe.Closing,k);const T=new az(g,a,()=>this.engine.off(pe.Closing,k));return T})}sendFile(e,n){return I(this,void 0,void 0,function*(){const i=crypto.randomUUID();return yield this._sendFile(i,e,n),{id:i}})}_sendFile(e,n,i){return I(this,void 0,void 0,function*(){var r;const s=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(r=i?.mimeType)!==null&&r!==void 0?r:n.type,topic:i?.topic,destinationIdentities:i?.destinationIdentities}),a=n.stream().getReader();for(;;){const{done:l,value:u}=yield a.read();if(l)break;yield s.write(u)}return yield s.close(),s.info})}streamBytes(e){return I(this,void 0,void 0,function*(){var n,i,r,s,a,l;const u=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),d=e?.destinationIdentities,h={id:u,mimeType:(i=e?.mimeType)!==null&&i!==void 0?i:"application/octet-stream",topic:(r=e?.topic)!==null&&r!==void 0?r:"",timestamp:Date.now(),attributes:e?.attributes,size:e?.totalSize,name:(s=e?.name)!==null&&s!==void 0?s:"unknown",encryptionType:!((a=this.engine.e2eeManager)===null||a===void 0)&&a.isDataChannelEncryptionEnabled?Ht.GCM:Ht.NONE},m=new lf({totalLength:zs((l=h.size)!==null&&l!==void 0?l:0),mimeType:h.mimeType,streamId:u,topic:h.topic,timestamp:zs(Date.now()),attributes:h.attributes,contentHeader:{case:"byteHeader",value:new E1({name:h.name})}}),g=new xn({destinationIdentities:d,value:{case:"streamHeader",value:m}});yield this.engine.sendDataPacket(g,Ke.RELIABLE);let k=0;const T=new kn,x=this.engine,C=this.log,E=new WritableStream({write(N){return I(this,void 0,void 0,function*(){const w=yield T.lock();let S=0;try{for(;S<N.byteLength;){const R=N.slice(S,S+oT),D=new xn({destinationIdentities:d,value:{case:"streamChunk",value:new uf({content:R,streamId:u,chunkIndex:zs(k)})}});yield x.sendDataPacket(D,Ke.RELIABLE),k+=1,S+=R.byteLength}}finally{w()}})},close(){return I(this,void 0,void 0,function*(){const N=new df({streamId:u}),w=new xn({destinationIdentities:d,value:{case:"streamTrailer",value:N}});yield x.sendDataPacket(w,Ke.RELIABLE)})},abort(N){C.error("Sink error:",N)}});return new cz(E,h)})}}class IR extends Y{constructor(e,n,i,r,s){super(e,i,s),this.sid=n,this.receiver=r}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?fe.Muted:fe.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=i=>{i.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(fe.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return I(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Oy)),I6()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const i=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(i){const{timestamp:r,rtpTimestamp:s}=i;s&&this.rtpTimestamp!==s&&(this.emit(fe.TimeSyncUpdate,{timestamp:r,rtpTimestamp:s}),this.rtpTimestamp=s)}};e()}}class DR extends IR{constructor(e,n,i,r,s,a){super(e,n,Y.Kind.Audio,i,a),this.monitorReceiver=()=>I(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const l=yield this.getReceiverStats();l&&this.prevStats&&this.receiver&&(this._currentBitrate=Zf(l,this.prevStats)),this.prevStats=l}),this.audioContext=r,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(e){var n;for(const i of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):i.volume=e;Yi()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Yi())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return I(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(Vg(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&Vg(e)&&e.setSinkId(this.sinkId).catch(i=>{this.log.error("Failed to set sink id on remote audio track",i,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let i=this.sourceNode;this.webAudioPluginNodes.forEach(r=>{i.connect(r),i=r}),this.gainNode=e.createGain(),i.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(fe.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(r=>{this.emit(fe.AudioPlaybackFailed,r)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return I(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(i=>{i.type==="inbound-rtp"&&(n={type:"audio",streamId:i.id,timestamp:i.timestamp,jitter:i.jitter,bytesReceived:i.bytesReceived,concealedSamples:i.concealedSamples,concealmentEvents:i.concealmentEvents,silentConcealedSamples:i.silentConcealedSamples,silentConcealmentEvents:i.silentConcealmentEvents,totalAudioEnergy:i.totalAudioEnergy,totalSamplesDuration:i.totalSamplesDuration})}),n})}}const Um=100;class uz extends IR{constructor(e,n,i,r,s){super(e,n,Y.Kind.Video,i,s),this.elementInfos=[],this.monitorReceiver=()=>I(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=Zf(a,this.prevStats)),this.prevStats=a}),this.debouncedHandleResize=_y(()=>{this.updateDimensions()},Um),this.adaptiveStreamSettings=r}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(e){super.setStreamState(e),this.log.debug("setStreamState",e),this.isAdaptiveStream&&e===Y.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?la(this._mediaStreamTrack,n):ea(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new dz(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(i=>i===e);for(const i of n)i.stopObserving();this.elementInfos=this.elementInfos.filter(i=>i!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const i of n)this.stopObservingElement(i);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return I(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,i="",r=new Map;return e.forEach(s=>{s.type==="inbound-rtp"?(i=s.codecId,n={type:"video",streamId:s.id,framesDecoded:s.framesDecoded,framesDropped:s.framesDropped,framesReceived:s.framesReceived,packetsReceived:s.packetsReceived,packetsLost:s.packetsLost,frameWidth:s.frameWidth,frameHeight:s.frameHeight,pliCount:s.pliCount,firCount:s.firCount,nackCount:s.nackCount,jitter:s.jitter,timestamp:s.timestamp,bytesReceived:s.bytesReceived,decoderImplementation:s.decoderImplementation}):s.type==="codec"&&r.set(s.id,s)}),n&&i!==""&&r.get(i)&&(n.mimeType=r.get(i).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(i=>i.element===e);for(const i of n)this.stopObservingElementInfo(i)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return I(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(e){var n,i;const r=this.elementInfos.reduce((u,d)=>Math.max(u,d.visibilityChangedAt||0),0),s=!((i=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&i!==void 0)||i?this.isInBackground:!1,a=this.elementInfos.some(u=>u.pictureInPicture),l=this.elementInfos.some(u=>u.visible)&&!s||a;if(!(this.lastVisible===l&&!e)){if(!l&&Date.now()-r<Um){rn.setTimeout(()=>{this.updateVisibility()},Um);return}this.lastVisible=l,this.emit(fe.VisibilityChanged,l,this)}}updateDimensions(){var e,n;let i=0,r=0;const s=this.getPixelDensity();for(const a of this.elementInfos){const l=a.width()*s,u=a.height()*s;l+u>i+r&&(i=l,r=u)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===i&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===r||(this.lastDimensions={width:i,height:r},this.emit(fe.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?Dw():n||(Dw()>2?2:1)}}class dz{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=i=>{var r;const{target:s,isIntersecting:a}=i;s===this.element&&(this.isIntersecting=a,this.isPiP=Ac(this.element),this.visibilityChangedAt=Date.now(),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this))},this.onEnterPiP=()=>{var i,r,s;(r=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Ac(this.element),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this)},this.onLeavePiP=()=>{var i;this.isPiP=Ac(this.element),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this)},this.element=e,this.isIntersecting=n??$g(e),this.isPiP=Dn()&&Ac(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,i;this.isIntersecting=$g(this.element),this.isPiP=Ac(this.element),this.element.handleResize=()=>{var r;(r=this.handleResize)===null||r===void 0||r.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,Lw().observe(this.element),Mw().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(i=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,i,r,s;(e=Lw())===null||e===void 0||e.unobserve(this.element),(n=Mw())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(i=window.documentPictureInPicture)===null||i===void 0||i.removeEventListener("enter",this.onEnterPiP),(s=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||s===void 0||s.removeEventListener("pagehide",this.onLeavePiP)}}function Ac(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?$g(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function $g(t,e){const n=e||window;let i=t.offsetTop,r=t.offsetLeft;const s=t.offsetWidth,a=t.offsetHeight,{hidden:l}=t,{display:u}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,i+=t.offsetTop,r+=t.offsetLeft;return i<n.pageYOffset+n.innerHeight&&r<n.pageXOffset+n.innerWidth&&i+a>n.pageYOffset&&r+s>n.pageXOffset&&!l&&u!=="none"}class gr extends er.EventEmitter{constructor(e,n,i,r){var s;super(),this.metadataMuted=!1,this.encryption=Ht.NONE,this.log=qe,this.handleMuted=()=>{this.emit(fe.Muted)},this.handleUnmuted=()=>{this.emit(fe.Unmuted)},this.log=Pr((s=r?.loggerName)!==null&&s!==void 0?s:Ri.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=i,this.source=Y.Source.Unknown}setTrack(e){this.track&&(this.track.off(fe.Muted,this.handleMuted),this.track.off(fe.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(fe.Muted,this.handleMuted),e.on(fe.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Ge(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Ht.NONE}get audioTrack(){if(Gi(this.track))return this.track}get videoTrack(){if(xs(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=Y.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===Y.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),(function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"})(t.PermissionStatus||(t.PermissionStatus={}))})(gr||(gr={}));class Kg extends gr{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,i,r){super(e,n.sid,n.name,r),this.track=void 0,this.handleTrackEnded=()=>{this.emit(fe.Ended)},this.handleCpuConstrained=()=>{this.track&&xs(this.track)&&this.emit(fe.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(i)}setTrack(e){this.track&&(this.track.off(fe.Ended,this.handleTrackEnded),this.track.off(fe.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(fe.Ended,this.handleTrackEnded),e.on(fe.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return I(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return I(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return I(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return I(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(Gi(this.track)){const n=this.track.getSourceTrackSettings(),i=new Set;return n.autoGainControl&&i.add(Qt.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&i.add(Qt.TF_ECHO_CANCELLATION),n.noiseSuppression&&i.add(Qt.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&i.add(Qt.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||i.add(Qt.TF_NO_DTX),this.track.enhancedNoiseCancellation&&i.add(Qt.TF_ENHANCED_NOISE_CANCELLATION),Array.from(i.values())}else return[]}}function Qf(t,e){return I(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:i,videoProcessor:r,optionsWithoutProcessor:s}=yR(t);let a=s.audio,l=s.video;if(i&&typeof s.audio=="object"&&(s.audio.processor=i),r&&typeof s.video=="object"&&(s.video.processor=r),t.audio&&typeof s.audio=="object"&&typeof s.audio.deviceId=="string"){const m=s.audio.deviceId;s.audio.deviceId={exact:m},n=!0,a=Object.assign(Object.assign({},s.audio),{deviceId:{ideal:m}})}if(s.video&&typeof s.video=="object"&&typeof s.video.deviceId=="string"){const m=s.video.deviceId;s.video.deviceId={exact:m},n=!0,l=Object.assign(Object.assign({},s.video),{deviceId:{ideal:m}})}s.audio===!0?s.audio={deviceId:"default"}:typeof s.audio=="object"&&s.audio!==null&&(s.audio=Object.assign(Object.assign({},s.audio),{deviceId:s.audio.deviceId||"default"})),s.video===!0?s.video={deviceId:"default"}:typeof s.video=="object"&&!s.video.deviceId&&(s.video.deviceId="default");const u=mR(s,TR,CR),d=Cy(u),h=navigator.mediaDevices.getUserMedia(d);s.audio&&(Jt.userMediaPromiseMap.set("audioinput",h),h.catch(()=>Jt.userMediaPromiseMap.delete("audioinput"))),s.video&&(Jt.userMediaPromiseMap.set("videoinput",h),h.catch(()=>Jt.userMediaPromiseMap.delete("videoinput")));try{const m=yield h;return yield Promise.all(m.getTracks().map(g=>I(this,void 0,void 0,function*(){const k=g.kind==="audio";let T=k?u.audio:u.video;(typeof T=="boolean"||!T)&&(T={});let x;const C=k?d.audio:d.video;typeof C!="boolean"&&(x=C);const E=g.getSettings().deviceId;x?.deviceId&&ss(x.deviceId)!==E?x.deviceId=E:x||(x={deviceId:E});const A=V8(g,x,e);return A.kind===Y.Kind.Video?A.source=Y.Source.Camera:A.kind===Y.Kind.Audio&&(A.source=Y.Source.Microphone),A.mediaStream=m,Gi(A)&&i?yield A.setProcessor(i):xs(A)&&r&&(yield A.setProcessor(r)),A})))}catch(m){if(!n)throw m;return Qf(Object.assign(Object.assign({},t),{audio:a,video:l}),e)}})}function fz(t){return I(this,void 0,void 0,function*(){return(yield Qf({audio:!1,video:!0}))[0]})}function hz(t){return I(this,void 0,void 0,function*(){return(yield Qf({audio:!0,video:!1}))[0]})}var ns;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(ns||(ns={}));function pz(t){switch(t){case Fc.EXCELLENT:return ns.Excellent;case Fc.GOOD:return ns.Good;case Fc.POOR:return ns.Poor;case Fc.LOST:return ns.Lost;default:return ns.Unknown}}class MR extends er.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===xl.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===oa.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,i,r,s,a){let l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:xl.STANDARD;var u;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ns.Unknown,this.log=qe,this.log=Pr((u=a?.loggerName)!==null&&u!==void 0?u:Ri.Participant),this.loggerOptions=a,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=i,this.metadata=r,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=l,this._attributes=s??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new ni,this.once(te.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(Y.Source.Camera);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(Y.Source.Microphone);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(Y.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===oa.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==oa.ACTIVE&&this.emit(te.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,i=this.metadata;this.metadata=e,n&&this.emit(te.ParticipantMetadataChanged,i)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(te.ParticipantNameChanged,e)}_setAttributes(e){const n=D6(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(te.AttributesChanged,n)}setPermissions(e){var n,i,r,s,a,l;const u=this.permissions,d=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((i=this.permissions)===null||i===void 0?void 0:i.canSubscribe)||e.canPublishData!==((r=this.permissions)===null||r===void 0?void 0:r.canPublishData)||e.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||e.recorder!==((a=this.permissions)===null||a===void 0?void 0:a.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((h,m)=>{var g;return h!==((g=this.permissions)===null||g===void 0?void 0:g.canPublishSources[m])})||e.canSubscribeMetrics!==((l=this.permissions)===null||l===void 0?void 0:l.canSubscribeMetrics);return this.permissions=e,d&&this.emit(te.ParticipantPermissionsChanged,u),d}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(te.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=pz(e),n!==this._connectionQuality&&this.emit(te.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>Gi(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(fe.Muted,()=>{this.emit(te.TrackMuted,e)}),e.on(fe.Unmuted,()=>{this.emit(te.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case Y.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case Y.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function mz(t){var e,n,i;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new N1({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(i=t.allowAll)!==null&&i!==void 0?i:!1,trackSids:t.allowedTrackSids||[]})}class gz extends MR{constructor(e,n,i,r,s,a){super(e,n,void 0,void 0,void 0,{loggerName:r.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Ht.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new ni)},this.handleReconnected=()=>{var l,u;(u=(l=this.reconnectFuture)===null||l===void 0?void 0:l.resolve)===null||u===void 0||u.call(l),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var l,u,d,h,m,g;this.reconnectFuture&&(this.reconnectFuture.promise.catch(k=>this.log.warn(k.message,this.logContext)),(u=(l=this.reconnectFuture)===null||l===void 0?void 0:l.reject)===null||u===void 0||u.call(l,new Error("Got disconnected during reconnection attempt")),this.reconnectFuture=void 0),this.signalConnectedFuture&&((h=(d=this.signalConnectedFuture).reject)===null||h===void 0||h.call(d,new Error("Got disconnected without signal connected")),this.signalConnectedFuture=void 0),(g=(m=this.activeAgentFuture)===null||m===void 0?void 0:m.reject)===null||g===void 0||g.call(m,new Error("Got disconnected without active agent present")),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=l=>{var u,d;l.participant&&this.updateInfo(l.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new ni),(d=(u=this.signalConnectedFuture).resolve)===null||d===void 0||d.call(u)},this.handleSignalRequestResponse=l=>{const{requestId:u,reason:d,message:h}=l,m=this.pendingSignalRequests.get(u);m&&(d!==ky.OK&&m.reject(new Rw(h,d)),this.pendingSignalRequests.delete(u))},this.handleDataPacket=l=>{switch(l.value.case){case"rpcResponse":let u=l.value.value,d=null,h=null;u.value.case==="payload"?d=u.value.value:u.value.case==="error"&&(h=_t.fromProto(u.value.value)),this.handleIncomingRpcResponse(u.requestId,d,h);break;case"rpcAck":let m=l.value.value;this.handleIncomingRpcAck(m.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(l=>mz(l)))},this.onTrackUnmuted=l=>{this.onTrackMuted(l,l.isUpstreamPaused)},this.onTrackMuted=(l,u)=>{if(u===void 0&&(u=!0),!l.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Ge(l)));return}this.engine.updateMuteStatus(l.sid,u)},this.onTrackUpstreamPaused=l=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Ge(l))),this.onTrackMuted(l,!0)},this.onTrackUpstreamResumed=l=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Ge(l))),this.onTrackMuted(l,l.isMuted)},this.onTrackFeatureUpdate=l=>{const u=this.audioTrackPublications.get(l.sid);if(!u){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(l.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(u.trackSid,u.getTrackFeatures())},this.onTrackCpuConstrained=(l,u)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),Ge(u))),this.emit(te.LocalTrackCpuConstrained,l,u)},this.handleSubscribedQualityUpdate=l=>I(this,void 0,void 0,function*(){var u,d,h,m,g;if(!(!((g=this.roomOptions)===null||g===void 0)&&g.dynacast))return;const k=this.videoTrackPublications.get(l.trackSid);if(!k){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:l.trackSid}));return}if(!k.videoTrack)return;const T=yield k.videoTrack.setPublishingCodecs(l.subscribedCodecs);try{for(var x=!0,C=br(T),E;E=yield C.next(),u=E.done,!u;x=!0){m=E.value,x=!1;const A=m;R6(A)&&(this.log.debug("publish ".concat(A," for ").concat(k.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Ge(k))),yield this.publishAdditionalCodecForTrack(k.videoTrack,A,k.options))}}catch(A){d={error:A}}finally{try{!x&&!u&&(h=C.return)&&(yield h.call(C))}finally{if(d)throw d.error}}}),this.handleLocalTrackUnpublished=l=>{const u=this.trackPublications.get(l.trackSid);if(!u){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:l.trackSid}));return}this.unpublishTrack(u.track)},this.handleTrackEnded=l=>I(this,void 0,void 0,function*(){if(l.source===Y.Source.ScreenShare||l.source===Y.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Ge(l))),this.unpublishTrack(l);else if(l.isUserProvided)yield l.mute();else if(pr(l)||Jr(l))try{if(Dn())try{const u=yield navigator?.permissions.query({name:l.source===Y.Source.Camera?"camera":"microphone"});if(u&&u.state==="denied")throw this.log.warn("user has revoked access to ".concat(l.source),Object.assign(Object.assign({},this.logContext),Ge(l))),u.onchange=()=>{u.state!=="denied"&&(l.isMuted||l.restartTrack(),u.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}l.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Ge(l))),pr(l)?yield l.restartTrack({deviceId:"default"}):yield l.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Ge(l))),yield l.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=i,this.roomOptions=r,this.setupEngine(i),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=s,this.roomOutgoingDataStreamManager=a}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Ht.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(pe.RemoteMute,(i,r)=>{const s=this.trackPublications.get(i);!s||!s.track||(r?s.mute():s.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(pe.Connected,this.handleReconnected).on(pe.SignalConnected,this.handleSignalConnected).on(pe.SignalRestarted,this.handleReconnected).on(pe.SignalResumed,this.handleReconnected).on(pe.Restarting,this.handleReconnecting).on(pe.Resuming,this.handleReconnecting).on(pe.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(pe.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(pe.Closing,this.handleClosing).on(pe.SignalRequestResponse,this.handleSignalRequestResponse).on(pe.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return I(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return I(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return I(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return I(this,arguments,void 0,function(n){var i=this;let{metadata:r,name:s,attributes:a}=n;return(function*(){return new Promise((l,u)=>I(i,void 0,void 0,function*(){var d,h;try{let m=!1;const g=yield this.engine.client.sendUpdateLocalMetadata((d=r??this.metadata)!==null&&d!==void 0?d:"",(h=s??this.name)!==null&&h!==void 0?h:"",a),k=performance.now();for(this.pendingSignalRequests.set(g,{resolve:l,reject:T=>{u(T),m=!0},values:{name:s,metadata:r,attributes:a}});performance.now()-k<5e3&&!m;){if((!s||this.name===s)&&(!r||this.metadata===r)&&(!a||Object.entries(a).every(T=>{let[x,C]=T;return this.attributes[x]===C||C===""&&!this.attributes[x]}))){this.pendingSignalRequests.delete(g),l();return}yield sn(50)}u(new Rw("Request to update local metadata timed out","TimeoutError"))}catch(m){m instanceof Error&&u(m)}}))})()})}setCameraEnabled(e,n,i){return this.setTrackEnabled(Y.Source.Camera,e,n,i)}setMicrophoneEnabled(e,n,i){return this.setTrackEnabled(Y.Source.Microphone,e,n,i)}setScreenShareEnabled(e,n,i){return this.setTrackEnabled(Y.Source.ScreenShare,e,n,i)}setE2EEEnabled(e){return I(this,void 0,void 0,function*(){this.encryptionType=e?Ht.GCM:Ht.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,i,r){return I(this,void 0,void 0,function*(){var s,a;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let l=this.getTrackPublication(e);if(n)if(l)yield l.unmute();else{let u;if(this.pendingPublishing.has(e)){const d=yield this.waitForPendingPublicationOfSource(e);return d||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield d?.unmute(),d}this.pendingPublishing.add(e);try{switch(e){case Y.Source.Camera:u=yield this.createTracks({video:(s=i)!==null&&s!==void 0?s:!0});break;case Y.Source.Microphone:u=yield this.createTracks({audio:(a=i)!==null&&a!==void 0?a:!0});break;case Y.Source.ScreenShare:u=yield this.createScreenTracks(Object.assign({},i));break;default:throw new xr(e)}}catch(d){throw u?.forEach(h=>{h.stop()}),d instanceof Error&&this.emit(te.MediaDevicesError,d,jg(e)),this.pendingPublishing.delete(e),d}for(const d of u){const h=Object.assign(Object.assign({},this.roomOptions.publishDefaults),i);e===Y.Source.Microphone&&Gi(d)&&h.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),d.startPreConnectBuffer())}try{const d=[];for(const m of u)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Ge(m))),d.push(this.publishTrack(m,r));[l]=yield Promise.all(d)}catch(d){throw u?.forEach(h=>{h.stop()}),d}finally{this.pendingPublishing.delete(e)}}else if(!l?.track&&this.pendingPublishing.has(e)&&(l=yield this.waitForPendingPublicationOfSource(e),l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),l&&l.track)if(e===Y.Source.ScreenShare){l=yield this.unpublishTrack(l.track);const u=this.getTrackPublication(Y.Source.ScreenShareAudio);u&&u.track&&this.unpublishTrack(u.track)}else yield l.mute();return l})}enableCameraAndMicrophone(){return I(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Y.Source.Camera)||this.pendingPublishing.has(Y.Source.Microphone))){this.pendingPublishing.add(Y.Source.Camera),this.pendingPublishing.add(Y.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(Y.Source.Camera),this.pendingPublishing.delete(Y.Source.Microphone)}}})}createTracks(e){return I(this,void 0,void 0,function*(){var n,i;e??(e={});const r=mR(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(i=this.roomOptions)===null||i===void 0?void 0:i.videoCaptureDefaults);try{return(yield Qf(r,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(l=>(Gi(l)&&(this.microphoneError=void 0,l.setAudioContext(this.audioContext),l.source=Y.Source.Microphone,this.emit(te.AudioStreamAcquired)),xs(l)&&(this.cameraError=void 0,l.source=Y.Source.Camera),l))}catch(s){throw s instanceof Error&&(e.audio&&(this.microphoneError=s),e.video&&(this.cameraError=s)),s}})}createScreenTracks(e){return I(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new wy("getDisplayMedia not supported");e.resolution===void 0&&!W6()&&(e.resolution=Ty.h1080fps30.resolution);const n=N6(e),i=yield navigator.mediaDevices.getDisplayMedia(n),r=i.getVideoTracks();if(r.length===0)throw new xr("no video track found");const s=new hf(r[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=Y.Source.ScreenShare,e.contentHint&&(s.mediaStreamTrack.contentHint=e.contentHint);const a=[s];if(i.getAudioTracks().length>0){this.emit(te.AudioStreamAcquired);const l=new ff(i.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});l.source=Y.Source.ScreenShareAudio,a.push(l)}return a})}publishTrack(e,n){return I(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return I(this,arguments,void 0,function(i,r){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return(function*(){var l,u,d,h;pr(i)&&i.setAudioContext(s.audioContext),yield(l=s.reconnectFuture)===null||l===void 0?void 0:l.promise,s.republishPromise&&!a&&(yield s.republishPromise),ua(i)&&s.pendingPublishPromises.has(i)&&(yield s.pendingPublishPromises.get(i));let m;if(i instanceof MediaStreamTrack)m=i.getConstraints();else{m=i.constraints;let E;switch(i.source){case Y.Source.Microphone:E="audioinput";break;case Y.Source.Camera:E="videoinput"}E&&s.activeDeviceMap.has(E)&&(m=Object.assign(Object.assign({},m),{deviceId:s.activeDeviceMap.get(E)}))}if(i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new ff(i,m,!0,s.audioContext,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;case"video":i=new hf(i,m,!0,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;default:throw new xr("unsupported MediaStreamTrack kind ".concat(i.kind))}else i.updateLoggerOptions({loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});let g;if(s.trackPublications.forEach(E=>{E.track&&E.track===i&&(g=E)}),g)return s.log.warn("track has already been published, skipping",Object.assign(Object.assign({},s.logContext),Ge(g))),g;const k=Object.assign(Object.assign({},s.roomOptions.publishDefaults),r),T="channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2,x=(u=k.forceStereo)!==null&&u!==void 0?u:T;x&&(k.dtx===void 0&&s.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},s.logContext),Ge(i))),k.red===void 0&&s.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(d=k.dtx)!==null&&d!==void 0||(k.dtx=!1),(h=k.red)!==null&&h!==void 0||(k.red=!1)),!H6()&&s.roomOptions.e2ee&&(s.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},s.logContext)),k.simulcast=!1),k.source&&(i.source=k.source);const C=new Promise((E,A)=>I(s,void 0,void 0,function*(){try{if(this.engine.client.currentState!==at.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:Ge(i)}));let N=!1;const w=setTimeout(()=>{N=!0,i.stop(),A(new _w("publishing rejected as engine not connected within timeout",408))},15e3);if(yield this.waitUntilEngineConnected(),clearTimeout(w),N)return;const S=yield this.publish(i,k,x);E(S)}else try{const N=yield this.publish(i,k,x);E(N)}catch(N){A(N)}}catch(N){A(N)}}));s.pendingPublishPromises.set(i,C);try{return yield C}catch(E){throw E}finally{s.pendingPublishPromises.delete(i)}})()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new ni),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),Ge(e))),!1;const{canPublish:n,canPublishSources:i}=this.permissions;return n&&(i.length===0||i.map(r=>M6(r)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),Ge(e))),!1)}publish(e,n,i){return I(this,void 0,void 0,function*(){var r,s,a,l,u,d,h,m,g,k;if(!this.hasPermissionsToPublish(e))throw new _w("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(V=>ua(e)&&V.source===e.source)&&e.source!==Y.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),Ge(e))),n.stopMicTrackOnMute&&Gi(e)&&(e.stopOnMute=!0),e.source===Y.Source.ScreenShare&&to()&&(n.simulcast=!1),n.videoCodec==="av1"&&!V6()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!B6()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=Wg),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(V=>n.videoCodec===Zc(V.mime))||(n.videoCodec=Zc(this.enabledPublishVideoCodecs[0].mime)));const x=n.videoCodec;e.on(fe.Muted,this.onTrackMuted),e.on(fe.Unmuted,this.onTrackUnmuted),e.on(fe.Ended,this.handleTrackEnded),e.on(fe.UpstreamPaused,this.onTrackUpstreamPaused),e.on(fe.UpstreamResumed,this.onTrackUpstreamResumed),e.on(fe.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const C=[],E=!(!((r=n.dtx)!==null&&r!==void 0)||r),A=e.getSourceTrackSettings();A.autoGainControl&&C.push(Qt.TF_AUTO_GAIN_CONTROL),A.echoCancellation&&C.push(Qt.TF_ECHO_CANCELLATION),A.noiseSuppression&&C.push(Qt.TF_NOISE_SUPPRESSION),A.channelCount&&A.channelCount>1&&C.push(Qt.TF_STEREO),E&&C.push(Qt.TF_NO_DTX),pr(e)&&e.hasPreConnectBuffer&&C.push(Qt.TF_PRECONNECT_BUFFER);const N=new kl({cid:e.mediaStreamTrack.id,name:n.name,type:Y.kindToProto(e.kind),muted:e.isMuted,source:Y.sourceToProto(e.source),disableDtx:E,encryption:this.encryptionType,stereo:i,disableRed:this.isE2EEEnabled||!(!((s=n.red)!==null&&s!==void 0)||s),stream:n?.stream,backupCodecPolicy:n?.backupCodecPolicy,audioFeatures:C});let w;if(e.kind===Y.Kind.Video){let V={width:0,height:0};try{V=yield e.waitForDimensions()}catch{const W=(l=(a=this.roomOptions.videoCaptureDefaults)===null||a===void 0?void 0:a.resolution)!==null&&l!==void 0?l:wl.h720.resolution;V={width:W.width,height:W.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Ge(e)),{dims:V}))}N.width=V.width,N.height=V.height,Jr(e)&&(ki(x)&&(e.source===Y.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),Ge(e))))),n.scalabilityMode=(u=n.scalabilityMode)!==null&&u!==void 0?u:"L3T3_KEY"),N.simulcastCodecs=[new Cg({codec:x,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:Wg}),n.backupCodec&&x!==n.backupCodec.codec&&N.encryption===Ht.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),N.simulcastCodecs.push(new Cg({codec:n.backupCodec.codec,cid:""})))),w=Hg(e.source===Y.Source.ScreenShare,N.width,N.height,n),N.layers=nT(N.width,N.height,w,ki(n.videoCodec))}else e.kind===Y.Kind.Audio&&(w=[{maxBitrate:(d=n.audioPreset)===null||d===void 0?void 0:d.maxBitrate,priority:(m=(h=n.audioPreset)===null||h===void 0?void 0:h.priority)!==null&&m!==void 0?m:"high",networkPriority:(k=(g=n.audioPreset)===null||g===void 0?void 0:g.priority)!==null&&k!==void 0?k:"high"}]);if(!this.engine||this.engine.isClosed)throw new Wt("cannot publish track when not connected");const S=()=>I(this,void 0,void 0,function*(){var V,B,W;if(!this.engine.pcManager)throw new Wt("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,w),this.emit(te.LocalSenderCreated,e.sender,e),Jr(e)&&((V=n.degradationPreference)!==null&&V!==void 0||(n.degradationPreference=Q8(e)),e.setDegradationPreference(n.degradationPreference)),w)if(to()&&e.kind===Y.Kind.Audio){let H;for(const ie of this.engine.pcManager.publisher.getTransceivers())if(ie.sender===e.sender){H=ie;break}H&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:H,codec:"opus",maxbr:!((B=w[0])===null||B===void 0)&&B.maxBitrate?w[0].maxBitrate/1e3:0})}else e.codec&&ki(e.codec)&&(!((W=w[0])===null||W===void 0)&&W.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:N.cid,codec:e.codec,maxbr:w[0].maxBitrate/1e3});yield this.engine.negotiate()});let R;const D=new Promise((V,B)=>I(this,void 0,void 0,function*(){var W;try{R=yield this.engine.addTrack(N),V(R)}catch(H){e.sender&&(!((W=this.engine.pcManager)===null||W===void 0)&&W.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(ie=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),Ge(e)),{error:ie}))})),B(H)}}));if(this.enabledPublishVideoCodecs.length>0)R=(yield Promise.all([D,S()]))[0];else{R=yield D;let V;if(R.codecs.forEach(B=>{V===void 0&&(V=B.mimeType)}),V&&e.kind===Y.Kind.Video){const B=Zc(V);B!==x&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Ge(e)),{codec:B})),n.videoCodec=B,w=Hg(e.source===Y.Source.ScreenShare,N.width,N.height,n))}yield S()}const j=new Kg(e.kind,R,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(j.on(fe.CpuConstrained,V=>this.onTrackCpuConstrained(V,j)),j.options=n,e.sid=R.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:w,trackInfo:R})),Jr(e)?e.startMonitor(this.engine.client):pr(e)&&e.startMonitor(),this.addTrackPublication(j),this.emit(te.LocalTrackPublished,j),pr(e)&&R.audioFeatures.includes(Qt.TF_PRECONNECT_BUFFER)){const V=e.getPreConnectBuffer(),B=e.getPreConnectBufferMimeType();this.on(te.LocalTrackSubscribed,W=>{if(W.trackSid===R.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),Ge(e))),e.stopPreConnectBuffer()}}),V&&new Promise((H,ie)=>I(this,void 0,void 0,function*(){var ee,Ce,ve,he,Z,le;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),Ge(e)));const Re=setTimeout(()=>{ie(new Error("agent not active within 10 seconds"))},1e4),Me=yield this.waitUntilActiveAgentPresent();clearTimeout(Re),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),Ge(e)));const Be=yield this.streamBytes({name:"preconnect-buffer",mimeType:B,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[Me.identity],attributes:{trackId:j.trackSid,sampleRate:String((Z=A.sampleRate)!==null&&Z!==void 0?Z:"48000"),channels:String((le=A.channelCount)!==null&&le!==void 0?le:"1")}});try{for(var oe=!0,F=br(V),X;X=yield F.next(),ee=X.done,!ee;oe=!0){he=X.value,oe=!1;const Ue=he;yield Be.write(Ue)}}catch(Ue){Ce={error:Ue}}finally{try{!oe&&!ee&&(ve=F.return)&&(yield ve.call(F))}finally{if(Ce)throw Ce.error}}yield Be.close(),H()}catch(Re){ie(Re)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),Ge(e)))}).catch(H=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),Ge(e)),{error:H}))})}return j})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,i){return I(this,void 0,void 0,function*(){var r;if(this.encryptionType!==Ht.NONE)return;let s;if(this.trackPublications.forEach(k=>{k.track&&k.track===e&&(s=k)}),!s)throw new xr("track is not published");if(!Jr(e))throw new xr("track is not a video track");const a=Object.assign(Object.assign({},(r=this.roomOptions)===null||r===void 0?void 0:r.publishDefaults),i),l=K8(e,n,a);if(!l){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Ge(e)));return}const u=e.addSimulcastTrack(n,l);if(!u)return;const d=new kl({cid:u.mediaStreamTrack.id,type:Y.kindToProto(e.kind),muted:e.isMuted,source:Y.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:a.videoCodec,cid:u.mediaStreamTrack.id}]});if(d.layers=nT(d.width,d.height,l),!this.engine||this.engine.isClosed)throw new Wt("cannot publish track when not connected");const h=()=>I(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,u,a,l),yield this.engine.negotiate()}),g=(yield Promise.all([this.engine.addTrack(d),h()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:l,trackInfo:g}))})}unpublishTrack(e,n){return I(this,void 0,void 0,function*(){var i,r;if(ua(e)){const d=this.pendingPublishPromises.get(e);d&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),Ge(e))),yield d)}const s=this.getPublicationForTrack(e),a=s?Ge(s):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),a)),!s||!s.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),a));return}e=s.track,e.off(fe.Muted,this.onTrackMuted),e.off(fe.Unmuted,this.onTrackUnmuted),e.off(fe.Ended,this.handleTrackEnded),e.off(fe.UpstreamPaused,this.onTrackUpstreamPaused),e.off(fe.UpstreamResumed,this.onTrackUpstreamResumed),e.off(fe.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(r=(i=this.roomOptions)===null||i===void 0?void 0:i.stopLocalTrackOnUnpublish)!==null&&r!==void 0?r:!0),n?e.stop():e.stopMonitor();let l=!1;const u=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Ct.FAILED&&u)try{for(const d of this.engine.pcManager.publisher.getTransceivers())d.sender===u&&(d.direction="inactive",l=!0);if(this.engine.removeTrack(u)&&(l=!0),Jr(e)){for(const[,d]of e.simulcastCodecs)d.sender&&(this.engine.removeTrack(d.sender)&&(l=!0),d.sender=void 0);e.simulcastCodecs.clear()}}catch(d){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),a),{error:d}))}switch(this.trackPublications.delete(s.trackSid),s.kind){case Y.Kind.Audio:this.audioTrackPublications.delete(s.trackSid);break;case Y.Kind.Video:this.videoTrackPublications.delete(s.trackSid);break}return this.emit(te.LocalTrackUnpublished,s),s.setTrack(void 0),l&&(yield this.engine.negotiate()),s})}unpublishTracks(e){return I(this,void 0,void 0,function*(){return(yield Promise.all(e.map(i=>this.unpublishTrack(i)))).filter(i=>!!i)})}republishAllTracks(e){return I(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){i.republishPromise&&(yield i.republishPromise),i.republishPromise=new Promise((s,a)=>I(i,void 0,void 0,function*(){try{const l=[];this.trackPublications.forEach(u=>{u.track&&(n&&(u.options=Object.assign(Object.assign({},u.options),n)),l.push(u))}),yield Promise.all(l.map(u=>I(this,void 0,void 0,function*(){const d=u.track;yield this.unpublishTrack(d,!1),r&&!d.isMuted&&d.source!==Y.Source.ScreenShare&&d.source!==Y.Source.ScreenShareAudio&&(pr(d)||Jr(d))&&!d.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:u.trackSid})),yield d.restartTrack()),yield this.publishOrRepublishTrack(d,u.options,!0)}))),s()}catch(l){a(l)}finally{this.republishPromise=void 0}})),yield i.republishPromise})()})}publishData(e){return I(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){const s=r.reliable?Ke.RELIABLE:Ke.LOSSY,a=r.destinationIdentities,l=r.topic;let u=new fy({participantIdentity:i.identity,payload:n,destinationIdentities:a,topic:l});const d=new xn({kind:s,value:{case:"user",value:u}});yield i.engine.sendDataPacket(d,s)})()})}publishDtmf(e,n){return I(this,void 0,void 0,function*(){const i=new xn({kind:Ke.RELIABLE,value:{case:"sipDtmf",value:new g1({code:e,digit:n})}});yield this.engine.sendDataPacket(i,Ke.RELIABLE)})}sendChatMessage(e,n){return I(this,void 0,void 0,function*(){const i={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n?.attachments},r=new xn({value:{case:"chatMessage",value:new cf(Object.assign(Object.assign({},i),{timestamp:vt.parse(i.timestamp)}))}});return yield this.engine.sendDataPacket(r,Ke.RELIABLE),this.emit(te.ChatMessage,i),i})}editChatMessage(e,n){return I(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),r=new xn({value:{case:"chatMessage",value:new cf(Object.assign(Object.assign({},i),{timestamp:vt.parse(i.timestamp),editTimestamp:vt.parse(i.editTimestamp)}))}});return yield this.engine.sendDataPacket(r,Ke.RELIABLE),this.emit(te.ChatMessage,i),i})}sendText(e,n){return I(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(e,n)})}streamText(e){return I(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(e)})}sendFile(e,n){return I(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(e,n)})}streamBytes(e){return I(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(e)})}performRpc(e){return I(this,arguments,void 0,function(n){var i=this;let{destinationIdentity:r,method:s,payload:a,responseTimeout:l=15e3}=n;return(function*(){return new Promise((h,m)=>I(i,void 0,void 0,function*(){var g,k,T,x;if(Ny(a)>PR){m(_t.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((k=(g=this.engine.latestJoinResponse)===null||g===void 0?void 0:g.serverInfo)===null||k===void 0)&&k.version&&Ai((x=(T=this.engine.latestJoinResponse)===null||T===void 0?void 0:T.serverInfo)===null||x===void 0?void 0:x.version,"1.8.0")<0){m(_t.builtIn("UNSUPPORTED_SERVER"));return}const C=Math.max(l,8e3),E=crypto.randomUUID();yield this.publishRpcRequest(r,E,s,a,C);const A=setTimeout(()=>{this.pendingAcks.delete(E),m(_t.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(E),clearTimeout(N)},7e3);this.pendingAcks.set(E,{resolve:()=>{clearTimeout(A)},participantIdentity:r});const N=setTimeout(()=>{this.pendingResponses.delete(E),m(_t.builtIn("RESPONSE_TIMEOUT"))},l);this.pendingResponses.set(E,{resolve:(w,S)=>{clearTimeout(N),this.pendingAcks.has(E)&&(this.log.warn("RPC response received before ack",E),this.pendingAcks.delete(E),clearTimeout(A)),S?m(S):h(w??"")},participantIdentity:r})}))})()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,i){const r=this.pendingResponses.get(e);r?(r.resolve(n,i),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,i,r,s){return I(this,void 0,void 0,function*(){const a=new xn({destinationIdentities:[e],kind:Ke.RELIABLE,value:{case:"rpcRequest",value:new hy({id:n,method:i,payload:r,responseTimeoutMs:s,version:1})}});yield this.engine.sendDataPacket(a,Ke.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:i}]of this.pendingAcks)i===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:i,resolve:r}]of this.pendingResponses)i===e&&(r(null,_t.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var i,r;const s=this.trackPublications.get(n.sid);if(s){const a=s.isMuted||((r=(i=s.track)===null||i===void 0?void 0:i.isUpstreamPaused)!==null&&r!==void 0?r:!1);a!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Ge(s)),{mutedOnServer:a})),this.engine.client.sendMuteTrack(n.sid,a))}}),!0):!1}setActiveAgent(e){var n,i,r,s;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(i=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||i===void 0||i.call(n,e):(s=(r=this.activeAgentFuture)===null||r===void 0?void 0:r.reject)===null||s===void 0||s.call(r,new Error("Agent disconnected")),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new ni),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(i=>{const r=i.track;r&&(e instanceof MediaStreamTrack?(pr(r)||Jr(r))&&r.mediaStreamTrack===e&&(n=i):e===r&&(n=i))}),n}waitForPendingPublicationOfSource(e){return I(this,void 0,void 0,function*(){const i=Date.now();for(;Date.now()<i+1e4;){const r=Array.from(this.pendingPublishPromises.entries()).find(s=>{let[a]=s;return a.source===e});if(r)return r[1];yield sn(20)}})}}class LR extends gr{constructor(e,n,i,r){super(e,n.sid,n.name,r),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=s=>{this.setTrack(void 0),this.emit(fe.Ended,s)},this.handleVisibilityChange=s=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(s),this.logContext),this.visible=s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{this.log.debug("adaptivestream video dimensions ".concat(s.width,"x").concat(s.height),this.logContext),this.videoDimensionsAdaptiveStream=s,this.emitTrackUpdate()},this.subscribed=i,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const r=new $f({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new y1({participantSid:"",trackSids:[this.trackSid]})]});this.emit(fe.UpdateSubscription,r),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(i)}get subscriptionStatus(){return this.subscribed===!1?gr.SubscriptionStatus.Unsubscribed:super.isSubscribed?gr.SubscriptionStatus.Subscribed:gr.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?gr.PermissionStatus.Allowed:gr.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,i;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((i=this.requestedVideoDimensions)===null||i===void 0?void 0:i.height)===e.height||(Om(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&Om(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:Bn.HIGH}setTrack(e){const n=this.subscriptionStatus,i=this.permissionStatus,r=this.track;r!==e&&(r&&(r.off(fe.VideoDimensionsChanged,this.handleVideoDimensionsChange),r.off(fe.VisibilityChanged,this.handleVisibilityChange),r.off(fe.Ended,this.handleEnded),r.detach(),r.stopMonitor(),this.emit(fe.Unsubscribed,r)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(fe.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(fe.VisibilityChanged,this.handleVisibilityChange),e.on(fe.Ended,this.handleEnded),this.emit(fe.Subscribed,e)),this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(fe.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?fe.Muted:fe.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(fe.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(fe.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Om(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new P1({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===Y.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)Nw(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const i=L6(this.trackInfo,this.requestedMaxQuality);i&&Nw(this.videoDimensionsAdaptiveStream,i)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:Bn.HIGH})),e.quality=Bn.HIGH)}this.emit(fe.UpdateSettings,e)}}class pf extends MR{static fromParticipantInfo(e,n,i){return new pf(e,n.sid,n.identity,n.name,n.metadata,n.attributes,i,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,i,r,s,a,l){let u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:xl.STANDARD;super(n,i||"",r,s,a,l,u),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(fe.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),Ge(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(fe.UpdateSubscription,n=>{n.participantTracks.forEach(i=>{i.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(fe.SubscriptionPermissionChanged,n=>{this.emit(te.TrackSubscriptionPermissionChanged,e,n)}),e.on(fe.SubscriptionStatusChanged,n=>{this.emit(te.TrackSubscriptionStatusChanged,e,n)}),e.on(fe.Subscribed,n=>{this.emit(te.TrackSubscribed,n,e)}),e.on(fe.Unsubscribed,n=>{this.emit(te.TrackUnsubscribed,n,e)}),e.on(fe.SubscriptionFailed,n=>{this.emit(te.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Y.Source.Microphone;this.volumeMap.set(n,e);const i=this.getTrackPublication(n);i&&i.track&&i.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,i,r,s,a){let l=this.getTrackPublicationBySid(n);if(l||n.startsWith("TR")||this.trackPublications.forEach(h=>{!l&&e.kind===h.kind.toString()&&(l=h)}),!l){if(a===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(te.TrackSubscriptionFailed,n);return}a===void 0&&(a=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,i,r,s,a-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Ge(l))),this.emit(te.TrackSubscriptionFailed,n);return}const u=e.kind==="video";let d;return u?d=new uz(e,n,r,s):d=new DR(e,n,r,this.audioContext,this.audioOutput),d.source=l.source,d.isMuted=l.isMuted,d.setMediaStream(i),d.start(),l.setTrack(d),this.volumeMap.has(l.source)&&Bg(d)&&Gi(d)&&d.setVolume(this.volumeMap.get(l.source)),l}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,i=new Map;return e.tracks.forEach(r=>{var s,a;let l=this.getTrackPublicationBySid(r.sid);if(l)l.updateInfo(r);else{const u=Y.kindFromProto(r.type);if(!u)return;l=new LR(u,r,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(a=this.loggerOptions)===null||a===void 0?void 0:a.loggerName}),l.updateInfo(r),i.set(r.sid,l);const d=Array.from(this.trackPublications.values()).find(h=>h.source===l?.source);d&&l.source!==Y.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(l.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Ge(d),newTrack:Ge(l)})),this.addTrackPublication(l)}n.set(r.sid,l)}),this.trackPublications.forEach(r=>{n.has(r.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Ge(r))),this.unpublishTrack(r.trackSid,!0))}),i.forEach(r=>{this.emit(te.TrackPublished,r)}),!0}unpublishTrack(e,n){const i=this.trackPublications.get(e);if(!i)return;const{track:r}=i;switch(r&&(r.stop(),i.setTrack(void 0)),this.trackPublications.delete(e),i.kind){case Y.Kind.Audio:this.audioTrackPublications.delete(e);break;case Y.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(te.TrackUnpublished,i)}setAudioOutput(e){return I(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(i=>{var r;Gi(i.track)&&Bg(i.track)&&n.push(i.track.setSinkId((r=e.deviceId)!==null&&r!==void 0?r:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:i})),super.emit(e,...i)}}var Ye;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(Ye||(Ye={}));const vz=4*1e3;class Ta extends er.EventEmitter{get hasE2EESetup(){return this.e2eeManager!==void 0}constructor(e){var n,i,r,s;if(super(),n=this,this.state=Ye.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=qe,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(a,l,u)=>I(this,void 0,void 0,function*(){var d;if(!z6())throw Yi()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const h=yield this.disconnectLock.lock();if(this.state===Ye.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),h(),Promise.resolve();if(this.connectFuture)return h(),this.connectFuture.promise;this.setAndEmitConnectionState(Ye.Connecting),((d=this.regionUrlProvider)===null||d===void 0?void 0:d.getServerUrl().toString())!==SR(a)&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),wa(new URL(a))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new tt(a,l):this.regionUrlProvider.updateToken(l),this.regionUrlProvider.fetchRegionSettings().then(k=>{var T;(T=this.regionUrlProvider)===null||T===void 0||T.setServerReportedRegions(k)}).catch(k=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:k}))}));const m=(k,T,x)=>I(this,void 0,void 0,function*(){var C,E;this.abortController&&this.abortController.abort();const A=new AbortController;this.abortController=A,h?.();try{if(yield da.getInstance().getBackOffPromise(a),A.signal.aborted)throw Fe.cancelled("Connection attempt aborted");yield this.attemptConnection(x??a,l,u,A),this.abortController=void 0,k()}catch(N){if(this.regionUrlProvider&&N instanceof Fe&&N.reason!==ht.Cancelled&&N.reason!==ht.NotAllowed){let w=null;try{this.log.debug("Fetching next region"),w=yield this.regionUrlProvider.getNextBestRegionUrl((C=this.abortController)===null||C===void 0?void 0:C.signal)}catch(S){if(S instanceof Fe&&(S.status===401||S.reason===ht.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),T(S);return}}[ht.InternalError,ht.ServerUnreachable,ht.Timeout].includes(N.reason)&&(this.log.debug("Adding failed connection attempt to back off"),da.getInstance().addFailedConnectionAttempt(a)),w&&!(!((E=this.abortController)===null||E===void 0)&&E.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(N.message,". Retrying with another region: ").concat(w),this.logContext),this.recreateEngine(),yield m(k,T,w)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Fw(N)),T(N))}else{let w=Ti.UNKNOWN_REASON;N instanceof Fe&&(w=Fw(N)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,w),T(N)}}}),g=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new ni((k,T)=>{m(k,T,g)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(a,l,u,d,h,m)=>I(this,void 0,void 0,function*(){var g,k,T;const x=yield u.join(a,l,{autoSubscribe:d.autoSubscribe,adaptiveStream:typeof h.adaptiveStream=="object"?!0:h.adaptiveStream,maxRetries:d.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:d.websocketTimeout,singlePeerConnection:h.singlePeerConnection},m.signal);let C=x.serverInfo;if(C||(C={version:x.serverVersion,region:x.serverRegion}),this.serverInfo=C,this.log.debug("connected to Livekit Server ".concat(Object.entries(C).map(E=>{let[A,N]=E;return"".concat(A,": ").concat(N)}).join(", ")),{room:(g=x.room)===null||g===void 0?void 0:g.name,roomSid:(k=x.room)===null||k===void 0?void 0:k.sid,identity:(T=x.participant)===null||T===void 0?void 0:T.identity}),!C.version)throw new T6("unknown server version");return C.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),h.dynacast=!1),x}),this.applyJoinResponse=a=>{const l=a.participant;if(this.localParticipant.sid=l.sid,this.localParticipant.identity=l.identity,this.localParticipant.setEnabledPublishCodecs(a.enabledPublishCodecs),this.e2eeManager)try{this.e2eeManager.setSifTrailer(a.sifTrailer)}catch(u){this.log.error(u instanceof Error?u.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:u}))}this.handleParticipantUpdates([l,...a.otherParticipants]),a.room&&this.handleRoomUpdate(a.room)},this.attemptConnection=(a,l,u,d)=>I(this,void 0,void 0,function*(){var h,m;this.state===Ye.Reconnecting||this.isResuming||!((h=this.engine)===null||h===void 0)&&h.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((m=this.regionUrlProvider)===null||m===void 0)&&m.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Ay),u),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const g=yield this.connectSignal(a,l,this.engine,this.connOptions,this.options,d);this.applyJoinResponse(g),this.setupLocalParticipantEvents(),this.emit(Q.SignalConnected)}catch(g){yield this.engine.close(),this.recreateEngine();const k=d.signal.aborted?Fe.cancelled("Signal connection aborted"):Fe.serverUnreachable("could not establish signal connection");throw g instanceof Error&&(k.message="".concat(k.message,": ").concat(g.message)),g instanceof Fe&&(k.reason=g.reason,k.status=g.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:g})),k}if(d.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),Fe.cancelled("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,d)}catch(g){throw yield this.engine.close(),this.recreateEngine(),g}Dn()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Dn()&&window.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(Ye.Connected),this.emit(Q.Connected),da.getInstance().resetFailedConnectionAttempts(a),this.registerConnectionReconcile(),this.regionUrlProvider&&this.regionUrlProvider.notifyConnected()}),this.disconnect=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return I(n,[...l],void 0,function(){var d=this;let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var m,g,k;const T=yield d.disconnectLock.lock();try{if(d.state===Ye.Disconnected){d.log.debug("already disconnected",d.logContext);return}if(d.log.info("disconnect from room",Object.assign({},d.logContext)),d.state===Ye.Connecting||d.state===Ye.Reconnecting||d.isResuming){const x="Abort connection attempt due to user initiated disconnect";d.log.warn(x,d.logContext),(m=d.abortController)===null||m===void 0||m.abort(x),(k=(g=d.connectFuture)===null||g===void 0?void 0:g.reject)===null||k===void 0||k.call(g,Fe.cancelled("Client initiated disconnect")),d.connectFuture=void 0}d.engine&&(d.engine.client.isDisconnected||(yield d.engine.client.sendLeave()),yield d.engine.close()),d.handleDisconnect(h,Ti.CLIENT_INITIATED),d.engine=void 0}finally{T()}})()})},this.onPageLeave=()=>I(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>I(this,void 0,void 0,function*(){const a=[],l=Mn();if(l&&l.os==="iOS"){const u="livekit-dummy-audio-el";let d=document.getElementById(u);if(!d){d=document.createElement("audio"),d.id=u,d.autoplay=!0,d.hidden=!0;const h=Nm();h.enabled=!0;const m=new MediaStream([h]);d.srcObject=m,document.addEventListener("visibilitychange",()=>{d&&(d.srcObject=document.hidden?null:m,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(d),this.once(Q.Disconnected,()=>{d?.remove(),d=null})}a.push(d)}this.remoteParticipants.forEach(u=>{u.audioTrackPublications.forEach(d=>{d.track&&d.track.attachedElements.forEach(h=>{a.push(h)})})});try{yield Promise.all([this.acquireAudioContext(),...a.map(u=>(u.muted=!1,u.play()))]),this.handleAudioPlaybackStarted()}catch(u){throw this.handleAudioPlaybackFailed(u),u}}),this.startVideo=()=>I(this,void 0,void 0,function*(){const a=[];for(const l of this.remoteParticipants.values())l.videoTrackPublications.forEach(u=>{var d;(d=u.track)===null||d===void 0||d.attachedElements.forEach(h=>{a.includes(h)||a.push(h)})});yield Promise.all(a.map(l=>l.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(l=>{l.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const a of this.remoteParticipants.values())this.handleParticipantDisconnected(a.identity,a);this.setAndEmitConnectionState(Ye.Reconnecting)&&this.emit(Q.Reconnecting)},this.handleSignalRestarted=a=>I(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(a.serverRegion),Object.assign(Object.assign({},this.logContext),{region:a.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(a);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(l){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:l}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:a.serverRegion}))}catch{return}this.setAndEmitConnectionState(Ye.Connected),this.emit(Q.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=a=>{a.forEach(l=>{var u;if(l.identity===this.localParticipant.identity){this.localParticipant.updateInfo(l);return}l.identity===""&&(l.identity=(u=this.sidToIdentity.get(l.sid))!==null&&u!==void 0?u:"");let d=this.remoteParticipants.get(l.identity);l.state===oa.DISCONNECTED?this.handleParticipantDisconnected(l.identity,d):d=this.getOrCreateParticipant(l.identity,l)})},this.handleActiveSpeakersUpdate=a=>{const l=[],u={};a.forEach(d=>{if(u[d.sid]=!0,d.sid===this.localParticipant.sid)this.localParticipant.audioLevel=d.level,this.localParticipant.setIsSpeaking(!0),l.push(this.localParticipant);else{const h=this.getRemoteParticipantBySid(d.sid);h&&(h.audioLevel=d.level,h.setIsSpeaking(!0),l.push(h))}}),u[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(d=>{u[d.sid]||(d.audioLevel=0,d.setIsSpeaking(!1))}),this.activeSpeakers=l,this.emitWhenConnected(Q.ActiveSpeakersChanged,l)},this.handleSpeakersChanged=a=>{const l=new Map;this.activeSpeakers.forEach(d=>{const h=this.remoteParticipants.get(d.identity);h&&h.sid!==d.sid||l.set(d.sid,d)}),a.forEach(d=>{let h=this.getRemoteParticipantBySid(d.sid);d.sid===this.localParticipant.sid&&(h=this.localParticipant),h&&(h.audioLevel=d.level,h.setIsSpeaking(d.active),d.active?l.set(d.sid,h):l.delete(d.sid))});const u=Array.from(l.values());u.sort((d,h)=>h.audioLevel-d.audioLevel),this.activeSpeakers=u,this.emitWhenConnected(Q.ActiveSpeakersChanged,u)},this.handleStreamStateUpdate=a=>{a.streamStates.forEach(l=>{const u=this.getRemoteParticipantBySid(l.participantSid);if(!u)return;const d=u.getTrackPublicationBySid(l.trackSid);if(!d||!d.track)return;const h=Y.streamStateFromProto(l.state);d.track.setStreamState(h),h!==d.track.streamState&&(u.emit(te.TrackStreamStateChanged,d,d.track.streamState),this.emitWhenConnected(Q.TrackStreamStateChanged,d,d.track.streamState,u))})},this.handleSubscriptionPermissionUpdate=a=>{const l=this.getRemoteParticipantBySid(a.participantSid);if(!l)return;const u=l.getTrackPublicationBySid(a.trackSid);u&&u.setAllowed(a.allowed)},this.handleSubscriptionError=a=>{const l=Array.from(this.remoteParticipants.values()).find(d=>d.trackPublications.has(a.trackSid));if(!l)return;const u=l.getTrackPublicationBySid(a.trackSid);u&&u.setSubscriptionError(a.err)},this.handleDataPacket=(a,l)=>{const u=this.remoteParticipants.get(a.participantIdentity);if(a.value.case==="user")this.handleUserPacket(u,a.value.value,a.kind,l);else if(a.value.case==="transcription")this.handleTranscription(u,a.value.value);else if(a.value.case==="sipDtmf")this.handleSipDtmf(u,a.value.value);else if(a.value.case==="chatMessage")this.handleChatMessage(u,a.value.value);else if(a.value.case==="metrics")this.handleMetrics(a.value.value,u);else if(a.value.case==="streamHeader"||a.value.case==="streamChunk"||a.value.case==="streamTrailer")this.handleDataStream(a,l);else if(a.value.case==="rpcRequest"){const d=a.value.value;this.handleIncomingRpcRequest(a.participantIdentity,d.id,d.method,d.payload,d.responseTimeoutMs,d.version)}},this.handleUserPacket=(a,l,u,d)=>{this.emit(Q.DataReceived,l.payload,a,u,l.topic,d),a?.emit(te.DataReceived,l.payload,u,d)},this.handleSipDtmf=(a,l)=>{this.emit(Q.SipDTMFReceived,l,a),a?.emit(te.SipDTMFReceived,l)},this.handleTranscription=(a,l)=>{const u=l.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(l.transcribedParticipantIdentity),d=u?.trackPublications.get(l.trackId),h=J6(l,this.transcriptionReceivedTimes);d?.emit(fe.TranscriptionReceived,h),u?.emit(te.TranscriptionReceived,h,d),this.emit(Q.TranscriptionReceived,h,u,d)},this.handleChatMessage=(a,l)=>{const u=Y6(l);this.emit(Q.ChatMessage,u,a)},this.handleMetrics=(a,l)=>{this.emit(Q.MetricsReceived,a,l)},this.handleDataStream=(a,l)=>{this.incomingDataStreamManager.handleDataStreamPacket(a,l)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(Q.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=a=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:a})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(Q.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(Q.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(Q.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>I(this,void 0,void 0,function*(){var a;((a=Mn())===null||a===void 0?void 0:a.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(Q.MediaDevicesChanged)}),this.handleRoomUpdate=a=>{const l=this.roomInfo;this.roomInfo=a,l&&l.metadata!==a.metadata&&this.emitWhenConnected(Q.RoomMetadataChanged,a.metadata),l?.activeRecording!==a.activeRecording&&this.emitWhenConnected(Q.RecordingStatusChanged,a.activeRecording)},this.handleConnectionQualityUpdate=a=>{a.updates.forEach(l=>{if(l.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(l.quality);return}const u=this.getRemoteParticipantBySid(l.participantSid);u&&u.setConnectionQuality(l.quality)})},this.onLocalParticipantMetadataChanged=a=>{this.emit(Q.ParticipantMetadataChanged,a,this.localParticipant)},this.onLocalParticipantNameChanged=a=>{this.emit(Q.ParticipantNameChanged,a,this.localParticipant)},this.onLocalAttributesChanged=a=>{this.emit(Q.ParticipantAttributesChanged,a,this.localParticipant)},this.onLocalTrackMuted=a=>{this.emit(Q.TrackMuted,a,this.localParticipant)},this.onLocalTrackUnmuted=a=>{this.emit(Q.TrackUnmuted,a,this.localParticipant)},this.onTrackProcessorUpdate=a=>{var l;(l=a?.onPublish)===null||l===void 0||l.call(a,this)},this.onLocalTrackPublished=a=>I(this,void 0,void 0,function*(){var l,u,d,h,m,g;(l=a.track)===null||l===void 0||l.on(fe.TrackProcessorUpdate,this.onTrackProcessorUpdate),(u=a.track)===null||u===void 0||u.on(fe.Restarted,this.onLocalTrackRestarted),(m=(h=(d=a.track)===null||d===void 0?void 0:d.getProcessor())===null||h===void 0?void 0:h.onPublish)===null||m===void 0||m.call(h,this),this.emit(Q.LocalTrackPublished,a,this.localParticipant),pr(a.track)&&(yield a.track.checkForSilence())&&this.emit(Q.LocalAudioSilenceDetected,a);const k=yield(g=a.track)===null||g===void 0?void 0:g.getDeviceId(!1),T=jg(a.source);T&&k&&k!==this.localParticipant.activeDeviceMap.get(T)&&(this.localParticipant.activeDeviceMap.set(T,k),this.emit(Q.ActiveDeviceChanged,T,k))}),this.onLocalTrackUnpublished=a=>{var l,u;(l=a.track)===null||l===void 0||l.off(fe.TrackProcessorUpdate,this.onTrackProcessorUpdate),(u=a.track)===null||u===void 0||u.off(fe.Restarted,this.onLocalTrackRestarted),this.emit(Q.LocalTrackUnpublished,a,this.localParticipant)},this.onLocalTrackRestarted=a=>I(this,void 0,void 0,function*(){const l=yield a.getDeviceId(!1),u=jg(a.source);u&&l&&l!==this.localParticipant.activeDeviceMap.get(u)&&(this.log.debug("local track restarted, setting ".concat(u," ").concat(l," active"),this.logContext),this.localParticipant.activeDeviceMap.set(u,l),this.emit(Q.ActiveDeviceChanged,u,l))}),this.onLocalConnectionQualityChanged=a=>{this.emit(Q.ConnectionQualityChanged,a,this.localParticipant)},this.onMediaDevicesError=(a,l)=>{this.emit(Q.MediaDevicesError,a,l)},this.onLocalParticipantPermissionsChanged=a=>{this.emit(Q.ParticipantPermissionsChanged,a,this.localParticipant)},this.onLocalChatMessageSent=a=>{this.emit(Q.ChatMessage,a,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},A8),e),this.log=Pr((i=this.options.loggerName)!==null&&i!==void 0?i:Ri.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},TR),e?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},CR),e?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},R8),e?.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new oz,this.outgoingDataStreamManager=new lz(this.engine,this.log),this.disconnectLock=new kn,this.localParticipant=new gz("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),(this.options.e2ee||this.options.encryption)&&this.setupE2EE(),this.engine.e2eeManager=this.e2eeManager,this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",ss(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",ss(this.options.audioCaptureDefaults.deviceId)),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&this.switchActiveDevice("audiooutput",ss(this.options.audioOutput.deviceId)).catch(a=>this.log.warn("Could not set audio output: ".concat(a.message),this.logContext)),Dn()){const a=new AbortController;(s=navigator.mediaDevices)===null||s===void 0||s.addEventListener("devicechange",this.handleDeviceChange,{signal:a.signal}),Ta.cleanupRegistry&&Ta.cleanupRegistry.register(this,()=>{a.abort()})}}registerTextStreamHandler(e,n){return this.incomingDataStreamManager.registerTextStreamHandler(e,n)}unregisterTextStreamHandler(e){return this.incomingDataStreamManager.unregisterTextStreamHandler(e)}registerByteStreamHandler(e,n){return this.incomingDataStreamManager.registerByteStreamHandler(e,n)}unregisterByteStreamHandler(e){return this.incomingDataStreamManager.unregisterByteStreamHandler(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setE2EEEnabled(e){return I(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;const n=!!this.options.encryption,i=this.options.encryption||this.options.e2ee;i&&("e2eeManager"in i?(this.e2eeManager=i.e2eeManager,this.e2eeManager.isDataChannelEncryptionEnabled=n):this.e2eeManager=new f8(i,n),this.e2eeManager.on(is.ParticipantEncryptionStatusChanged,(r,s)=>{e8(s)&&(this.isE2EEEnabled=r),this.emit(Q.ParticipantEncryptionStatusChanged,r,s)}),this.e2eeManager.on(is.EncryptionError,(r,s)=>{const a=s?this.getParticipantByIdentity(s):void 0;this.emit(Q.EncryptionError,r,a)}),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return I(this,void 0,void 0,function*(){return this.state===Ye.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const i=r=>{r.sid!==""&&(this.engine.off(pe.RoomUpdate,i),e(r.sid))};this.engine.on(pe.RoomUpdate,i),this.once(Q.Disconnected,()=>{this.engine.off(pe.RoomUpdate,i),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new nz(this.options),this.engine.e2eeManager=this.e2eeManager,this.engine.on(pe.ParticipantUpdate,this.handleParticipantUpdates).on(pe.RoomUpdate,this.handleRoomUpdate).on(pe.SpeakersChanged,this.handleSpeakersChanged).on(pe.StreamStateChanged,this.handleStreamStateUpdate).on(pe.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(pe.SubscriptionError,this.handleSubscriptionError).on(pe.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(pe.MediaTrackAdded,(e,n,i)=>{this.onTrackAdded(e,n,i)}).on(pe.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(pe.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(pe.DataPacketReceived,this.handleDataPacket).on(pe.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(Ye.SignalReconnecting)&&this.emit(Q.SignalReconnecting)}).on(pe.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(Ye.Connected)&&this.emit(Q.Reconnected)}).on(pe.SignalResumed,()=>{this.bufferedEvents=[],(this.state===Ye.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(pe.Restarting,this.handleRestarting).on(pe.SignalRestarted,this.handleSignalRestarted).on(pe.Offline,()=>{this.setAndEmitConnectionState(Ye.Reconnecting)&&this.emit(Q.Reconnecting)}).on(pe.DCBufferStatusChanged,(e,n)=>{this.emit(Q.DCBufferStatusChanged,e,n)}).on(pe.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(i=>{let{trackSid:r}=i;return r===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(te.LocalTrackSubscribed,n),this.emitWhenConnected(Q.LocalTrackSubscribed,n,this.localParticipant)}).on(pe.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,i)=>{this.handleParticipantDisconnected(i,n)}),this.emit(Q.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Jt.getInstance().getDevices(e,n)}prepareConnection(e,n){return I(this,void 0,void 0,function*(){if(this.state===Ye.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(wa(new URL(e))&&n){this.regionUrlProvider=new tt(e,n);const i=yield this.regionUrlProvider.getNextBestRegionUrl();i&&this.state===Ye.Disconnected&&(this.regionUrl=i,yield fetch(Cl(i),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(i),this.logContext))}else yield fetch(Cl(e),{method:"HEAD"})}catch(i){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:i}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return I(this,void 0,void 0,function*(){let i=()=>I(this,void 0,void 0,function*(){}),r;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":r=new Fi({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":r=new Fi({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":r=new Fi({scenario:{case:"serverLeave",value:!0}});break;case"migration":r=new Fi({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>I(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new Fi({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>I(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new Fi({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":r=new Fi({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),i=()=>I(this,void 0,void 0,function*(){const s=this.engine.client.onLeave;s&&s(new Kf({reason:Ti.CLIENT_INITIATED,action:aa.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");r=new Fi({scenario:{case:"subscriberBandwidth",value:zs(n)}});break;case"leave-full-reconnect":r=new Fi({scenario:{case:"leaveRequestFullReconnect",value:!0}})}r&&(yield this.engine.client.sendSimulateScenario(r),yield i())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return I(this,arguments,void 0,function(i,r){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(function*(){var l,u,d,h,m,g,k;let T=!0,x=!1;const C=a?{exact:r}:r;if(i==="audioinput"){x=s.localParticipant.audioTrackPublications.size===0;const E=(l=s.getActiveDevice(i))!==null&&l!==void 0?l:s.options.audioCaptureDefaults.deviceId;s.options.audioCaptureDefaults.deviceId=C;const A=Array.from(s.localParticipant.audioTrackPublications.values()).filter(w=>w.source===Y.Source.Microphone);try{T=(yield Promise.all(A.map(w=>{var S;return(S=w.audioTrack)===null||S===void 0?void 0:S.setDeviceId(C)}))).every(w=>w===!0)}catch(w){throw s.options.audioCaptureDefaults.deviceId=E,w}const N=A.some(w=>{var S,R;return(R=(S=w.track)===null||S===void 0?void 0:S.isMuted)!==null&&R!==void 0?R:!1});T&&N&&(x=!0)}else if(i==="videoinput"){x=s.localParticipant.videoTrackPublications.size===0;const E=(u=s.getActiveDevice(i))!==null&&u!==void 0?u:s.options.videoCaptureDefaults.deviceId;s.options.videoCaptureDefaults.deviceId=C;const A=Array.from(s.localParticipant.videoTrackPublications.values()).filter(w=>w.source===Y.Source.Camera);try{T=(yield Promise.all(A.map(w=>{var S;return(S=w.videoTrack)===null||S===void 0?void 0:S.setDeviceId(C)}))).every(w=>w===!0)}catch(w){throw s.options.videoCaptureDefaults.deviceId=E,w}const N=A.some(w=>{var S,R;return(R=(S=w.track)===null||S===void 0?void 0:S.isMuted)!==null&&R!==void 0?R:!1});T&&N&&(x=!0)}else if(i==="audiooutput"){if(x=!0,!Vg()&&!s.options.webAudioMix||s.options.webAudioMix&&s.audioContext&&!("setSinkId"in s.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");s.options.webAudioMix&&(r=(d=yield Jt.getInstance().normalizeDeviceId("audiooutput",r))!==null&&d!==void 0?d:""),(h=(k=s.options).audioOutput)!==null&&h!==void 0||(k.audioOutput={});const E=(m=s.getActiveDevice(i))!==null&&m!==void 0?m:s.options.audioOutput.deviceId;s.options.audioOutput.deviceId=r;try{s.options.webAudioMix&&((g=s.audioContext)===null||g===void 0||g.setSinkId(r)),yield Promise.all(Array.from(s.remoteParticipants.values()).map(A=>A.setAudioOutput({deviceId:r})))}catch(A){throw s.options.audioOutput.deviceId=E,A}}return x&&(s.localParticipant.activeDeviceMap.set(i,r),s.emit(Q.ActiveDeviceChanged,i,r)),T})()})}setupLocalParticipantEvents(){this.localParticipant.on(te.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(te.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(te.AttributesChanged,this.onLocalAttributesChanged).on(te.TrackMuted,this.onLocalTrackMuted).on(te.TrackUnmuted,this.onLocalTrackUnmuted).on(te.LocalTrackPublished,this.onLocalTrackPublished).on(te.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(te.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(te.MediaDevicesError,this.onMediaDevicesError).on(te.AudioStreamAcquired,this.startAudio).on(te.ChatMessage,this.onLocalChatMessageSent).on(te.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,i){if(this.state===Ye.Connecting||this.state===Ye.Reconnecting){const m=()=>{this.log.debug("deferring on track for later",{mediaTrackId:e.id,mediaStreamId:n.id,tracksInStream:n.getTracks().map(k=>k.id)}),this.onTrackAdded(e,n,i),g()},g=()=>{this.off(Q.Reconnected,m),this.off(Q.Connected,m),this.off(Q.Disconnected,g)};this.once(Q.Reconnected,m),this.once(Q.Connected,m),this.once(Q.Disconnected,g);return}if(this.state===Ye.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const r=U6(n.id),s=r[0];let a=r[1],l=e.id;if(a&&a.startsWith("TR")&&(l=a),s===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const u=Array.from(this.remoteParticipants.values()).find(m=>m.sid===s);if(!u){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(s),this.logContext);return}if(!l.startsWith("TR")){const m=this.engine.getTrackIdForReceiver(i);if(!m){this.log.error("Tried to add a track whose 'sid' could not be found for a participant, that's not present. Sid: ".concat(s),this.logContext);return}l=m}l.startsWith("TR")||this.log.warn("Tried to add a track whose 'sid' could not be determined for a participant, that's not present. Sid: ".concat(s,", streamId: ").concat(a,", trackId: ").concat(l),Object.assign(Object.assign({},this.logContext),{rpID:s,streamId:a,trackId:l}));let d;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?d=this.options.adaptiveStream:d={});const h=u.addSubscribedMediaTrack(e,l,n,i,d);h?.isEncrypted&&!this.e2eeManager&&this.emit(Q.EncryptionError,new Error("Encrypted ".concat(h.source," track received from participant ").concat(u.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var i;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearControllers(),this.state!==Ye.Disconnected){this.regionUrl=void 0,this.regionUrlProvider&&this.regionUrlProvider.notifyDisconnected();try{this.remoteParticipants.forEach(r=>{r.trackPublications.forEach(s=>{r.unpublishTrack(s.trackSid)})}),this.localParticipant.trackPublications.forEach(r=>{var s,a,l;r.track&&this.localParticipant.unpublishTrack(r.track,e),e?((s=r.track)===null||s===void 0||s.detach(),(a=r.track)===null||a===void 0||a.stop()):(l=r.track)===null||l===void 0||l.stopMonitor()}),this.localParticipant.off(te.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(te.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(te.AttributesChanged,this.onLocalAttributesChanged).off(te.TrackMuted,this.onLocalTrackMuted).off(te.TrackUnmuted,this.onLocalTrackUnmuted).off(te.LocalTrackPublished,this.onLocalTrackPublished).off(te.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(te.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(te.MediaDevicesError,this.onMediaDevicesError).off(te.AudioStreamAcquired,this.startAudio).off(te.ChatMessage,this.onLocalChatMessageSent).off(te.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Dn()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(i=navigator.mediaDevices)===null||i===void 0||i.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(Ye.Disconnected),this.emit(Q.Disconnected,n)}}}handleParticipantDisconnected(e,n){var i;this.remoteParticipants.delete(e),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(e),n.trackPublications.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(Q.ParticipantDisconnected,n),n.setDisconnected(),(i=this.localParticipant)===null||i===void 0||i.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(e,n,i,r,s,a){return I(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),a!==1){yield this.engine.publishRpcResponse(e,n,null,_t.builtIn("UNSUPPORTED_VERSION"));return}const l=this.rpcHandlers.get(i);if(!l){yield this.engine.publishRpcResponse(e,n,null,_t.builtIn("UNSUPPORTED_METHOD"));return}let u=null,d=null;try{const h=yield l({requestId:n,callerIdentity:e,payload:r,responseTimeout:s});Ny(h)>PR?(u=_t.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),this.log.warn("RPC Response payload too large for ".concat(i))):d=h}catch(h){h instanceof _t?u=h:(this.log.warn("Uncaught error returned by RPC handler for ".concat(i,". Returning APPLICATION_ERROR instead."),h),u=_t.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,d,u)})}selectDefaultDevices(){return I(this,void 0,void 0,function*(){var e,n,i;const r=Jt.getInstance().previousDevices,s=yield Jt.getInstance().getDevices(void 0,!1),a=Mn();if(a?.name==="Chrome"&&a.os!=="iOS")for(let u of s){const d=r.find(h=>h.deviceId===u.deviceId);d&&d.label!==""&&d.kind===u.kind&&d.label!==u.label&&this.getActiveDevice(u.kind)==="default"&&this.emit(Q.ActiveDeviceChanged,u.kind,u.deviceId)}const l=["audiooutput","audioinput","videoinput"];for(let u of l){const d=A6(u),h=this.localParticipant.getTrackPublication(d);if(h&&(!((e=h.track)===null||e===void 0)&&e.isUserProvided))continue;const m=s.filter(k=>k.kind===u),g=this.getActiveDevice(u);if(g===((n=r.filter(k=>k.kind===u)[0])===null||n===void 0?void 0:n.deviceId)&&m.length>0&&((i=m[0])===null||i===void 0?void 0:i.deviceId)!==g){yield this.switchActiveDevice(u,m[0].deviceId);continue}u==="audioinput"&&!Tl()||u==="videoinput"||m.length>0&&!m.find(k=>k.deviceId===this.getActiveDevice(u))&&(u!=="audiooutput"||!Tl())&&(yield this.switchActiveDevice(u,m[0].deviceId))}})}acquireAudioContext(){return I(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=vR())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(r=>r.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),sn(200)])}catch(r){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:r}))}const i=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";i!==this.canPlaybackAudio&&(this.audioEnabled=i,this.emit(Q.AudioPlaybackStatusChanged,i))})}createParticipant(e,n){var i;let r;return n?r=pf.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):r=new pf(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&r.setAudioContext(this.audioContext),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&r.setAudioOutput(this.options.audioOutput).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),r}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const r=this.remoteParticipants.get(e);return n&&r.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),r}const i=this.createParticipant(e,n);return this.remoteParticipants.set(e,i),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(Q.ParticipantConnected,i),i.on(te.TrackPublished,r=>{this.emitWhenConnected(Q.TrackPublished,r,i)}).on(te.TrackSubscribed,(r,s)=>{r.kind===Y.Kind.Audio?(r.on(fe.AudioPlaybackStarted,this.handleAudioPlaybackStarted),r.on(fe.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):r.kind===Y.Kind.Video&&(r.on(fe.VideoPlaybackFailed,this.handleVideoPlaybackFailed),r.on(fe.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(Q.TrackSubscribed,r,s,i)}).on(te.TrackUnpublished,r=>{this.emit(Q.TrackUnpublished,r,i)}).on(te.TrackUnsubscribed,(r,s)=>{this.emit(Q.TrackUnsubscribed,r,s,i)}).on(te.TrackMuted,r=>{this.emitWhenConnected(Q.TrackMuted,r,i)}).on(te.TrackUnmuted,r=>{this.emitWhenConnected(Q.TrackUnmuted,r,i)}).on(te.ParticipantMetadataChanged,r=>{this.emitWhenConnected(Q.ParticipantMetadataChanged,r,i)}).on(te.ParticipantNameChanged,r=>{this.emitWhenConnected(Q.ParticipantNameChanged,r,i)}).on(te.AttributesChanged,r=>{this.emitWhenConnected(Q.ParticipantAttributesChanged,r,i)}).on(te.ConnectionQualityChanged,r=>{this.emitWhenConnected(Q.ConnectionQualityChanged,r,i)}).on(te.ParticipantPermissionsChanged,r=>{this.emitWhenConnected(Q.ParticipantPermissionsChanged,r,i)}).on(te.TrackSubscriptionStatusChanged,(r,s)=>{this.emitWhenConnected(Q.TrackSubscriptionStatusChanged,r,s,i)}).on(te.TrackSubscriptionFailed,(r,s)=>{this.emit(Q.TrackSubscriptionFailed,r,i,s)}).on(te.TrackSubscriptionPermissionChanged,(r,s)=>{this.emitWhenConnected(Q.TrackSubscriptionPermissionChanged,r,s,i)}).on(te.Active,()=>{this.emitWhenConnected(Q.ParticipantActive,i),i.kind===xl.AGENT&&this.localParticipant.setActiveAgent(i)}),n&&i.updateInfo(n),i}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((i,r)=>(i.push(...r.getTrackPublications()),i),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&X6(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=rn.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Ti.STATE_MISMATCH))):e=0},vz)}clearConnectionReconcile(){this.connectionReconcileInterval&&rn.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(Q.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,i]=e;this.emit(n,...i)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(this.state===Ye.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,i]);else if(this.state===Ye.Connected)return this.emit(e,...i);return!1}simulateParticipants(e){return I(this,void 0,void 0,function*(){var n,i;const r=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new Wf({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:vt.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new eo({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(Q.SignalConnected),this.emit(Q.Connected),this.setAndEmitConnectionState(Ye.Connected),r.video){const a=new Kg(Y.Kind.Video,new Xo({source:Ft.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:bi.AUDIO,name:"video-dummy"}),new hf(r.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:jw(160*((n=s.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(a),this.localParticipant.emit(te.LocalTrackPublished,a)}if(r.audio){const a=new Kg(Y.Kind.Audio,new Xo({source:Ft.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:bi.AUDIO}),new ff(r.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Nm(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(a),this.localParticipant.emit(te.LocalTrackPublished,a)}for(let a=0;a<s.count-1;a+=1){let l=new eo({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(a),state:oa.ACTIVE,tracks:[],joinedAt:vt.parse(Date.now())});const u=this.getOrCreateParticipant(l.identity,l);if(s.video){const d=jw(160*((i=s.aspectRatios[a%s.aspectRatios.length])!==null&&i!==void 0?i:1),160,!1,!0),h=new Xo({source:Ft.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:bi.AUDIO});u.addSubscribedMediaTrack(d,h.sid,new MediaStream([d]),new RTCRtpReceiver),l.tracks=[...l.tracks,h]}if(s.audio){const d=Nm(),h=new Xo({source:Ft.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:bi.AUDIO});u.addSubscribedMediaTrack(d,h.sid,new MediaStream([d]),new RTCRtpReceiver),l.tracks=[...l.tracks,h]}u.updateInfo(l)}})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(e!==Q.ActiveSpeakersChanged&&e!==Q.TranscriptionReceived){const s=jR(i).filter(a=>a!==void 0);(e===Q.TrackSubscribed||e===Q.TrackUnsubscribed)&&this.log.trace("subscribe trace: ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:s})),this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:s}))}return super.emit(e,...i)}}Ta.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function jR(t){return t.map(e=>{if(e)return Array.isArray(e)?jR(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var mi;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(mi||(mi={}));class ks extends er.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=mi.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new Ta(i.roomOptions),this.connectOptions=i.connectOptions,this.options=i}run(e){return I(this,void 0,void 0,function*(){if(this.status!==mi.IDLE)throw Error("check is running already");this.setStatus(mi.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==mi.SKIPPED&&this.setStatus(this.isSuccess()?mi.SUCCESS:mi.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return I(this,void 0,void 0,function*(){return this.room.state===Ye.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return I(this,void 0,void 0,function*(){this.room&&this.room.state!==Ye.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(mi.SKIPPED)}switchProtocol(e){return I(this,void 0,void 0,function*(){let n=!1,i=!1;if(this.room.on(Q.Reconnecting,()=>{n=!0}),this.room.once(Q.Reconnected,()=>{i=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(s=>setTimeout(s,1e3)),!n)return;const r=Date.now()+1e4;for(;Date.now()<r;){if(i)return;yield sn(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class yz extends ks{get description(){return"Cloud regions"}perform(){return I(this,void 0,void 0,function*(){const e=new tt(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],i=new Set;for(let s=0;s<3;s++){const a=yield e.getNextBestRegionUrl();if(!a)break;if(i.has(a))continue;i.add(a);const l=yield this.checkCloudRegion(a);this.appendMessage("".concat(l.region," RTT: ").concat(l.rtt,"ms, duration: ").concat(l.duration,"ms")),n.push(l)}n.sort((s,a)=>(s.duration-a.duration)*.5+(s.rtt-a.rtt)*.5);const r=n[0];this.bestStats=r,this.appendMessage("best Cloud region: ".concat(r.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return I(this,void 0,void 0,function*(){var n,i;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const r=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!r)throw new Error("Region not found");const s=yield this.room.localParticipant.streamText({topic:"test"}),a=1e3,u=1e6/a,d="A".repeat(a),h=Date.now();for(let T=0;T<u;T++)yield s.write(d);yield s.close();const m=Date.now(),g=yield(i=this.room.engine.pcManager)===null||i===void 0?void 0:i.publisher.getStats(),k={region:r,rtt:1e4,duration:m-h};return g?.forEach(T=>{T.type==="candidate-pair"&&T.nominated&&(k.rtt=T.currentRoundTripTime*1e3)}),yield this.disconnect(),k})}}const Vm=1e4;class bz extends ks{get description(){return"Connection via UDP vs TCP"}perform(){return I(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const i=this.bestStats;this.appendMessage("upstream bitrate: ".concat((i.bitrateTotal/i.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((i.rttTotal/i.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((i.jitterTotal/i.count*1e3).toFixed(2)," ms")),i.packetsLost>0&&this.appendWarning("packets lost: ".concat((i.packetsLost/i.packetsSent*100).toFixed(2),"%")),i.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((i.qualityLimitationDurations.bandwidth/(Vm/1e3)*100).toFixed(2),"%")),i.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((i.qualityLimitationDurations.cpu/(Vm/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return I(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");let r=0;const s=()=>{r=(r+1)%360,i.fillStyle="hsl(".concat(r,", 100%, 50%)"),i.fillRect(0,0,n.width,n.height),requestAnimationFrame(s)};s();const l=n.captureStream(30).getVideoTracks()[0],d=(yield this.room.localParticipant.publishTrack(l,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,h={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},m=setInterval(()=>I(this,void 0,void 0,function*(){const g=yield d.getRTCStatsReport();g?.forEach(k=>{k.type==="outbound-rtp"?(h.packetsSent=k.packetsSent,h.qualityLimitationDurations=k.qualityLimitationDurations,h.bitrateTotal+=k.targetBitrate,h.count++):k.type==="remote-inbound-rtp"&&(h.packetsLost=k.packetsLost,h.rttTotal+=k.roundTripTime,h.jitterTotal+=k.jitter)})}),1e3);return yield new Promise(g=>setTimeout(g,Vm)),clearInterval(m),l.stop(),n.remove(),yield this.disconnect(),h})}}class xz extends ks{get description(){return"Can publish audio"}perform(){return I(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield hz();if(yield gR(i,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(i),yield new Promise(l=>setTimeout(l,3e3));const s=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!s)throw new Error("Could not get RTCStats");let a=0;if(s.forEach(l=>{l.type==="outbound-rtp"&&(l.kind==="audio"||!l.kind&&l.mediaType==="audio")&&(a=l.packetsSent)}),a===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(a," audio packets"))})}}class kz extends ks{get description(){return"Can publish video"}perform(){return I(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield fz();yield this.checkForVideo(i.mediaStreamTrack),n.localParticipant.publishTrack(i),yield new Promise(a=>setTimeout(a,5e3));const r=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!r)throw new Error("Could not get RTCStats");let s=0;if(r.forEach(a=>{a.type==="outbound-rtp"&&(a.kind==="video"||!a.kind&&a.mediaType==="video")&&(s+=a.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," video packets"))})}checkForVideo(e){return I(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const i=document.createElement("video");i.srcObject=n,i.muted=!0,i.autoplay=!0,i.playsInline=!0,i.setAttribute("playsinline","true"),document.body.appendChild(i),yield new Promise(r=>{i.onplay=()=>{setTimeout(()=>{var s,a,l,u;const d=document.createElement("canvas"),h=e.getSettings(),m=(a=(s=h.width)!==null&&s!==void 0?s:i.videoWidth)!==null&&a!==void 0?a:1280,g=(u=(l=h.height)!==null&&l!==void 0?l:i.videoHeight)!==null&&u!==void 0?u:720;d.width=m,d.height=g;const k=d.getContext("2d");k.drawImage(i,0,0);const x=k.getImageData(0,0,d.width,d.height).data;let C=!0;for(let E=0;E<x.length;E+=4)if(x[E]!==0||x[E+1]!==0||x[E+2]!==0){C=!1;break}C?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),r()},1e3)},i.play()}),n.getTracks().forEach(r=>r.stop()),i.remove()})}}class Sz extends ks{get description(){return"Resuming connection after interruption"}perform(){return I(this,void 0,void 0,function*(){var e;const n=yield this.connect();let i=!1,r=!1,s;const a=new Promise(d=>{setTimeout(d,5e3),s=d}),l=()=>{i=!0};n.on(Q.SignalReconnecting,l).on(Q.Reconnecting,l).on(Q.Reconnected,()=>{r=!0,s(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const u=n.engine.client.onClose;if(u&&u(""),yield a,i){if(!r||n.state!==Ye.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class wz extends ks{get description(){return"Can connect via TURN"}perform(){return I(this,void 0,void 0,function*(){var e,n,i;wa(new URL(this.url))&&(this.appendMessage("Using region specific url"),this.url=(e=yield new tt(this.url,this.token).getNextBestRegionUrl())!==null&&e!==void 0?e:this.url);const r=new Ey,s=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});let a=!1,l=!1,u=!1;for(let d of s.iceServers)for(let h of d.urls)h.startsWith("turn:")?(l=!0,u=!0):h.startsWith("turns:")&&(l=!0,u=!0,a=!0),h.startsWith("stun:")&&(u=!0);u?l&&!a&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((i=(n=this.connectOptions)===null||n===void 0?void 0:n.rtcConfig)===null||i===void 0)&&i.iceServers||l?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(d=>setTimeout(d,0)))})}}class Tz extends ks{get description(){return"Establishing WebRTC connection"}perform(){return I(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(Q.SignalConnected,()=>{var i;const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(s,a)=>{if(s.candidate){const l=new RTCIceCandidate(s);let u="".concat(l.protocol," ").concat(l.address,":").concat(l.port," ").concat(l.type);l.address&&(Cz(l.address)?u+=" (private)":l.protocol==="tcp"&&l.tcpType==="passive"?(e=!0,u+=" (passive)"):l.protocol==="udp"&&(n=!0)),this.appendMessage(u)}r&&r(s,a)},!((i=this.room.engine.pcManager)===null||i===void 0)&&i.subscriber&&(this.room.engine.pcManager.subscriber.onIceCandidateError=s=>{s instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(s.errorCode," ").concat(s.errorText," ").concat(s.url))})});try{yield this.connect(),qe.info("now the room is connected")}catch(i){throw this.appendWarning("ports need to be open on firewall in order to connect."),i}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function Cz(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class Ez extends ks{get description(){return"Connecting to signal connection via WebSocket"}perform(){return I(this,void 0,void 0,function*(){var e,n,i;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let r=new Ey,s;try{s=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1})}catch(a){if(wa(new URL(this.url))){this.appendMessage("Initial connection failed with error ".concat(a.message,". Retrying with region fallback"));const u=yield new tt(this.url,this.token).getNextBestRegionUrl();u&&(s=yield r.join(u,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1}),this.appendMessage("Fallback to region worked. To avoid initial connections failing, ensure you're calling room.prepareConnection() ahead of time"))}}s?(this.appendMessage("Connected to server, version ".concat(s.serverVersion,".")),((e=s.serverInfo)===null||e===void 0?void 0:e.edition)===x1.Cloud&&(!((n=s.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((i=s.serverInfo)===null||i===void 0?void 0:i.region))):this.appendError("Websocket connection could not be established"),yield r.close()})}}class ZW extends er.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=i}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:mi.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==mi.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return I(this,void 0,void 0,function*(){const n=this.getNextCheckId(),i=new e(this.url,this.token,this.options),r=a=>{this.updateCheck(n,a)};i.on("update",r);const s=yield i.run();return i.off("update",r),s})}checkWebsocket(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(Ez)})}checkWebRTC(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(Tz)})}checkTURN(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(wz)})}checkReconnect(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(Sz)})}checkPublishAudio(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(xz)})}checkPublishVideo(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(kz)})}checkConnectionProtocol(){return I(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(bz);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(yz)})}}function Ze(t,e,n){return(e=_z(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pz(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _z(t){var e=Pz(t,"string");return typeof e=="symbol"?e:e+""}new TextEncoder;new TextDecoder;class Cn extends Error{constructor(e,n){var i;super(e,n),Ze(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,(i=Error.captureStackTrace)===null||i===void 0||i.call(Error,this,this.constructor)}}Ze(Cn,"code","ERR_JOSE_GENERIC");class Rz extends Cn{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:i,reason:r,payload:n}}),Ze(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),Ze(this,"claim",void 0),Ze(this,"reason",void 0),Ze(this,"payload",void 0),this.claim=i,this.reason=r,this.payload=n}}Ze(Rz,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class Az extends Cn{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:i,reason:r,payload:n}}),Ze(this,"code","ERR_JWT_EXPIRED"),Ze(this,"claim",void 0),Ze(this,"reason",void 0),Ze(this,"payload",void 0),this.claim=i,this.reason=r,this.payload=n}}Ze(Az,"code","ERR_JWT_EXPIRED");class Nz extends Cn{constructor(){super(...arguments),Ze(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}Ze(Nz,"code","ERR_JOSE_ALG_NOT_ALLOWED");class Oz extends Cn{constructor(){super(...arguments),Ze(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Ze(Oz,"code","ERR_JOSE_NOT_SUPPORTED");class Iz extends Cn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ze(this,"code","ERR_JWE_DECRYPTION_FAILED")}}Ze(Iz,"code","ERR_JWE_DECRYPTION_FAILED");class Dz extends Cn{constructor(){super(...arguments),Ze(this,"code","ERR_JWE_INVALID")}}Ze(Dz,"code","ERR_JWE_INVALID");class Mz extends Cn{constructor(){super(...arguments),Ze(this,"code","ERR_JWS_INVALID")}}Ze(Mz,"code","ERR_JWS_INVALID");class Lz extends Cn{constructor(){super(...arguments),Ze(this,"code","ERR_JWT_INVALID")}}Ze(Lz,"code","ERR_JWT_INVALID");class jz extends Cn{constructor(){super(...arguments),Ze(this,"code","ERR_JWK_INVALID")}}Ze(jz,"code","ERR_JWK_INVALID");class Fz extends Cn{constructor(){super(...arguments),Ze(this,"code","ERR_JWKS_INVALID")}}Ze(Fz,"code","ERR_JWKS_INVALID");class Uz extends Cn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ze(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}Ze(Uz,"code","ERR_JWKS_NO_MATCHING_KEY");class Vz extends Cn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ze(this,Symbol.asyncIterator,void 0),Ze(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}Ze(Vz,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class Bz extends Cn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ze(this,"code","ERR_JWKS_TIMEOUT")}}Ze(Bz,"code","ERR_JWKS_TIMEOUT");class zz extends Cn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ze(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}Ze(zz,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");var ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wz(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gg={exports:{}},qz=Gg.exports,aT;function Hz(){return aT||(aT=1,(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(qz,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],s={},a=null;function l(x,C){var E=x[C];if(typeof E.bind=="function")return E.bind(x);try{return Function.prototype.bind.call(E,x)}catch{return function(){return Function.prototype.apply.apply(E,[x,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(x){return x==="debug"&&(x="log"),typeof console===n?!1:x==="trace"&&i?u:console[x]!==void 0?l(console,x):console.log!==void 0?l(console,"log"):e}function h(){for(var x=this.getLevel(),C=0;C<r.length;C++){var E=r[C];this[E]=C<x?e:this.methodFactory(E,x,this.name)}if(this.log=this.debug,typeof console===n&&x<this.levels.SILENT)return"No console available for logging"}function m(x){return function(){typeof console!==n&&(h.call(this),this[x].apply(this,arguments))}}function g(x,C,E){return d(x)||m.apply(this,arguments)}function k(x,C){var E=this,A,N,w,S="loglevel";typeof x=="string"?S+=":"+x:typeof x=="symbol"&&(S=void 0);function R(W){var H=(r[W]||"silent").toUpperCase();if(!(typeof window===n||!S)){try{window.localStorage[S]=H;return}catch{}try{window.document.cookie=encodeURIComponent(S)+"="+H+";"}catch{}}}function D(){var W;if(!(typeof window===n||!S)){try{W=window.localStorage[S]}catch{}if(typeof W===n)try{var H=window.document.cookie,ie=encodeURIComponent(S),ee=H.indexOf(ie+"=");ee!==-1&&(W=/^([^;]+)/.exec(H.slice(ee+ie.length+1))[1])}catch{}return E.levels[W]===void 0&&(W=void 0),W}}function j(){if(!(typeof window===n||!S)){try{window.localStorage.removeItem(S)}catch{}try{window.document.cookie=encodeURIComponent(S)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function V(W){var H=W;if(typeof H=="string"&&E.levels[H.toUpperCase()]!==void 0&&(H=E.levels[H.toUpperCase()]),typeof H=="number"&&H>=0&&H<=E.levels.SILENT)return H;throw new TypeError("log.setLevel() called with invalid level: "+W)}E.name=x,E.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},E.methodFactory=C||g,E.getLevel=function(){return w??N??A},E.setLevel=function(W,H){return w=V(W),H!==!1&&R(w),h.call(E)},E.setDefaultLevel=function(W){N=V(W),D()||E.setLevel(W,!1)},E.resetLevel=function(){w=null,j(),h.call(E)},E.enableAll=function(W){E.setLevel(E.levels.TRACE,W)},E.disableAll=function(W){E.setLevel(E.levels.SILENT,W)},E.rebuild=function(){if(a!==E&&(A=V(a.getLevel())),h.call(E),a===E)for(var W in s)s[W].rebuild()},A=V(a?a.getLevel():"WARN");var B=D();B!=null&&(w=V(B)),h.call(E)}a=new k,a.getLogger=function(x){if(typeof x!="symbol"&&typeof x!="string"||x==="")throw new TypeError("You must supply a name when creating a logger.");var C=s[x];return C||(C=s[x]=new k(x,a.methodFactory)),C};var T=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=T),a},a.getLoggers=function(){return s},a.default=a,a})})(Gg)),Gg.exports}var $z=Hz();const Kz=Wz($z);var Zg=function(t,e){return Zg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},Zg(t,e)};function _r(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Zg(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Gz(t,e,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(h){try{d(i.next(h))}catch(m){a(m)}}function u(h){try{d(i.throw(h))}catch(m){a(m)}}function d(h){h.done?s(h.value):r(h.value).then(l,u)}d((i=i.apply(t,[])).next())})}function FR(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(d){return function(h){return u([d,h])}}function u(d){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(i=1,r&&(s=d[0]&2?r.return:d[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,d[1])).done)return s;switch(r=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,r=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(h){d=[6,h],r=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Ca(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mf(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,s=[],a;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return s}function gf(t,e,n){if(arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}function ha(t){return this instanceof ha?(this.v=t,this):new ha(t)}function Zz(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(k){return function(T){return Promise.resolve(T).then(k,m)}}function l(k,T){i[k]&&(r[k]=function(x){return new Promise(function(C,E){s.push([k,x,C,E])>1||u(k,x)})},T&&(r[k]=T(r[k])))}function u(k,T){try{d(i[k](T))}catch(x){g(s[0][3],x)}}function d(k){k.value instanceof ha?Promise.resolve(k.value.v).then(h,m):g(s[0][2],k)}function h(k){u("next",k)}function m(k){u("throw",k)}function g(k,T){k(T),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Qz(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ca=="function"?Ca(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(a){return new Promise(function(l,u){a=t[s](a),r(l,u,a.done,a.value)})}}function r(s,a,l,u){Promise.resolve(u).then(function(d){s({value:d,done:l})},a)}}function $t(t){return typeof t=="function"}function Dy(t){var e=function(i){Error.call(i),i.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Bm=Dy(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function vf(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ml=(function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,i,r,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var l=Ca(a),u=l.next();!u.done;u=l.next()){var d=u.value;d.remove(this)}}catch(x){e={error:x}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}else a.remove(this);var h=this.initialTeardown;if($t(h))try{h()}catch(x){s=x instanceof Bm?x.errors:[x]}var m=this._finalizers;if(m){this._finalizers=null;try{for(var g=Ca(m),k=g.next();!k.done;k=g.next()){var T=k.value;try{cT(T)}catch(x){s=s??[],x instanceof Bm?s=gf(gf([],mf(s)),mf(x.errors)):s.push(x)}}}catch(x){i={error:x}}finally{try{k&&!k.done&&(r=g.return)&&r.call(g)}finally{if(i)throw i.error}}}if(s)throw new Bm(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)cT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&vf(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&vf(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=(function(){var e=new t;return e.closed=!0,e})(),t})(),UR=Ml.EMPTY;function VR(t){return t instanceof Ml||t&&"closed"in t&&$t(t.remove)&&$t(t.add)&&$t(t.unsubscribe)}function cT(t){$t(t)?t():t.unsubscribe()}var Jz={Promise:void 0},Yz={setTimeout:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,gf([t,e],mf(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function BR(t){Yz.setTimeout(function(){throw t})}function Qg(){}function Dd(t){t()}var My=(function(t){_r(e,t);function e(n){var i=t.call(this)||this;return i.isStopped=!1,n?(i.destination=n,VR(n)&&n.add(i)):i.destination=t9,i}return e.create=function(n,i,r){return new Jg(n,i,r)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(Ml),Xz=(function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(i){cd(i)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(i){cd(i)}else cd(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){cd(n)}},t})(),Jg=(function(t){_r(e,t);function e(n,i,r){var s=t.call(this)||this,a;return $t(n)||!n?a={next:n??void 0,error:i??void 0,complete:r??void 0}:a=n,s.destination=new Xz(a),s}return e})(My);function cd(t){BR(t)}function e9(t){throw t}var t9={closed:!0,next:Qg,error:e9,complete:Qg},Ly=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function zR(t){return t}function n9(t){return t.length===0?zR:t.length===1?t[0]:function(e){return t.reduce(function(n,i){return i(n)},e)}}var Tn=(function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,i){var r=this,s=r9(e)?e:new Jg(e,n,i);return Dd(function(){var a=r,l=a.operator,u=a.source;s.add(l?l.call(s,u):u?r._subscribe(s):r._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var i=this;return n=lT(n),new n(function(r,s){var a=new Jg({next:function(l){try{e(l)}catch(u){s(u),a.unsubscribe()}},error:s,complete:r});i.subscribe(a)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[Ly]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return n9(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=lT(e),new e(function(i,r){var s;n.subscribe(function(a){return s=a},function(a){return r(a)},function(){return i(s)})})},t.create=function(e){return new t(e)},t})();function lT(t){var e;return(e=t??Jz.Promise)!==null&&e!==void 0?e:Promise}function i9(t){return t&&$t(t.next)&&$t(t.error)&&$t(t.complete)}function r9(t){return t&&t instanceof My||i9(t)&&VR(t)}function s9(t){return $t(t?.lift)}function Ss(t){return function(e){if(s9(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function io(t,e,n,i,r){return new o9(t,e,n,i,r)}var o9=(function(t){_r(e,t);function e(n,i,r,s,a,l){var u=t.call(this,n)||this;return u.onFinalize=a,u.shouldUnsubscribe=l,u._next=i?function(d){try{i(d)}catch(h){n.error(h)}}:t.prototype._next,u._error=s?function(d){try{s(d)}catch(h){n.error(h)}finally{this.unsubscribe()}}:t.prototype._error,u._complete=r?function(){try{r()}catch(d){n.error(d)}finally{this.unsubscribe()}}:t.prototype._complete,u}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e})(My),a9=Dy(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),yf=(function(t){_r(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var i=new uT(this,this);return i.operator=n,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new a9},e.prototype.next=function(n){var i=this;Dd(function(){var r,s;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var a=Ca(i.currentObservers),l=a.next();!l.done;l=a.next()){var u=l.value;u.next(n)}}catch(d){r={error:d}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(r)throw r.error}}}})},e.prototype.error=function(n){var i=this;Dd(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=n;for(var r=i.observers;r.length;)r.shift().error(n)}})},e.prototype.complete=function(){var n=this;Dd(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var i=n.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var i=this,r=this,s=r.hasError,a=r.isStopped,l=r.observers;return s||a?UR:(this.currentObservers=null,l.push(n),new Ml(function(){i.currentObservers=null,vf(l,n)}))},e.prototype._checkFinalizedStatuses=function(n){var i=this,r=i.hasError,s=i.thrownError,a=i.isStopped;r?n.error(s):a&&n.complete()},e.prototype.asObservable=function(){var n=new Tn;return n.source=this,n},e.create=function(n,i){return new uT(n,i)},e})(Tn),uT=(function(t){_r(e,t);function e(n,i){var r=t.call(this)||this;return r.destination=n,r.source=i,r}return e.prototype.next=function(n){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.next)===null||r===void 0||r.call(i,n)},e.prototype.error=function(n){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.error)===null||r===void 0||r.call(i,n)},e.prototype.complete=function(){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||i===void 0||i.call(n)},e.prototype._subscribe=function(n){var i,r;return(r=(i=this.source)===null||i===void 0?void 0:i.subscribe(n))!==null&&r!==void 0?r:UR},e})(yf),c9=(function(t){_r(e,t);function e(n){var i=t.call(this)||this;return i._value=n,i}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var i=t.prototype._subscribe.call(this,n);return!i.closed&&n.next(this._value),i},e.prototype.getValue=function(){var n=this,i=n.hasError,r=n.thrownError,s=n._value;if(i)throw r;return this._throwIfClosed(),s},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e})(yf),l9={now:function(){return Date.now()}},u9=(function(t){_r(e,t);function e(n,i){return t.call(this)||this}return e.prototype.schedule=function(n,i){return this},e})(Ml),dT={setInterval:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,gf([t,e],mf(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},d9=(function(t){_r(e,t);function e(n,i){var r=t.call(this,n,i)||this;return r.scheduler=n,r.work=i,r.pending=!1,r}return e.prototype.schedule=function(n,i){var r;if(i===void 0&&(i=0),this.closed)return this;this.state=n;var s=this.id,a=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(a,s,i)),this.pending=!0,this.delay=i,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(a,this.id,i),this},e.prototype.requestAsyncId=function(n,i,r){return r===void 0&&(r=0),dT.setInterval(n.flush.bind(n,this),r)},e.prototype.recycleAsyncId=function(n,i,r){if(r===void 0&&(r=0),r!=null&&this.delay===r&&this.pending===!1)return i;i!=null&&dT.clearInterval(i)},e.prototype.execute=function(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(n,i);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,i){var r=!1,s;try{this.work(n)}catch(a){r=!0,s=a||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,i=n.id,r=n.scheduler,s=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,vf(s,this),i!=null&&(this.id=this.recycleAsyncId(r,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e})(u9),fT=(function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,i){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(i,n)},t.now=l9.now,t})(),f9=(function(t){_r(e,t);function e(n,i){i===void 0&&(i=fT.now);var r=t.call(this,n,i)||this;return r.actions=[],r._active=!1,r}return e.prototype.flush=function(n){var i=this.actions;if(this._active){i.push(n);return}var r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=i.shift());if(this._active=!1,r){for(;n=i.shift();)n.unsubscribe();throw r}},e})(fT);new f9(d9);function h9(t){return t&&$t(t.schedule)}function p9(t){return t[t.length-1]}function WR(t){return h9(p9(t))?t.pop():void 0}var qR=(function(t){return t&&typeof t.length=="number"&&typeof t!="function"});function HR(t){return $t(t?.then)}function $R(t){return $t(t[Ly])}function KR(t){return Symbol.asyncIterator&&$t(t?.[Symbol.asyncIterator])}function GR(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function m9(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ZR=m9();function QR(t){return $t(t?.[ZR])}function JR(t){return Zz(this,arguments,function(){var e,n,i,r;return FR(this,function(s){switch(s.label){case 0:e=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,ha(e.read())];case 3:return n=s.sent(),i=n.value,r=n.done,r?[4,ha(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,ha(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function YR(t){return $t(t?.getReader)}function Ia(t){if(t instanceof Tn)return t;if(t!=null){if($R(t))return g9(t);if(qR(t))return v9(t);if(HR(t))return y9(t);if(KR(t))return XR(t);if(QR(t))return b9(t);if(YR(t))return x9(t)}throw GR(t)}function g9(t){return new Tn(function(e){var n=t[Ly]();if($t(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function v9(t){return new Tn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function y9(t){return new Tn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,BR)})}function b9(t){return new Tn(function(e){var n,i;try{for(var r=Ca(t),s=r.next();!s.done;s=r.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}e.complete()})}function XR(t){return new Tn(function(e){k9(t,e).catch(function(n){return e.error(n)})})}function x9(t){return XR(JR(t))}function k9(t,e){var n,i,r,s;return Gz(this,void 0,void 0,function(){var a,l;return FR(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=Qz(t),u.label=1;case 1:return[4,n.next()];case 2:if(i=u.sent(),!!i.done)return[3,4];if(a=i.value,e.next(a),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=u.sent(),r={error:l},[3,11];case 6:return u.trys.push([6,,9,10]),i&&!i.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Ks(t,e,n,i,r){i===void 0&&(i=0),r===void 0&&(r=!1);var s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function eA(t,e){return e===void 0&&(e=0),Ss(function(n,i){n.subscribe(io(i,function(r){return Ks(i,t,function(){return i.next(r)},e)},function(){return Ks(i,t,function(){return i.complete()},e)},function(r){return Ks(i,t,function(){return i.error(r)},e)}))})}function tA(t,e){return e===void 0&&(e=0),Ss(function(n,i){i.add(t.schedule(function(){return n.subscribe(i)},e))})}function S9(t,e){return Ia(t).pipe(tA(e),eA(e))}function w9(t,e){return Ia(t).pipe(tA(e),eA(e))}function T9(t,e){return new Tn(function(n){var i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function C9(t,e){return new Tn(function(n){var i;return Ks(n,e,function(){i=t[ZR](),Ks(n,e,function(){var r,s,a;try{r=i.next(),s=r.value,a=r.done}catch(l){n.error(l);return}a?n.complete():n.next(s)},0,!0)}),function(){return $t(i?.return)&&i.return()}})}function nA(t,e){if(!t)throw new Error("Iterable cannot be null");return new Tn(function(n){Ks(n,e,function(){var i=t[Symbol.asyncIterator]();Ks(n,e,function(){i.next().then(function(r){r.done?n.complete():n.next(r.value)})},0,!0)})})}function E9(t,e){return nA(JR(t),e)}function P9(t,e){if(t!=null){if($R(t))return S9(t,e);if(qR(t))return T9(t,e);if(HR(t))return w9(t,e);if(KR(t))return nA(t,e);if(QR(t))return C9(t,e);if(YR(t))return E9(t,e)}throw GR(t)}function iA(t,e){return e?P9(t,e):Ia(t)}Dy(function(t){return function(e){e===void 0&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function ys(t,e){return Ss(function(n,i){var r=0;n.subscribe(io(i,function(s){i.next(t.call(e,s,r++))}))})}function _9(t,e,n,i,r,s,a,l){var u=[],d=0,h=0,m=!1,g=function(){m&&!u.length&&!d&&e.complete()},k=function(x){return d<i?T(x):u.push(x)},T=function(x){d++;var C=!1;Ia(n(x,h++)).subscribe(io(e,function(E){e.next(E)},function(){C=!0},void 0,function(){if(C)try{d--;for(var E=function(){var A=u.shift();a||T(A)};u.length&&d<i;)E();g()}catch(A){e.error(A)}}))};return t.subscribe(io(e,k,function(){m=!0,g()})),function(){}}function rA(t,e,n){return n===void 0&&(n=1/0),$t(e)?rA(function(i,r){return ys(function(s,a){return e(i,s,r,a)})(Ia(t(i,r)))},n):(typeof e=="number"&&(n=e),Ss(function(i,r){return _9(i,r,t,n)}))}function R9(t){return rA(zR,t)}function A9(){return R9(1)}function hT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return A9()(iA(t,WR(t)))}function sA(t,e){return Ss(function(n,i){var r=0;n.subscribe(io(i,function(s){return t.call(e,s,r++)&&i.next(s)}))})}function N9(t,e,n,i,r){return function(s,a){var l=n,u=e,d=0;s.subscribe(io(a,function(h){var m=d++;u=l?t(u,h,m):(l=!0,h),a.next(u)},r))}}function pT(t,e){return Ss(N9(t,e,arguments.length>=2,!0))}function Ll(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=WR(t);return Ss(function(i,r){(n?hT(t,i,n):hT(t,i)).subscribe(r)})}function mT(t){return Ss(function(e,n){Ia(t).subscribe(io(n,function(){return n.complete()},Qg)),!n.closed&&e.subscribe(n)})}var O9=Object.defineProperty,I9=Object.defineProperties,D9=Object.getOwnPropertyDescriptors,gT=Object.getOwnPropertySymbols,M9=Object.prototype.hasOwnProperty,L9=Object.prototype.propertyIsEnumerable,vT=(t,e,n)=>e in t?O9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$o=(t,e)=>{for(var n in e||(e={}))M9.call(e,n)&&vT(t,n,e[n]);if(gT)for(var n of gT(e))L9.call(e,n)&&vT(t,n,e[n]);return t},Nc=(t,e)=>I9(t,D9(e)),bf=(t,e,n)=>new Promise((i,r)=>{var s=u=>{try{l(n.next(u))}catch(d){r(d)}},a=u=>{try{l(n.throw(u))}catch(d){r(d)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(s,a);l((n=n.apply(t,e)).next())}),j9="lk";function jy(t){return typeof t>"u"?!1:F9(t)||U9(t)}function F9(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function U9(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function V9(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function B9(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(V9(t))return`${t.participant.identity}_${t.source}_placeholder`;if(jy(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}var z9=[Q.ConnectionStateChanged,Q.RoomMetadataChanged,Q.ActiveSpeakersChanged,Q.ConnectionQualityChanged,Q.ParticipantConnected,Q.ParticipantDisconnected,Q.ParticipantPermissionsChanged,Q.ParticipantMetadataChanged,Q.ParticipantNameChanged,Q.ParticipantAttributesChanged,Q.TrackMuted,Q.TrackUnmuted,Q.TrackPublished,Q.TrackUnpublished,Q.TrackStreamStateChanged,Q.TrackSubscriptionFailed,Q.TrackSubscriptionPermissionChanged,Q.TrackSubscriptionStatusChanged],W9=[...z9,Q.LocalTrackPublished,Q.LocalTrackUnpublished];te.TrackPublished,te.TrackUnpublished,te.TrackMuted,te.TrackUnmuted,te.TrackStreamStateChanged,te.TrackSubscribed,te.TrackUnsubscribed,te.TrackSubscriptionPermissionChanged,te.TrackSubscriptionFailed,te.LocalTrackPublished,te.LocalTrackUnpublished;var q9=[te.ConnectionQualityChanged,te.IsSpeakingChanged,te.ParticipantMetadataChanged,te.ParticipantPermissionsChanged,te.TrackMuted,te.TrackUnmuted,te.TrackPublished,te.TrackUnpublished,te.TrackStreamStateChanged,te.TrackSubscriptionFailed,te.TrackSubscriptionPermissionChanged,te.TrackSubscriptionStatusChanged];[...q9,te.LocalTrackPublished,te.LocalTrackUnpublished];var tn=Kz.getLogger("lk-components-js");tn.setDefaultLevel("WARN");var oA=(t=>(t.AgentState="lk.agent.state",t.PublishOnBehalf="lk.publish_on_behalf",t.TranscriptionFinal="lk.transcription_final",t.TranscriptionSegmentId="lk.segment_id",t.TranscribedTrackId="lk.transcribed_track_id",t))(oA||{});function aA(t){return typeof t=="object"}function cA(t){return Array.isArray(t)&&t.filter(aA).length>0}function H9(t){return`${j9}-${t}`}function $9(t){const e=Yg(t),n=J9(t.participant).pipe(ys(()=>Yg(t)),Ll(e));return{className:H9(t.source===Y.Source.Camera||t.source===Y.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function Yg(t){if(jy(t))return t.publication;{const{source:e,name:n,participant:i}=t;if(e&&n)return i.getTrackPublications().find(r=>r.source===e&&r.trackName===n);if(n)return i.getTrackPublicationByName(n);if(e)return i.getTrackPublication(e);throw new Error("At least one of source and name needs to be defined")}}function K9(t,...e){return new Tn(n=>{const i=()=>{n.next(t)};return e.forEach(r=>{t.on(r,i)}),()=>{e.forEach(r=>{t.off(r,i)})}}).pipe(Ll(t))}function lA(t,e){return new Tn(n=>{const i=(...r)=>{n.next(r)};return t.on(e,i),()=>{t.off(e,i)}})}function G9(t){return lA(t,Q.ConnectionStateChanged).pipe(ys(([e])=>e),Ll(t.state))}function Z9(t){return lA(t,Q.DataReceived)}function Q9(t,...e){return new Tn(n=>{const i=()=>{n.next(t)};return e.forEach(r=>{t.on(r,i)}),()=>{e.forEach(r=>{t.off(r,i)})}}).pipe(Ll(t))}function J9(t){return Q9(t,te.TrackMuted,te.TrackUnmuted,te.ParticipantPermissionsChanged,te.TrackPublished,te.TrackUnpublished,te.LocalTrackPublished,te.LocalTrackUnpublished,te.MediaDevicesError,te.TrackSubscriptionStatusChanged).pipe(ys(e=>{const{isMicrophoneEnabled:n,isCameraEnabled:i,isScreenShareEnabled:r}=e,s=e.getTrackPublication(Y.Source.Microphone),a=e.getTrackPublication(Y.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:n,isScreenShareEnabled:r,cameraTrack:a,microphoneTrack:s,participant:e}}))}var Y9={CHAT:"lk.chat"},X9={CHAT:"lk-chat-topic"};function uA(t,e){return bf(this,arguments,function*(n,i,r={}){const{reliable:s,destinationIdentities:a,topic:l}=r;yield n.publishData(i,{destinationIdentities:a,topic:l,reliable:s})})}function eW(t,e,n){const i=Array.isArray(e)?e:[e],r=Z9(t).pipe(sA(([,,,l])=>e===void 0||l!==void 0&&i.includes(l)),ys(([l,u,,d])=>({payload:l,topic:d,from:u})));let s;const a=new Tn(l=>{s=l});return{messageObservable:r,isSendingObservable:a,send:(l,...u)=>bf(this,[l,...u],function*(d,h={}){s.next(!0);try{yield uA(t.localParticipant,d,$o({topic:i[0]},h))}finally{s.next(!1)}})}}var ld=new WeakMap;function tW(t){return t.ignoreLegacy==!0}var nW=t=>JSON.parse(new TextDecoder().decode(t)),iW=t=>new TextEncoder().encode(JSON.stringify(t));function rW(t,e){var n,i,r,s,a,l;const u=()=>{var S,R,D;return((S=t.serverInfo)==null?void 0:S.edition)===1||!!((R=t.serverInfo)!=null&&R.version)&&Ai((D=t.serverInfo)==null?void 0:D.version,"1.8.2")>0},d=new yf,h=(n=void 0)!=null?n:Y9.CHAT,m=(i=void 0)!=null?i:X9.CHAT;let g=!1;ld.has(t)||(g=!0);const k=(r=ld.get(t))!=null?r:new Map,T=(s=k.get(h))!=null?s:new yf;k.set(h,T),ld.set(t,k);const x=(a=void 0)!=null?a:nW;if(g){t.registerTextStreamHandler(h,(R,D)=>bf(this,null,function*(){const{id:j,timestamp:V}=R.info;iA(R).pipe(pT((B,W)=>B+W),ys(B=>({id:j,timestamp:V,message:B,from:t.getParticipantByIdentity(D.identity),type:"chatMessage"}))).subscribe({next:B=>T.next(B)})}));const{messageObservable:S}=eW(t,[m]);S.pipe(ys(R=>{const D=x(R.payload);return tW(D)?void 0:Nc($o({},D),{type:"chatMessage",from:R.from})}),sA(R=>!!R),mT(d)).subscribe(T)}const C=T.pipe(pT((S,R)=>{if("id"in R&&S.find(D=>{var j,V;return((j=D.from)==null?void 0:j.identity)===((V=R.from)==null?void 0:V.identity)&&D.id===R.id})){const D=S.findIndex(j=>j.id===R.id);if(D>-1){const j=S[D];S[D]=Nc($o({},R),{timestamp:j.timestamp,editTimestamp:R.timestamp})}return[...S]}return[...S,R]},[]),mT(d)),E=new c9(!1),A=(l=void 0)!=null?l:iW,N=(S,R)=>bf(this,null,function*(){R||(R={}),R.topic!=null||(R.topic=h),E.next(!0);try{const D={id:(yield t.localParticipant.sendText(S,R)).id,timestamp:Date.now(),message:S},j=Nc($o({},D),{attachedFiles:R.attachments}),V=Nc($o({},j),{type:"chatMessage",from:t.localParticipant,attributes:R.attributes});T.next(V);const B=A(Nc($o({},D),{ignoreLegacy:u()}));try{yield uA(t.localParticipant,B,{reliable:!0,topic:m})}catch(W){tn.info("could not send message in legacy chat format",W)}return V}finally{E.next(!1)}});function w(){d.next(),d.complete(),T.complete(),ld.delete(t),t.unregisterTextStreamHandler(h)}return t.once(Q.Disconnected,w),{messageObservable:C,isSendingObservable:E,send:N}}function sW(){return{className:"lk-room-container"}}function yT(t,e,n=!0){const i=[t.localParticipant,...Array.from(t.remoteParticipants.values())],r=[];return i.forEach(s=>{e.forEach(a=>{const l=Array.from(s.trackPublications.values()).filter(u=>u.source===a&&(!n||u.track)).map(u=>({participant:s,publication:u,source:u.source}));r.push(...l)})}),{trackReferences:r,participants:i}}function oW(t,e,n){var i,r;const s=(i=n.additionalRoomEvents)!=null?i:W9,a=(r=n.onlySubscribed)!=null?r:!0,l=Array.from(new Set([Q.ParticipantConnected,Q.ParticipantDisconnected,Q.ConnectionStateChanged,Q.LocalTrackPublished,Q.LocalTrackUnpublished,Q.TrackPublished,Q.TrackUnpublished,Q.TrackSubscriptionStatusChanged,...s]).values());return K9(t,...l).pipe(ys(u=>{const d=yT(u,e,a);return tn.debug(`TrackReference[] was updated. (length ${d.trackReferences.length})`,d),d}),Ll(yT(t,e,a)))}P.createContext(void 0);const aW=P.createContext(void 0);function cW(){return P.useContext(aW)}function lW(t){const e=cW(),n=t??e;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}P.createContext(void 0);const Fy=P.createContext(void 0);function dA(){const t=P.useContext(Fy);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function uW(){return P.useContext(Fy)}function Uy(t){const e=uW(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}P.createContext(void 0);const dW=P.createContext(void 0);function fA(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=fA(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function fW(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=fA(t))&&(i&&(i+=" "),i+=e);return i}function hW(...t){return(...e)=>{for(const n of t)if(typeof n=="function")try{n(...e)}catch(i){console.error(i)}}}function hA(...t){const e={...t[0]};for(let n=1;n<t.length;n++){const i=t[n];for(const r in i){const s=e[r],a=i[r];typeof s=="function"&&typeof a=="function"&&r[0]==="o"&&r[1]==="n"&&r.charCodeAt(2)>=65&&r.charCodeAt(2)<=90?e[r]=hW(s,a):(r==="className"||r==="UNSAFE_className")&&typeof s=="string"&&typeof a=="string"?e[r]=fW(s,a):e[r]=a!==void 0?a:s}}return e}function pW(t){return t!==void 0}function mW(...t){return hA(...t.filter(pW))}function gW(t,e){return t==="processor"&&e&&typeof e=="object"&&"name"in e?e.name:t==="e2ee"&&e?"e2ee-enabled":e}const vW={connect:!0,audio:!1,video:!1};function yW(t){const{token:e,serverUrl:n,options:i,room:r,connectOptions:s,connect:a,audio:l,video:u,screen:d,onConnected:h,onDisconnected:m,onError:g,onMediaDeviceFailure:k,onEncryptionError:T,simulateParticipants:x,...C}={...vW,...t};i&&r&&tn.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[E,A]=P.useState(),N=P.useRef(a);P.useEffect(()=>{A(r??new Ta(i))},[r,JSON.stringify(i,gW)]);const w=P.useMemo(()=>{const{className:S}=sW();return hA(C,{className:S})},[C]);return P.useEffect(()=>{if(!E)return;const S=()=>{const B=E.localParticipant;tn.debug("trying to publish local tracks"),Promise.all([B.setMicrophoneEnabled(!!l,typeof l!="boolean"?l:void 0),B.setCameraEnabled(!!u,typeof u!="boolean"?u:void 0),B.setScreenShareEnabled(!!d,typeof d!="boolean"?d:void 0)]).catch(W=>{tn.warn(W),g?.(W)})},R=(B,W)=>{const H=Sl.getFailure(B);k?.(H,W)},D=B=>{T?.(B)},j=B=>{m?.(B)},V=()=>{h?.()};return E.on(Q.SignalConnected,S).on(Q.MediaDevicesError,R).on(Q.EncryptionError,D).on(Q.Disconnected,j).on(Q.Connected,V),()=>{E.off(Q.SignalConnected,S).off(Q.MediaDevicesError,R).off(Q.EncryptionError,D).off(Q.Disconnected,j).off(Q.Connected,V)}},[E,l,u,d,g,T,k,h,m]),P.useEffect(()=>{if(E){if(x){E.simulateParticipants({participants:{count:x},publish:{audio:!0,useRealTracks:!0}});return}if(a){if(N.current=!0,tn.debug("connecting"),!e){tn.debug("no token yet");return}if(!n){tn.warn("no livekit url provided"),g?.(Error("no livekit url provided"));return}E.connect(n,e,s).catch(S=>{tn.warn(S),N.current===!0&&g?.(S)})}else tn.debug("disconnecting because connect is false"),N.current=!1,E.disconnect()}},[a,e,JSON.stringify(s),E,g,n,x]),P.useEffect(()=>{if(E)return()=>{tn.info("disconnecting on onmount"),E.disconnect()}},[E]),{room:E,htmlProps:w}}const bW=P.forwardRef(function(t,e){const{room:n,htmlProps:i}=yW(t);return P.createElement("div",{ref:e,...i},n&&P.createElement(Fy.Provider,{value:n},P.createElement(dW.Provider,{value:t.featureFlags},t.children)))});function Xg(t,e,n=!0){const[i,r]=P.useState(e);return P.useEffect(()=>{if(n&&r(e),typeof window>"u"||!t)return;const s=t.subscribe(r);return()=>s.unsubscribe()},[t,n]),i}function pA(t){const e=Uy(t),n=P.useMemo(()=>G9(e),[e]);return Xg(n,e.state)}function xW(t=[Y.Source.Camera,Y.Source.Microphone,Y.Source.ScreenShare,Y.Source.ScreenShareAudio,Y.Source.Unknown],e={}){const n=Uy(e.room),[i,r]=P.useState([]),[s,a]=P.useState([]),l=P.useMemo(()=>t.map(u=>aA(u)?u.source:u),[JSON.stringify(t)]);return P.useEffect(()=>{const u=oW(n,l,{additionalRoomEvents:e.updateOnlyOn,onlySubscribed:e.onlySubscribed}).subscribe(({trackReferences:d,participants:h})=>{tn.debug("setting track bundles",d,h),r(d),a(h)});return()=>u.unsubscribe()},[n,JSON.stringify(e.onlySubscribed),JSON.stringify(e.updateOnlyOn),JSON.stringify(t)]),P.useMemo(()=>{if(cA(t)){const u=SW(t,s),d=Array.from(i);return s.forEach(h=>{u.has(h.identity)&&(u.get(h.identity)??[]).forEach(m=>{if(i.find(({participant:k,publication:T})=>h.identity===k.identity&&T.source===m))return;tn.debug(`Add ${m} placeholder for participant ${h.identity}.`);const g={participant:h,source:m};d.push(g)})}),d}else return i},[i,s,t])}function kW(t,e){const n=new Set(t);for(const i of e)n.delete(i);return n}function SW(t,e){const n=new Map;if(cA(t)){const i=t.filter(r=>r.withPlaceholder).map(r=>r.source);e.forEach(r=>{const s=r.getTrackPublications().map(l=>{var u;return(u=l.track)==null?void 0:u.source}).filter(l=>l!==void 0),a=Array.from(kW(new Set(i),new Set(s)));a.length>0&&n.set(r.identity,a)})}return n}function wW(t){const e=Uy(void 0),n=pA(e),i=P.useMemo(()=>n===Ye.Disconnected,[n]),r=P.useMemo(()=>rW(e),[e,t,i]),s=Xg(r.isSendingObservable,!1),a=Xg(r.messageObservable,[]);return{send:r.send,chatMessages:a,isSending:s}}oA.AgentState;var ud={exports:{}},bT;function TW(){if(bT)return ud.exports;bT=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(w,S,R){return Function.prototype.apply.call(w,S,R)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))}:n=function(w){return Object.getOwnPropertyNames(w)};function i(w){console&&console.warn&&console.warn(w)}var r=Number.isNaN||function(w){return w!==w};function s(){s.init.call(this)}ud.exports=s,ud.exports.once=E,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function l(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(w){if(typeof w!="number"||w<0||r(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");a=w}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(w){if(typeof w!="number"||w<0||r(w))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+w+".");return this._maxListeners=w,this};function u(w){return w._maxListeners===void 0?s.defaultMaxListeners:w._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(w){for(var S=[],R=1;R<arguments.length;R++)S.push(arguments[R]);var D=w==="error",j=this._events;if(j!==void 0)D=D&&j.error===void 0;else if(!D)return!1;if(D){var V;if(S.length>0&&(V=S[0]),V instanceof Error)throw V;var B=new Error("Unhandled error."+(V?" ("+V.message+")":""));throw B.context=V,B}var W=j[w];if(W===void 0)return!1;if(typeof W=="function")e(W,this,S);else for(var H=W.length,ie=T(W,H),R=0;R<H;++R)e(ie[R],this,S);return!0};function d(w,S,R,D){var j,V,B;if(l(R),V=w._events,V===void 0?(V=w._events=Object.create(null),w._eventsCount=0):(V.newListener!==void 0&&(w.emit("newListener",S,R.listener?R.listener:R),V=w._events),B=V[S]),B===void 0)B=V[S]=R,++w._eventsCount;else if(typeof B=="function"?B=V[S]=D?[R,B]:[B,R]:D?B.unshift(R):B.push(R),j=u(w),j>0&&B.length>j&&!B.warned){B.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=w,W.type=S,W.count=B.length,i(W)}return w}s.prototype.addListener=function(w,S){return d(this,w,S,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(w,S){return d(this,w,S,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(w,S,R){var D={fired:!1,wrapFn:void 0,target:w,type:S,listener:R},j=h.bind(D);return j.listener=R,D.wrapFn=j,j}s.prototype.once=function(w,S){return l(S),this.on(w,m(this,w,S)),this},s.prototype.prependOnceListener=function(w,S){return l(S),this.prependListener(w,m(this,w,S)),this},s.prototype.removeListener=function(w,S){var R,D,j,V,B;if(l(S),D=this._events,D===void 0)return this;if(R=D[w],R===void 0)return this;if(R===S||R.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete D[w],D.removeListener&&this.emit("removeListener",w,R.listener||S));else if(typeof R!="function"){for(j=-1,V=R.length-1;V>=0;V--)if(R[V]===S||R[V].listener===S){B=R[V].listener,j=V;break}if(j<0)return this;j===0?R.shift():x(R,j),R.length===1&&(D[w]=R[0]),D.removeListener!==void 0&&this.emit("removeListener",w,B||S)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(w){var S,R,D;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[w]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[w]),this;if(arguments.length===0){var j=Object.keys(R),V;for(D=0;D<j.length;++D)V=j[D],V!=="removeListener"&&this.removeAllListeners(V);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=R[w],typeof S=="function")this.removeListener(w,S);else if(S!==void 0)for(D=S.length-1;D>=0;D--)this.removeListener(w,S[D]);return this};function g(w,S,R){var D=w._events;if(D===void 0)return[];var j=D[S];return j===void 0?[]:typeof j=="function"?R?[j.listener||j]:[j]:R?C(j):T(j,j.length)}s.prototype.listeners=function(w){return g(this,w,!0)},s.prototype.rawListeners=function(w){return g(this,w,!1)},s.listenerCount=function(w,S){return typeof w.listenerCount=="function"?w.listenerCount(S):k.call(w,S)},s.prototype.listenerCount=k;function k(w){var S=this._events;if(S!==void 0){var R=S[w];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function T(w,S){for(var R=new Array(S),D=0;D<S;++D)R[D]=w[D];return R}function x(w,S){for(;S+1<w.length;S++)w[S]=w[S+1];w.pop()}function C(w){for(var S=new Array(w.length),R=0;R<S.length;++R)S[R]=w[R].listener||w[R];return S}function E(w,S){return new Promise(function(R,D){function j(B){w.removeListener(S,V),D(B)}function V(){typeof w.removeListener=="function"&&w.removeListener("error",j),R([].slice.call(arguments))}N(w,S,V,{once:!0}),S!=="error"&&A(w,j,{once:!0})})}function A(w,S,R){typeof w.on=="function"&&N(w,"error",S,R)}function N(w,S,R,D){if(typeof w.on=="function")D.once?w.once(S,R):w.on(S,R);else if(typeof w.addEventListener=="function")w.addEventListener(S,function j(V){D.once&&w.removeEventListener(S,j),R(V)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return ud.exports}TW();function CW(t,e={}){const[n,i]=P.useState(Yg(t)),[r,s]=P.useState(n?.isMuted),[a,l]=P.useState(n?.isSubscribed),[u,d]=P.useState(n?.track),[h,m]=P.useState("landscape"),g=P.useRef(),{className:k,trackObserver:T}=P.useMemo(()=>$9(t),[t.participant.sid??t.participant.identity,t.source,jy(t)&&t.publication.trackSid]);return P.useEffect(()=>{const x=T.subscribe(C=>{tn.debug("update track",C),i(C),s(C?.isMuted),l(C?.isSubscribed),d(C?.track)});return()=>x?.unsubscribe()},[T]),P.useEffect(()=>{var x,C;return u&&(g.current&&u.detach(g.current),(x=e.element)!=null&&x.current&&!(t.participant.isLocal&&u?.kind==="audio")&&u.attach(e.element.current)),g.current=(C=e.element)==null?void 0:C.current,()=>{g.current&&u?.detach(g.current)}},[u,e.element]),P.useEffect(()=>{var x,C;if(typeof((x=n?.dimensions)==null?void 0:x.width)=="number"&&typeof((C=n?.dimensions)==null?void 0:C.height)=="number"){const E=n.dimensions.width>n.dimensions.height?"landscape":"portrait";m(E)}},[n]),{publication:n,isMuted:r,isSubscribed:a,track:u,elementProps:mW(e.props,{className:k,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":n?.source,...n?.kind==="video"&&{"data-lk-orientation":h}})}}var zm,xT;function EW(){if(xT)return zm;xT=1;var t="Expected a function",e=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt,u=typeof ad=="object"&&ad&&ad.Object===Object&&ad,d=typeof self=="object"&&self&&self.Object===Object&&self,h=u||d||Function("return this")(),m=Object.prototype,g=m.toString,k=Math.max,T=Math.min,x=function(){return h.Date.now()};function C(S,R,D){var j,V,B,W,H,ie,ee=0,Ce=!1,ve=!1,he=!0;if(typeof S!="function")throw new TypeError(t);R=w(R)||0,E(D)&&(Ce=!!D.leading,ve="maxWait"in D,B=ve?k(w(D.maxWait)||0,R):B,he="trailing"in D?!!D.trailing:he);function Z(Ae){var Ve=j,Qe=V;return j=V=void 0,ee=Ae,W=S.apply(Qe,Ve),W}function le(Ae){return ee=Ae,H=setTimeout(X,R),Ce?Z(Ae):W}function oe(Ae){var Ve=Ae-ie,Qe=Ae-ee,At=R-Ve;return ve?T(At,B-Qe):At}function F(Ae){var Ve=Ae-ie,Qe=Ae-ee;return ie===void 0||Ve>=R||Ve<0||ve&&Qe>=B}function X(){var Ae=x();if(F(Ae))return Re(Ae);H=setTimeout(X,oe(Ae))}function Re(Ae){return H=void 0,he&&j?Z(Ae):(j=V=void 0,W)}function Me(){H!==void 0&&clearTimeout(H),ee=0,j=ie=V=H=void 0}function Be(){return H===void 0?W:Re(x())}function Ue(){var Ae=x(),Ve=F(Ae);if(j=arguments,V=this,ie=Ae,Ve){if(H===void 0)return le(ie);if(ve)return H=setTimeout(X,R),Z(ie)}return H===void 0&&(H=setTimeout(X,R)),W}return Ue.cancel=Me,Ue.flush=Be,Ue}function E(S){var R=typeof S;return!!S&&(R=="object"||R=="function")}function A(S){return!!S&&typeof S=="object"}function N(S){return typeof S=="symbol"||A(S)&&g.call(S)==n}function w(S){if(typeof S=="number")return S;if(N(S))return e;if(E(S)){var R=typeof S.valueOf=="function"?S.valueOf():S;S=E(R)?R+"":R}if(typeof S!="string")return S===0?S:+S;S=S.replace(i,"");var D=s.test(S);return D||a.test(S)?l(S.slice(2),D?2:8):r.test(S)?e:+S}return zm=C,zm}EW();const PW=P.forwardRef(function({trackRef:t,onSubscriptionStatusChanged:e,volume:n,...i},r){const s=lW(t),a=P.useRef(null);P.useImperativeHandle(r,()=>a.current);const{elementProps:l,isSubscribed:u,track:d,publication:h}=CW(s,{element:a,props:i});return P.useEffect(()=>{e?.(!!u)},[u,e]),P.useEffect(()=>{d===void 0||n===void 0||(d instanceof DR?d.setVolume(n):tn.warn("Volume can only be set on remote audio tracks."))},[n,d]),P.useEffect(()=>{h===void 0||i.muted===void 0||(h instanceof LR?h.setEnabled(!i.muted):tn.warn("Can only call setEnabled on remote track publications."))},[i.muted,h,d]),P.createElement("audio",{ref:a,...l})});function _W({room:t,volume:e,muted:n}){const i=xW([Y.Source.Microphone,Y.Source.ScreenShareAudio,Y.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0,room:t}).filter(r=>!r.participant.isLocal&&r.publication.kind===Y.Kind.Audio);return P.createElement("div",{style:{display:"none"}},i.map(r=>P.createElement(PW,{key:B9(r),trackRef:r,volume:e,muted:n})))}function RW(){const[t,e]=P.useState(void 0),[n,i]=P.useState(!1),[r,s]=P.useState(null),a=async()=>{try{const d=await fetch("/api/connection-details");if(!d.ok){const m=await d.text();try{const g=JSON.parse(m);throw new Error(g.error||`Server error: ${d.status}`)}catch{throw console.error("Fetch failed:",m),new Error(`Connection failed (${d.status}). Check server logs.`)}}const h=await d.json();if(h.error)throw new Error(h.error);e(h)}catch(d){console.error(d),s(d.message||"Could not connect to server")}};P.useEffect(()=>{n&&!t&&a()},[n]);const[l,u]=P.useState(!1);return r?y.jsxs("div",{className:"relative glass-card rounded-3xl p-6 border border-white/10 overflow-hidden h-full flex flex-col items-center justify-center text-center",children:[y.jsx("p",{className:"text-red-500 mb-4",children:r}),y.jsx(Et,{variant:"outline",onClick:()=>{s(null),i(!1)},children:"Try Again"})]}):n?t?y.jsxs(bW,{token:t.token,serverUrl:t.serverUrl,connect:!0,video:!1,audio:!0,onDisconnected:()=>i(!1),className:"relative glass-card rounded-3xl border border-white/10 overflow-hidden h-full flex flex-col",children:[y.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative p-4 sm:p-6",children:[y.jsx(_W,{}),y.jsxs("div",{className:"w-40 h-40 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center mb-8 relative p-1",children:[y.jsx("div",{className:"absolute inset-0 rounded-full border border-primary/30 animate-pulse"}),y.jsx("img",{src:"/vaani_avatar.png",alt:"Vaani Avatar",className:"w-full h-full rounded-full object-cover border-4 border-background shadow-2xl relative z-10"}),y.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 rounded-full bg-green-500 border-2 border-background shadow-lg z-20"})]}),y.jsx("div",{className:"w-full max-w-[200px] h-12 mb-8",children:y.jsx(NW,{})}),y.jsx(IW,{}),y.jsx("div",{className:"flex justify-center gap-4 mt-auto pt-6 border-t border-white/5 w-full z-20",children:y.jsx(OW,{onDisconnect:()=>i(!1),onChatToggle:()=>u(!l),showChat:l})})]}),l&&y.jsx("div",{className:"absolute inset-0 w-full bg-black/60 backdrop-blur-sm z-10 transition-all",children:y.jsx(AW,{})})]}):y.jsxs("div",{className:"relative glass-card rounded-3xl p-6 border border-white/10 overflow-hidden h-full flex flex-col items-center justify-center",children:[y.jsx(xC,{className:"w-10 h-10 text-primary animate-spin mb-4"}),y.jsx("p",{className:"text-muted-foreground",children:"Connecting to Vaani..."})]}):y.jsxs("div",{className:"relative glass-card rounded-3xl p-4 sm:p-6 border border-white/10 overflow-hidden h-full flex flex-col items-center justify-center text-center",children:[y.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-primary to-accent opacity-20 blur-3xl rounded-full"}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[y.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-primary to-accent p-1 mb-6 shadow-xl shadow-primary/20",children:y.jsx("img",{src:"/vaani_avatar.png",alt:"Vaani Avatar",className:"w-full h-full rounded-full object-cover border-2 border-white/20"})}),y.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Talk to Vaani"}),y.jsx("p",{className:"text-muted-foreground mb-8 max-w-[240px] sm:max-w-[280px]",children:"Experience our human-like AI agent live. Click below to start a conversation."}),y.jsxs(Et,{size:"lg",variant:"glow",className:"h-12 px-4 sm:px-8 text-lg font-semibold w-full sm:w-auto",onClick:()=>i(!0),children:[y.jsx(uv,{className:"w-5 h-5 mr-2"}),"Start Conversation"]}),y.jsxs("p",{className:"mt-6 text-sm text-muted-foreground w-full max-w-[240px] sm:max-w-[280px]",children:["Prefer a phone call? Listen to our IVR demo at"," ",y.jsx("a",{href:"tel:+17247013807",className:"text-primary hover:underline font-medium",children:"+1 724 701 3807"})]})]})]})}function AW(){const{chatMessages:t,send:e,isSending:n}=wW(),i=dA(),[r,s]=P.useState(""),[a,l]=P.useState(new Map),u=async()=>{r.trim()&&(await e(r),s(""))},d=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),u())};P.useEffect(()=>{t.length>0&&console.log("Chat Messages Update:",t)},[t]),P.useEffect(()=>{if(!i)return;const g=(k,T,x,C)=>{try{const E=new TextDecoder().decode(k);console.log("Data Packet Received:",{str:E,topic:C,kind:x,participantIdent:T?.identity})}catch{console.log("Received non-text data packet")}};return i.on(Q.DataReceived,g),()=>{i.off(Q.DataReceived,g)}},[i]),P.useEffect(()=>{if(!i)return;const g=(k,T)=>{T&&(console.log("Transcription Received:",{segments:k,participant:T.identity}),l(x=>{const C=new Map(x);for(const E of k)E.final&&C.set(E.id,{message:E.text,timestamp:E.firstReceivedTime,from:T});return C}))};return i.on(Q.TranscriptionReceived,g),()=>{i.off(Q.TranscriptionReceived,g)}},[i]);const h=[...t,...Array.from(a.values())].sort((g,k)=>g.timestamp-k.timestamp),m=P.useRef(null);return P.useEffect(()=>{m.current&&m.current.scrollTo({top:m.current.scrollHeight,behavior:"smooth"})},[h]),y.jsxs("div",{className:"flex flex-col h-full pb-28",children:[y.jsx("div",{className:"flex items-center p-4 border-b border-white/5 bg-white/5",children:y.jsx("h3",{className:"font-semibold text-sm",children:"Transcript & Chat"})}),y.jsx("div",{ref:m,className:"flex-1 overflow-y-auto p-4 space-y-4",children:h.length===0?y.jsxs("div",{className:"text-center text-muted-foreground text-sm mt-10",children:[y.jsx("p",{children:"Conversation started..."}),y.jsx("p",{className:"text-xs opacity-70 mt-1",children:"Speak or type to interact with Vaani"})]}):h.map((g,k)=>{const x=!(g.from?.isAgent||g.from?.identity?.toLowerCase().includes("agent")||g.from?.name?.toLowerCase().includes("vaani"));return y.jsxs("div",{className:`flex gap-3 ${x?"flex-row-reverse":""}`,children:[y.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden ${x?"bg-primary/20":"bg-white/10"}`,children:x?y.jsx(dv,{className:"w-4 h-4 text-primary"}):y.jsx("img",{src:"/vaani_avatar.png",alt:"Vaani",className:"w-full h-full object-cover"})}),y.jsx("div",{className:`rounded-2xl p-3 text-sm max-w-[85%] ${x?"bg-primary/10 border border-primary/20 text-white rounded-tr-none":"bg-white/5 border border-white/10 text-muted-foreground rounded-tl-none"}`,children:y.jsx("p",{children:g.message})})]},g.timestamp+k)})}),y.jsx("div",{className:"p-4 border-t border-white/5 bg-white/5",children:y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",value:r,onChange:g=>s(g.target.value),onKeyDown:d,placeholder:"Type a message...",className:"w-full bg-black/40 border border-white/10 rounded-full px-4 py-3 text-sm focus:outline-none focus:border-primary/50 pr-12",disabled:n}),y.jsx(Et,{size:"icon",variant:"ghost",className:"absolute right-1 top-1 h-8 w-8 hover:bg-primary/20 hover:text-primary rounded-full transition-colors",onClick:u,disabled:!r.trim()||n,children:y.jsx(OD,{className:"w-4 h-4"})})]})})]})}function NW(){return y.jsx("div",{className:"flex items-center justify-center gap-1 h-full",children:[...Array(5)].map((t,e)=>y.jsx("div",{className:"w-2 bg-primary/50 rounded-full animate-pulse",style:{height:"40%",animationDelay:`${e*.1}s`,animationDuration:"0.8s"}},e))})}function OW({onDisconnect:t,onChatToggle:e,showChat:n}){const[i,r]=P.useState(!1),{localParticipant:s}=dA(),a=()=>{const l=!i;r(l),s&&s.setMicrophoneEnabled(!l)};return y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(Et,{variant:"outline",size:"icon",className:`rounded-full h-12 w-12 border-white/10 ${i?"bg-red-500/20 text-red-500":"bg-white/5 hover:bg-white/10"}`,onClick:a,children:i?y.jsx(AD,{className:"w-5 h-5"}):y.jsx(uv,{className:"w-5 h-5"})}),y.jsx(Et,{variant:"destructive",size:"icon",className:"rounded-full h-14 w-14 shadow-lg shadow-red-500/20",onClick:t,children:y.jsx(SC,{className:"w-6 h-6"})}),y.jsx(Et,{variant:"outline",size:"icon",className:`rounded-full h-12 w-12 border-white/10 ${n?"bg-primary/20 text-primary":"bg-white/5 hover:bg-white/10"}`,onClick:e,children:y.jsx(kC,{className:"w-5 h-5"})})]})}function IW(){const t=pA(),[e,n]=P.useState(0);P.useEffect(()=>{if(t===Ye.Connected){const r=setInterval(()=>{n(s=>s+1)},1e3);return()=>clearInterval(r)}else n(0)},[t]);const i=r=>{const s=Math.floor(r/60),a=r%60;return`${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`};return t===Ye.Connecting?y.jsxs("div",{className:"flex items-center gap-2 mb-2 animate-pulse",children:[y.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),y.jsx("p",{className:"text-sm text-yellow-500 font-medium",children:"Connecting..."})]}):t===Ye.Connected?y.jsxs("div",{className:"flex flex-col items-center gap-1 mb-2",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:"relative flex h-2 w-2",children:[y.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),y.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),y.jsx("p",{className:"text-sm text-green-500 font-medium",children:"Live"})]}),y.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:i(e)})]}):y.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ready"})}function DW(){const[t,e]=P.useState(!1);return y.jsxs("div",{className:"min-h-screen bg-background selection:bg-primary/30",children:[y.jsxs("nav",{className:"fixed w-full top-0 z-50 bg-background/80 backdrop-blur-lg border-b border-white/5",children:[y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex justify-between items-center h-20",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("img",{src:"/brain.png",alt:"CuriousAnt Labs",className:"h-8 w-auto"}),y.jsx("span",{className:"font-display font-bold text-xl tracking-tight",children:"CuriousAnt Labs"})]}),y.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[y.jsx("a",{href:"#features",className:"text-sm font-medium text-muted-foreground hover:text-white transition-colors",children:"Features"}),y.jsx("a",{href:"#how-it-works",className:"text-sm font-medium text-muted-foreground hover:text-white transition-colors",children:"Capabilities"}),y.jsx("a",{href:"#use-cases",className:"text-sm font-medium text-muted-foreground hover:text-white transition-colors",children:"Use Cases"}),y.jsx("a",{href:"#services",className:"text-sm font-medium text-muted-foreground hover:text-white transition-colors",children:"Services"}),y.jsx(wi,{children:y.jsx(Et,{variant:"glow",size:"sm",children:"Book Demo"})})]}),y.jsx("div",{className:"md:hidden",children:y.jsx("button",{onClick:()=>e(!t),className:"p-2 text-muted-foreground",children:t?y.jsx(fv,{}):y.jsx(RD,{})})})]})}),t&&y.jsx("div",{className:"md:hidden border-b border-white/5 bg-background",children:y.jsxs("div",{className:"px-4 py-4 space-y-4",children:[y.jsx("a",{href:"#features",onClick:()=>e(!1),className:"block text-sm font-medium text-muted-foreground",children:"Features"}),y.jsx("a",{href:"#how-it-works",onClick:()=>e(!1),className:"block text-sm font-medium text-muted-foreground",children:"Capabilities"}),y.jsx("a",{href:"#use-cases",onClick:()=>e(!1),className:"block text-sm font-medium text-muted-foreground",children:"Use Cases"}),y.jsx(wi,{children:y.jsx(Et,{className:"w-full",children:"Book Demo"})})]})})]}),y.jsx("section",{className:"relative pt-24 pb-12 lg:pt-48 lg:pb-32 overflow-hidden",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:y.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-8 items-center",children:[y.jsxs(In.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},children:[y.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 border border-primary/20 text-primary text-sm font-medium mb-6",children:[y.jsxs("span",{className:"relative flex h-2 w-2",children:[y.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent opacity-75"}),y.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-accent"})]}),"Now supporting 10+ languages"]}),y.jsxs("h1",{className:"text-4xl lg:text-7xl font-display font-bold leading-[1.1] mb-6 tracking-tight",children:["Meet ",y.jsx("span",{className:"text-gradient",children:"Vaani"})," ",y.jsx("br",{}),"Your Human-like Voice AI Agent"]}),y.jsx("p",{className:"text-lg lg:text-xl text-muted-foreground mb-8 max-w-lg leading-relaxed",children:"Automate customer conversations across calls, WhatsApp, web chat, and apps with multilingual intelligence that feels genuinely human."}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[y.jsx(wi,{children:y.jsxs(Et,{size:"lg",variant:"glow",className:"font-semibold text-lg h-14",children:["Book a Free Demo",y.jsx(yC,{className:"ml-2 w-5 h-5"})]})}),y.jsxs(Et,{size:"lg",variant:"outline",className:"font-semibold text-lg h-14 bg-white/5 border-white/10 hover:bg-white/10 hover:text-white",children:[y.jsx(ND,{className:"mr-2 w-5 h-5 fill-current"}),"See Use Cases"]})]}),y.jsxs("div",{className:"mt-12 pt-8 border-t border-white/5",children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Trusted by innovative companies"}),y.jsxs("div",{className:"flex items-center justify-between w-full grayscale opacity-70 hover:grayscale-0 hover:opacity-100 transition-all duration-500 gap-8 sm:gap-12",children:[y.jsxs("svg",{className:"h-8 w-auto",viewBox:"0 0 100 30",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M10,25 L20,5 L30,25 M5,25 H35",stroke:"currentColor",strokeWidth:"3",fill:"none"}),y.jsx("text",{x:"40",y:"22",fontFamily:"sans-serif",fontSize:"18",fontWeight:"bold",children:"ACME"})]}),y.jsxs("svg",{className:"h-8 w-auto",viewBox:"0 0 140 30",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("circle",{cx:"15",cy:"15",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none"}),y.jsx("circle",{cx:"15",cy:"15",r:"4",fill:"currentColor"}),y.jsx("text",{x:"35",y:"22",fontFamily:"sans-serif",fontSize:"18",fontWeight:"bold",children:"QUANTUM"})]}),y.jsxs("svg",{className:"h-8 w-auto",viewBox:"0 0 100 30",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M5,15 Q15,5 25,15 T45,15",stroke:"currentColor",strokeWidth:"3",fill:"none"}),y.jsx("text",{x:"50",y:"22",fontFamily:"sans-serif",fontSize:"18",fontWeight:"bold",children:"ECHO"})]}),y.jsxs("svg",{className:"h-8 w-auto",viewBox:"0 0 120 30",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M15,15 m-10,0 a10,10 0 1,0 20,0 a10,10 0 1,0 -20,0",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"4 2",fill:"none"}),y.jsx("text",{x:"35",y:"22",fontFamily:"sans-serif",fontSize:"18",fontWeight:"bold",children:"NEBULA"})]})]})]})]}),y.jsx(In.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"relative h-[500px] lg:h-[600px] w-full",children:y.jsx(RW,{})})]})})}),y.jsx("section",{id:"features",className:"py-24 bg-black/20 relative overflow-hidden",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[y.jsx("h2",{className:"text-3xl md:text-5xl font-display font-bold mb-6",children:"Platform Features"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Everything you need to build and deploy enterprise-grade voice AI."})]}),y.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[y.jsxs("div",{className:"bg-white/5 border border-white/10 p-6 rounded-2xl hover:bg-white/10 transition-colors",children:[y.jsx("div",{className:"w-12 h-12 bg-primary/20 rounded-xl flex items-center justify-center mb-4",children:y.jsx(CD,{className:"w-6 h-6 text-primary"})}),y.jsx("h3",{className:"text-xl font-bold mb-2",children:"Multilingual Mastery"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Native-sounding conversations in 10+ languages with automatic language detection."})]}),y.jsxs("div",{className:"bg-white/5 border border-white/10 p-6 rounded-2xl hover:bg-white/10 transition-colors",children:[y.jsx("div",{className:"w-12 h-12 bg-primary/20 rounded-xl flex items-center justify-center mb-4",children:y.jsx(DD,{className:"w-6 h-6 text-primary"})}),y.jsx("h3",{className:"text-xl font-bold mb-2",children:"Ultra-low Latency"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Sub-500ms response times for natural, interruption-handling conversations."})]}),y.jsxs("div",{className:"bg-white/5 border border-white/10 p-6 rounded-2xl hover:bg-white/10 transition-colors",children:[y.jsx("div",{className:"w-12 h-12 bg-primary/20 rounded-xl flex items-center justify-center mb-4",children:y.jsx(Gm,{className:"w-6 h-6 text-primary"})}),y.jsx("h3",{className:"text-xl font-bold mb-2",children:"Omnichannel"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Deploy the same agent across Phone, Web, WhatsApp, and Mobile Apps instantly."})]}),y.jsxs("div",{className:"bg-white/5 border border-white/10 p-6 rounded-2xl hover:bg-white/10 transition-colors",children:[y.jsx("div",{className:"w-12 h-12 bg-primary/20 rounded-xl flex items-center justify-center mb-4",children:y.jsx(wD,{className:"w-6 h-6 text-primary"})}),y.jsx("h3",{className:"text-xl font-bold mb-2",children:"Custom Knowledge"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Train agents on your proprietary data securely for accurate, business-specific answers."})]})]})]})}),y.jsx("section",{id:"how-it-works",className:"py-24 relative bg-black/20",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[y.jsx("h2",{className:"text-3xl md:text-5xl font-display font-bold mb-6",children:"Autonomous & Collaborative"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Our agents don't just talk; they think, act, and work together to deliver results."})]}),y.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-stretch",children:[y.jsxs("div",{className:"bg-card border border-white/10 rounded-2xl p-8 hover:border-primary/50 transition-all duration-300 relative group overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity",children:y.jsx(Xx,{className:"w-32 h-32"})}),y.jsxs("div",{className:"relative z-10",children:[y.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500/20 flex items-center justify-center mb-6",children:y.jsx(Xx,{className:"w-8 h-8 text-blue-400"})}),y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Fully Autonomous"}),y.jsx("p",{className:"text-muted-foreground mb-6",children:"Capable of handling end-to-end workflows without human intervention."}),y.jsxs("ul",{className:"space-y-4 text-muted-foreground",children:[y.jsxs("li",{className:"flex items-start gap-3",children:[y.jsx(js,{className:"w-5 h-5 text-blue-400 mt-0.5 shrink-0"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Self-Correction:"})," Detects misunderstandings and rephrases automatically."]})]}),y.jsxs("li",{className:"flex items-start gap-3",children:[y.jsx(js,{className:"w-5 h-5 text-blue-400 mt-0.5 shrink-0"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Task Execution:"})," Can update CRMs, schedule appointments, and send emails."]})]}),y.jsxs("li",{className:"flex items-start gap-3",children:[y.jsx(js,{className:"w-5 h-5 text-blue-400 mt-0.5 shrink-0"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Context Awareness:"})," Remembers past interactions across channels."]})]})]})]})]}),y.jsxs("div",{className:"bg-card border border-white/10 rounded-2xl p-8 hover:border-purple-500/50 transition-all duration-300 relative group overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity",children:y.jsx(ek,{className:"w-32 h-32"})}),y.jsxs("div",{className:"relative z-10",children:[y.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500/20 flex items-center justify-center mb-6",children:y.jsx(ek,{className:"w-8 h-8 text-purple-400"})}),y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Collaborative Swarms"}),y.jsx("p",{className:"text-muted-foreground mb-6",children:"Agents that work together continuously to resolve complex customer needs."}),y.jsxs("ul",{className:"space-y-4 text-muted-foreground",children:[y.jsxs("li",{className:"flex items-start gap-3",children:[y.jsx(js,{className:"w-5 h-5 text-purple-400 mt-0.5 shrink-0"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Agent Handoffs:"})," Seamlessly transfer context from Triage to Specialist agents."]})]}),y.jsxs("li",{className:"flex items-start gap-3",children:[y.jsx(js,{className:"w-5 h-5 text-purple-400 mt-0.5 shrink-0"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Human Escalation:"})," Smartly brings in humans only when empathy or discretion is needed."]})]}),y.jsxs("li",{className:"flex items-start gap-3",children:[y.jsx(js,{className:"w-5 h-5 text-purple-400 mt-0.5 shrink-0"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Unified Memory:"})," All agents and humans share a central knowledge core."]})]})]})]})]})]})]})}),y.jsx("section",{id:"use-cases",className:"py-24",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"text-center mb-16",children:[y.jsx("h2",{className:"text-3xl md:text-5xl font-display font-bold mb-4",children:"Built for Every Industry"}),y.jsx("p",{className:"text-muted-foreground",children:"Tailored solutions for your specific needs"})]}),y.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:["Customer Support","Sales Qualification","Appointment Booking","Healthcare Triage","Financial Services","Logistics & Delivery"].map((n,i)=>y.jsxs("div",{className:"group p-6 rounded-xl bg-card border border-white/5 hover:border-primary/50 transition-colors",children:[y.jsx(js,{className:"w-8 h-8 text-primary mb-4 group-hover:scale-110 transition-transform"}),y.jsx("h3",{className:"text-xl font-bold mb-2",children:n}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Automate standard queries and escalate complex issues instantly."})]},i))})]})}),y.jsxs("section",{id:"services",className:"py-24 bg-background relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[y.jsx("h2",{className:"text-3xl md:text-5xl font-display font-bold mb-6",children:"Other Services We Offer"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Comprehensive AI and development solutions to power your business growth."})]}),y.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[y.jsx(rd,{icon:uv,title:"AI Voice Agents",description:"Human-like voice AI that handles complex calls, interruptions, and scheduling naturally.",delay:0}),y.jsx(rd,{icon:kC,title:"AI Chat Bot",description:"Intelligent chatbots for 24/7 support across WhatsApp, Web and Social channels.",delay:.1}),y.jsx(rd,{icon:Gm,title:"Web Development",description:"Modern, high-performance web applications built with the latest technologies.",delay:.2}),y.jsx(rd,{icon:SC,title:"Mobile App Dev",description:"Native Android & iOS applications with seamless AI integrations.",delay:.3})]})]})]}),y.jsxs("section",{className:"py-24 relative overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/10"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-transparent to-background"}),y.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center relative z-10",children:[y.jsxs("h2",{className:"text-4xl md:text-6xl font-display font-bold mb-8",children:["Ready to Scale Conversations ",y.jsx("br",{}),"Without Scaling Teams?"]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[y.jsx(wi,{children:y.jsx(Et,{size:"lg",className:"h-14 text-lg px-8",children:"Book a Free Demo"})}),y.jsx(Et,{size:"lg",variant:"outline",className:"h-14 text-lg px-8 bg-transparent border-white/20 hover:bg-white/10 hover:text-white",children:"Talk to an Expert"})]})]})]}),y.jsx("footer",{className:"border-t border-white/5 py-12 bg-black/20",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[y.jsxs("div",{className:"col-span-1 md:col-span-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsx("img",{src:"/brain.png",alt:"CuriousAnt Labs",className:"h-6 w-auto"}),y.jsx("span",{className:"font-display font-bold text-lg",children:"CuriousAnt Labs"})]}),y.jsx("p",{className:"text-muted-foreground max-w-xs",children:"Empowering businesses with human-like AI agents for seamless global communication."})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold mb-4",children:"Company"}),y.jsxs("ul",{className:"space-y-2 text-muted-foreground text-sm",children:[y.jsx("li",{children:y.jsx(fn,{href:"/about",className:"hover:text-primary",children:"About Us"})}),y.jsx("li",{children:y.jsx(fn,{href:"/blogs",className:"hover:text-primary",children:"Blog"})}),y.jsx("li",{children:y.jsx(fn,{href:"/contact",className:"hover:text-primary",children:"Contact"})})]})]})]}),y.jsxs("div",{className:"border-t border-white/5 pt-8 text-center text-sm text-muted-foreground",children:[" ",new Date().getFullYear()," CuriousAnt Labs. All rights reserved."]})]})})]})}function MW(){return y.jsxs("div",{className:"min-h-screen bg-background selection:bg-primary/30",children:[y.jsx("nav",{className:"fixed w-full top-0 z-50 bg-background/80 backdrop-blur-lg border-b border-white/5",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex justify-between items-center h-20",children:[y.jsxs(fn,{href:"/",className:"flex items-center gap-2 cursor-pointer",children:[y.jsx("img",{src:"/brain.png",alt:"CuriousAnt Labs",className:"h-8 w-auto"}),y.jsx("span",{className:"font-display font-bold text-xl tracking-tight",children:"CuriousAnt Labs"})]}),y.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[y.jsx(fn,{href:"/",className:"text-sm font-medium text-muted-foreground hover:text-white transition-colors",children:"Home"}),y.jsx(wi,{children:y.jsx(Et,{variant:"glow",size:"sm",children:"Book Demo"})})]})]})})}),y.jsxs("section",{className:"pt-32 pb-24 relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-primary/10 via-background to-background pointer-events-none"}),y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[y.jsxs(In.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"max-w-3xl mx-auto text-center",children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold mb-6",children:"Contact Us"}),y.jsx("p",{className:"text-lg text-muted-foreground mb-12",children:"Get in touch with us for any inquiries or support. We're here to help you scale your business with AI."})]}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-12 max-w-4xl mx-auto",children:[y.jsxs(In.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2,duration:.8},className:"space-y-8",children:[y.jsxs("div",{className:"flex gap-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center shrink-0",children:y.jsx(xD,{className:"w-6 h-6 text-primary"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold mb-2",children:"Company Information"}),y.jsx("p",{className:"text-muted-foreground",children:"CuriousAnt Labs Pvt Ltd"})]})]}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center shrink-0",children:y.jsx(_D,{className:"w-6 h-6 text-primary"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold mb-2",children:"Visit Us"}),y.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["EWS-371, INDIRANAGAR,",y.jsx("br",{}),"MANDIDEEP, DIST.-RAISEN,",y.jsx("br",{}),"PIN-462046"]})]})]}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center shrink-0",children:y.jsx(PD,{className:"w-6 h-6 text-primary"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold mb-2",children:"Email Us"}),y.jsx("a",{href:"mailto:contact@curiousant.tech",className:"text-muted-foreground hover:text-white transition-colors",children:"contact@curiousant.tech"})]})]})]}),y.jsxs(In.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4,duration:.8},className:"bg-card border border-white/10 rounded-2xl p-8",children:[y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Ready to Start?"}),y.jsx("p",{className:"text-muted-foreground mb-6",children:"Schedule a personalized demo with our team to see how our voice AI can transform your customer experience."}),y.jsx(wi,{children:y.jsx(Et,{size:"lg",className:"w-full",children:"Book a Meeting"})})]})]})]})]}),y.jsx("footer",{className:"border-t border-white/5 py-12 bg-black/20",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("img",{src:"/brain.png",alt:"CuriousAnt Labs",className:"h-6 w-auto"}),y.jsx("span",{className:"font-display font-bold text-lg",children:"CuriousAnt Labs"})]}),y.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",new Date().getFullYear()," CuriousAnt Labs. All rights reserved."]})]})})})]})}const mA=[{id:"ai-voice-agents-2026",title:"How AI Voice Agents Will Revolutionize Industries in 2026",excerpt:"From hyper-personalized customer support to proactive healthcare triage, explore how autonomous voice agents are reshaping the future of work.",date:"Jan 10, 2026",author:"CuriousAnt Team",category:"Future of AI",readTime:"5 min read",image:"https://images.unsplash.com/photo-1677442136019-21780ecad995?auto=format&fit=crop&q=80&w=2600&ixlib=rb-4.0.3",content:y.jsxs(y.Fragment,{children:[y.jsxs("p",{className:"mb-4",children:["As we step into 2026, the landscape of business communication is undergoing a seismic shift. The days of robotic, tree-branching IVR systems are behind us. We have entered the era of ",y.jsx("strong",{children:"autonomous, empathetic, and context-aware Voice AI"}),"."]}),y.jsx("h3",{className:"text-2xl font-bold mt-8 mb-4",children:'1. Customer Service: The End of "Hold Music"'}),y.jsx("p",{className:"mb-4",children:"Customer expectations have never been higher. In 2026, waiting on hold is simply unacceptable. AI Voice Agents handle thousands of concurrent calls instantly. But it's not just about speed; it's about resolution. These agents can access deep CRM history to resolve complex billing issues, technical troubleshooting, and account management without ever involving a human even for edge cases."}),y.jsx("h3",{className:"text-2xl font-bold mt-8 mb-4",children:"2. Healthcare: Proactive Patient Care"}),y.jsx("p",{className:"mb-4",children:"In healthcare, voice agents are acting as the first line of triage. They call patients post-surgery to check on recovery vitals, remind them of medication schedules, and even detect signs of distress through voice biomarkers. This 24/7 monitoring capability is reducing hospital readmission rates significantly."}),y.jsx("h3",{className:"text-2xl font-bold mt-8 mb-4",children:"3. Real Estate & Sales: The always-on SDR"}),y.jsx("p",{className:"mb-4",children:"Lead qualification is no longer a 9-to-5 job. AI agents are engaging with leads the moment they sign up, answering specific property questions, and booking tours directly into agents' calendars. They don't just qualify; they nurture relationships until the human closer is ready to step in."}),y.jsx("h3",{className:"text-2xl font-bold mt-8 mb-4",children:"The Collaborative Future"}),y.jsx("p",{className:"mb-4",children:`The most successful implementations in 2026 aren't about replacing humans but augmenting them. We're seeing "Agency Swarms" where specialized AI agents (a scheduler, a researcher, key negotiator) work together, handing off context seamlessly to a human manager for final decisions.`}),y.jsx("p",{className:"mt-6 italic text-muted-foreground border-l-2 border-primary/50 pl-4",children:'"The voice interface is becoming the primary operating system for the service economy."'})]})},{id:"risks-of-manual-support",title:"The Hidden Cost of Ignoring Support Automation",excerpt:"Sticking to traditional support models isn't just inefficientit's actively driving your customers to competitors. Here's what you stand to lose.",date:"Jan 12, 2026",author:"CuriousAnt Team",category:"Business Strategy",readTime:"4 min read",image:"/robot-support.png",content:y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"mb-4",children:`In an era of instant gratification, "we'll get back to you in 24-48 hours" is no longer a standard operating procedureit's a resignation letter. Companies that fail to automate their first line of support are bleeding revenue in ways that don't always show up on a balance sheet immediately.`}),y.jsx("h3",{className:"text-2xl font-bold mt-8 mb-4",children:"1. The Churn You Don't See"}),y.jsx("p",{className:"mb-4",children:`67% of customers cite "having to repeat myself" or "long wait times" as their primary reason for leaving a service. When a customer has a simple query at 11 PM and has to wait until 9 AM the next day, they aren't just waiting; they are looking for alternatives. Automated agents solve this by being available 24/7/365.`}),y.jsx("h3",{className:"text-2xl font-bold mt-8 mb-4",children:"2. Employee Burnout & Turnover"}),y.jsx("p",{className:"mb-4",children:'Your human agents are talented problem solvers, yet they spend 80% of their day answering "Where is my order?" or "How do I reset my password?". This leads to cognitive fatigue and high turnover rates. Automating these rote tasks frees your team to handle the high-value, emotionally complex issues they were hired for.'}),y.jsx("h3",{className:"text-2xl font-bold mt-8 mb-4",children:"3. The Scalability Trap"}),y.jsx("p",{className:"mb-4",children:"Manual support scales linearly: to handle 2x tickets, you need ~2x staff. This model breaks during seasonal spikes or viral growth moments. AI Support scales elastically. It can handle 10 calls one minute and 10,000 the next with zero degradation in quality or wait time."}),y.jsx("p",{className:"mt-6 italic text-muted-foreground border-l-2 border-primary/50 pl-4",children:`"Automation isn't about replacing the human touch; it's about preserving it for the moments that truly matter."`})]})}];function LW(){return y.jsxs("div",{className:"min-h-screen bg-background selection:bg-primary/30",children:[y.jsx("nav",{className:"fixed w-full top-0 z-50 bg-background/80 backdrop-blur-lg border-b border-white/5",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex justify-between items-center h-20",children:[y.jsxs(fn,{href:"/",className:"flex items-center gap-2 cursor-pointer",children:[y.jsx("img",{src:"/brain.png",alt:"CuriousAnt Labs",className:"h-8 w-auto"}),y.jsx("span",{className:"font-display font-bold text-xl tracking-tight",children:"CuriousAnt Labs"})]}),y.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[y.jsx(fn,{href:"/",className:"text-sm font-medium text-muted-foreground hover:text-white transition-colors",children:"Home"}),y.jsx(fn,{href:"/contact",className:"text-sm font-medium text-muted-foreground hover:text-white transition-colors",children:"Contact"}),y.jsx(wi,{children:y.jsx(Et,{variant:"glow",size:"sm",children:"Book Demo"})})]})]})})}),y.jsxs("section",{className:"pt-32 pb-24 relative",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-[50vh] bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-500/10 via-background to-background pointer-events-none"}),y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[y.jsxs(In.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:"Insights & News"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Exploring the frontiers of Voice AI and Autonomous Agents."})]}),y.jsx("div",{className:"grid lg:grid-cols-2 gap-8",children:mA.map((t,e)=>y.jsx(fn,{href:`/blog/${t.id}`,children:y.jsxs(In.article,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:e*.1},className:"h-full bg-card border border-white/10 rounded-3xl overflow-hidden hover:border-primary/30 transition-all duration-300 group cursor-pointer flex flex-col",children:[y.jsxs("div",{className:"h-64 overflow-hidden relative",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/90 to-transparent z-10 opacity-60"}),y.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"}),y.jsx("div",{className:"absolute top-4 left-4 z-20",children:y.jsxs("span",{className:"flex items-center gap-1 bg-black/50 backdrop-blur-md text-white border border-white/10 px-3 py-1 rounded-full text-xs font-semibold",children:[y.jsx(wC,{className:"w-3 h-3 text-primary"})," ",t.category]})})]}),y.jsxs("div",{className:"p-8 flex flex-col flex-1",children:[y.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-4",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx(bC,{className:"w-3 h-3"})," ",t.date]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx(dv,{className:"w-3 h-3"})," ",t.author]})]}),y.jsx("h2",{className:"text-2xl font-bold mb-4 group-hover:text-primary transition-colors line-clamp-2",children:t.title}),y.jsx("p",{className:"text-muted-foreground leading-relaxed mb-6 line-clamp-3",children:t.excerpt}),y.jsxs("div",{className:"mt-auto pt-6 border-t border-white/5 flex items-center justify-between",children:[y.jsx("span",{className:"text-sm text-muted-foreground",children:t.readTime}),y.jsxs("div",{className:"flex items-center text-sm font-medium text-white group-hover:text-primary transition-colors",children:["Read Article ",y.jsx(yC,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]})]})},t.id))})]})]}),y.jsx("footer",{className:"border-t border-white/5 py-12 bg-black/20",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("img",{src:"/brain.png",alt:"CuriousAnt Labs",className:"h-6 w-auto"}),y.jsx("span",{className:"font-display font-bold text-lg",children:"CuriousAnt Labs"})]}),y.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",new Date().getFullYear()," CuriousAnt Labs. All rights reserved."]})]})})})]})}function jW(){const[t,e]=UO("/blog/:id"),n=mA.find(i=>i.id===e?.id);return!t||!n?y.jsx(fE,{}):y.jsxs("div",{className:"min-h-screen bg-background selection:bg-primary/30",children:[y.jsx("nav",{className:"fixed w-full top-0 z-50 bg-background/80 backdrop-blur-lg border-b border-white/5",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex justify-between items-center h-20",children:[y.jsxs(fn,{href:"/",className:"flex items-center gap-2 cursor-pointer",children:[y.jsx("img",{src:"/brain.png",alt:"CuriousAnt Labs",className:"h-8 w-auto"}),y.jsx("span",{className:"font-display font-bold text-xl tracking-tight",children:"CuriousAnt Labs"})]}),y.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[y.jsx(fn,{href:"/",className:"text-sm font-medium text-muted-foreground hover:text-white transition-colors",children:"Home"}),y.jsx(fn,{href:"/blogs",className:"text-sm font-medium text-muted-foreground hover:text-white transition-colors",children:"Insights"}),y.jsx(wi,{children:y.jsx(Et,{variant:"glow",size:"sm",children:"Book Demo"})})]})]})})}),y.jsxs("article",{className:"pt-32 pb-24 relative",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-[60vh] bg-gradient-to-b from-primary/10 to-background pointer-events-none"}),y.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[y.jsx(fn,{href:"/blogs",children:y.jsxs(Et,{variant:"ghost",className:"mb-8 pl-0 hover:bg-transparent hover:text-primary transition-colors",children:[y.jsx(bD,{className:"mr-2 w-4 h-4"})," Back to Insights"]})}),y.jsxs(In.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[y.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground mb-6",children:[y.jsxs("span",{className:"flex items-center gap-1 bg-primary/10 text-primary px-3 py-1 rounded-full text-xs font-semibold",children:[y.jsx(wC,{className:"w-3 h-3"})," ",n.category]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx(bC,{className:"w-3 h-3"})," ",n.date]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx(SD,{className:"w-3 h-3"})," ",n.readTime]})]}),y.jsx("h1",{className:"text-3xl md:text-5xl font-display font-bold mb-8 leading-tight",children:n.title}),y.jsxs("div",{className:"flex items-center gap-3 mb-12 border-b border-white/10 pb-8",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center",children:y.jsx(dv,{className:"w-5 h-5 text-primary"})}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-white",children:n.author}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Editor, CuriousAnt Labs"})]})]}),y.jsx("div",{className:"rounded-3xl overflow-hidden mb-12 border border-white/10 shadow-2xl",children:y.jsx("img",{src:n.image,alt:n.title,className:"w-full h-auto object-cover"})}),y.jsx("div",{className:"prose prose-invert prose-lg max-w-none prose-headings:font-display prose-headings:text-white prose-p:text-muted-foreground prose-strong:text-white prose-a:text-primary hover:prose-a:underline",children:n.content}),y.jsxs("div",{className:"mt-16 p-8 rounded-2xl bg-gradient-to-br from-primary/20 to-accent/20 border border-white/10 text-center",children:[y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Want to see this in action?"}),y.jsx("p",{className:"text-muted-foreground mb-6",children:"Experience the future of voice AI today. Book a personalized demo with our team."}),y.jsx(wi,{children:y.jsx(Et,{size:"lg",variant:"glow",children:"Book a Demo"})})]})]})]})]}),y.jsx("footer",{className:"border-t border-white/5 py-12 bg-black/20",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("img",{src:"/brain.png",alt:"CuriousAnt Labs",className:"h-6 w-auto"}),y.jsx("span",{className:"font-display font-bold text-lg",children:"CuriousAnt Labs"})]}),y.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",new Date().getFullYear()," CuriousAnt Labs. All rights reserved."]})]})})})]})}function FW(){const t=[{icon:y.jsx(ED,{className:"w-6 h-6 text-primary"}),title:"Innovation First",description:"We don't just follow trends; we define them. Our team is constantly pushing the boundaries of what Voice AI can achieve."},{icon:y.jsx(TD,{className:"w-6 h-6 text-primary"}),title:"Empathy at Core",description:"Technology should feel human. We build agents that understand not just words, but context, tone, and emotion."},{icon:y.jsx(ID,{className:"w-6 h-6 text-primary"}),title:"Obsessive Quality",description:"Good enough isn't in our vocabulary. From latency to accent recognition, we strive for perfection in every interaction."}],e=[{value:"Zero",label:"Wait Times"},{value:"99.9%",label:"Uptime Reliability"},{value:"24/7",label:"Support Coverage"},{value:"10+",label:"Languages Supported"}];return y.jsxs("div",{className:"min-h-screen bg-background selection:bg-primary/30",children:[y.jsx("nav",{className:"fixed w-full top-0 z-50 bg-background/80 backdrop-blur-lg border-b border-white/5",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex justify-between items-center h-20",children:[y.jsxs(fn,{href:"/",className:"flex items-center gap-2 cursor-pointer",children:[y.jsx("img",{src:"/brain.png",alt:"CuriousAnt Labs",className:"h-8 w-auto"}),y.jsx("span",{className:"font-display font-bold text-xl tracking-tight",children:"CuriousAnt Labs"})]}),y.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[y.jsx(fn,{href:"/",className:"text-sm font-medium text-muted-foreground hover:text-white transition-colors",children:"Home"}),y.jsx(fn,{href:"/blogs",className:"text-sm font-medium text-muted-foreground hover:text-white transition-colors",children:"Insights"}),y.jsx(wi,{children:y.jsx(Et,{variant:"glow",size:"sm",children:"Book Demo"})})]})]})})}),y.jsxs("section",{className:"pt-40 pb-20 relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-[600px] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-primary/10 via-background to-background pointer-events-none"}),y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center",children:y.jsxs(In.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[y.jsxs("h1",{className:"text-4xl md:text-6xl font-display font-bold mb-6 tracking-tight",children:["Humanizing AI for a ",y.jsx("br",{})," ",y.jsx("span",{className:"text-gradient",children:"Connected World"})]}),y.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto leading-relaxed",children:"We are engineers, researchers, and dreamers building the next generation of conversational intelligence. Our mission is to make technology speak your language."})]})})]}),y.jsx("section",{className:"py-12 border-y border-white/5 bg-black/20",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:e.map((n,i)=>y.jsxs(In.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:i*.1},viewport:{once:!0},children:[y.jsx("div",{className:"text-4xl md:text-5xl font-display font-bold text-white mb-2",children:n.value}),y.jsx("div",{className:"text-sm text-muted-foreground uppercase tracking-wider",children:n.label})]},i))})})}),y.jsx("section",{className:"py-24 relative",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[y.jsxs(In.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.8},viewport:{once:!0},children:[y.jsx("h2",{className:"text-3xl font-display font-bold mb-6",children:"Our Story"}),y.jsxs("div",{className:"space-y-4 text-muted-foreground text-lg leading-relaxed",children:[y.jsxs("p",{children:["CuriousAnt Labs was born from a simple yet frustrating question: ",y.jsx("span",{className:"text-white italic",children:'"Why is talking to a computer still so difficult?"'})]}),y.jsx("p",{children:"In a world of supercomputers and instant connectivity, customer interactions were still stuck in the era of rigid IVR menus and frustratingly robotic chatbots. We saw a gap between human intent and machine understanding."}),y.jsxs("p",{children:["We set out to bridge that gap. Starting as a small research team, we focused on not just speech recognition, but ",y.jsx("strong",{children:"intent understanding"}),". Today, CuriousAnt Labs is empowering businesses globally, helping them scale empathy and efficiency simultaneously."]})]})]}),y.jsxs(In.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.8},viewport:{once:!0},className:"relative",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-primary/20 to-accent/20 rounded-3xl blur-2xl"}),y.jsx("div",{className:"relative rounded-3xl overflow-hidden border border-white/10 bg-card/50 backdrop-blur-sm p-4",children:y.jsx("img",{src:"https://images.unsplash.com/photo-1522071820081-009f0129c71c?auto=format&fit=crop&q=80&w=2600",alt:"Team Collaboration",className:"rounded-2xl w-full h-auto object-cover"})})]})]})})}),y.jsx("section",{className:"py-24 bg-black/20",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"text-center mb-16",children:[y.jsx("h2",{className:"text-3xl font-display font-bold mb-4",children:"Our Core Values"}),y.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"The principles that guide every line of code we write and every product we build."})]}),y.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:t.map((n,i)=>y.jsxs(In.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:i*.1},viewport:{once:!0},className:"p-8 rounded-3xl bg-card border border-white/5 hover:border-primary/20 transition-all duration-300",children:[y.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center mb-6",children:n.icon}),y.jsx("h3",{className:"text-xl font-bold mb-3",children:n.title}),y.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n.description})]},i))})]})}),y.jsx("section",{className:"py-24",children:y.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[y.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-accent/10 border border-accent/20 text-accent text-sm font-medium mb-8",children:[y.jsx(Gm,{className:"w-4 h-4"})," Global Vision"]}),y.jsx("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-8",children:"Building the Interface of the Future"}),y.jsx("p",{className:"text-xl text-muted-foreground mb-12",children:"We believe that in the next decade, voice will become the primary way humans interact with technology. We are building the infrastructure to make that future secure, scalable, and surprisingly human."}),y.jsx(wi,{children:y.jsx(Et,{size:"lg",className:"h-14 px-8 text-lg",children:"Join Our Journey"})})]})}),y.jsx("footer",{className:"border-t border-white/5 py-12 bg-black/20",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("img",{src:"/brain.png",alt:"CuriousAnt Labs",className:"h-6 w-auto"}),y.jsx("span",{className:"font-display font-bold text-lg",children:"CuriousAnt Labs"})]}),y.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",new Date().getFullYear()," CuriousAnt Labs. All rights reserved."]})]})})})]})}function UW(){const[t]=NT();return P.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function VW(){return y.jsxs(y.Fragment,{children:[y.jsx(UW,{}),y.jsxs(zO,{children:[y.jsx(Fo,{path:"/",component:DW}),y.jsx(Fo,{path:"/contact",component:MW}),y.jsx(Fo,{path:"/blogs",component:LW}),y.jsx(Fo,{path:"/blog/:id",component:jW}),y.jsx(Fo,{path:"/about",component:FW}),y.jsx(Fo,{component:fE})]})]})}function BW(){return y.jsx(hI,{client:bI,children:y.jsxs(tj,{children:[y.jsx(VW,{}),y.jsx(gM,{})]})})}yO.createRoot(document.getElementById("root")).render(y.jsx(BW,{}));
